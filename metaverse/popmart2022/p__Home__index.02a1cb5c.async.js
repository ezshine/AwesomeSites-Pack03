(self.webpackChunkljzw_virtualland=self.webpackChunkljzw_virtualland||[]).push([[371,327],{52740:function(e,t,n){var i,a,r;e=n.nmd(e);var s,o=n(69946).default;"undefined"!=typeof window&&(s=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==o(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=20)}([function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=function(){},a={trace:i,debug:i,log:i,warn:i,info:i,error:i};function r(e){}var s=a},function(e,t,n){"use strict";var i,a;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};Number.MAX_SAFE_INTEGER},function(e,t,n){"use strict";var i,a;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m}));var i,a=n(3),r=n(11),s=n(1),o=n(17),l=n(12);function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(i||(i={}));var f=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[i.AUDIO]=null,t[i.VIDEO]=null,t[i.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n=e.split("@",2),i=[];1===n.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},h(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),p=function(e){function t(t,n){var i;return(i=e.call(this,n)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkey=void 0,i.type=void 0,i.loader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new l.a,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.type=t,i}u(t,e);var n=t.prototype;return n.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},n.setDecryptDataFromLevelKey=function(e,t){var n=e;return"AES-128"===(null==e?void 0:e.method)&&e.uri&&!e.iv&&((n=o.a.fromURI(e.uri)).method=e.method,n.iv=this.createInitializationVector(t),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(e,t,n,i,a,r){void 0===r&&(r=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,a)):s[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:a,partial:r}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[i.AUDIO]=null,e[i.VIDEO]=null,e[i.AUDIOVIDEO]=null},h(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var e=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),t}(f),m=function(e){function t(t,n,i,a,r){var s;(s=e.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new l.a,s.duration=t.decimalFloatingPoint("DURATION"),s.gap=t.bool("GAP"),s.independent=t.bool("INDEPENDENT"),s.relurl=t.enumeratedString("URI"),s.fragment=n,s.index=a;var o=t.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,r),r&&(s.fragOffset=r.fragOffset+r.duration),s}return u(t,e),h(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(f)},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"a",(function(){return x}));var i=n(9),a=n(5),r=Math.pow(2,32)-1,s=[].push;function o(e){return String.fromCharCode.apply(null,e)}function l(e,t){"data"in e&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n}function u(e,t,n){"data"in e&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function c(e,t){var n,i,a,r=[];if(!t.length)return r;"data"in e?(n=e.data,i=e.start,a=e.end):(i=0,a=(n=e).byteLength);for(var u=i;u<a;){var d=l(n,u),h=d>1?u+d:a;if(o(n.subarray(u+4,u+8))===t[0])if(1===t.length)r.push({data:n,start:u+8,end:h});else{var f=c({data:n,start:u+8,end:h},t.slice(1));f.length&&s.apply(r,f)}u=h}return r}function d(e){var t=c(e,["moov"])[0],n=t?t.end:null,i=c(e,["sidx"]);if(!i||!i[0])return null;var a=[],r=i[0],s=r.data[0],o=0===s?8:16,u=l(r,o);o+=4,o+=0===s?8:16,o+=2;var d=r.end+0,h=function(e,t){"data"in e&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n}(r,o);o+=2;for(var f=0;f<h;f++){var p=o,m=l(r,p),v=2147483647&m;if(1==(2147483648&m)>>>31)return null;var g=l(r,p+=4);p+=4,a.push({referenceSize:v,subsegmentDuration:g,info:{duration:g/u,start:d,end:d+v-1}}),d+=v,o=p+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:h,references:a,moovEndOffset:n}}function h(e){for(var t=[],n=c(e,["moov","trak"]),i=0;i<n.length;i++){var r=n[i],s=c(r,["tkhd"])[0];if(s){var u=s.data[s.start],d=0===u?12:20,h=l(s,d),f=c(r,["mdia","mdhd"])[0];if(f){var p=l(f,d=0===(u=f.data[f.start])?12:20),m=c(r,["mdia","hdlr"])[0];if(m){var v=o(m.data.subarray(m.start+8,m.start+12)),g={soun:a.a.AUDIO,vide:a.a.VIDEO}[v];if(g){var x=c(r,["mdia","minf","stbl","stsd"])[0],b=void 0;x&&(b=o(x.data.subarray(x.start+12,x.start+16))),t[h]={timescale:p,type:g},t[g]={timescale:p,id:h,codec:b}}}}}}return c(e,["moov","mvex","trex"]).forEach((function(e){var n=l(e,4),i=t[n];i&&(i.default={duration:l(e,12),flags:l(e,20)})})),t}function f(e,t){return c(t,["moof","traf"]).reduce((function(t,n){var i=c(n,["tfdt"])[0],a=i.data[i.start],r=c(n,["tfhd"]).reduce((function(t,n){var r=l(n,4),s=e[r];if(s){var o=l(i,4);1===a&&(o*=Math.pow(2,32),o+=l(i,8));var u=o/(s.timescale||9e4);if(isFinite(u)&&(null===t||u<t))return u}return t}),null);return null!==r&&isFinite(r)&&(null===t||r<t)?r:t}),null)||0}function p(e,t){for(var n=0,i=0,r=0,s=c(e,["moof","traf"]),o=0;o<s.length;o++){var u=s[o],h=c(u,["tfhd"])[0],f=t[l(h,4)];if(f){var p=f.default,v=l(h,0)|(null==p?void 0:p.flags),g=null==p?void 0:p.duration;8&v&&(g=l(h,2&v?12:8));for(var x=f.timescale||9e4,b=c(u,["trun"]),y=0;y<b.length;y++)!(n=m(b[y]))&&g&&(n=g*l(b[y],4)),f.type===a.a.VIDEO?i+=n/x:f.type===a.a.AUDIO&&(r+=n/x)}}if(0===i&&0===r){var M=d(e);if(null!=M&&M.references)return M.references.reduce((function(e,t){return e+t.info.duration||0}),0)}return i||r}function m(e){var t=l(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,a=l(e,4),r=0;r<a;r++)256&t&&(i+=l(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}function v(e,t,n){c(t,["moof","traf"]).forEach((function(t){c(t,["tfhd"]).forEach((function(i){var a=l(i,4),s=e[a];if(s){var o=s.timescale||9e4;c(t,["tfdt"]).forEach((function(e){var t=e.data[e.start],i=l(e,4);if(0===t)u(e,4,i-n*o);else{i*=Math.pow(2,32),i+=l(e,8),i-=n*o,i=Math.max(i,0);var a=Math.floor(i/(r+1)),s=Math.floor(i%(r+1));u(e,4,a),u(e,8,s)}}))}}))}))}function g(e){var t={valid:null,remainder:null},n=c(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;var a=n[n.length-1];return t.valid=Object(i.a)(e,0,a.start-8),t.remainder=Object(i.a)(e,a.start-8),t}function x(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return x}));var i,a=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},r=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s=function(e,t){for(var n=t,i=0;a(e,t);)i+=10,i+=o(e,t+6),r(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(n,n+i)},o=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]},l=function(e,t){return a(e,t)&&o(e,t+6)+10<=e.length-t},u=function(e){for(var t=h(e),n=0;n<t.length;n++){var i=t[n];if(c(i))return g(i)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=o(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},h=function(e){for(var t=0,n=[];a(e,t);){for(var i=o(e,t+6),s=(t+=10)+i;t+8<s;){var l=d(e.subarray(t)),u=f(l);u&&n.push(u),t+=l.size+10}r(e,t)&&(t+=10)}return n},f=function(e){return"PRIV"===e.type?p(e):"W"===e.type[0]?v(e):m(e)},p=function(e){if(!(e.size<2)){var t=x(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},m=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=x(e.data.subarray(t),!0);t+=n.length+1;var i=x(e.data.subarray(t));return{key:e.type,info:n,data:i}}var a=x(e.data.subarray(1));return{key:e.type,data:a}}},v=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=x(e.data.subarray(t),!0);t+=n.length+1;var i=x(e.data.subarray(t));return{key:e.type,info:n,data:i}}var a=x(e.data);return{key:e.type,data:a}},g=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},x=function(e,t){void 0===t&&(t=!1);var n=b();if(n){var i=n.decode(e);if(t){var a=i.indexOf("\0");return-1!==a?i.substring(0,a):i}return i.replace(/\0/g,"")}for(var r,s,o,l=e.length,u="",c=0;c<l;){if(0===(r=e[c++])&&t)return u;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(r);break;case 12:case 13:s=e[c++],u+=String.fromCharCode((31&r)<<6|63&s);break;case 14:s=e[c++],o=e[c++],u+=String.fromCharCode((15&r)<<12|(63&s)<<6|(63&o)<<0)}}return u};function b(){return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}},function(e,t,n){"use strict";function i(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var a=e*t*n;return i?Math.round(a):a}function a(e,t,n,a){return void 0===n&&(n=1),void 0===a&&(a=!1),i(e,t,1/n,a)}function r(e,t){return void 0===t&&(t=!1),i(e,1e3,1/9e4,t)}function s(e,t){return void 0===t&&(t=1),i(e,9e4,1/t)}n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";function i(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return le})),n.d(t,"d",(function(){return ce})),n.d(t,"a",(function(){return de})),n.d(t,"b",(function(){return he}));var i=n(0),a=n(2),r=n(15),s=n(3),o=n(7),l=n(6),u=n(9),c=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(){},t.resetContiguity=function(){},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=Object(l.a)(this.cachedData,e),this.cachedData=null);var n,i,a=o.b(e,0),r=a?a.length:0,s=this._audioTrack,c=this._id3Track,h=a?o.d(a):void 0,f=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=d(h,t)),a&&a.length>0&&c.samples.push({pts:this.initPTS,dts:this.initPTS,data:a}),i=this.initPTS;r<f;){if(this.canParse(e,r)){var p=this.appendFrame(s,e,r);p?(this.frameIndex++,i=p.sample.pts,n=r+=p.length):r=f}else o.a(e,r)?(a=o.b(e,r),c.samples.push({pts:i,dts:i,data:a}),n=r+=a.length):r++;if(r===f&&n!==f){var m=Object(u.a)(e,n);this.cachedData?this.cachedData=Object(l.a)(this.cachedData,m):this.cachedData=m}}return{audioTrack:s,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:c,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.destroy=function(){},e}(),d=function(e,t){return Object(s.a)(e)?90*e:9e4*t},h=c,f=n(1);function p(e,t){return 255===e[t]&&240==(246&e[t+1])}function m(e,t){return 1&e[t+1]?7:9}function v(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function g(e,t){return t+1<e.length&&p(e,t)}function x(e,t){if(g(e,t)){var n=m(e,t);if(t+n>=e.length)return!1;var i=v(e,t);if(i<=n)return!1;var a=t+i;return a===e.length||g(e,a)}return!1}function b(e,t,n,r,s){if(!e.samplerate){var o=function(e,t,n,r){var s,o,l,u,c=navigator.userAgent.toLowerCase(),d=r,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&t[n+2])>>>6);var p=(60&t[n+2])>>>2;if(!(p>h.length-1))return l=(1&t[n+2])<<2,l|=(192&t[n+3])>>>6,f.b.log("manifest codec:"+r+", ADTS type:"+s+", samplingIndex:"+p),/firefox/i.test(c)?p>=6?(s=5,u=new Array(4),o=p-3):(s=2,u=new Array(2),o=p):-1!==c.indexOf("android")?(s=2,u=new Array(2),o=p):(s=5,u=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&p>=6?o=p-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(c))||!r&&1===l)&&(s=2,u=new Array(2)),o=p)),u[0]=s<<3,u[0]|=(14&p)>>1,u[1]|=(1&p)<<7,u[1]|=l<<3,5===s&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:h[p],channelCount:l,codec:"mp4a.40."+s,manifestCodec:d};e.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}(t,n,r,s);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,f.b.log("parsed codec:"+e.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function y(e){return 9216e4/e}function M(e,t,n,i,a){var r=function(e,t,n,i,a){var r=m(e,t),s=v(e,t);if((s-=r)>0)return{headerLength:r,frameLength:s,stamp:n+i*a}}(t,n,i,a,y(e.samplerate));if(r){var s,o=r.frameLength,l=r.headerLength,u=r.stamp,c=l+o,d=Math.max(0,n+c-t.length);d?(s=new Uint8Array(c-l)).set(t.subarray(n+l,t.length),0):s=t.subarray(n+l,n+c);var h={unit:s,pts:u};return d||e.samples.push(h),{sample:h,length:c,missing:d}}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){var t,n;function i(t,n){var i;return(i=e.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=n,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var a=i.prototype;return a.resetInitSegment=function(t,n,i){e.prototype.resetInitSegment.call(this,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(o.b(e,0)||[]).length,n=e.length;t<n;t++)if(x(e,t))return f.b.log("ADTS sync word found !"),!0;return!1},a.canParse=function(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&p(e,t)&&v(e,t)<=e.length-t}(e,t)},a.appendFrame=function(e,t,n){b(e,this.observer,t,n,e.manifestCodec);var i=M(e,t,n,this.initPTS,this.frameIndex);if(i&&0===i.missing)return i},i}(h);T.minProbeByteLength=9;var _=T,S=function(){function e(e,t){this.remainderData=null,this.config=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.resetContiguity=function(){},e.probe=function(e){return Object(l.b)({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.demux=function(e){var t=e,n={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(t=Object(l.a)(this.remainderData,e));var i=Object(l.h)(t);this.remainderData=i.remainder,n.samples=i.valid||new Uint8Array}else n.samples=t;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:n,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.flush=function(){var e={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return e.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:e,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();S.minProbeByteLength=1024;var A=S,E=null,I=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],C=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],k=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],L=[0,1,1,4];function O(e,t,n,i,a){if(!(n+24>t.length)){var r=P(t,n);if(r&&n+r.frameLength<=t.length){var s=i+a*(9e4*r.samplesPerFrame/r.sampleRate),o={unit:t.subarray(n,n+r.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=r.channelCount,e.samplerate=r.sampleRate,e.samples.push(o),{sample:o,length:r.frameLength,missing:0}}}}function P(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,r=e[t+2]>>2&3;if(1!==n&&0!==a&&15!==a&&3!==r){var s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*I[14*(3===n?3-i:3===i?3:4)+a-1],u=C[3*(3===n?0:2===n?1:2)+r],c=3===o?1:2,d=k[n][i],h=L[i],f=8*d*h,p=Math.floor(d*l/u+s)*h;if(null===E){var m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);E=m?parseInt(m[1]):0}return!!E&&E<=87&&2===i&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:c,frameLength:p,samplesPerFrame:f}}}function R(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function D(e,t){return t+1<e.length&&R(e,t)}function N(e,t){if(t+1<e.length&&R(e,t)){var n=P(e,t),i=4;null!=n&&n.frameLength&&(i=n.frameLength);var a=t+i;return a===e.length||D(e,a)}return!1}var B=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");i.set(e.subarray(n,n+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&f.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.readSPS=function(){var e,t,n,i=0,a=0,r=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();var m=o();if(l(5),d(3),o(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){var v=u();if(3===v&&d(1),f(),f(),d(1),c())for(t=3!==v?8:12,n=0;n<t;n++)c()&&p(n<6?16:64)}f();var g=u();if(0===g)u();else if(1===g)for(d(1),h(),h(),e=u(),n=0;n<e;n++)h();f(),d(1);var x=u(),b=u(),y=l(1);0===y&&d(1),d(1),c()&&(i=u(),a=u(),r=u(),s=u());var M=[1,1];if(c()&&c())switch(o()){case 1:M=[1,1];break;case 2:M=[12,11];break;case 3:M=[10,11];break;case 4:M=[16,11];break;case 5:M=[40,33];break;case 6:M=[24,11];break;case 7:M=[20,11];break;case 8:M=[32,11];break;case 9:M=[80,33];break;case 10:M=[18,11];break;case 11:M=[15,11];break;case 12:M=[64,33];break;case 13:M=[160,99];break;case 14:M=[4,3];break;case 15:M=[3,2];break;case 16:M=[2,1];break;case 255:M=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(x+1)-2*i-2*a),height:(2-y)*(b+1)*16-(y?2:4)*(r+s),pixelRatio:M}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),U=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.a(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(e,t,n,i){var a=e[t].unit,r=a.subarray(16,a.length-a.length%16),s=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),o=this;this.decryptBuffer(s,(function(r){var s=new Uint8Array(r);a.set(s,16),i||o.decryptAacSamples(e,t+1,n)}))},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,a=32;a<e.length-16;a+=160,i+=16)n.set(e.subarray(a,a+16),i);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,a=32;a<e.length-16;a+=160,i+=16)e.set(n.subarray(i,i+16),a);return e},t.decryptAvcSample=function(e,t,n,i,a,r){var s=z(a.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){a.data=l.getAvcDecryptedUnit(s,o),r||l.decryptAvcSamples(e,t,n+1,i)}))},t.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var a=e[t].units;!(n>=a.length);n++){var r=a[n];if(!(r.data.length<=48||1!==r.type&&5!==r.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,r,s),!s)return}}}},e}(),j={video:1,audio:2,id3:3,text:4},F=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}e.probe=function(t){var n=e.syncOffset(t);return!(n<0||(n&&f.b.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e.syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:j[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=i},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},t.demux=function(t,n,r,s){var o;void 0===r&&(r=!1),void 0===s&&(s=!1),r||(this.sampleAes=null);var u=this._avcTrack,c=this._audioTrack,d=this._id3Track,h=u.pid,p=u.pesData,m=c.pid,v=d.pid,g=c.pesData,x=d.pesData,b=!1,y=this.pmtParsed,M=this._pmtId,w=t.length;if(this.remainderData&&(w=(t=Object(l.a)(this.remainderData,t)).length,this.remainderData=null),w<188&&!s)return this.remainderData=t,{audioTrack:c,avcTrack:u,id3Track:d,textTrack:this._txtTrack};var T=Math.max(0,e.syncOffset(t));(w-=(w+T)%188)<t.byteLength&&!s&&(this.remainderData=new Uint8Array(t.buffer,w,t.buffer.byteLength-w));for(var _=0,S=T;S<w;S+=188)if(71===t[S]){var A=!!(64&t[S+1]),E=((31&t[S+1])<<8)+t[S+2],I=void 0;if((48&t[S+3])>>4>1){if((I=S+5+t[S+4])===S+188)continue}else I=S+4;switch(E){case h:A&&(p&&(o=Z(p))&&this.parseAVCPES(o,!1),p={data:[],size:0}),p&&(p.data.push(t.subarray(I,S+188)),p.size+=S+188-I);break;case m:A&&(g&&(o=Z(g))&&(c.isAAC?this.parseAACPES(o):this.parseMPEGPES(o)),g={data:[],size:0}),g&&(g.data.push(t.subarray(I,S+188)),g.size+=S+188-I);break;case v:A&&(x&&(o=Z(x))&&this.parseID3PES(o),x={data:[],size:0}),x&&(x.data.push(t.subarray(I,S+188)),x.size+=S+188-I);break;case 0:A&&(I+=t[I]+1),M=this._pmtId=G(t,I);break;case M:A&&(I+=t[I]+1);var C=H(t,I,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,r);(h=C.avc)>0&&(u.pid=h),(m=C.audio)>0&&(c.pid=m,c.isAAC=C.isAAC),(v=C.id3)>0&&(d.pid=v),b&&!y&&(f.b.log("reparse from beginning"),b=!1,S=T-188),y=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=!0}}else _++;_>0&&this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+_+" TS packet/s that do not start with 0x47"}),u.pesData=p,c.pesData=g,d.pesData=x;var k={audioTrack:c,avcTrack:u,id3Track:d,textTrack:this._txtTrack};return s&&this.extractRemainingSamples(k),k},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.avcTrack,a=e.id3Track,r=i.pesData,s=n.pesData,o=a.pesData;r&&(t=Z(r))?(this.parseAVCPES(t,!0),i.pesData=null):i.pesData=r,s&&(t=Z(s))?(n.isAAC?this.parseAACPES(t):this.parseMPEGPES(t),n.pesData=null):(null!=s&&s.size&&f.b.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=s),o&&(t=Z(o))?(this.parseID3PES(t),a.pesData=null):a.pesData=o},t.demuxSampleAes=function(e,t,n){var i=this.demux(e,n,!0,!this.config.progressive),a=this.sampleAes=new U(this.observer,this.config,t);return this.decrypt(i,a)},t.decrypt=function(e,t){return new Promise((function(n){var i=e.audioTrack,a=e.avcTrack;i.samples&&i.isAAC?t.decryptAacSamples(i.samples,0,(function(){a.samples?t.decryptAvcSamples(a.samples,0,0,(function(){n(e)})):n(e)})):a.samples&&t.decryptAvcSamples(a.samples,0,0,(function(){n(e)}))}))},t.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},t.parseAVCPES=function(e,t){var n,i=this,a=this._avcTrack,r=this.parseAVCNALu(e.data),s=this.avcSample,l=!1;e.data=null,s&&r.length&&!a.audFound&&(K(s,a),s=this.avcSample=Y(!1,e.pts,e.dts,"")),r.forEach((function(t){switch(t.type){case 1:n=!0,s||(s=i.avcSample=Y(!0,e.pts,e.dts,"")),s.frame=!0;var r=t.data;if(l&&r.length>4){var u=new B(r).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(s.key=!0)}break;case 5:n=!0,s||(s=i.avcSample=Y(!0,e.pts,e.dts,"")),s.key=!0,s.frame=!0;break;case 6:n=!0;var c=new B(z(t.data));c.readUByte();for(var d=0,h=0,f=!1,p=0;!f&&c.bytesAvailable>1;){d=0;do{d+=p=c.readUByte()}while(255===p);h=0;do{h+=p=c.readUByte()}while(255===p);if(4===d&&0!==c.bytesAvailable){if(f=!0,181===c.readUByte()&&49===c.readUShort()&&1195456820===c.readUInt()&&3===c.readUByte()){for(var m=c.readUByte(),v=31&m,g=[m,c.readUByte()],x=0;x<v;x++)g.push(c.readUByte()),g.push(c.readUByte()),g.push(c.readUByte());V(i._txtTrack.samples,{type:3,pts:e.pts,bytes:g})}}else if(5===d&&0!==c.bytesAvailable){if(f=!0,h>16){for(var b=[],y=0;y<16;y++)b.push(c.readUByte().toString(16)),3!==y&&5!==y&&7!==y&&9!==y||b.push("-");for(var M=h-16,w=new Uint8Array(M),T=0;T<M;T++)w[T]=c.readUByte();V(i._txtTrack.samples,{pts:e.pts,payloadType:d,uuid:b.join(""),userData:Object(o.f)(w),userDataBytes:w})}}else if(h<c.bytesAvailable)for(var _=0;_<h;_++)c.readUByte()}break;case 7:if(n=!0,l=!0,!a.sps){var S=new B(t.data).readSPS();a.width=S.width,a.height=S.height,a.pixelRatio=S.pixelRatio,a.sps=[t.data],a.duration=i._duration;for(var A=t.data.subarray(1,4),E="avc1.",I=0;I<3;I++){var C=A[I].toString(16);C.length<2&&(C="0"+C),E+=C}a.codec=E}break;case 8:n=!0,a.pps||(a.pps=[t.data]);break;case 9:n=!1,a.audFound=!0,s&&K(s,a),s=i.avcSample=Y(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,s&&(s.debug+="unknown NAL "+t.type+" ")}s&&n&&s.units.push(t)})),t&&s&&(K(s,a),this.avcSample=null)},t.getLastNalUnit=function(){var e,t,n=this.avcSample;if(!n||0===n.units.length){var i=this._avcTrack.samples;n=i[i.length-1]}if(null!==(e=n)&&void 0!==e&&e.units){var a=n.units;t=a[a.length-1]}return t},t.parseAVCNALu=function(e){var t,n,i=e.byteLength,a=this._avcTrack,r=a.naluState||0,s=r,o=[],l=0,u=-1,c=0;for(-1===r&&(u=0,c=31&e[0],r=0,l=1);l<i;)if(t=e[l++],r)if(1!==r)if(t)if(1===t){if(u>=0){var d={data:e.subarray(u,l-r-1),type:c};o.push(d)}else{var h=this.getLastNalUnit();if(h&&(s&&l<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(n=l-r-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(e.subarray(0,n),h.data.byteLength),h.data=f,h.state=0}}l<i?(u=l,c=31&e[l],r=0):r=-1}else r=0;else r=3;else r=t?0:2;else r=t?0:1;if(u>=0&&r>=0){var p={data:e.subarray(u,i),type:c,state:r};o.push(p)}if(0===o.length){var m=this.getLastNalUnit();if(m){var v=new Uint8Array(m.data.byteLength+e.byteLength);v.set(m.data,0),v.set(e,m.data.byteLength),m.data=v}}return a.naluState=r,o},t.parseAACPES=function(e){var t,n,r,s,o,l=0,u=this._audioTrack,c=this.aacOverFlow,d=e.data;if(c){this.aacOverFlow=null;var h=c.sample.unit.byteLength,p=Math.min(c.missing,h),m=h-p;c.sample.unit.set(d.subarray(0,p),m),u.samples.push(c.sample),l=c.missing}for(t=l,n=d.length;t<n-1&&!g(d,t);t++);if(t===l||(t<n-1?(r="AAC PES did not start with ADTS header,offset:"+t,s=!1):(r="no ADTS header found in AAC PES",s=!0),f.b.warn("parsing error:"+r),this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:s,reason:r}),!s)){if(b(u,this.observer,d,t,this.audioCodec),void 0!==e.pts)o=e.pts;else{if(!c)return void f.b.warn("[tsdemuxer]: AAC PES unknown PTS");var v=y(u.samplerate);o=c.sample.pts+v}for(var x=0;t<n;){if(g(d,t)){if(t+5<n){var w=M(u,d,t,o,x);if(w){if(!w.missing){t+=w.length,x++;continue}this.aacOverFlow=w}}break}t++}}},t.parseMPEGPES=function(e){var t=e.data,n=t.length,i=0,a=0,r=e.pts;if(void 0!==r)for(;a<n;)if(D(t,a)){var s=O(this._audioTrack,t,a,r,i);if(!s)break;a+=s.length,i++}else a++;else f.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e){void 0!==e.pts?this._id3Track.samples.push(e):f.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function Y(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}function G(e,t){return(31&e[t+10])<<8|e[t+11]}function H(e,t,n,i){var a={audio:-1,avc:-1,id3:-1,isAAC:!0},r=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){var s=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!i){f.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=s);break;case 21:-1===a.id3&&(a.id3=s);break;case 219:if(!i){f.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=s);break;case 3:case 4:n?-1===a.audio&&(a.audio=s,a.isAAC=!1):f.b.log("MPEG audio found, not supported in this browser");break;case 36:f.b.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return a}function Z(e){var t,n,i,a,r,s=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((t=o[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var u=t[7];192&u&&(a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&u?a-(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(f.b.warn(Math.round((a-r)/9e4)+"s delta between PTS and DTS, align them"),a=r):r=a);var c=(i=t[8])+9;if(e.size<=c)return null;e.size-=c;for(var d=new Uint8Array(e.size),h=0,p=o.length;h<p;h++){var m=(t=o[h]).byteLength;if(c){if(c>m){c-=m;continue}t=t.subarray(c),m-=c,c=0}d.set(t,s),s+=m}return n&&(n-=i+3),{data:d,pts:a,dts:r,len:n}}return null}function K(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return void t.dropped++;var a=n[i-1];e.pts=a.pts,e.dts=a.dts}t.samples.push(e)}e.debug.length&&f.b.log(e.pts+"/"+e.dts+":"+e.debug)}function V(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)}function z(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var a=t-n.length,r=new Uint8Array(a),s=0;for(i=0;i<a;s++,i++)s===n[0]&&(s++,n.shift()),r[i]=e[s];return r}F.minProbeByteLength=188;var W=F;function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,q(t,n);var a=i.prototype;return a.resetInitSegment=function(t,n,i){e.prototype.resetInitSegment.call(this,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(o.b(e,0)||[]).length,n=e.length;t<n;t++)if(N(e,t))return f.b.log("MPEG Audio sync word found !"),!0;return!1},a.canParse=function(e,t){return function(e,t){return R(e,t)&&4<=e.length-t}(e,t)},a.appendFrame=function(e,t,n){if(null!==this.initPTS)return O(e,t,n,this.initPTS,this.frameIndex)},i}(h);X.minProbeByteLength=4;var Q=X,J=n(16),$=n(5),ee=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndDTS=null},t.resetNextTimestamp=function(){this.lastEndDTS=null},t.resetInitSegment=function(e,t,n){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Object(l.f)(e);t||(t=ne(i.audio,$.a.AUDIO)),n||(n=ne(i.video,$.a.VIDEO));var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?a.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:f.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a},t.remux=function(e,t,n,i,a){var r=this.initPTS,o=this.lastEndDTS,u={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Object(s.a)(o)||(o=this.lastEndDTS=a||0);var c=t.samples;if(!c||!c.length)return u;var d={initPTS:void 0,timescale:1},h=this.initData;if(h&&h.length||(this.generateInitSegment(c),h=this.initData),!h||!h.length)return f.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(s.a)(r)||(this.initPTS=d.initPTS=r=te(h,c,o));var p=Object(l.c)(c,h),m=o,v=p+m;Object(l.e)(h,c,r),p>0?this.lastEndDTS=v:(f.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var g=!!h.audio,x=!!h.video,b="";g&&(b+="audio"),x&&(b+="video");var y={data1:c,startPTS:m,startDTS:m,endPTS:v,endDTS:v,type:b,hasAudio:g,hasVideo:x,nb:1,dropped:0};return u.audio="audio"===y.type?y:void 0,u.video="audio"!==y.type?y:void 0,u.text=i,u.id3=n,u.initSegment=d,u},e}(),te=function(e,t,n){return Object(l.d)(e,t)-n};function ne(e,t){var n=null==e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===$.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var ie,ae=ee,re=n(13);try{ie=self.performance.now.bind(self.performance)}catch(e){f.b.debug("Unable to use Performance API on this environment"),ie=self.Date.now}var se=[{demux:W,remux:J.a},{demux:A,remux:ae},{demux:_,remux:J.a},{demux:Q,remux:J.a}],oe=1024;se.forEach((function(e){var t=e.demux;oe=Math.max(oe,t.minProbeByteLength)}));var le=function(){function e(e,t,n,i,a){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new re.a,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=a}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,i){var a=this,r=n.transmuxing;r.executeStart=ie();var s=new Uint8Array(e),o=this.cache,u=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;i&&(this.currentTransmuxState=i);var h=function(e,t){var n=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t),n}(s,t);if(h&&"AES-128"===h.method){var f=this.getDecrypter();if(!u.enableSoftwareAES)return this.decryptionPromise=f.webCryptoDecrypt(s,h.key.buffer,h.iv.buffer).then((function(e){var t=a.push(e,null,n);return a.decryptionPromise=null,t})),this.decryptionPromise;var p=f.softwareDecrypt(s,h.key.buffer,h.iv.buffer);if(!p)return r.executeEnd=ie(),ue(n);s=new Uint8Array(p)}var m=i||c,v=m.contiguous,g=m.discontinuity,x=m.trackSwitch,b=m.accurateTimeOffset,y=m.timeOffset,M=m.initSegmentChange,w=d.audioCodec,T=d.videoCodec,_=d.defaultInitPts,S=d.duration,A=d.initSegmentData;if((g||x||M)&&this.resetInitSegment(A,w,T,S),(g||M)&&this.resetInitialTimestamp(_),v||this.resetContiguity(),this.needsProbing(s,g,x)){if(o.dataLength){var E=o.flush();s=Object(l.a)(E,s)}this.configureTransmuxer(s,d)}var I=this.transmux(s,h,y,b,n),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,r.executeEnd=ie(),I},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=ie();var r=this.decrypter,s=this.cache,o=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return t.flush(e)}));var u=[],c=o.timeOffset;if(r){var d=r.flush();d&&u.push(this.push(d,null,e))}var h=s.dataLength;s.reset();var f=this.demuxer,p=this.remuxer;if(!f||!p)return h>=oe&&this.observer.emit(i.a.ERROR,i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=ie(),[ue(e)];var m=f.flush(c);return ce(m)?m.then((function(n){return t.flushRemux(u,n,e),u})):(this.flushRemux(u,m,e),u)},t.flushRemux=function(e,t,n){var i=t.audioTrack,a=t.avcTrack,r=t.id3Track,s=t.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;f.b.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var c=this.remuxer.remux(i,a,r,s,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=ie()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,i){var a=this.demuxer,r=this.remuxer;a&&r&&(a.resetInitSegment(t,n,i),r.resetInitSegment(e,t,n))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,i,a){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,a):this.transmuxUnencrypted(e,n,i,a)},t.transmuxUnencrypted=function(e,t,n,i){var a=this.demuxer.demux(e,t,!1,!this.config.progressive),r=a.audioTrack,s=a.avcTrack,o=a.id3Track,l=a.textTrack;return{remuxResult:this.remuxer.remux(r,s,o,l,t,n,!1,this.id),chunkMeta:i}},t.transmuxSampleAes=function(e,t,n,i,a){var r=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:r.remuxer.remux(e.audioTrack,e.avcTrack,e.id3Track,e.textTrack,n,i,!1,r.id),chunkMeta:a}}))},t.configureTransmuxer=function(e,t){for(var n,i=this.config,a=this.observer,r=this.typeSupported,s=this.vendor,o=t.audioCodec,l=t.defaultInitPts,u=t.duration,c=t.initSegmentData,d=t.videoCodec,h=0,p=se.length;h<p;h++)if(se[h].demux.probe(e)){n=se[h];break}n||(f.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:A,remux:ae});var m=this.demuxer,v=this.remuxer,g=n.remux,x=n.demux;v&&v instanceof g||(this.remuxer=new g(a,i,r,s)),m&&m instanceof x||(this.demuxer=new x(a,i,r),this.probe=x.probe),this.resetInitSegment(c,o,d,u),this.resetInitialTimestamp(l)},t.needsProbing=function(e,t,n){return!this.demuxer||!this.remuxer||t||n},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new r.a(this.observer,this.config)),e},e}(),ue=function(e){return{remuxResult:{},chunkMeta:e}};function ce(e){return"then"in e&&e.then instanceof Function}var de=function(e,t,n,i,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=a},he=function(e,t,n,i,a,r){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=a,this.initSegmentChange=r}},function(e,t,n){var i,a,r,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,a=/^([^\/?#]*)([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=o.normalizePath(r.path),o.buildURLFromParts(r)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=a.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(u.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+r.path;u.path=o.normalizePath(d)}else u.path=s.path,r.params||(u.params=s.params,r.query||(u.query=s.query));return null===u.path&&(u.path=n.alwaysNormalize?o.normalizePath(r.path):r.path),o.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var n=new Uint8Array(t),i=0,a=0;a<e.length;a++){var r=e[a];n.set(r,i),i+=r.length}return n}(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,a="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new s(n,i||e,r),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(a=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=a?a+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,s=new Array(r);i<r;i++)s[i]=n[i].fn;return s},u.prototype.listenerCount=function(e){var t=a?a+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,i,r,s){var o=a?a+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,r),!0;case 6:return c.fn.call(c.context,t,n,i,r,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,i){var r=a?a+e:e;if(!this._events[r])return this;if(!t)return l(this,r),this;var s=this._events[r];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||l(this,r);else{for(var o=0,u=[],c=s.length;o<c;o++)(s[o].fn!==t||i&&!s[o].once||n&&s[o].context!==n)&&u.push(s[o]);u.length?this._events[r]=1===u.length?u[0]:u:l(this,r)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&l(this,t)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=a,u.EventEmitter=u,e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),a=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),r=n(9),s=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],a=n[1],r=n[2],s=n[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var g=h[f],x=h[g],b=h[x],y=257*h[v]^16843008*v;i[f]=y<<24|y>>>8,a[f]=y<<16|y>>>16,r[f]=y<<8|y>>>24,s[f]=y,y=16843009*b^65537*x^257*g^16843008*f,l[v]=y<<24|y>>>8,u[v]=y<<16|y>>>16,c[v]=y<<8|y>>>24,d[v]=y,f?(f=g^h[h[h[b^g]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var r,s,o,l,u=this.ksRows=4*(a+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,m=p[0],v=p[1],g=p[2],x=p[3];for(r=0;r<u;r++)r<a?o=c[r]=t[r]:(l=o,r%a==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[r/a|0]<<24):a>6&&r%a==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[r]=o=(c[r-a]^l)>>>0);for(s=0;s<u;s++)r=u-s,l=3&s?c[r]:c[r-4],d[s]=s<4||r<=4?l:m[h[l>>>24]]^v[h[l>>>16&255]]^g[h[l>>>8&255]]^x[h[255&l]],d[s]=d[s]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var i,a,r,s,o,l,u,c,d,h,f,p,m,v,g=this.keySize+6,x=this.invKeySchedule,b=this.invSBox,y=this.invSubMix,M=y[0],w=y[1],T=y[2],_=y[3],S=this.uint8ArrayToUint32Array_(n),A=S[0],E=S[1],I=S[2],C=S[3],k=new Int32Array(e),L=new Int32Array(k.length),O=this.networkToHostOrderSwap;t<k.length;){for(d=O(k[t]),h=O(k[t+1]),f=O(k[t+2]),p=O(k[t+3]),o=d^x[0],l=p^x[1],u=f^x[2],c=h^x[3],m=4,v=1;v<g;v++)i=M[o>>>24]^w[l>>16&255]^T[u>>8&255]^_[255&c]^x[m],a=M[l>>>24]^w[u>>16&255]^T[c>>8&255]^_[255&o]^x[m+1],r=M[u>>>24]^w[c>>16&255]^T[o>>8&255]^_[255&l]^x[m+2],s=M[c>>>24]^w[o>>16&255]^T[l>>8&255]^_[255&u]^x[m+3],o=i,l=a,u=r,c=s,m+=4;i=b[o>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^x[m],a=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&o]^x[m+1],r=b[u>>>24]<<24^b[c>>16&255]<<16^b[o>>8&255]<<8^b[255&l]^x[m+2],s=b[c>>>24]<<24^b[o>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^x[m+3],L[t]=O(i^A),L[t+1]=O(s^E),L[t+2]=O(r^I),L[t+3]=O(a^C),A=d,E=h,I=f,C=p,t+=4}return L.buffer},e}(),o=n(1),l=n(6),u=function(){function e(e,t,n){var i=(void 0===n?{}:n).removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=e.prototype;return t.destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(e){var t,n,i,a=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(i=(n=(t=a).byteLength)&&new DataView(t.buffer).getUint8(n-1))?Object(r.a)(t,0,n-i):t:a}this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n,i){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,n);var a=this.flush();a&&i(a.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,n).then(i)},t.softwareDecrypt=function(e,t,n){var i=this.currentIV,a=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(e=Object(l.a)(o,e),this.remainderData=null);var u=this.getValidChunk(e);if(!u.length)return null;i&&(n=i);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new s),c.expandKey(t);var d=a;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=Object(r.a)(u,-16).buffer,d||null},t.webCryptoDecrypt=function(e,t,n){var r=this,s=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new a(s,t)),this.fastAesKey.expandKey().then((function(t){return s?new i(s,n).decrypt(e.buffer,t):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return r.onWebCryptoError(i,e,t,n)}))},t.onWebCryptoError=function(e,t,n,i){return o.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,n,i)},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=Object(r.a)(e,0,n),this.remainderData=Object(r.a)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(o.b.log("[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return x}));var i=n(3),a=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),r=Math.pow(2,32)-1,s=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=r,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))},e.box=function(e){for(var t=8,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var r=i.length,s=r;r--;)t+=i[r].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),r=0,t=8;r<s;r++)o.set(i[r],t),t+=i[r].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)},e.sdtp=function(t){var n,i,a=t.samples||[],r=new Uint8Array(4+a.length);for(n=0;n<a.length;n++)i=a[n].flags,r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,r)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,a,r=[],s=[];for(n=0;n<t.sps.length;n++)a=(i=t.sps[n]).byteLength,r.push(a>>>8&255),r.push(255&a),r=r.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)a=(i=t.pps[n]).byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,a=t.width,s=t.height,o=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),a=t.id,s=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,a,r,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)r=(a=u[i]).duration,s=a.size,o=a.flags,l=a.cts,h.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),i=new Uint8Array(e.FTYP.byteLength+n.byteLength);return i.set(e.FTYP),i.set(n,e.FTYP.byteLength),i},e}();s.types=void 0,s.HDLR_TYPES=void 0,s.STTS=void 0,s.STSC=void 0,s.STCO=void 0,s.STSZ=void 0,s.VMHD=void 0,s.SMHD=void 0,s.STSD=void 0,s.FTYP=void 0,s.DINF=void 0;var o=s,l=n(0),u=n(2),c=n(1),d=n(4),h=n(8);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var p=null,m=null,v=!1,g=function(){function e(e,t,n,i){if(void 0===i&&(i=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===p){var a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);p=a?parseInt(a[1]):0}if(null===m){var r=navigator.userAgent.match(/Safari\/(\d+)/i);m=r?parseInt(r[1]):0}v=!!p&&p<75||!!m&&m<600}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){c.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){c.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){c.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,x(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&c.b.debug("PTS rollover detected"),n},t.remux=function(e,t,n,i,a,r,s,o){var l,u,h,f,p,m,v=a,g=a,b=e.pid>-1,y=t.pid>-1,M=t.samples.length,w=e.samples.length>0,T=M>1;if((!b||w)&&(!y||T)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(e,t,a));var _=this.isVideoContiguous,S=-1;if(T&&(S=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!_&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,S>0){c.b.warn("[mp4-remuxer]: Dropped "+S+" out of "+M+" video samples due to a missing keyframe");var A=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(S),t.dropped+=S,g+=(t.samples[0].pts-A)/(t.timescale||9e4)}else-1===S&&(c.b.warn("[mp4-remuxer]: No keyframe found out of "+M+" video samples"),m=!1);if(this.ISGenerated){if(w&&T){var E=this.getVideoStartPts(t.samples),I=(x(e.samples[0].pts,E)-E)/t.inputTimeScale;v+=Math.max(0,I),g+=Math.max(0,-I)}if(w){if(e.samplerate||(c.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,a)),u=this.remuxAudio(e,v,this.isAudioContiguous,r,y||T||o===d.b.AUDIO?g:void 0),T){var C=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(c.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,a)),l=this.remuxVideo(t,g,_,C)}}else T&&(l=this.remuxVideo(t,g,_,0));l&&(l.firstKeyFrame=S,l.independent=-1!==S)}}return this.ISGenerated&&(n.samples.length&&(p=this.remuxID3(n,a)),i.samples.length&&(f=this.remuxText(i,a))),{audio:u,video:l,initSegment:h,independent:m,text:f,id3:p}},t.generateIS=function(e,t,n){var a,r,s,l=e.samples,u=t.samples,c=this.typeSupported,d={},h=!Object(i.a)(this._initPTS),f="audio/mp4";if(h&&(a=r=1/0),e.config&&l.length&&(e.timescale=e.samplerate,e.isAAC||(c.mpeg?(f="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:f,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array(0):o.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(s=e.inputTimeScale,a=r=l[0].pts-Math.round(s*n))),t.sps&&t.pps&&u.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:o.initSegment([t]),metadata:{width:t.width,height:t.height}},h)){s=t.inputTimeScale;var p=this.getVideoStartPts(u),m=Math.round(s*n);r=Math.min(r,x(u[0].dts,p)-m),a=Math.min(a,p-m)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=a,this._initDTS=r),{tracks:d,initPTS:a,timescale:s}},t.remuxVideo=function(e,t,n,i){var a,r,s,d=e.inputTimeScale,m=e.samples,g=[],y=m.length,M=this._initPTS,w=this.nextAvcDts,T=8,_=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,A=0,E=!1;n&&null!==w||(w=t*d-(m[0].pts-x(m[0].dts,m[0].pts)));for(var I=0;I<y;I++){var C=m[I];C.pts=x(C.pts-M,w),C.dts=x(C.dts-M,w),C.dts>C.pts&&(A=Math.max(Math.min(A,C.pts-C.dts),-18e3)),C.dts<m[I>0?I-1:I].dts&&(E=!0)}E&&m.sort((function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i})),r=m[0].dts,s=m[m.length-1].dts;var k=Math.round((s-r)/(y-1));if(A<0){if(A<-2*k){c.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(h.b)(-k,!0)+" ms");for(var L=A,O=0;O<y;O++)m[O].dts=L=Math.max(L,m[O].pts-k),m[O].pts=Math.max(L,m[O].pts)}else{c.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(h.b)(A,!0)+" ms to overcome this issue");for(var P=0;P<y;P++)m[P].dts=m[P].dts+A}r=m[0].dts}if(n){var R=r-w,D=R>k;if(D||R<-1){D?c.b.warn("AVC: "+Object(h.b)(R,!0)+" ms ("+R+"dts) hole between fragments detected, filling it"):c.b.warn("AVC: "+Object(h.b)(-R,!0)+" ms ("+R+"dts) overlapping between fragments detected"),r=w;var N=m[0].pts-R;m[0].dts=r,m[0].pts=N,c.b.log("Video: First PTS/DTS adjusted: "+Object(h.b)(N,!0)+"/"+Object(h.b)(r,!0)+", delta: "+Object(h.b)(R,!0)+" ms")}}v&&(r=Math.max(0,r));for(var B=0,U=0,j=0;j<y;j++){for(var F=m[j],Y=F.units,G=Y.length,H=0,Z=0;Z<G;Z++)H+=Y[Z].data.length;U+=H,B+=G,F.length=H,F.dts=Math.max(F.dts,r),F.pts=Math.max(F.pts,F.dts,0),_=Math.min(F.pts,_),S=Math.max(F.pts,S)}s=m[y-1].dts;var K,V=U+4*B+8;try{K=new Uint8Array(V)}catch(e){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:u.b.MUX_ERROR,details:u.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating video mdat "+V})}var z=new DataView(K.buffer);z.setUint32(0,V),K.set(o.types.mdat,4);for(var W=0;W<y;W++){for(var q=m[W],X=q.units,Q=0,J=0,$=X.length;J<$;J++){var ee=X[J],te=ee.data,ne=ee.data.byteLength;z.setUint32(T,ne),T+=4,K.set(te,T),T+=ne,Q+=4+ne}if(W<y-1)a=m[W+1].dts-q.dts;else{var ie=this.config,ae=q.dts-m[W>0?W-1:W].dts;if(ie.stretchShortVideoTrack&&null!==this.nextAudioPts){var re=Math.floor(ie.maxBufferHole*d),se=(i?_+i*d:this.nextAudioPts)-q.pts;se>re?((a=se-ae)<0&&(a=ae),c.b.log("[mp4-remuxer]: It is approximately "+se/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=ae}else a=ae}var oe=Math.round(q.pts-q.dts);g.push(new b(q.key,a,Q,oe))}if(g.length&&p&&p<70){var le=g[0].flags;le.dependsOn=2,le.isNonSync=0}this.nextAvcDts=w=s+a,this.isVideoContiguous=!0;var ue={data1:o.moof(e.sequenceNumber++,r,f({},e,{samples:g})),data2:K,startPTS:_/d,endPTS:(S+a)/d,startDTS:r/d,endDTS:w/d,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ue},t.remuxAudio=function(e,t,n,i,r){var s=e.inputTimeScale,d=s/(e.samplerate?e.samplerate:s),h=e.isAAC?1024:1152,p=h*d,m=this._initPTS,v=!e.isAAC&&this.typeSupported.mpeg,g=[],y=e.samples,M=v?0:8,w=this.nextAudioPts||-1,T=t*s;if(this.isAudioContiguous=n=n||y.length&&w>0&&(i&&Math.abs(T-w)<9e3||Math.abs(x(y[0].pts-m,T)-w)<20*p),y.forEach((function(e){e.pts=x(e.pts-m,T)})),!n||w<0){if(!(y=y.filter((function(e){return e.pts>=0}))).length)return;w=0===r?0:i?Math.max(0,T):y[0].pts}if(e.isAAC)for(var _=void 0!==r,S=this.config.maxAudioFramesDrift,A=0,E=w;A<y.length;A++){var I=y[A],C=I.pts,k=C-E,L=Math.abs(1e3*k/s);if(k<=-S*p&&_)0===A&&(c.b.warn("Audio frame @ "+(C/s).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*k/s)+" ms."),this.nextAudioPts=w=E=C);else if(k>=S*p&&L<1e4&&_){var O=Math.round(k/p);(E=C-O*p)<0&&(O--,E+=p),0===A&&(this.nextAudioPts=w=E),c.b.warn("[mp4-remuxer]: Injecting "+O+" audio frame @ "+(E/s).toFixed(3)+"s due to "+Math.round(1e3*k/s)+" ms gap.");for(var P=0;P<O;P++){var R=Math.max(E,0),D=a.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);D||(c.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),D=I.unit.subarray()),y.splice(A,0,{unit:D,pts:R}),E+=p,A++}}I.pts=E,E+=p}for(var N,B=null,U=null,j=0,F=y.length;F--;)j+=y[F].unit.byteLength;for(var Y=0,G=y.length;Y<G;Y++){var H=y[Y],Z=H.unit,K=H.pts;if(null!==U)g[Y-1].duration=Math.round((K-U)/d);else{if(n&&e.isAAC&&(K=w),B=K,!(j>0))return;j+=M;try{N=new Uint8Array(j)}catch(e){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:u.b.MUX_ERROR,details:u.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}v||(new DataView(N.buffer).setUint32(0,j),N.set(o.types.mdat,4))}N.set(Z,M);var V=Z.byteLength;M+=V,g.push(new b(!0,h,V,0)),U=K}var z=g.length;if(z){var W=g[g.length-1];this.nextAudioPts=w=U+d*W.duration;var q=v?new Uint8Array(0):o.moof(e.sequenceNumber++,B/d,f({},e,{samples:g}));e.samples=[];var X=B/s,Q=w/s,J={data1:q,data2:N,startPTS:X,endPTS:Q,startDTS:X,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:z};return this.isAudioContiguous=!0,J}},t.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,s=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,l=(null!==o?o:i.startDTS*r)+this._initDTS,u=i.endDTS*r+this._initDTS,d=1024*s,h=Math.ceil((u-l)/d),f=a.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.b.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],m=0;m<h;m++){var v=l+m*d;p.push({unit:f,pts:v,dts:v})}return e.samples=p,this.remuxAudio(e,t,n,!1)}c.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t.remuxID3=function(e,t){var n=e.samples.length;if(n){for(var i=e.inputTimeScale,a=this._initPTS,r=this._initDTS,s=0;s<n;s++){var o=e.samples[s];o.pts=x(o.pts-a,t*i)/i,o.dts=x(o.dts-r,t*i)/i}var l=e.samples;return e.samples=[],{samples:l}}},t.remuxText=function(e,t){var n=e.samples.length;if(n){for(var i=e.inputTimeScale,a=this._initPTS,r=0;r<n;r++){var s=e.samples[r];s.pts=x(s.pts-a,t*i)/i}e.samples.sort((function(e,t){return e.pts-t.pts}));var o=e.samples;return e.samples=[],{samples:o}}},e}();function x(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}var b=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags=new y(e)},y=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(11);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(i.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}var t,n;return e.fromURL=function(t,n){return new e(t,n)},e.fromURI=function(t){return new e(t)},t=e,(n=[{key:"uri",get:function(){return this._uri}}])&&a(t.prototype,n),e}()},function(e,t,n){function i(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw e};var i=n(n.s=ENTRY_MODULE);return i.default||i}function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function r(e,t,i){var r={};r[i]=[];var s=t.toString(),o=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return r;for(var l,u=o[1],c=new RegExp("(\\\\n|\\W)"+a(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=c.exec(s);)"dll-reference"!==l[3]&&r[i].push(l[3]);for(c=new RegExp("\\("+a(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=c.exec(s);)e[l[2]]||(r[i].push(l[1]),e[l[2]]=n(l[1]).m),r[l[2]]=r[l[2]]||[],r[l[2]].push(l[4]);for(var d,h=Object.keys(r),f=0;f<h.length;f++)for(var p=0;p<r[h[f]].length;p++)d=r[h[f]][p],isNaN(1*d)||(r[h[f]][p]=1*r[h[f]][p]);return r}function s(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var a={main:n.m},o=t.all?{main:Object.keys(a.main)}:function(e,t){for(var n={main:[t]},i={main:[]},a={main:{}};s(n);)for(var o=Object.keys(n),l=0;l<o.length;l++){var u=o[l],c=n[u].pop();if(a[u]=a[u]||{},!a[u][c]&&e[u][c]){a[u][c]=!0,i[u]=i[u]||[],i[u].push(c);for(var d=r(e,e[u][c],u),h=Object.keys(d),f=0;f<h.length;f++)n[h[f]]=n[h[f]]||[],n[h[f]]=n[h[f]].concat(d[h[f]])}}return i}(a,e),l="";Object.keys(o).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;o[e][t];)t++;o[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var i=n(10),a=n(0),r=n(1),s=n(14);function o(e){var t=new s.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(a.a.FRAG_DECRYPTED,n),t.on(a.a.ERROR,n),e.addEventListener("message",(function(a){var s=a.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.transmuxer=new i.c(t,s.typeSupported,o,s.vendor,s.id),Object(r.a)(o.debug),n("init",null);break;case"configure":e.transmuxer.configure(s.config);break;case"demux":var u=e.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);Object(i.d)(u)?u.then((function(t){l(e,t)})):l(e,u);break;case"flush":var d=s.chunkMeta,h=e.transmuxer.flush(d);Object(i.d)(h)?h.then((function(t){c(e,t,d)})):c(e,h,d)}}))}function l(e,t){if((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment){var n,i=[],a=t.remuxResult,r=a.audio,s=a.video;r&&u(i,r),s&&u(i,s),e.postMessage({event:"transmuxComplete",data:t},i)}}function u(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function c(e,t,n){t.forEach((function(t){l(e,t)})),e.postMessage({event:"flush",data:n})}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ii}));var i=n(11),a=n(3),r=n(0),s=n(2),l=n(1),u=n(6),c=n(5);function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=e}var t,n;return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},t=e,(n=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(a.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&d(t.prototype,n),e}(),f=n(17),p=/^(\d+)x(\d+)$/,m=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,v=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=p.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(m.lastIndex=0;null!==(t=m.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),g={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function x(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var b=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,y=/#EXT-X-MEDIA:(.*)/g,M=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),w=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),T=/\.(mp4|m4s|m4v|m4a)$/i,_=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var n=t.shift()+".";return(n+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)}return e},e.resolve=function(e,t){return i.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var i,a=[],r={},s=!1;for(b.lastIndex=0;null!=(i=b.exec(t));)if(i[1]){var o=new v(i[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:e.resolve(i[2],n)},u=o.decimalResolution("RESOLUTION");u&&(l.width=u.width,l.height=u.height),S((o.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),a.push(l)}else if(i[3]){var c=new v(i[3]);c["DATA-ID"]&&(s=!0,r[c["DATA-ID"]]=c)}return{levels:a,sessionData:s?r:null}},e.parseMasterPlaylistMedia=function(t,n,i,a){var r;void 0===a&&(a=[]);var s=[],o=0;for(y.lastIndex=0;null!==(r=y.exec(t));){var l=new v(r[1]);if(l.TYPE===i){var u={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:i,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?e.resolve(l.URI,n):""};if(a.length){var c=e.findGroup(a,u.groupId)||a[0];A(u,c,"audioCodec"),A(u,c,"textCodec")}s.push(u)}}return s},e.parseLevelPlaylist=function(e,t,n,r,s){var o,u,d,p=new h(t),m=p.fragments,g=null,x=0,b=0,y=0,_=0,S=null,A=new c.b(r,t),I=-1,C=!1;for(M.lastIndex=0,p.m3u8=e;null!==(o=M.exec(e));){C&&(C=!1,(A=new c.b(r,t)).start=y,A.sn=x,A.cc=_,A.level=n,g&&(A.initSegment=g,A.rawProgramDateTime=g.rawProgramDateTime));var k=o[1];if(k){A.duration=parseFloat(k);var L=(" "+o[2]).slice(1);A.title=L||null,A.tagList.push(L?["INF",k,L]:["INF",k])}else if(o[3])Object(a.a)(A.duration)&&(A.start=y,d&&(A.levelkey=d),A.sn=x,A.level=n,A.cc=_,A.urlId=s,m.push(A),A.relurl=(" "+o[3]).slice(1),E(A,S),S=A,y+=A.duration,x++,b=0,C=!0);else if(o[4]){var O=(" "+o[4]).slice(1);S?A.setByteRange(O,S):A.setByteRange(O)}else if(o[5])A.rawProgramDateTime=(" "+o[5]).slice(1),A.tagList.push(["PROGRAM-DATE-TIME",A.rawProgramDateTime]),-1===I&&(I=m.length);else{if(!(o=o[0].match(w))){l.b.warn("No matches on slow regex match for level playlist!");continue}for(u=1;u<o.length&&void 0===o[u];u++);var P=(" "+o[u]).slice(1),R=(" "+o[u+1]).slice(1),D=o[u+2]?(" "+o[u+2]).slice(1):"";switch(P){case"PLAYLIST-TYPE":p.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":x=p.startSN=parseInt(R);break;case"SKIP":var N=new v(R),B=N.decimalInteger("SKIPPED-SEGMENTS");if(Object(a.a)(B)){p.skippedSegments=B;for(var U=B;U--;)m.unshift(null);x+=B}var j=N.enumeratedString("RECENTLY-REMOVED-DATERANGES");j&&(p.recentlyRemovedDateranges=j.split("\t"));break;case"TARGETDURATION":p.targetduration=parseFloat(R);break;case"VERSION":p.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":p.live=!1;break;case"#":(R||D)&&A.tagList.push(D?[R,D]:[R]);break;case"DIS":_++;case"GAP":A.tagList.push([P]);break;case"BITRATE":A.tagList.push([P,R]);break;case"DISCONTINUITY-SEQ":_=parseInt(R);break;case"KEY":var F,Y=new v(R),G=Y.enumeratedString("METHOD"),H=Y.URI,Z=Y.hexadecimalInteger("IV"),K=Y.enumeratedString("KEYFORMATVERSIONS"),V=Y.enumeratedString("KEYID"),z=null!=(F=Y.enumeratedString("KEYFORMAT"))?F:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(z)>-1){l.b.warn("Keyformat "+z+" is not supported from the manifest");continue}if("identity"!==z)continue;G&&(d=f.a.fromURL(t,H),H&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(G)>=0&&(d.method=G,d.keyFormat=z,V&&(d.keyID=V),K&&(d.keyFormatVersions=K),d.iv=Z));break;case"START":var W=new v(R).decimalFloatingPoint("TIME-OFFSET");Object(a.a)(W)&&(p.startTimeOffset=W);break;case"MAP":var q=new v(R);A.relurl=q.URI,q.BYTERANGE&&A.setByteRange(q.BYTERANGE),A.level=n,A.sn="initSegment",d&&(A.levelkey=d),A.initSegment=null,g=A,C=!0;break;case"SERVER-CONTROL":var X=new v(R);p.canBlockReload=X.bool("CAN-BLOCK-RELOAD"),p.canSkipUntil=X.optionalFloat("CAN-SKIP-UNTIL",0),p.canSkipDateRanges=p.canSkipUntil>0&&X.bool("CAN-SKIP-DATERANGES"),p.partHoldBack=X.optionalFloat("PART-HOLD-BACK",0),p.holdBack=X.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Q=new v(R);p.partTarget=Q.decimalFloatingPoint("PART-TARGET");break;case"PART":var J=p.partList;J||(J=p.partList=[]);var $=b>0?J[J.length-1]:void 0,ee=b++,te=new c.c(new v(R),A,t,ee,$);J.push(te),A.duration+=te.duration;break;case"PRELOAD-HINT":var ne=new v(R);p.preloadHint=ne;break;case"RENDITION-REPORT":var ie=new v(R);p.renditionReports=p.renditionReports||[],p.renditionReports.push(ie);break;default:l.b.warn("line parsed but not handled: "+o)}}}S&&!S.relurl?(m.pop(),y-=S.duration,p.partList&&(p.fragmentHint=S)):p.partList&&(E(A,S),A.cc=_,p.fragmentHint=A);var ae=m.length,re=m[0],se=m[ae-1];if((y+=p.skippedSegments*p.targetduration)>0&&ae&&se){p.averagetargetduration=y/ae;var oe=se.sn;p.endSN="initSegment"!==oe?oe:0,re&&(p.startCC=re.cc,re.initSegment||p.fragments.every((function(e){return e.relurl&&(t=e.relurl,T.test(null!=(n=null===(a=i.parseURL(t))||void 0===a?void 0:a.path)?n:""));var t,n,a}))&&(l.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(A=new c.b(r,t)).relurl=se.relurl,A.level=n,A.sn="initSegment",re.initSegment=A,p.needSidxRanges=!0))}else p.endSN=0,p.startCC=0;return p.fragmentHint&&(y+=p.fragmentHint.duration),p.totalduration=y,p.endCC=_,I>0&&function(e,t){for(var n=e[t],i=t;i--;){var a=e[i];if(!a)return;a.programDateTime=n.programDateTime-1e3*a.duration,n=a}}(m,I),p},e}();function S(e,t){["video","audio","text"].forEach((function(n){var i=e.filter((function(e){return function(e,t){var n=g[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(i.length){var a=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=a.length>0?a[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}function A(e,t,n){var i=t[n];i&&(e[n]=i)}function E(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(a.a)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var I=n(4);function C(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}var k=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(r.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(r.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,a=new(n||i)(t);return e.loader=a,this.loaders[e.type]=a,a},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:I.a.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,i=t.level,a=t.url,r=t.deliveryDirectives;this.load({id:n,groupId:null,level:i,responseType:"text",type:I.a.LEVEL,url:a,deliveryDirectives:r})},t.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,a=t.url,r=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:I.a.AUDIO_TRACK,url:a,deliveryDirectives:r})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,a=t.url,r=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:I.a.SUBTITLE_TRACK,url:a,deliveryDirectives:r})},t.load=function(e){var t,n,i,a,r,s,o=this.hls.config,u=this.getInternalLoader(e);if(u){var c=u.context;if(c&&c.url===e.url)return void l.b.trace("[playlist-loader]: playlist request ongoing");l.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),u.abort()}switch(e.type){case I.a.MANIFEST:n=o.manifestLoadingMaxRetry,i=o.manifestLoadingTimeOut,a=o.manifestLoadingRetryDelay,r=o.manifestLoadingMaxRetryTimeout;break;case I.a.LEVEL:case I.a.AUDIO_TRACK:case I.a.SUBTITLE_TRACK:n=0,i=o.levelLoadingTimeOut;break;default:n=o.levelLoadingMaxRetry,i=o.levelLoadingTimeOut,a=o.levelLoadingRetryDelay,r=o.levelLoadingMaxRetryTimeout}if(u=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===I.a.LEVEL&&null!==e.level?s=this.hls.levels[e.level].details:e.type===I.a.AUDIO_TRACK&&null!==e.id?s=this.hls.audioTracks[e.id].details:e.type===I.a.SUBTITLE_TRACK&&null!==e.id&&(s=this.hls.subtitleTracks[e.id].details),s)){var d=s.partTarget,h=s.targetduration;d&&h&&(i=Math.min(1e3*Math.max(3*d,.8*h),i))}var f={timeout:i,maxRetry:n,retryDelay:a,maxRetryDelay:r,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(e,f,p)},t.loadsuccess=function(e,t,n,i){if(void 0===i&&(i=null),n.isSidxRequest)return this.handleSidxRequest(e,n),void this.handlePlaylistLoaded(e,t,n,i);this.resetInternalLoader(n.type);var a=e.data;0===a.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,n,i):this.handleMasterPlaylist(e,t,n,i)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},t.loaderror=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!1,e)},t.loadtimeout=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!0)},t.handleMasterPlaylist=function(e,t,n,i){var a=this.hls,s=e.data,o=C(e,n),u=_.parseMasterPlaylist(s,o),c=u.levels,d=u.sessionData;if(c.length){var h=c.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),f=c.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),p=_.parseMasterPlaylistMedia(s,o,"AUDIO",h),m=_.parseMasterPlaylistMedia(s,o,"SUBTITLES",f),g=_.parseMasterPlaylistMedia(s,o,"CLOSED-CAPTIONS");p.length&&(p.some((function(e){return!e.url}))||!c[0].audioCodec||c[0].attrs.AUDIO||(l.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new v({}),bitrate:0,url:""}))),a.trigger(r.a.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:m,captions:g,url:o,stats:t,networkDetails:i,sessionData:d})}else this.handleManifestParsingError(e,n,"no level found in manifest",i)},t.handleTrackOrLevelPlaylist=function(e,t,n,i){var o=this.hls,l=n.id,u=n.level,c=n.type,d=C(e,n),h=Object(a.a)(l)?l:0,f=Object(a.a)(u)?u:h,p=function(e){switch(e.type){case I.a.AUDIO_TRACK:return I.b.AUDIO;case I.a.SUBTITLE_TRACK:return I.b.SUBTITLE;default:return I.b.MAIN}}(n),m=_.parseLevelPlaylist(e.data,d,f,p,h);if(m.fragments.length){if(c===I.a.MANIFEST){var g={attrs:new v({}),bitrate:0,details:m,name:"",url:d};o.trigger(r.a.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:t,networkDetails:i,sessionData:null})}if(t.parsing.end=performance.now(),m.needSidxRanges){var x,b=null===(x=m.fragments[0].initSegment)||void 0===x?void 0:x.url;this.load({url:b,isSidxRequest:!0,type:c,level:u,levelDetails:m,id:l,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=m,this.handlePlaylistLoaded(e,t,n,i)}else o.trigger(r.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},t.handleSidxRequest=function(e,t){var n=Object(u.g)(new Uint8Array(e.data));if(n){var i=n.references,a=t.levelDetails;i.forEach((function(e,t){var i=e.info,r=a.fragments[t];0===r.byteRange.length&&r.setByteRange(String(1+i.end-i.start)+"@"+String(i.start)),r.initSegment&&r.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}))}},t.handleManifestParsingError=function(e,t,n,i){this.hls.trigger(r.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:t.type===I.a.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:i})},t.handleNetworkError=function(e,t,n,i){void 0===n&&(n=!1),l.b.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var a=s.a.UNKNOWN,o=!1,u=this.getInternalLoader(e);switch(e.type){case I.a.MANIFEST:a=n?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,o=!0;break;case I.a.LEVEL:a=n?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,o=!1;break;case I.a.AUDIO_TRACK:a=n?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,o=!1;break;case I.a.SUBTITLE_TRACK:a=n?s.a.SUBTITLE_TRACK_LOAD_TIMEOUT:s.a.SUBTITLE_LOAD_ERROR,o=!1}u&&this.resetInternalLoader(e.type);var c={type:s.b.NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:u,context:e,networkDetails:t};i&&(c.response=i),this.hls.trigger(r.a.ERROR,c)},t.handlePlaylistLoaded=function(e,t,n,i){var a=n.type,s=n.level,o=n.id,l=n.groupId,u=n.loader,c=n.levelDetails,d=n.deliveryDirectives;if(null!=c&&c.targetduration){if(u)switch(c.live&&(u.getCacheAge&&(c.ageHeader=u.getCacheAge()||0),u.getCacheAge&&!isNaN(c.ageHeader)||(c.ageHeader=0)),a){case I.a.MANIFEST:case I.a.LEVEL:this.hls.trigger(r.a.LEVEL_LOADED,{details:c,level:s||0,id:o||0,stats:t,networkDetails:i,deliveryDirectives:d});break;case I.a.AUDIO_TRACK:this.hls.trigger(r.a.AUDIO_TRACK_LOADED,{details:c,id:o||0,groupId:l||"",stats:t,networkDetails:i,deliveryDirectives:d});break;case I.a.SUBTITLE_TRACK:this.hls.trigger(r.a.SUBTITLE_TRACK_LOADED,{details:c,id:o||0,groupId:l||"",stats:t,networkDetails:i,deliveryDirectives:d})}}else this.handleManifestParsingError(e,n,"invalid target duration",i)},e}(),L=function(){function e(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){this.hls.on(r.a.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function(){this.hls.off(r.a.KEY_LOADING,this.onKeyLoading)},t.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},t.onKeyLoading=function(e,t){var n=t.frag,i=n.type,a=this.loaders[i];if(n.decryptdata){var s=n.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;if(a&&(l.b.warn("abort previous key loader for type:"+i),a.abort()),!s)return void l.b.warn("key uri is falsy");var u=o.loader,c=n.loader=this.loaders[i]=new u(o);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:n,responseType:"arraybuffer"},h={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(d,h,f)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.a.KEY_LOADED,{frag:n}))}else l.b.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.a.KEY_LOADED,{frag:i})):l.b.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(r.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(r.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}();function O(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function P(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){l.b.debug("[texttrack-utils]: "+n);var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}"disabled"===n&&(e.mode=n)}function R(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function D(e,t,n){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=function(e,t,n){var i=[],a=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,a=n;i<=a;){var r=Math.floor((a+i)/2);if(t<e[r].startTime)a=r-1;else{if(!(t>e[r].startTime&&i<n))return r;i=r+1}}return e[i].startTime-t<t-e[a].startTime?i:a}(e,t);if(a>-1)for(var r=a,s=e.length;r<s;r++){var o=e[r];if(o.startTime>=t&&o.endTime<=n)i.push(o);else if(o.startTime>n)return i}return i}(e.cues,t,n),r=0;r<a.length;r++)e.removeCue(a[r]);"disabled"===i&&(e.mode=i)}var N=n(7),B=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners()},t._registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(R(this.id3Track),this.id3Track=null,this.media=null)},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return O(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=t.frag,i=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var a=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,r=0;r<i.length;r++){var s=N.c(i[r].data);if(s){var o=i[r].pts,l=r<i.length-1?i[r+1].pts:n.end;l-o<=0&&(l=o+.25);for(var u=0;u<s.length;u++){var c=s[u];if(!N.e(c)){var d=new a(o,l,"");d.value=c,this.id3Track.addCue(d)}}}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,a=t.type;if(!a||"audio"===a){var r=this.id3Track;r&&D(r,n,i)}},e}();function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j,F=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t,n,i=e.prototype;return i.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},i.registerListeners=function(){this.hls.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(r.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(r.a.ERROR,this.onError,this)},i.unregisterListeners=function(){this.hls.off(r.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(r.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(r.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(r.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(r.a.ERROR,this.onError)},i.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},i.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},i.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},i.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},i.onError=function(e,t){t.details===s.a.BUFFER_STALLED_ERROR&&(this.stallCount++,l.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},i.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var i=this.config,a=i.lowLatencyMode,r=i.maxLiveSyncPlaybackRate;if(a&&1!==r){var s=this.targetLatency;if(null!==s){var o=n-s,l=o<Math.min(this.maxLatency,s+t.targetduration);if(t.live&&l&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,r)),c=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,c))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},i.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},i.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},t=e,(n=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,i=e.targetduration,a=this.config,r=a.liveSyncDuration,s=a.liveSyncDurationCount,o=a.lowLatencyMode,l=this.hls.userConfig,u=o&&n||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==r?r:s*i);var c=i;return u+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var i=n.edge,a=e-t-this.edgeStalled,r=i-n.totalduration,s=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(r,a),s)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return n?e.buffered.end(n-1):t.edge-this.currentTime}}])&&U(t.prototype,n),e}();function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.No="",e.Yes="YES",e.v2="v2"}(j||(j={}));var G=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.toString()},e}(),H=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}var t,n;return t=e,(n=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}])&&Y(t.prototype,n),e}();function Z(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function K(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}function V(e,t){var n=t.startPTS;if(Object(a.a)(n)){var i,r=0;t.sn>e.sn?(r=n-e.start,i=e):(r=e.start-n,i=t),i.duration!==r&&(i.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function z(e,t,n,i,r,s){i-n<=0&&(l.b.warn("Fragment should have a positive duration",t),i=n+t.duration,s=r+t.duration);var o=n,u=i,c=t.startPTS,d=t.endPTS;if(Object(a.a)(c)){var h=Math.abs(c-n);Object(a.a)(t.deltaPTS)?t.deltaPTS=Math.max(h,t.deltaPTS):t.deltaPTS=h,o=Math.max(n,c),n=Math.min(n,c),r=Math.min(r,t.startDTS),u=Math.min(i,d),i=Math.max(i,d),s=Math.max(s,t.endDTS)}t.duration=i-n;var f=n-t.start;t.appendedPTS=i,t.start=t.startPTS=n,t.maxStartPTS=o,t.startDTS=r,t.endPTS=i,t.minEndPTS=u,t.endDTS=s;var p,m=t.sn;if(!e||m<e.startSN||m>e.endSN)return 0;var v=m-e.startSN,g=e.fragments;for(g[v]=t,p=v;p>0;p--)V(g[p],g[p-1]);for(p=v;p<g.length-1;p++)V(g[p],g[p+1]);return e.fragmentHint&&V(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,f}function W(e,t){for(var n=null,i=e.fragments,r=i.length-1;r>=0;r--){var s=i[r].initSegment;if(s){n=s;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var o,u=0;if(function(e,t,n){for(var i=t.skippedSegments,a=Math.max(e.startSN,t.startSN)-t.startSN,r=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=a;u<=r;u++){var c=l[s+u],d=o[u];i&&!d&&u<i&&(d=t.fragments[u]=c),c&&d&&n(c,d)}}(e,t,(function(e,i){e.relurl&&(u=e.cc-i.cc),Object(a.a)(e.startPTS)&&Object(a.a)(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.appendedPTS=e.appendedPTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(o=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,i.urlId=e.urlId,e.initSegment&&(i.initSegment=e.initSegment,n=e.initSegment)})),n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=n)||void 0===t?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments&&(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed)){l.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var c=t.skippedSegments;c--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}var d=t.fragments;if(u){l.b.warn("discontinuity sliding from playlist, take drift into account");for(var h=0;h<d.length;h++)d[h].cc+=u}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,n){if(e&&t)for(var i=0,a=0,r=e.length;a<=r;a++){var s=e[a],o=t[a+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):i--}}(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),o?z(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):q(e,t),d.length&&(t.totalduration=t.edge-d[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var f=t.advancedDateTime;if(t.advanced&&f){var p=t.edge;t.driftStart||(t.driftStartTime=f,t.driftStart=p),t.driftEndTime=f,t.driftEnd=p}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function q(e,t){var n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;n<0||n>=i.length||X(t,i[n].start)}function X(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}var Q=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=l.b.log.bind(l.b,t+":"),this.warn=l.b.warn.bind(l.b,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===s.b.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n)for(var i=0;i<n.length;i++){var r=n[i],s=""+r.URI;if(s===e.substr(-s.length)){var o=parseInt(r["LAST-MSN"]),l=parseInt(r["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var u=Math.min(t.age-t.partTarget,t.targetduration);void 0!==l&&u>t.partTarget&&(l+=1)}if(Object(a.a)(o))return new G(o,Object(a.a)(l)?l:void 0,j.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var i=this,a=t.details,r=t.stats,s=r.loading.end?Math.max(0,self.performance.now()-r.loading.end):0;if(a.advancedDateTime=Date.now()-s,a.live||null!=n&&n.live){if(a.reloaded(n),n&&this.log("live playlist "+e+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),n&&a.fragments.length>0&&W(n,a),!this.canLoad||!a.live)return;var o,l=void 0,u=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var c=this.hls.config.lowLatencyMode,d=a.lastPartSn,h=a.endSN,f=a.lastPartIndex,p=d===h;-1!==f?(l=p?h+1:d,u=p?c?0:f:f+1):l=h+1;var m=a.age,v=m+a.ageHeader,g=Math.min(v-a.partTarget,1.5*a.targetduration);if(g>0){if(n&&g>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+g+" with playlist age: "+a.age),g=0;else{var x=Math.floor(g/a.targetduration);l+=x,void 0!==u&&(u+=Math.round(g%a.targetduration/a.partTarget)),this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+g+" skip sn "+x+" to part "+u)}a.tuneInGoal=g}if(o=this.getDeliveryDirectives(a,t.deliveryDirectives,l,u),c||!p)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(a,t.deliveryDirectives,l,u);var b=function(e,t){var n,i=1e3*e.levelTargetDuration,a=i/2,r=e.age,s=r>0&&r<3*i,o=t.loading.end-t.loading.start,l=e.availabilityDelay;if(!1===e.updated)if(s){var u=333*e.misses;n=Math.max(Math.min(a,2*o),u),e.availabilityDelay=(e.availabilityDelay||0)+n}else n=a;else s?(l=Math.min(l||i/2,r),e.availabilityDelay=l,n=l+i-r):n=i-o;return Math.round(n)}(a,r);void 0!==l&&a.canBlockReload&&(b-=a.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(o)}),b)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,i){var a=function(e,t){var n=e.canSkipUntil,i=e.canSkipDateRanges,a=e.endSN;return n&&(void 0!==t?t-a:0)<n?i?j.v2:j.Yes:j.No}(e,n);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,a=j.No),new G(n,i,a)},t.retryLoadingOrFail=function(e){var t,n=this,i=this.hls.config,a=this.retryCount<i.levelLoadingMaxRetry;if(a)if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var r=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),r),this.warn("retry playlist loading #"+this.retryCount+" in "+r+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return a},e}();function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function $(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te,ne=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),ie=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,ee(t,n);var a,o,l=i.prototype;return l._registerListeners=function(){var e=this.hls;e.on(r.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(r.a.FRAG_LOADED,this.onFragLoaded,this),e.on(r.a.ERROR,this.onError,this)},l._unregisterListeners=function(){var e=this.hls;e.off(r.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(r.a.FRAG_LOADED,this.onFragLoaded,this),e.off(r.a.ERROR,this.onError,this)},l.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},l.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),e.prototype.startLoad.call(this)},l.onManifestLoaded=function(e,t){var n,i,a=[],o=[],l=[],u={},c=!1,d=!1,h=!1;if(t.levels.forEach((function(e){var t=e.attrs;c=c||!(!e.width||!e.height),d=d||!!e.videoCodec,h=h||!!e.audioCodec,ne&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var n=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(i=u[n])?i.url.push(e.url):(i=new H(e),u[n]=i,a.push(i)),t&&(t.AUDIO&&Z(i,"audio",t.AUDIO),t.SUBTITLES&&Z(i,"text",t.SUBTITLES))})),(c||d)&&h&&(a=a.filter((function(e){var t=e.videoCodec,n=e.width,i=e.height;return!!t||!(!n||!i)}))),a=a.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||x(t,"audio"))&&(!n||x(n,"video"))})),t.audioTracks&&K(o=t.audioTracks.filter((function(e){return!e.audioCodec||x(e.audioCodec,"audio")}))),t.subtitles&&K(l=t.subtitles),a.length>0){n=a[0].bitrate,a.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=a;for(var f=0;f<a.length;f++)if(a[f].bitrate===n){this._firstLevel=f,this.log("manifest loaded, "+a.length+" level(s) found, first bitrate: "+n);break}var p=h&&!d,m={levels:a,audioTracks:o,subtitleTracks:l,firstLevel:this._firstLevel,stats:t.stats,audio:h,video:d,altAudio:!p&&o.some((function(e){return!!e.url}))};this.hls.trigger(r.a.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},l.onError=function(t,n){if(e.prototype.onError.call(this,t,n),!n.fatal){var i=n.context,a=this._levels[this.currentLevelIndex];if(i&&(i.type===I.a.AUDIO_TRACK&&a.audioGroupIds&&i.groupId===a.audioGroupIds[a.urlId]||i.type===I.a.SUBTITLE_TRACK&&a.textGroupIds&&i.groupId===a.textGroupIds[a.urlId]))this.redundantFailover(this.currentLevelIndex);else{var r,o=!1,l=!0;switch(n.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(n.frag){var u=this._levels[n.frag.level];u?(u.fragmentError++,u.fragmentError>this.hls.config.fragLoadingMaxRetry&&(r=n.frag.level)):r=n.frag.level}break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(l=!1),r=i.level),o=!0;break;case s.a.REMUX_ALLOC_ERROR:r=n.level,o=!0}void 0!==r&&this.recoverLevel(n,r,o,l)}}},l.recoverLevel=function(e,t,n,i){var a=e.details,r=this._levels[t];if(r.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(i){var s=r.url.length;if(s>1&&r.loadError<s)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var o=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(a+": switch to "+o),e.levelRetry=!0,this.hls.nextAutoLevel=o)}}},l.redundantFailover=function(e){var t=this._levels[e],n=t.url.length;if(n>1){var i=(t.urlId+1)%n;this.warn("Switching to redundant URL-id "+i),this._levels.forEach((function(e){e.urlId=i})),this.level=e}},l.onFragLoaded=function(e,t){var n=t.frag;if(void 0!==n&&n.type===I.b.MAIN){var i=this._levels[n.level];void 0!==i&&(i.fragmentError=0,i.loadError=0)}},l.onLevelLoaded=function(e,t){var n,i,a=t.level,r=t.details,s=this._levels[a];if(!s)return this.warn("Invalid level index "+a),void(null!==(i=t.deliveryDirectives)&&void 0!==i&&i.skip&&(r.deltaUpdateFailed=!0));a===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(a,t,s.details)):null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(r.deltaUpdateFailed=!0)},l.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,a=this.hls.audioTracks[t.id].groupId,r=0;r<n.audioGroupIds.length;r++)if(n.audioGroupIds[r]===a){i=r;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},l.loadPlaylist=function(e){var t=this.currentLevelIndex,n=this._levels[t];if(this.canLoad&&n&&n.url.length>0){var i=n.urlId,a=n.url[i];if(e)try{a=e.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+i+" "+a),this.clearTimer(),this.hls.trigger(r.a.LEVEL_LOADING,{url:a,level:t,id:i,deliveryDirectives:e||null})}},l.removeLevel=function(e,t){var n=function(e,n){return n!==t},i=this._levels.filter((function(i,a){return a!==e||i.url.length>1&&void 0!==t&&(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),i.urlId=0,!0)})).map((function(e,t){var n=e.details;return null!=n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=i,this.hls.trigger(r.a.LEVELS_UPDATED,{levels:i})},a=i,(o=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==e||null===(t=n[e])||void 0===t||!t.details)){if(e<0||e>=n.length){var i=e<0;if(this.hls.trigger(r.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,n.length-1)}this.clearTimer();var a=this.currentLevelIndex,o=n[a],l=n[e];this.log("switching to level "+e+" from "+a),this.currentLevelIndex=e;var u=J({},l,{level:e,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(r.a.LEVEL_SWITCHING,u);var c=l.details;if(!c||c.live){var d=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&$(a.prototype,o),i}(Q);!function(e){e.NOT_LOADED="NOT_LOADED",e.BACKTRACKED="BACKTRACKED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(te||(te={}));var ae=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(r.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(r.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(r.a.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.a.BUFFER_APPENDED,this.onBufferAppended,this),e.off(r.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(r.a.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===I.b.MAIN){var n=this.activeFragment,i=this.activeParts;if(!n)return null;if(i)for(var a=i.length;a--;){var r=i[a],s=r?r.end:n.appendedPTS;if(r.start<=e&&void 0!==s&&e<=s)return a>9&&(this.activeParts=i.slice(a-9)),r}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),a=i.length;a--;){var r=n[i[a]];if((null==r?void 0:r.body.type)===t&&r.buffered){var s=r.body;if(s.start<=e&&e<=s.end)return s}}return null},t.detectEvictedFragments=function(e,t,n){var i=this;Object.keys(this.fragments).forEach((function(a){var r=i.fragments[a];if(r)if(r.buffered){var s=r.range[e];s&&s.time.some((function(e){var n=!i.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&i.removeFragment(r.body),n}))}else r.body.type===n&&i.removeFragment(r.body)}))},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,i=e.frag,a=e.part;if(n&&"initSegment"!==i.sn){var r=se(i),s=this.fragments[r];s&&(Object.keys(n).forEach((function(e){var r=i.elementaryStreams[e];if(r){var o=n[e],l=null!==a||!0===r.partial;s.range[e]=t.getBufferedTimes(i,a,l,o)}})),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},t.fragBuffered=function(e){var t=se(e),n=this.fragments[t];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,n,i){for(var a={time:[],partial:n},r=t?t.start:e.start,s=t?t.end:e.end,o=e.minEndPTS||s,l=e.maxStartPTS||r,u=0;u<i.length;u++){var c=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=c&&o<=d){a.time.push({startPTS:Math.max(r,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(r<d&&s>c)a.partial=!0,a.time.push({startPTS:Math.max(r,i.start(u)),endPTS:Math.min(s,i.end(u))});else if(s<=c)break}return a},t.getPartialFragment=function(e){var t,n,i,a=null,r=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var u=o[l];u&&re(u)&&(n=u.body.start-s,i=u.body.end+s,e>=n&&e<=i&&(t=Math.min(e-n,i-e),r<=t&&(a=u.body,r=t)))})),a},t.getState=function(e){var t=se(e),n=this.fragments[t];return n?n.buffered?re(n)?te.PARTIAL:te.OK:n.backtrack?te.BACKTRACKED:te.APPENDING:te.NOT_LOADED},t.backtrack=function(e,t){var n=se(e),i=this.fragments[n];if(!i||i.backtrack)return null;var a=i.backtrack=t||i.loaded;return i.loaded=null,a},t.getBacktrackData=function(e){var t=se(e),n=this.fragments[t];if(n){var i,a=n.backtrack;if(null!=a&&null!==(i=a.payload)&&void 0!==i&&i.byteLength)return a;this.removeFragment(e)}return null},t.isTimeBuffered=function(e,t,n){for(var i,a,r=0;r<n.length;r++){if(i=n.start(r)-this.bufferPadding,a=n.end(r)+this.bufferPadding,e>=i&&t<=a)return!0;if(t<=i)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!i){var a=se(n);this.fragments[a]={body:n,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,i=t.frag,a=t.part,r=t.timeRanges;if(i.type===I.b.MAIN)if(this.activeFragment=i,a){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(a)}else this.activeParts=null;this.timeRanges=r,Object.keys(r).forEach((function(e){var t=r[e];if(n.detectEvictedFragments(e,t),!a)for(var s=0;s<t.length;s++)i.appendedPTS=Math.max(t.end(s),i.appendedPTS||0)}))},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=se(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,n){var i=this;Object.keys(this.fragments).forEach((function(a){var r=i.fragments[a];if(r&&r.buffered){var s=r.body;s.type===n&&s.start<t&&s.end>e&&i.removeFragment(s)}}))},t.removeFragment=function(e){var t=se(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function re(e){var t,n;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(n=e.range.audio)||void 0===n?void 0:n.partial))}function se(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}var oe=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}(),le={length:0,start:function(){return 0},end:function(){return 0}},ue=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var i=e.getBuffered(t),a=0;a<i.length;a++)if(n>=i.start(a)&&n<=i.end(a))return!0}catch(e){}return!1},e.bufferInfo=function(t,n,i){try{if(t){var a,r=e.getBuffered(t),s=[];for(a=0;a<r.length;a++)s.push({start:r.start(a),end:r.end(a)});return this.bufferedInfo(s,n,i)}}catch(e){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var i=[];if(n)for(var a=0;a<e.length;a++){var r=i.length;if(r){var s=i[r-1].end;e[a].start-s<n?e[a].end>s&&(i[r-1].end=e[a].end):i.push(e[a])}else i.push(e[a])}else i=e;for(var o,l=0,u=t,c=t,d=0;d<i.length;d++){var h=i[d].start,f=i[d].end;if(t+n>=h&&t<f)u=h,l=(c=f)-t;else if(t+n<h){o=h;break}}return{len:l,start:u||0,end:c||0,nextStart:o}},e.getBuffered=function(e){try{return e.buffered}catch(e){return l.b.log("failed to get media.buffered",e),le}},e}(),ce=function(e,t,n,i,a,r){void 0===i&&(i=0),void 0===a&&(a=-1),void 0===r&&(r=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=a,this.partial=r};function de(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function he(e,t){for(var n=t.fragments,i=0,a=n.length;i<a;i++)de(n[i],e);t.fragmentHint&&de(t.fragmentHint,e),t.alignedSliding=!0}function fe(e,t,n){t&&(function(e,t,n){if(function(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){var i=function(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var a=function(e,t){for(var n=null,i=0,a=e.length;i<a;i++){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}(n,i[0].cc);if(a&&(!a||a.startPTS))return a;l.b.log("No frag in previous level to align on")}else l.b.log("No fragments to align")}(n.details,t);i&&Object(a.a)(i.start)&&(l.b.log("Adjusting PTS using last level due to CC increase within current level "+t.url),he(i.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&function(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,i=e.fragments[0].programDateTime,r=(i-n)/1e3+t.fragments[0].start;r&&Object(a.a)(r)&&(l.b.log("Adjusting PTS using programDateTime delta "+(i-n)+"ms, sliding:"+r.toFixed(3)+" "+e.url+" "),he(r,e))}}(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||q(t.details,n))}function pe(e,t){var n=e.programDateTime;if(n){var i=(n-t)/1e3;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function me(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime-1e3*t.fragments[0].start;e.fragments.forEach((function(e){pe(e,n)})),e.fragmentHint&&pe(e.fragmentHint,n),e.alignedSliding=!0}}var ve=function(e,t){for(var n=0,i=e.length-1,a=null,r=null;n<=i;){var s=t(r=e[a=(n+i)/2|0]);if(s>0)n=a+1;else{if(!(s<0))return r;i=a-1}}return null};function ge(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=null;return e?a=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(a=t[0]),a&&0===xe(n,i,a)?a:ve(t,xe.bind(null,n,i))||a}function xe(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function be(e,t,n){var i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}function ye(e){var t="function"==typeof Map?new Map:void 0;return(ye=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Me(e,arguments,_e(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Te(i,e)})(e)}function Me(e,t,n){return(Me=we()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Te(a,n.prototype),a}).apply(null,arguments)}function we(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=Math.pow(2,17),Ae=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,i=e.url;if(!i)return Promise.reject(new Ie({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,r=a.fLoader,o=a.loader;return new Promise((function(i,l){n.loader&&n.loader.destroy();var u=n.loader=e.loader=r?new r(a):new o(a),c=Ee(e),d={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:Se};e.stats=u.stats,u.load(c,d,{onSuccess:function(t,a,r,s){n.resetLoader(e,u),i({frag:e,part:null,payload:t.data,networkDetails:s})},onError:function(t,i,a){n.resetLoader(e,u),l(new Ie({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,i,a){n.resetLoader(e,u),l(new Ie({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:function(t,i,a){n.resetLoader(e,u),l(new Ie({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:a}))},onProgress:function(n,i,a,r){t&&t({frag:e,part:null,payload:a,networkDetails:r})}})}))},t.loadPart=function(e,t,n){var i=this;this.abort();var a=this.config,r=a.fLoader,o=a.loader;return new Promise((function(l,u){i.loader&&i.loader.destroy();var c=i.loader=e.loader=r?new r(a):new o(a),d=Ee(e,t),h={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:Se};t.stats=c.stats,c.load(d,h,{onSuccess:function(a,r,s,o){i.resetLoader(e,c),i.updateStatsFromPart(e,t);var u={frag:e,part:t,payload:a.data,networkDetails:o};n(u),l(u)},onError:function(n,a,r){i.resetLoader(e,c),u(new Ie({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:r}))},onAbort:function(n,a,r){e.stats.aborted=t.stats.aborted,i.resetLoader(e,c),u(new Ie({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:r}))},onTimeout:function(n,a,r){i.resetLoader(e,c),u(new Ie({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:r}))}})}))},t.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,a=i.total;if(n.loaded+=i.loaded,a){var r=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/a),r),o=(r-s)*Math.round(n.loaded/s);n.total=n.loaded+o}else n.total=Math.max(n.loaded,n.total);var l=n.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function Ee(e,t){void 0===t&&(t=null);var n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},r=n.byteRangeStartOffset,s=n.byteRangeEndOffset;return Object(a.a)(r)&&Object(a.a)(s)&&(i.rangeStart=r,i.rangeEnd=s),i}var Ie=function(e){var t,n;function i(t){for(var n,i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];return(n=e.call.apply(e,[this].concat(a))||this).data=void 0,n.data=t,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Te(t,n),i}(ye(Error)),Ce=n(15),ke=function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t};function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe="STOPPED",Re="IDLE",De="KEY_LOADING",Ne="FRAG_LOADING",Be="FRAG_LOADING_WAITING_RETRY",Ue="WAITING_TRACK",je="PARSING",Fe="PARSED",Ye="BACKTRACKING",Ge="ENDED",He="ERROR",Ze="WAITING_INIT_PTS",Ke="WAITING_LEVEL",Ve=function(e){var t,n;function i(t,n,i){var a;return(a=e.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=Pe,a.media=void 0,a.mediaBuffer=void 0,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.loadedmetadata=!1,a.fragLoadError=0,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.logPrefix=i,a.log=l.b.log.bind(l.b,i+":"),a.warn=l.b.warn.bind(l.b,i+":"),a.hls=t,a.fragmentLoader=new Ae(t.config),a.fragmentTracker=n,a.config=t.config,a.decrypter=new Ce.a(t,t.config),t.on(r.a.KEY_LOADED,a.onKeyLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Oe(t,n);var o,c,d=i.prototype;return d.doTick=function(){this.onTickEnd()},d.onTickEnd=function(){},d.startLoad=function(e){},d.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Pe},d._streamEnded=function(e,t){var n=this.fragCurrent,i=this.fragmentTracker;if(!t.live&&n&&n.sn>=t.endSN&&!e.nextStart){var a=t.partList;if(null!=a&&a.length){var r=a[a.length-1];return ue.isBuffered(this.media,r.start+r.duration/2)}var s=i.getState(n);return s===te.PARTIAL||s===te.OK}return!1},d.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Pe&&this.startLoad(i.startPosition)},d.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,r=this.state,s=n?n.currentTime:0,o=ue.bufferInfo(i||n,s,e.maxBufferHole);if(this.log("media seeking to "+(Object(a.a)(s)?s.toFixed(3):s)+", state: "+r),r===Ge)this.resetLoadingState();else if(t&&!o.len){var l=e.maxFragLookUpTolerance,u=t.start-l,c=s>t.start+t.duration+l;(s<u||c)&&(c&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}n&&(this.lastCurrentTime=s),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},d.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},d.onKeyLoaded=function(e,t){if(this.state===De&&t.frag===this.fragCurrent&&this.levels){this.state=Re;var n=this.levels[t.frag.level].details;n&&this.loadFragment(t.frag,n,t.frag.start)}},d.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},d.onHandlerDestroyed=function(){this.state=Pe,this.hls.off(r.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},d.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=De,this.fragCurrent=e,this.hls.trigger(r.a.KEY_LOADING,{frag:e})},d.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},d._loadFragForPlayback=function(e,t,n){var i=this;this._doFragLoad(e,t,n,(function(t){if(i.fragContextChanged(e))return i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void i.fragmentTracker.removeFragment(e);e.stats.chunkCount++,i._handleFragmentLoadProgress(t)})).then((function(t){if(t){i.fragLoadError=0;var n=i.state;if(!i.fragContextChanged(e))return"payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(r.a.FRAG_LOADED,t),i.state===Ye)?(i.fragmentTracker.backtrack(e,t),void i.resetFragmentLoading(e)):void i._handleFragmentLoadComplete(t);(n===Ne||n===Ye||!i.fragCurrent&&n===je)&&(i.fragmentTracker.removeFragment(e),i.state=Re)}})).catch((function(t){i.warn(t),i.resetFragmentLoading(e)}))},d.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var i={startOffset:e,endOffset:t,type:n};this.fragLoadError=0,this.hls.trigger(r.a.BUFFER_FLUSHING,i)}},d._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then((function(n){if(!n||t.fragContextChanged(e)||!t.levels)throw new Error("init load aborted");return n})).then((function(n){var i=t.hls,a=n.payload,s=e.decryptdata;if(a&&a.byteLength>0&&s&&s.key&&s.iv&&"AES-128"===s.method){var o=self.performance.now();return t.decrypter.webCryptoDecrypt(new Uint8Array(a),s.key.buffer,s.iv.buffer).then((function(t){var a=self.performance.now();return i.trigger(r.a.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:a}}),n.payload=t,n}))}return n})).then((function(n){var i=t.fragCurrent,a=t.hls,s=t.levels;if(!s)throw new Error("init load aborted, missing levels");s[e.level].details;var o=e.stats;t.state=Re,t.fragLoadError=0,e.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===i&&a.trigger(r.a.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:e.type}),t.tick()})).catch((function(n){t.warn(n),t.resetFragmentLoading(e)}))},d.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},d.fragBufferedComplete=function(e,t){var n=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+ke(ue.getBuffered(n))),this.state=Re,this.tick()},d._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,i=e.part,a=e.partsLoaded,r=!a||0===a.length||a.some((function(e){return!e})),s=new ce(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!r);t.flush(s)}},d._handleFragmentLoadProgress=function(e){},d._doFragLoad=function(e,t,n,i){var s=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var o=t.partList;if(o&&i){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var l=this.getNextPart(o,e,n);if(l>-1){var u=o[l];return this.log("Loading part sn: "+e.sn+" p: "+u.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+l+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=Ne,this.hls.trigger(r.a.FRAG_LOADING,{frag:e,part:o[l],targetBufferTime:n}),this.doFragPartsLoad(e,o,l,i).catch((function(e){return s.handleFragLoadError(e)}))}if(!e.url||this.loadedEndOfParts(o,n))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),Object(a.a)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ne,this.hls.trigger(r.a.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragmentLoader.load(e,i).catch((function(e){return s.handleFragLoadError(e)}))},d.doFragPartsLoad=function(e,t,n,i){var a=this;return new Promise((function(s,o){var l=[];!function n(u){var c=t[u];a.fragmentLoader.loadPart(e,c,i).then((function(i){l[c.index]=i;var o=i.part;a.hls.trigger(r.a.FRAG_LOADED,i);var d=t[u+1];if(!d||d.fragment!==e)return s({frag:e,part:o,partsLoaded:l});n(u+1)})).catch(o)}(n)}))},d.handleFragLoadError=function(e){var t=e.data;return t&&t.details===s.a.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(r.a.ERROR,t),null},d._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===je){var n=t.frag,i=t.part,a=t.level,r=self.performance.now();n.stats.parsing.end=r,i&&(i.stats.parsing.end=r),this.updateLevelTiming(n,i,a,e.partial)}else this.fragCurrent||(this.state=Re)},d.getCurrentContext=function(e){var t=this.levels,n=e.level,i=e.sn,a=e.part;if(!t||!t[n])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+n+". The current chunk will not be buffered."),null;var r=t[n],s=a>-1?function(e,t,n){if(!e||!e.details)return null;var i=e.details.partList;if(i)for(var a=i.length;a--;){var r=i[a];if(r.index===n&&r.fragment.sn===t)return r}return null}(r,i,a):null,o=s?s.fragment:function(e,t,n){if(!e||!e.details)return null;var i=e.details,a=i.fragments[t-i.startSN];return a||((a=i.fragmentHint)&&a.sn===t?a:t<i.startSN&&n&&n.sn===t?n:null)}(r,i,this.fragCurrent);return o?{frag:o,part:s,level:r}:null},d.bufferFragmentData=function(e,t,n,i){if(e&&this.state===je){var a=e.data1,s=e.data2,o=a;if(a&&s&&(o=Object(u.a)(a,s)),o&&o.length){var l={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:o};this.hls.trigger(r.a.BUFFER_APPENDING,l),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}}},d.flushBufferGap=function(e){var t=this.media;if(t)if(ue.isBuffered(t,t.currentTime)){var n=t.currentTime,i=ue.bufferInfo(t,n,0),a=e.duration,r=Math.min(2*this.config.maxFragLookUpTolerance,.25*a),s=Math.max(Math.min(e.start-r,i.end-r),n+r);e.start-s>r&&this.flushMainBuffer(s,e.start)}else this.flushMainBuffer(0,e.start)},d.getFwdBufferInfo=function(e,t){var n=this.config,i=this.getLoadPosition();if(!Object(a.a)(i))return null;var r=ue.bufferInfo(e,i,n.maxBufferHole);if(0===r.len&&void 0!==r.nextStart){var s=this.fragmentTracker.getBufferedFrag(i,t);if(s&&r.nextStart<s.end)return ue.bufferInfo(e,i,Math.max(r.nextStart,n.maxBufferHole))}return r},d.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},d.reduceMaxBufferLength=function(e){var t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},d.getNextFragment=function(e,t){var n,i,a=t.fragments,r=a.length;if(!r)return null;var s,o=this.config,l=a[0].start;if(t.live){var u=o.initialLiveManifestSize;if(r<u)return this.warn("Not enough fragments to start playback (have: "+r+", need: "+u+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(t,a),this.startPosition=s?this.hls.liveSyncPosition||s.start:e)}else e<=l&&(s=a[0]);if(!s){var c=o.lowLatencyMode?t.partEnd:t.fragmentEnd;s=this.getFragmentAtPosition(e,c,t)}return null===(n=s)||void 0===n||!n.initSegment||null!==(i=s)&&void 0!==i&&i.initSegment.data||this.bitrateTest||(s=s.initSegment),s},d.getNextPart=function(e,t,n){for(var i=-1,a=!1,r=!0,s=0,o=e.length;s<o;s++){var l=e[s];if(r=r&&!l.independent,i>-1&&n<l.start)break;var u=l.loaded;!u&&(a||l.independent||r)&&l.fragment===t&&(i=s),a=u}return i},d.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},d.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,i=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),i=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(a.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<e.length;++i){var r=e[i];if(be(t,n,r))return r}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){var s=t[r-e.startSN];n.cc===s.cc&&(i=s,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=function(e,t){return ve(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i},d.getFragmentAtPosition=function(e,t,n){var i,a=this.config,r=this.fragPrevious,s=n.fragments,o=n.endSN,l=n.fragmentHint,u=a.maxFragLookUpTolerance,c=!!(a.lowLatencyMode&&n.partList&&l);if(c&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),i=e<t?ge(r,s,e,e>t-u?0:u):s[s.length-1]){var d=i.sn-n.startSN,h=r&&i.level===r.level,f=s[d+1];if(this.fragmentTracker.getState(i)===te.BACKTRACKED){i=null;for(var p=d;s[p]&&this.fragmentTracker.getState(s[p])===te.BACKTRACKED;)i=r?s[p--]:s[--p];i||(i=f)}else r&&i.sn===r.sn&&!c&&h&&(i.sn<o&&this.fragmentTracker.getState(f)!==te.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+f.sn),i=f):i=null)}return i},d.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var i=this.hls.liveSyncPosition,a=n.currentTime,r=e.fragments[0].start,s=e.edge,o=a>=r-t.maxFragLookUpTolerance&&a<=s;if(null!==i&&n.duration>i&&(a<i||!o)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&n.readyState<4||a<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn("Playback: "+a.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),n.currentTime=i))}}},d.alignPlaylists=function(e,t){var n=this.levels,i=this.levelLastLoaded,r=this.fragPrevious,s=null!==i?n[i]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var l=e.fragments[0].start,u=!t,c=e.alignedSliding&&Object(a.a)(l);if(u||!c&&!l){fe(r,s,e);var d=e.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(r?r.sn:"na")+" fragments: "+o),d}return l},d.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},d.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=e.startTimeOffset;Object(a.a)(i)?(n=t+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},d.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},d.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},d.resetFragmentLoading=function(e){this.fragCurrent&&this.fragContextChanged(e)||(this.state=Re)},d.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var n=t.frag;if(n&&n.type===e){this.fragCurrent;var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(n.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=Be}else t.levelRetry?(e===I.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Re):(l.b.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=He)}}},d.afterBufferFlushed=function(e,t,n){if(e){var i=ue.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===Ge&&this.resetLoadingState()}},d.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Re},d.resetLiveStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;if(null!=t&&t.live)return this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},d.updateLevelTiming=function(e,t,n,i){var a=this,s=n.details;Object.keys(e.elementaryStreams).reduce((function(t,o){var l=e.elementaryStreams[o];if(l){var u=l.endPTS-l.startPTS;if(u<=0)return a.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+u+") resetting transmuxer to fallback to playlist timing"),a.resetTransmuxer(),t||!1;var c=i?0:z(s,e,l.startPTS,l.endPTS,l.startDTS,l.endDTS);return a.hls.trigger(r.a.LEVEL_PTS_UPDATED,{details:s,level:n,drift:c,type:o,frag:e,start:l.startPTS,end:l.endPTS}),!0}return t}),!1)?(this.state=Fe,this.hls.trigger(r.a.FRAG_PARSED,{frag:e,part:t})):this.resetLoadingState()},d.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},o=i,(c=[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])&&Le(o.prototype,c),i}(oe);function ze(){return self.MediaSource||self.WebKitMediaSource}function We(){return self.SourceBuffer||self.WebKitSourceBuffer}var qe=n(18),Xe=n(10),Qe=n(14),Je=ze()||{isTypeSupported:function(){return!1}},$e=function(){function e(e,t,n,i){var a=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=t,this.onTransmuxComplete=n,this.onFlush=i;var o=e.config,u=function(t,n){(n=n||{}).frag=a.frag,n.id=a.id,e.trigger(t,n)};this.observer=new Qe.EventEmitter,this.observer.on(r.a.FRAG_DECRYPTED,u),this.observer.on(r.a.ERROR,u);var c={mp4:Je.isTypeSupported("video/mp4"),mpeg:Je.isTypeSupported("audio/mpeg"),mp3:Je.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(o.enableWorker&&"undefined"!=typeof Worker){var h;l.b.log("demuxing in webworker");try{h=this.worker=qe(19),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(t){e.trigger(r.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(t.message+"  ("+t.filename+":"+t.lineno+")")})},h.postMessage({cmd:"init",typeSupported:c,vendor:d,id:t,config:JSON.stringify(o)})}catch(e){l.b.warn("Error in worker:",e),l.b.error("Error while initializing DemuxerWorker, fallback to inline"),h&&self.URL.revokeObjectURL(h.objectURL),this.transmuxer=new Xe.c(this.observer,c,o,d,t),this.worker=null}}else this.transmuxer=new Xe.c(this.observer,c,o,d,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},t.push=function(e,t,n,i,a,r,s,o,u,c){var d,h,f=this;u.transmuxing.start=self.performance.now();var p=this.transmuxer,m=this.worker,v=r?r.start:a.start,g=a.decryptdata,x=this.frag,b=!(x&&a.cc===x.cc),y=!(x&&u.level===x.level),M=x?u.sn-x.sn:-1,w=this.part?u.part-this.part.index:1,T=!y&&(1===M||0===M&&1===w),_=self.performance.now();(y||M||0===a.stats.parsing.start)&&(a.stats.parsing.start=_),!r||!w&&T||(r.stats.parsing.start=_);var S=!(x&&(null===(d=a.initSegment)||void 0===d?void 0:d.url)===(null===(h=x.initSegment)||void 0===h?void 0:h.url)),A=new Xe.b(b,T,o,y,v,S);if(!T||b||S){l.b.log("[transmuxer-interface, "+a.type+"]: Starting new transmux session for sn: "+u.sn+" p: "+u.part+" level: "+u.level+" id: "+u.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+y+"\n        contiguous: "+T+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+v+"\n        initSegmentChange: "+S);var E=new Xe.a(n,i,t,s,c);this.configureTransmuxer(E)}if(this.frag=a,this.part=r,m)m.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:u,state:A},e instanceof ArrayBuffer?[e]:[]);else if(p){var I=p.push(e,g,u,A);Object(Xe.d)(I)?I.then((function(e){f.handleTransmuxComplete(e)})):this.handleTransmuxComplete(I)}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:e});else if(n){var a=n.flush(e);Object(Xe.d)(a)?a.then((function(n){t.handleFlushResult(n,e)})):this.handleFlushResult(a,e)}},t.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}(),et=function(){function e(e,t,n,i){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}var t=e.prototype;return t.destroy=function(){this.hls=this.fragmentTracker=this.media=null},t.poll=function(e){var t=this.config,n=this.media,i=this.stalled,a=n.currentTime,r=n.seeking,s=this.seeking&&!r,o=!this.seeking&&r;if(this.seeking=r,a===e){if((o||s)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&ue.getBuffered(n).length){var u=ue.bufferInfo(n,a,0),c=u.len>0,d=u.nextStart||0;if(c||d){if(r){var h=u.len>2,f=!d||d-a>2&&!this.fragmentTracker.getPartialFragment(a);if(h||f)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var p,m=Math.max(d,u.start||0)-a,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,g=(null==v||null===(p=v.details)||void 0===p?void 0:p.live)?2*v.details.targetduration:2;if(m>0&&m<=g)return void this._trySkipBufferHole(null)}var x=self.performance.now();if(null!==i){var b=x-i;!r&&b>=250&&this._reportStall(u.len);var y=ue.bufferInfo(n,a,t.maxBufferHole);this._tryFixBufferStall(y,b)}else this.stalled=x}}}else if(this.moved=!0,null!==i){if(this.stallReported){var M=self.performance.now()-i;l.b.warn("playback not stuck anymore @"+a+", after "+Math.round(M)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,a=this.media.currentTime,r=i.getPartialFragment(a);r&&this._trySkipBufferHole(r)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(l.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,l.b.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,i=this.media,a=i.currentTime,o=0,u=ue.getBuffered(i),c=0;c<u.length;c++){var d=u.start(c);if(a+t.maxBufferHole>=o&&a<d){var h=Math.max(d+.05,i.currentTime+.1);return l.b.warn("skipping hole, adjusting currentTime from "+a+" to "+h),this.moved=!0,this.stalled=null,i.currentTime=h,e&&n.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+h,frag:e}),h}o=u.end(c)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,i=n.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var o=i+a*e.nudgeOffset;l.b.warn("Nudging 'currentTime' from "+i+" to "+o),n.currentTime=o,t.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else l.b.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0})},e}();function tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,n,"[stream-controller]")||this).audioCodecSwap=!1,i.gapController=null,i.level=-1,i._forceStartLoad=!1,i.altAudio=!1,i.audioOnly=!1,i.fragPlaying=null,i.onvplaying=null,i.onvseeked=null,i.fragLastKbps=0,i.stalled=!1,i.couldBacktrack=!1,i.audioCodecSwitch=!1,i.videoBuffer=null,i._registerListeners(),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,nt(t,n);var o,u,d=i.prototype;return d._registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(r.a.ERROR,this.onError,this),e.on(r.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(r.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(r.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(r.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(r.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(r.a.FRAG_BUFFERED,this.onFragBuffered,this)},d._unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(r.a.ERROR,this.onError,this),e.off(r.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(r.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(r.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(r.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(r.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(r.a.FRAG_BUFFERED,this.onFragBuffered,this)},d.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},d.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Re,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=Pe},d.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},d.doTick=function(){switch(this.state){case Re:this.doTickIdle();break;case Ke:var e,t=this.levels,n=this.level,i=null==t||null===(e=t[n])||void 0===e?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=Re;break}break;case Be:var a,r=self.performance.now(),s=this.retryDate;(!s||r>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=Re)}this.onTickEnd()},d.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},d.doTickIdle=function(){var e,t,n=this.hls,i=this.levelLastLoaded,a=this.levels,s=this.media,o=n.config,l=n.nextLoadLevel;if(null!==i&&(s||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&a&&a[l]){var u=a[l];this.level=n.nextLoadLevel=l;var d=u.details;if(!d||this.state===Ke||d.live&&this.levelLastLoaded!==l)this.state=Ke;else{var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,I.b.MAIN);if(null!==h&&!(h.len>=this.getMaxBufferLength(u.maxBitrate))){if(this._streamEnded(h,d)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(r.a.BUFFER_EOS,f),void(this.state=Ge)}var p=h.end,m=this.getNextFragment(p,d);if(this.couldBacktrack&&!this.fragPrevious&&m&&"initSegment"!==m.sn){var v=m.sn-d.startSN;v>1&&(m=d.fragments[v-1],this.fragmentTracker.removeFragment(m))}if(m&&this.fragmentTracker.getState(m)===te.OK&&this.nextLoadPosition>p){var g=this.audioOnly&&!this.altAudio?c.a.AUDIO:c.a.VIDEO;this.afterBufferFlushed(s,g,I.b.MAIN),m=this.getNextFragment(this.nextLoadPosition,d)}m&&(!m.initSegment||m.initSegment.data||this.bitrateTest||(m=m.initSegment),"identity"!==(null===(e=m.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=m.decryptdata)&&void 0!==t&&t.key?this.loadFragment(m,d,p):this.loadKey(m,d))}}}},d.loadFragment=function(t,n,i){var a,r=this.fragmentTracker.getState(t);if(this.fragCurrent=t,r===te.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(t);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);r=te.NOT_LOADED}r===te.NOT_LOADED||r===te.PARTIAL?"initSegment"===t.sn?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i)):r===te.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(a=this.media)||void 0===a?void 0:a.buffered.length)&&this.fragmentTracker.removeAllFragments()},d.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,I.b.MAIN);return t&&"fragment"in t?t.fragment:t},d.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,I.b.MAIN)},d.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},d.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},d.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n,i=this.getAppendedFrag(t.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!t.paused&&e){var a=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*a.maxBitrate/(1e3*r)+1:0}else n=0;var s=this.getBufferedFrag(t.currentTime+n);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,c=Math.max(s.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},d.abortCurrentFrag=function(){var e=this.fragCurrent;this.fragCurrent=null,null!=e&&e.loader&&e.loader.abort(),this.state===De&&(this.state=Re),this.nextLoadPosition=this.getLoadPosition()},d.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},d.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var i=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new et(this.config,i,this.fragmentTracker,this.hls)},d.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},d.onMediaPlaying=function(){this.tick()},d.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;Object(a.a)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},d.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(r.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},d.onManifestParsed=function(e,t){var n,i,a,r=!1,s=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(s=!0))})),this.audioCodecSwitch=r&&s&&!("function"==typeof(null==(a=We())||null===(i=a.prototype)||void 0===i?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},d.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===Re){var i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=Ke)}},d.onLevelLoaded=function(e,t){var n,i=this.levels,a=t.level,s=t.details,o=s.totalduration;if(i){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+o);var l=this.fragCurrent;!l||this.state!==Ne&&this.state!==Be||l.level!==t.level&&l.loader&&(this.state=Re,l.loader.abort());var u=i[a],c=0;if(s.live||null!==(n=u.details)&&void 0!==n&&n.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;c=this.alignPlaylists(s,u.details)}if(u.details=s,this.levelLastLoaded=a,this.hls.trigger(r.a.LEVEL_UPDATED,{details:s,level:a}),this.state===Ke){if(this.waitForCdnTuneIn(s))return;this.state=Re}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,c),this.tick()}else this.warn("Levels were reset while loading level "+a)},d._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,a=e.payload,r=this.levels;if(r){var s=r[n.level],o=s.details;if(o){var l=s.videoCodec,u=o.PTSKnown||!o.live,c=null===(t=n.initSegment)||void 0===t?void 0:t.data,d=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new $e(this.hls,I.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,p=-1!==f,m=new ce(n.level,n.sn,n.stats.chunkCount,a.byteLength,f,p),v=this.initPTS[n.cc];h.push(a,c,d,l,n,i,o.totalduration,u,m,v)}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},d.onAudioTrackSwitching=function(e,t){var n=this.altAudio,i=!!t.url,a=t.id;if(!i){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;null!=s&&s.loader&&(this.log("Switching to main audio track, cancel main fragment load"),s.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;n&&o.trigger(r.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(r.a.AUDIO_TRACK_SWITCHED,{id:a})}},d.onAudioTrackSwitched=function(e,t){var n=t.id,i=!!this.hls.audioTracks[n].url;if(i){var a=this.videoBuffer;a&&this.mediaBuffer!==a&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=a)}this.altAudio=i,this.tick()},d.onBufferCreated=function(e,t){var n,i,a=t.tracks,r=!1;for(var s in a){var o=a[s];if("main"===o.id){if(i=s,n=o,"video"===s){var l=a[s];l&&(this.videoBuffer=l.buffer)}}else r=!0}r&&n?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},d.onFragBuffered=function(e,t){var n=t.frag,i=t.part;if(!n||n.type===I.b.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(i?" p: "+i.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Fe&&(this.state=Re));var a=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}},d.onError=function(e,t){switch(t.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(I.b.MAIN,t);break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==He&&(t.fatal?(this.warn(""+t.details),this.state=He):t.levelRetry||this.state!==Ke||(this.state=Re));break;case s.a.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===je||this.state===Fe)){var n=!0,i=this.getFwdBufferInfo(this.media,I.b.MAIN);i&&i.len>.5&&(n=!this.reduceMaxBufferLength(i.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},d.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){var n=ue.getBuffered(e);!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this.seekToStartPos()):t.poll(this.lastCurrentTime),this.lastCurrentTime=e.currentTime}},d.onFragLoadEmergencyAborted=function(){this.state=Re,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},d.onBufferFlushed=function(e,t){var n=t.type;if(n!==c.a.AUDIO||this.audioOnly&&!this.altAudio){var i=(n===c.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,n,I.b.MAIN)}},d.onLevelsUpdated=function(e,t){this.levels=t.levels},d.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},d.seekToStartPos=function(){var e=this.media,t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void l.b.log("could not seek to "+n+", already seeking at "+t);var i=ue.getBuffered(e),a=(i.length?i.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(l.b.log("adjusting start position by "+a+" to match buffer start"),n+=a,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}},d._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},d._loadBitrateTestFrag=function(e){var t=this;this._doFragLoad(e).then((function(n){var i=t.hls;if(n&&!i.nextLoadLevel&&!t.fragContextChanged(e)){t.fragLoadError=0,t.state=Re,t.startFragRequested=!1,t.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(r.a.FRAG_LOADED,n)}}))},d._handleTransmuxComplete=function(e){var t,n="main",i=this.hls,s=e.remuxResult,o=e.chunkMeta,l=this.getCurrentContext(o);if(!l)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var u=l.frag,d=l.part,h=l.level,f=s.video,p=s.text,m=s.id3,v=s.initSegment,g=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(u)){if(this.state=je,v){v.tracks&&(this._bufferInitSegment(h,v.tracks,u,o),i.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:n,tracks:v.tracks}));var x=v.initPTS,b=v.timescale;Object(a.a)(x)&&(this.initPTS[u.cc]=x,i.trigger(r.a.INIT_PTS_FOUND,{frag:u,id:n,initPTS:x,timescale:b}))}if(f&&!1!==s.independent){if(h.details){var y=f.startPTS,M=f.endPTS,w=f.startDTS,T=f.endDTS;if(d)d.elementaryStreams[f.type]={startPTS:y,endPTS:M,startDTS:w,endDTS:T};else if(f.firstKeyFrame&&f.independent&&(this.couldBacktrack=!0),f.dropped&&f.independent){if(this.getLoadPosition()+this.config.maxBufferHole<y)return void this.backtrack(u);u.setElementaryStreamInfo(f.type,u.start,M,u.start,T,!0)}u.setElementaryStreamInfo(f.type,y,M,w,T),this.bufferFragmentData(f,u,d,o)}}else if(!1===s.independent)return void this.backtrack(u);if(g){var _=g.startPTS,S=g.endPTS,A=g.startDTS,E=g.endDTS;d&&(d.elementaryStreams[c.a.AUDIO]={startPTS:_,endPTS:S,startDTS:A,endDTS:E}),u.setElementaryStreamInfo(c.a.AUDIO,_,S,A,E),this.bufferFragmentData(g,u,d,o)}if(null!=m&&null!==(t=m.samples)&&void 0!==t&&t.length){var I={frag:u,id:n,samples:m.samples};i.trigger(r.a.FRAG_PARSING_METADATA,I)}if(p){var C={frag:u,id:n,samples:p.samples};i.trigger(r.a.FRAG_PARSING_USERDATA,C)}}},d._bufferInitSegment=function(e,t,n,i){var a=this;if(this.state===je){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var s=t.audio,o=t.video,l=t.audiovideo;if(s){var u=e.audioCodec,c=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===c.indexOf("firefox")&&(u="mp4a.40.5")),-1!==c.indexOf("android")&&"audio/mpeg"!==s.container&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),e.audioCodec&&e.audioCodec!==u&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+u+'"'),s.levelCodec=u,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(e.audioCodec||"")+"/"+s.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(r.a.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var s=t[e].initSegment;null!=s&&s.byteLength&&a.hls.trigger(r.a.BUFFER_APPENDING,{type:e,data:s,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tick()}},d.backtrack=function(e){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(e);var t=this.fragmentTracker.backtrack(e);this.fragPrevious=null,this.nextLoadPosition=e.start,t?this.resetFragmentLoading(e):this.state=Ye},d.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(ue.isBuffered(e,n)?t=this.getAppendedFrag(n):ue.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){var i=this.fragPlaying,a=t.level;i&&t.sn===i.sn&&i.level===a&&t.urlId===i.urlId||(this.hls.trigger(r.a.FRAG_CHANGED,{frag:t}),i&&i.level===a||this.hls.trigger(r.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=t)}}},o=i,(u=[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(t)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&tt(o.prototype,u),i}(Ve),at=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),rt=function(){function e(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new at(e),this.fast_=new at(t)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new at(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new at(t,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function st(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ot=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new rt(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t,n,i=e.prototype;return i.registerListeners=function(){var e=this.hls;e.on(r.a.FRAG_LOADING,this.onFragLoading,this),e.on(r.a.FRAG_LOADED,this.onFragLoaded,this),e.on(r.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.a.ERROR,this.onError,this)},i.unregisterListeners=function(){var e=this.hls;e.off(r.a.FRAG_LOADING,this.onFragLoading,this),e.off(r.a.FRAG_LOADED,this.onFragLoaded,this),e.off(r.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.a.ERROR,this.onError,this)},i.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},i.onFragLoading=function(e,t){var n,i=t.frag;i.type===I.b.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(n=t.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},i.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},i._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,s=n.config,o=n.media;if(e&&o){var u=t?t.stats:e.stats,c=t?t.duration:e.duration;if(u.aborted)return l.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!o.paused&&o.playbackRate&&o.readyState){var d=performance.now()-u.loading.start,h=Math.abs(o.playbackRate);if(!(d<=500*c/h)){var f=n.levels,p=n.minAutoLevel,m=f[e.level],v=u.total||Math.max(u.loaded,Math.round(c*m.maxBitrate/8)),g=Math.max(1,u.bwEstimate?u.bwEstimate/8:1e3*u.loaded/d),x=(v-u.loaded)/g,b=o.currentTime,y=(ue.bufferInfo(o,b,s.maxBufferHole).end-b)/h;if(!(y>=2*c/h||x<=y)){var M,w=Number.POSITIVE_INFINITY;for(M=e.level-1;M>p&&!((w=c*f[M].maxBitrate/(6.4*g))<y);M--);if(!(w>=x)){var T=this.bwEstimator.getEstimate();l.b.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+M+"\n      Current BW estimate: "+(Object(a.a)(T)?(T/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+x.toFixed(3)+" s\n      Estimated load time for the next fragment: "+w.toFixed(3)+" s\n      Time to underbuffer: "+y.toFixed(3)+" s"),n.nextLoadLevel=M,this.bwEstimator.sample(d,u.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),n.trigger(r.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:u})}}}}}},i.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if(n.type===I.b.MAIN&&Object(a.a)(n.sn)){var s=i?i.stats:n.stats,o=i?i.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[n.level],u=(l.loaded?l.loaded.bytes:0)+s.loaded,c=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:u,duration:c},l.realBitrate=Math.round(8*u/c)}if(n.bitrateTest){var d={stats:s,frag:n,part:i,id:n.type};this.onFragBuffered(r.a.FRAG_BUFFERED,d),n.bitrateTest=!1}}},i.onFragBuffered=function(e,t){var n=t.frag,i=t.part,a=i?i.stats:n.stats;if(!a.aborted&&n.type===I.b.MAIN&&"initSegment"!==n.sn){var r=a.parsing.end-a.loading.start;this.bwEstimator.sample(r,a.loaded),a.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},i.onError=function(e,t){switch(t.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},i.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},i.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.maxAutoLevel,a=n.config,r=n.minAutoLevel,s=n.media,o=t?t.duration:e?e.duration:0,u=s?s.currentTime:0,c=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,h=(ue.bufferInfo(s,u,a.maxBufferHole).end-u)/c,f=this.findBestLevel(d,r,i,h,a.abrBandWidthFactor,a.abrBandWidthUpFactor);if(f>=0)return f;l.b.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var p=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay,m=a.abrBandWidthFactor,v=a.abrBandWidthUpFactor;if(!h){var g=this.bitrateTestDelay;g&&(p=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-g,l.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=v=1)}return f=this.findBestLevel(d,r,i,h+p,m,v),Math.max(f,0)},i.findBestLevel=function(e,t,n,i,a,r){for(var s,o=this.fragCurrent,u=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,h=d[c],f=!(null==h||null===(s=h.details)||void 0===s||!s.live),p=null==h?void 0:h.codecSet,m=u?u.duration:o?o.duration:0,v=n;v>=t;v--){var g=d[v];if(g&&(!p||g.codecSet===p)){var x,b=g.details,y=(u?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||m;x=v<=c?a*e:r*e;var M=d[v].maxBitrate,w=M*y/x;if(l.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+v+"/"+Math.round(x)+"/"+M+"/"+y+"/"+i+"/"+w),x>M&&(!w||f&&!this.bitrateTestDelay||w<i))return v}}return-1},t=e,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this.getNextABRAutoLevel();return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}}])&&st(t.prototype,n),e}(),lt=n(13);function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,n,"[audio-stream-controller]")||this).videoBuffer=null,i.videoTrackCC=-1,i.waitingVideoCC=-1,i.audioSwitch=!1,i.trackId=-1,i.waitingData=null,i.mainDetails=null,i.bufferFlushed=!1,i._registerListeners(),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,ct(t,n);var o=i.prototype;return o.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},o._registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(r.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(r.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(r.a.ERROR,this.onError,this),e.on(r.a.BUFFER_RESET,this.onBufferReset,this),e.on(r.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(r.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(r.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(r.a.FRAG_BUFFERED,this.onFragBuffered,this)},o._unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(r.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(r.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(r.a.ERROR,this.onError,this),e.off(r.a.BUFFER_RESET,this.onBufferReset,this),e.off(r.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(r.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(r.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(r.a.FRAG_BUFFERED,this.onFragBuffered,this)},o.onInitPtsFound=function(e,t){var n=t.frag,i=t.id,a=t.initPTS;if("main"===i){var r=n.cc;this.initPTS[n.cc]=a,this.log("InitPTS for cc: "+r+" found from main: "+a),this.videoTrackCC=r,this.state===Ze&&this.tick()}},o.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=Pe);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Re):(this.loadedmetadata=!1,this.state=Ue),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},o.doTick=function(){switch(this.state){case Re:this.doTickIdle();break;case Ue:var t,n=this.levels,i=this.trackId,a=null==n||null===(t=n[i])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=Ze}break;case Be:var r,s=performance.now(),o=this.retryDate;(!o||s>=o||null!==(r=this.media)&&void 0!==r&&r.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=Re);break;case Ze:var u=this.waitingData;if(u){var c=u.frag,d=u.part,h=u.cache,f=u.complete;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Ne;var p={frag:c,part:d,payload:h.flush(),networkDetails:null};this._handleFragmentLoadProgress(p),f&&e.prototype._handleFragmentLoadComplete.call(this,p)}else if(this.videoTrackCC!==this.waitingVideoCC)l.b.log("Waiting fragment cc ("+c.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m=this.getLoadPosition(),v=ue.bufferInfo(this.mediaBuffer,m,this.config.maxBufferHole);xe(v.end,this.config.maxFragLookUpTolerance,c)<0&&(l.b.log("Waiting fragment cc ("+c.cc+") @ "+c.start+" cancelled because another fragment at "+v.end+" is needed"),this.clearWaitingFragment())}}else this.state=Re}this.onTickEnd()},o.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Re)},o.onTickEnd=function(){var e=this.media;if(e&&e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length&&(this.loadedmetadata=!0),this.lastCurrentTime=e.currentTime}},o.doTickIdle=function(){var e,t,n=this.hls,i=this.levels,a=this.media,s=this.trackId,o=n.config;if(i&&i[s]&&(a||!this.startFragRequested&&o.startFragPrefetch)){var l=i[s].details;if(!l||l.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(l))this.state=Ue;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.a.AUDIO,I.b.AUDIO));var u=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,I.b.AUDIO);if(null!==u){var d=u.len,h=this.getMaxBufferLength(),f=this.audioSwitch;if(!(d>=h)||f){if(!f&&this._streamEnded(u,l))return n.trigger(r.a.BUFFER_EOS,{type:"audio"}),void(this.state=Ge);var p=l.fragments[0].start,m=u.end;if(f){var v=this.getLoadPosition();m=v,l.PTSKnown&&v<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),a.currentTime=p+.05)}var g=this.getNextFragment(m,l);g?"identity"!==(null===(e=g.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=g.decryptdata)&&void 0!==t&&t.key?this.loadFragment(g,l,m):this.loadKey(g,l):this.bufferFlushed=!0}}}}},o.getMaxBufferLength=function(){var t=e.prototype.getMaxBufferLength.call(this),n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,I.b.MAIN);return null===n?t:Math.max(t,n.len)},o.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},o.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(e){return new H(e)}))},o.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var i=this.fragCurrent;null!=i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=Re):this.state=Pe,this.tick()},o.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},o.onLevelLoaded=function(e,t){this.mainDetails=t.details},o.onAudioTrackLoaded=function(e,t){var n,i=this.levels,a=t.details,r=t.id;if(i){this.log("Track "+r+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=i[r],o=0;if(a.live||null!==(n=s.details)&&void 0!==n&&n.live){var l=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!l)return;!s.details&&a.hasProgramDateTime&&l.hasProgramDateTime?(me(a,l),o=a.fragments[0].start):o=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,o),this.state!==Ue||this.waitForCdnTuneIn(a)||(this.state=Re),this.tick()}else this.warn("Audio tracks were reset while loading level "+r)},o._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,a=e.payload,r=this.config,s=this.trackId,o=this.levels;if(o){var u=o[s],c=u.details,d=r.defaultAudioCodec||u.audioCodec||"mp4a.40.2",h=this.transmuxer;h||(h=this.transmuxer=new $e(this.hls,I.b.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var f=this.initPTS[n.cc],p=null===(t=n.initSegment)||void 0===t?void 0:t.data;if(void 0!==f){var m=i?i.index:-1,v=-1!==m,g=new ce(n.level,n.sn,n.stats.chunkCount,a.byteLength,m,v);h.push(a,p,d,"",n,i,c.totalduration,!1,g,f)}else l.b.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+c.startSN+" ,"+c.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:n,part:i,cache:new lt.a,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=Ze}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},o._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},o.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},o.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},o.onFragBuffered=function(e,t){var n=t.frag,i=t.part;n.type===I.b.AUDIO&&(this.fragContextChanged(n)?this.warn("Fragment "+n.sn+(i?" p: "+i.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(r.a.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(n,i)))},o.onError=function(t,n){switch(n.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(I.b.AUDIO,n);break;case s.a.AUDIO_TRACK_LOAD_ERROR:case s.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==He&&this.state!==Pe&&(this.state=n.fatal?He:Re,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case s.a.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===je||this.state===Fe)){var i=!0,a=this.getFwdBufferInfo(this.mediaBuffer,I.b.AUDIO);a&&a.len>.5&&(i=!this.reduceMaxBufferLength(a.len)),i&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},o.onBufferFlushed=function(e,t){t.type===c.a.AUDIO&&(this.bufferFlushed=!0)},o._handleTransmuxComplete=function(e){var t,n="audio",i=this.hls,a=e.remuxResult,s=e.chunkMeta,o=this.getCurrentContext(s);if(!o)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=o.frag,u=o.part,d=a.audio,h=a.text,f=a.id3,p=a.initSegment;if(!this.fragContextChanged(l)){if(this.state=je,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=p&&p.tracks&&(this._bufferInitSegment(p.tracks,l,s),i.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:n,tracks:p.tracks})),d){var m=d.startPTS,v=d.endPTS,g=d.startDTS,x=d.endDTS;u&&(u.elementaryStreams[c.a.AUDIO]={startPTS:m,endPTS:v,startDTS:g,endDTS:x}),l.setElementaryStreamInfo(c.a.AUDIO,m,v,g,x),this.bufferFragmentData(d,l,u,s)}if(null!=f&&null!==(t=f.samples)&&void 0!==t&&t.length){var b=ut({frag:l,id:n},f);i.trigger(r.a.FRAG_PARSING_METADATA,b)}if(h){var y=ut({frag:l,id:n},h);i.trigger(r.a.FRAG_PARSING_USERDATA,y)}}},o._bufferInitSegment=function(e,t,n){if(this.state===je){e.video&&delete e.video;var i=e.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(r.a.BUFFER_CODECS,e);var a=i.initSegment;if(null!=a&&a.byteLength){var s={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:a};this.hls.trigger(r.a.BUFFER_APPENDING,s)}this.tick()}}},o.loadFragment=function(t,n,i){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||r===te.NOT_LOADED||r===te.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t):n.live&&!Object(a.a)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=Ze):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i)))},o.completeAudioSwitch=function(){var t=this.hls,n=this.media,i=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(r.a.AUDIO_TRACK_SWITCHED,{id:i})},i}(Ve);function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,ft(t,n);var a,o,l=i.prototype;return l.registerListeners=function(){var e=this.hls;e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(r.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(r.a.ERROR,this.onError,this)},l.unregisterListeners=function(){var e=this.hls;e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(r.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(r.a.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},l.onAudioTrackLoaded=function(e,t){var n=t.id,i=t.details,a=this.tracksInGroup[n];if(a){var r=a.details;a.details=t.details,this.log("audioTrack "+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,r))}else this.warn("Invalid audio track id "+n)},l.onLevelLoading=function(e,t){this.switchLevel(t.level)},l.onLevelSwitching=function(e,t){this.switchLevel(t.level)},l.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n;var i=this.tracks.filter((function(e){return!n||e.groupId===n}));this.selectDefaultTrack&&!i.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.a.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},l.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===I.a.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},l.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=t[this.trackId];this.log("Now switching to audio-track index "+e);var i=t[e],a=i.id,s=i.groupId,o=void 0===s?"":s,l=i.name,u=i.type,c=i.url;if(this.trackId=e,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(r.a.AUDIO_TRACK_SWITCHING,{id:a,groupId:o,name:l,type:u,url:c}),!i.details||i.details.live){var d=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(d)}}},l.selectInitialTrack=function(){this.tracksInGroup;var e=this.trackName,t=this.findTrackId(e)||this.findTrackId();-1!==t?this.setAudioTrack(t):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},l.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(r.a.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},a=i,(o=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])&&ht(a.prototype,o),i}(Q);function mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gt=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,n,"[subtitle-stream-controller]")||this).levels=[],i.currentTrackId=-1,i.tracksBuffered=[],i.mainDetails=null,i._registerListeners(),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,vt(t,n);var a,s,o=i.prototype;return o.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},o._registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.a.ERROR,this.onError,this),e.on(r.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(r.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(r.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(r.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},o._unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.a.ERROR,this.onError,this),e.off(r.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(r.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(r.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(r.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},o.startLoad=function(){this.stopLoad(),this.state=Re,this.setInterval(500),this.tick()},o.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},o.onLevelLoaded=function(e,t){this.mainDetails=t.details},o.onSubtitleFragProcessed=function(e,t){var n=t.frag,i=t.success;if(this.fragPrevious=n,this.state=Re,i){var a=this.tracksBuffered[this.currentTrackId];if(a){for(var r,s=n.start,o=0;o<a.length;o++)if(s>=a[o].start&&s<=a[o].end){r=a[o];break}var l=n.start+n.duration;r?r.end=l:(r={start:s,end:l},a.push(r)),this.fragmentTracker.fragBuffered(n)}}},o.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset;if(0===n&&i!==Number.POSITIVE_INFINITY){var a=this.currentTrackId,r=this.levels;if(!r.length||!r[a]||!r[a].details)return;var s=i-r[a].details.targetduration;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=s)e.shift();else{if(!(e[t].start<s))break;e[t].start=s,t++}})),this.fragmentTracker.removeFragmentsInRange(n,s,I.b.SUBTITLE)}},o.onError=function(e,t){var n,i=t.frag;i&&i.type===I.b.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=Re)},o.onSubtitleTracksUpdated=function(e,t){var n=this,i=t.subtitleTracks;this.tracksBuffered=[],this.levels=i.map((function(e){return new H(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){n.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},o.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}else this.clearInterval()},o.onSubtitleTrackLoaded=function(e,t){var n,i=t.details,a=t.id,r=this.currentTrackId,s=this.levels;if(s.length){var o=s[r];if(!(a>=s.length||a!==r)&&o){if(this.mediaBuffer=this.mediaBufferTimeRanges,i.live||null!==(n=o.details)&&void 0!==n&&n.live){var l=this.mainDetails;if(i.deltaUpdateFailed||!l)return;var u=l.fragments[0];o.details?0===this.alignPlaylists(i,o.details)&&u&&X(i,u.start):i.hasProgramDateTime&&l.hasProgramDateTime?me(i,l):u&&X(i,u.start)}o.details=i,this.levelLastLoaded=a,this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===Re&&(ge(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}}},o._handleFragmentLoadComplete=function(e){var t=e.frag,n=e.payload,i=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var s=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).then((function(e){var n=performance.now();a.trigger(r.a.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:s,tdecrypt:n}})}))}},o.doTick=function(){if(this.media){if(this.state===Re){var e,t=this.currentTrackId,n=this.levels;if(!n.length||!n[t]||!n[t].details)return;var i=n[t].details,a=i.targetduration,r=this.config,s=this.media,o=ue.bufferedInfo(this.mediaBufferTimeRanges,s.currentTime-a,r.maxBufferHole),l=o.end;if(o.len>this.getMaxBufferLength()+a)return;var u,c=i.fragments,d=c.length,h=i.edge,f=this.fragPrevious;l<h?!(u=ge(f,c,l,r.maxFragLookUpTolerance))&&f&&f.start<c[0].start&&(u=c[0]):u=c[d-1],null!==(e=u)&&void 0!==e&&e.encrypted?this.loadKey(u,i):u&&this.fragmentTracker.getState(u)===te.NOT_LOADED&&this.loadFragment(u,i,l)}}else this.state=Re},o.loadFragment=function(t,n,i){this.fragCurrent=t,e.prototype.loadFragment.call(this,t,n,i)},a=i,(s=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&mt(a.prototype,s),i}(Ve);function xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"===i.kind&&i.label&&t.push(e[n])}return t}var Mt,wt=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n.subtitleDisplay=!0,n.registerListeners(),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,bt(t,n);var a,s,o=i.prototype;return o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},o.registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(r.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(r.a.ERROR,this.onError,this)},o.unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(r.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(r.a.ERROR,this.onError,this)},o.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},o.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},o.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),yt(this.media.textTracks).forEach((function(e){R(e)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},o.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},o.onSubtitleTrackLoaded=function(e,t){var n=t.id,i=t.details,a=this.trackId,r=this.tracksInGroup[a];if(r){var s=r.details;r.details=t.details,this.log("subtitle track "+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,s))}else this.warn("Invalid subtitle track id "+n)},o.onLevelLoading=function(e,t){this.switchLevel(t.level)},o.onLevelSwitching=function(e,t){this.switchLevel(t.level)},o.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.textGroupIds){var n=t.textGroupIds[t.urlId];if(this.groupId!==n){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(e){return!n||e.groupId===n}));this.tracksInGroup=a;var s=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=n;var o={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.a.SUBTITLE_TRACKS_UPDATED,o),-1!==s&&this.setSubtitleTrack(s,i)}}},o.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},o.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===I.a.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},o.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(r.a.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},o.toggleTrackModes=function(e){var t=this,n=this.media,i=this.subtitleDisplay,a=this.trackId;if(n){var r=yt(n.textTracks),s=r.filter((function(e){return e.groupId===t.groupId}));if(-1===e)[].slice.call(r).forEach((function(e){e.mode="disabled"}));else{var o=s[a];o&&(o.mode="disabled")}var l=s[e];l&&(l.mode=i?"showing":"hidden")}},o.setSubtitleTrack=function(e,t){var n,i=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(n=i[e])&&void 0!==n&&n.details)||e<-1||e>=i.length)){this.clearTimer();var a=i[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var s=a.id,o=a.groupId,l=void 0===o?"":o,u=a.name,c=a.type,d=a.url;this.hls.trigger(r.a.SUBTITLE_TRACK_SWITCH,{id:s,groupId:l,name:u,type:c,url:d});var h=this.switchParams(a.url,null==t?void 0:t.details);this.loadPlaylist(h)}else this.hls.trigger(r.a.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},o.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=yt(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},a=i,(s=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}])&&xt(a.prototype,s),i}(Q),Tt=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},t.executeNext=function(e){var t=this.buffers,n=this.queues,i=t[e],a=n[e];if(a.length){var r=a[0];try{r.execute()}catch(t){l.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),r.onError(t),i&&i.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}(),_t=ze(),St=/([ha]vc.)(?:\.[^.,]+)+/,At=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,n=t.media,i=t.mediaSource;l.b.log("[buffer-controller]: Media source opened"),n&&(t.updateMediaElementDuration(),e.trigger(r.a.MEDIA_ATTACHED,{media:n})),i&&i.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){l.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){l.b.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.a.BUFFER_RESET,this.onBufferReset,this),e.on(r.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(r.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(r.a.BUFFER_EOS,this.onBufferEos,this),e.on(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(r.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(r.a.FRAG_PARSED,this.onFragParsed,this),e.on(r.a.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.a.BUFFER_RESET,this.onBufferReset,this),e.off(r.a.BUFFER_APPENDING,this.onBufferAppending,this),e.off(r.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(r.a.BUFFER_EOS,this.onBufferEos,this),e.off(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(r.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(r.a.FRAG_PARSED,this.onFragParsed,this),e.off(r.a.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Tt(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,l.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media;if(n&&_t){var i=this.mediaSource=new _t;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(i),this._objectUrl=n.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(l.b.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){l.b.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):l.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(r.a.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(e){l.b.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}})),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var n=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){if(i){var a=n.tracks[e];if(a&&"function"==typeof a.buffer.changeType){var r=t[e],s=r.codec,o=r.levelCodec,l=r.container;if((a.levelCodec||a.codec).replace(St,"$1")!==(o||s).replace(St,"$1")){var u=l+";codecs="+(o||s);n.appendChangeType(e,u)}}}else n.pendingTracks[e]=t[e]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var n=this,i=this.operationQueue,a={execute:function(){var a=n.sourceBuffer[e];a&&(l.b.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),a.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){l.b.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};i.append(a,e)},t.onBufferAppending=function(e,t){var n=this,i=this.hls,a=this.operationQueue,o=this.tracks,u=t.data,c=t.type,d=t.frag,h=t.part,f=t.chunkMeta,p=f.buffering[c],m=self.performance.now();p.start=m;var v=d.stats.buffering,g=h?h.stats.buffering:null;0===v.start&&(v.start=m),g&&0===g.start&&(g.start=m);var x=o.audio,b="audio"===c&&1===f.id&&"audio/mpeg"===(null==x?void 0:x.container),y={execute:function(){if(p.executeStart=self.performance.now(),b){var e=n.sourceBuffer[c];if(e){var t=d.start-e.timestampOffset;Math.abs(t)>=.1&&(l.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+t+") sn: "+d.sn+")"),e.timestampOffset=d.start)}}n.appendExecutor(u,c)},onStart:function(){},onComplete:function(){var e=self.performance.now();p.executeEnd=p.end=e,0===v.first&&(v.first=e),g&&0===g.first&&(g.first=e);var t=n.sourceBuffer,i={};for(var a in t)i[a]=ue.getBuffered(t[a]);n.appendError=0,n.hls.trigger(r.a.BUFFER_APPENDED,{type:c,frag:d,part:h,chunkMeta:f,parent:d.type,timeRanges:i})},onError:function(e){l.b.error("[buffer-controller]: Error encountered while trying to append to the "+c+" SourceBuffer",e);var t={type:s.b.MEDIA_ERROR,parent:d.type,details:s.a.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=s.a.BUFFER_FULL_ERROR:(n.appendError++,t.details=s.a.BUFFER_APPEND_ERROR,n.appendError>i.config.appendErrorMaxRetry&&(l.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0)),i.trigger(r.a.ERROR,t)}};a.append(y,c)},t.onBufferFlushing=function(e,t){var n=this,i=this.operationQueue,a=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(r.a.BUFFER_FLUSHED,{type:e})},onError:function(t){l.b.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?i.append(a(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){i.append(a(e),e)}))},t.onFragParsed=function(e,t){var n=this,i=t.frag,a=t.part,s=[],o=a?a.elementaryStreams:i.elementaryStreams;o[c.a.AUDIOVIDEO]?s.push("audiovideo"):(o[c.a.AUDIO]&&s.push("audio"),o[c.a.VIDEO]&&s.push("video")),0===s.length&&l.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var e=self.performance.now();i.stats.buffering.end=e,a&&(a.stats.buffering.end=e);var t=a?a.stats:i.stats;n.hls.trigger(r.a.FRAG_BUFFERED,{frag:i,part:a,stats:t,id:i.type})}),s)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var n=this;this.getSourceBufferTypes().reduce((function(e,i){var a=n.sourceBuffer[i];return t.type&&t.type!==i||a&&!a.ended&&(a.ended=!0,l.b.log("[buffer-controller]: "+i+" sourceBuffer now EOS")),e&&!(a&&!a.ended)}),!0)&&this.blockBuffers((function(){var e=n.mediaSource;e&&"open"===e.readyState&&e.endOfStream()}))},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,n=this.media,i=this.sourceBuffer;if(n&&null!==t){var s=this.getSourceBufferTypes();if(s.length){var o=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(a.a)(o)&&!(o<0)){var l=n.currentTime,u=t.levelTargetDuration,c=Math.max(o,u),d=Math.floor(l/u)*u-c;s.forEach((function(n){var a=i[n];if(a){var s=ue.getBuffered(a);s.length>0&&d>s.start(0)&&(e.trigger(r.a.BACK_BUFFER_REACHED,{bufferEnd:d}),t.live&&e.trigger(r.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),e.trigger(r.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:n}))}}))}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,i=this.mediaSource,r=e.fragments[0].start+e.totalduration,s=n.duration,o=Object(a.a)(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(l.b.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(r>o&&r>s||!Object(a.a)(s))&&(l.b.log("[buffer-controller]: Updating Media Source duration to "+r.toFixed(3)),i.duration=r)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){var i=Math.max(0,n[0].start),a=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,a)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;if(i&&!e||2===i){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(e){t.executeNext(e)}))}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var a in e)if(!t[a]){var o=e[a];if(!o)throw Error("source buffer exists for track "+a+", however track does not");var u=o.levelCodec||o.codec,c=o.container+";codecs="+u;l.b.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[a]=n.addSourceBuffer(c),h=a;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[a]={buffer:d,codec:u,container:o.container,levelCodec:o.levelCodec,id:o.id},i++}catch(e){l.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:c})}}i&&this.hls.trigger(r.a.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){l.b.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(r.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(t)},t.removeExecutor=function(e,t,n){var i=this.media,r=this.mediaSource,s=this.operationQueue,o=this.sourceBuffer[e];if(!i||!r||!o)return l.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(e);var u=Object(a.a)(i.duration)?i.duration:1/0,c=Object(a.a)(r.duration)?r.duration:1/0,d=Math.max(0,t),h=Math.min(n,u,c);h>d?(l.b.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+e+" SourceBuffer"),o.remove(d,h)):s.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.operationQueue,i=this.sourceBuffer[t];if(!i)return l.b.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);i.ended=!1,i.appendBuffer(e)},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return l.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var i=this.operationQueue,a=t.map((function(e){return i.appendBlocker(e)}));Promise.all(a).then((function(){e(),t.forEach((function(e){var t=n.sourceBuffer[e];t&&t.updating||i.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];if(i){var a=n.bind(this,e);this.listeners[e].push({event:t,listener:a}),i.addEventListener(t,a)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},e}(),Et={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},It=function(e){var t=e;return Et.hasOwnProperty(e)&&(t=Et[e]),String.fromCharCode(t)},Ct={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},kt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Lt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ot={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Pt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(Mt||(Mt={}));var Rt=function(){function e(){this.time=null,this.verboseLevel=Mt.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&l.b.log(this.time+" ["+e+"] "+t)},e}(),Dt=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Nt=function(){function e(e,t,n,i,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=a||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Bt=function(){function e(e,t,n,i,a,r){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Nt(t,n,i,a,r)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Ut=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new Bt);this.logger=e,this.pos=0,this.currPenState=new Nt}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<100;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(Mt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(Mt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=It(e);this.pos>=100?this.logger.log(Mt.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<100;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),jt=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new Ut(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(Mt.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(Mt.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var r=a.rows[i].cueStartTime,s=this.logger.time;if(r&&null!==s&&r<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(a.rows[i+o])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(Mt.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(Mt.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(Mt.INFO,"Rolling up")}else this.logger.log(Mt.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,a=0;a<15;a++){var r=this.rows[a].getTextString();r&&(i=a+1,e?t.push("Row "+i+": '"+r+"'"):t.push(r.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),Ft=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new jt(n),this.nonDisplayedMemory=new jt(n),this.lastOutputScreen=new jt(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(Mt.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Mt.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Mt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(Mt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(Mt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(Mt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(Mt.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(Mt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(Mt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(Mt.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(Mt.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(Mt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(Mt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(Mt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(Mt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Mt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(Mt.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(Mt.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function Yt(e,t,n){n.a=e,n.b=t}function Gt(e,t,n){return n.a===e&&n.b===t}var Ht=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new Rt;this.channels=[null,new Ft(e,t,i),new Ft(e+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,i,a,r=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(i=127&t[s],a=127&t[s+1],0!==i||0!==a){if(this.logger.log(Mt.DATA,"["+Dt([t[s],t[s+1]])+"] -> ("+Dt([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(r=this.parseChars(i,a))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(r):this.logger.log(Mt.WARNING,"No channel found yet. TEXT-MODE?")}n||r||this.logger.log(Mt.WARNING,"Couldn't parse cleaned data "+Dt([i,a])+" orig: "+Dt([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(Gt(e,t,n))return Yt(null,null,n),this.logger.log(Mt.DEBUG,"Repeated command ("+Dt([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,a=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),Yt(e,t,n),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(Mt.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(Mt.DEBUG,"MIDROW ("+Dt([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(Gt(e,t,i))return Yt(null,null,i),!0;var a=e<=23?1:2;n=t>=64&&t<=95?1===a?Ct[e]:Lt[e]:1===a?kt[e]:Ot[e];var r=this.channels[a];return!!r&&(r.setPAC(this.interpretPAC(n,t)),Yt(e,t,i),this.currentChannel=a,!0)},t.interpretPAC=function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function(e,t){var n,i,a=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19?(i=17===r?t+80:18===r?t+112:t+144,this.logger.log(Mt.INFO,"Special char '"+It(i)+"' in channel "+n),a=[i]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var s=Dt(a);this.logger.log(Mt.DEBUG,"Char codes =  "+s.join(",")),Yt(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=Pt[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var a=e<=23?1:2;return this.channels[a].setBkgData(i),Yt(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}(),Zt=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}(),Kt=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function i(e){return n(t,e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)e[s]=r[s]}return e}function r(t,r,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",c=!1,d=t,h=r,f=s,p=null,m="",v=!0,g="auto",x="start",b=50,y="middle",M=50,w="middle";Object.defineProperty(o,"id",a({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",a({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",a({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",a({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",a({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",a({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",a({},l,{get:function(){return m},set:function(t){var i=function(t){return n(e,t)}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");m=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",a({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",a({},l,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",a({},l,{get:function(){return x},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");x=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",a({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",a({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",a({},l,{get:function(){return M},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");M=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",a({},l,{get:function(){return w},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),o.displayState=void 0}return r.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},r}(),Vt=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function zt(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}var Wt=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}();function qt(e,t,n,i){var a=i?e.split(i):[e];for(var r in a)if("string"==typeof a[r]){var s=a[r].split(n);2===s.length&&t(s[0],s[1])}}var Xt=new Kt(0,0,""),Qt="middle"===Xt.align?"middle":"center";function Jt(e,t,n){var i=e;function a(){var t=zt(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){e=e.replace(/^\s+/,"")}if(r(),t.startTime=a(),r(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),r(),t.endTime=a(),r(),function(e,t){var i=new Wt;qt(e,(function(e,t){var a;switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":a=t.split(","),i.integer(e,a[0]),i.percent(e,a[0])&&i.set("snapToLines",!1),i.alt(e,a[0],["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",Qt,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",Qt,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",Qt,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===Xt.line&&(a=-1),t.line=a,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",Qt);var r=i.get("position","auto");"auto"===r&&50===Xt.position&&(r="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=r}(e,t)}function $t(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var en=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new Vt,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=$t(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=n()).match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var r=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:i=n(),t.state){case"HEADER":/:/.test(i)?qt(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Kt(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Jt(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){this.onparsingerror&&this.onparsingerror(e)}return this.onflush&&this.onflush(),this},e}(),tn=n(8),nn=n(16),an=/\r\n|\n\r|\n|\r/g,rn=function(e,t,n){return void 0===n&&(n=0),e.substr(n,t.length)===t},sn=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function on(e,t,n){return sn(e.toString())+sn(t.toString())+sn(n)}function ln(e,t,n,i,r,s,o,l){var u,c=new en,d=Object(N.f)(new Uint8Array(e)).trim().replace(an,"\n").split("\n"),h=[],f=Object(tn.a)(t,n),p="00:00.000",m=0,v=0,g=!0,x=!1;c.oncue=function(e){var t=i[r],n=i.ccOffset,a=(m-f)/9e4;if(null!=t&&t.new&&(void 0!==v?n=i.ccOffset=t.start:function(e,t,n){var i=e[t],a=e[i.prevCC];if(!a||!a.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!==(r=a)&&void 0!==r&&r.new;){var r;e.ccOffset+=i.start-a.start,i.new=!1,a=e[(i=a).prevCC]}e.presentationOffset=n}(i,r,a)),a&&(n=a-i.presentationOffset),x){var o=e.endTime-e.startTime,l=Object(nn.b)(9e4*(e.startTime+n-v),9e4*s)/9e4;e.startTime=l,e.endTime=l+o}var u=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(u)),e.id||(e.id=on(e.startTime,e.endTime,u)),e.endTime>0&&h.push(e)},c.onparsingerror=function(e){u=e},c.onflush=function(){u?l(u):o(h)},d.forEach((function(e){if(g){if(rn(e,"X-TIMESTAMP-MAP=")){g=!1,x=!0,e.substr(16).split(",").forEach((function(e){rn(e,"LOCAL:")?p=e.substr(6):rn(e,"MPEGTS:")&&(m=parseInt(e.substr(7)))}));try{v=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(a.a)(t)&&Object(a.a)(n)&&Object(a.a)(i)&&Object(a.a)(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*i)+36e5*r}(p)/1e3}catch(e){x=!1,u=e}return}""===e&&(g=!1)}c.parse(e+"\n")})),c.flush()}function un(){return(un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var cn=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,dn=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,hn={left:"start",center:"center",right:"end",start:"start",end:"end"};function fn(e,t,n,i,a){var r=Object(u.b)(new Uint8Array(e),["mdat"]);if(0!==r.length){var s=r[0],o=Object(N.f)(new Uint8Array(e,s.start,s.end-s.start)),l=Object(tn.c)(t,1,n);try{i(function(e,t){var n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(i).reduce((function(e,t){return e[t]=n.getAttribute("ttp:"+t)||i[t],e}),{}),r="preserve"!==n.getAttribute("xml:space"),s=mn(pn(n,"styling","style")),o=mn(pn(n,"layout","region")),l=pn(n,"body","[begin]");return[].map.call(l,(function(e){var n=function e(t,n){return[].slice.call(t.childNodes).reduce((function(t,i,a){var r;return"br"===i.nodeName&&a?t+"\n":null!==(r=i.childNodes)&&void 0!==r&&r.length?e(i,n):n?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent}),"")}(e,r);if(!n||!e.hasAttribute("begin"))return null;var i=xn(e.getAttribute("begin"),a),l=xn(e.getAttribute("dur"),a),u=xn(e.getAttribute("end"),a);if(null===i)throw gn(e);if(null===u){if(null===l)throw gn(e);u=i+l}var c=new Kt(i-t,u-t,n);c.id=on(c.startTime,c.endTime,c.text);var d=o[e.getAttribute("region")],h=s[e.getAttribute("style")];c.position=10,c.size=80;var f=function(e,t){var n="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(i,a){var r=vn(t,n,a)||vn(e,n,a);return r&&(i[a]=r),i}),{})}(d,h),p=f.textAlign;if(p){var m=hn[p];m&&(c.lineAlign=m),c.align=p}return un(c,f),c})).filter((function(e){return null!==e}))}(o,l))}catch(e){a(e)}}else a(new Error("Could not parse IMSC1 mdat"))}function pn(e,t,n){var i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function mn(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function vn(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function gn(e){return new Error("Could not parse ttml timestamp "+e)}function xn(e,t){if(!e)return null;var n=zt(e);return null===n&&(cn.test(e)?n=function(e,t){var n=cn.exec(e),i=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+i/t.frameRate}(e,t):dn.test(e)&&(n=function(e,t){var n=dn.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),n}var bn=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new Zt(this,"textTrack1"),n=new Zt(this,"textTrack2"),i=new Zt(this,"textTrack3"),a=new Zt(this,"textTrack4");this.cea608Parser1=new Ht(1,t,n),this.cea608Parser2=new Ht(3,i,a)}e.on(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(r.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(r.a.FRAG_LOADING,this.onFragLoading,this),e.on(r.a.FRAG_LOADED,this.onFragLoaded,this),e.on(r.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(r.a.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(r.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(r.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(r.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(r.a.FRAG_LOADING,this.onFragLoading,this),e.off(r.a.FRAG_LOADED,this.onFragLoaded,this),e.off(r.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(r.a.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(r.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(r.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(r.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,n,i,a){for(var s,o,l,u,c=!1,d=a.length;d--;){var h=a[d],f=(s=h[0],o=h[1],l=t,u=n,Math.min(o,u)-Math.max(s,l));if(f>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],n),c=!0,f/(n-t)>.5))return}if(c||a.push([t,n]),this.config.renderTextTracksNatively){var p=this.captionsTracks[e];this.Cues.newCue(p,t,n,i)}else{var m=this.Cues.newCue(null,t,n,i);this.hls.trigger(r.a.CUES_PARSED,{type:"captions",cues:m,track:e})}},t.onInitPtsFound=function(e,t){var n=this,i=t.frag,a=t.id,s=t.initPTS,o=t.timescale,l=this.unparsedVttFrags;"main"===a&&(this.initPTS[i.cc]=s,this.timescale[i.cc]=o),l.length&&(this.unparsedVttFrags=[],l.forEach((function(e){n.onFragLoaded(r.a.FRAG_LOADED,e)})))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,i=this.media,a=t[e],r=a.label,s=a.languageCode,o=this.getExistingTrack(e);if(o)n[e]=o,R(n[e]),O(n[e],i);else{var l=this.createTextTrack("captions",r,s);l&&(l[e]=!0,n[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(r.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},t.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){R(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)R(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this;this.textTracks=[];var i=t.subtitleTracks||[],a=i.some((function(e){return"stpp.ttml.im1t"===e.textCodec}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var s=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var i;if(t<o.length){for(var a=null,r=0;r<o.length;r++)if(yn(o[r],e)){a=o[r];break}a&&(i=a)}i?R(i):(i=n.createTextTrack("subtitles",e.name,e.lang))&&(i.mode="disabled"),i&&(i.groupId=e.groupId,n.textTracks.push(i))}))}else if(!s&&this.tracks&&this.tracks.length){var l=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(r.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],a=n.captionsProperties[i];a&&(a.label=e.name,e.lang&&(a.languageCode=e.lang),a.media=e)}}))},t.onFragLoading=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2,a=this.lastSn,r=this.lastPartIndex;if(this.enabled&&n&&i&&t.frag.type===I.b.MAIN){var s,o,l=t.frag.sn,u=null!=(s=null==t||null===(o=t.part)||void 0===o?void 0:o.index)?s:-1;l===a+1||l===a&&u===r+1||(n.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},t.onFragLoaded=function(e,t){var n=t.frag,i=t.payload,s=this.initPTS,o=this.unparsedVttFrags;if(n.type===I.b.SUBTITLE)if(i.byteLength){if(!Object(a.a)(s[n.cc]))return o.push(t),void(s.length&&this.hls.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var l=n.decryptdata,u="stats"in t;if(null==l||null==l.key||"AES-128"!==l.method||u){var c=this.tracks[n.level],d=this.vttCCs;d[n.cc]||(d[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),c&&"stpp.ttml.im1t"===c.textCodec?this._parseIMSC1(n,i):this._parseVTTs(n,i,d)}}else this.hls.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,i=this.hls;fn(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){n._appendCues(t,e.level),i.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){l.b.log("Failed to parse IMSC1: "+t),i.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e,t,n){var i=this,a=this.hls;ln(t,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,(function(t){i._appendCues(t,e.level),a.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(n){i._fallbackToIMSC1(e,t),l.b.log("Failed to parse VTT cue: "+n),a.trigger(r.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})}))},t._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||fn(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){i.textCodec="stpp.ttml.im1t",n._parseIMSC1(e,t)}),(function(){i.textCodec="wvtt"}))},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if("disabled"===i.mode)return;e.forEach((function(e){return P(i,e)}))}else{var a=this.tracks[t].default?"default":"subtitles"+t;n.trigger(r.a.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){var n=t.frag;if(n.type===I.b.SUBTITLE){if(!Object(a.a)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(r.a.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&n&&i)for(var a=0;a<t.samples.length;a++){var r=t.samples[a].bytes;if(r){var s=this.extractCea608Data(r);n.addData(t.samples[a].pts,s[0]),i.addData(t.samples[a].pts,s[1])}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,a=t.endOffsetSubtitles,r=t.type,s=this.media;if(s&&!(s.currentTime<i)){if(!r||"video"===r){var o=this.captionsTracks;Object.keys(o).forEach((function(e){return D(o[e],n,i)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==a){var l=this.textTracks;Object.keys(l).forEach((function(e){return D(l[e],n,a)}))}}},t.extractCea608Data=function(e){for(var t=31&e[0],n=2,i=[[],[]],a=0;a<t;a++){var r=e[n++],s=127&e[n++],o=127&e[n++],l=3&r;0===s&&0===o||0!=(4&r)&&(0!==l&&1!==l||(i[l].push(s),i[l].push(o)))}return i},e}();function yn(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function Mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var wn,Tn=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,n,i,a=e.prototype;return a.setStreamController=function(e){this.streamController=e},a.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},a.registerListeners=function(){var e=this.hls;e.on(r.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(r.a.MEDIA_DETACHING,this.onMediaDetaching,this)},a.unregisterListener=function(){var e=this.hls;e.off(r.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(r.a.MEDIA_DETACHING,this.onMediaDetaching,this)},a.onFpsDropLevelCapping=function(t,n){e.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},a.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},a.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onMediaDetaching=function(){this.stopCapping()},a.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},a.getMaxLevel=function(t){var n=this,i=this.hls.levels;if(!i.length)return-1;var a=i.filter((function(i,a){return e.isLevelAllowed(a,n.restrictedLevels)&&a<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(a,this.mediaWidth,this.mediaHeight)},a.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},a.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},a.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var i,a,r=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=n)&&(i=o,!(a=e[s+1])||i.width!==a.width||i.height!==a.height)){r=s;break}}return r},t=e,i=[{key:"contentScaleFactor",get:function(){var e=1;try{e=self.devicePixelRatio}catch(e){}return e}}],(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}])&&Mn(t.prototype,n),i&&Mn(t,i),e}(),_n=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(r.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(r.a.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var a=i-this.lastTime,s=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,u=1e3*s/a,c=this.hls;if(c.trigger(r.a.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:n}),u>0&&s>c.config.fpsDroppedMonitoringThreshold*o){var d=c.currentLevel;l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(r.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(wn||(wn={}));var Sn="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function An(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var En,In,Cn,kn=function(){function e(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var t,n,i=e.prototype;return i.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},i._registerListeners=function(){this.hls.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(r.a.MANIFEST_PARSED,this.onManifestParsed,this)},i._unregisterListeners=function(){this.hls.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(r.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(r.a.MANIFEST_PARSED,this.onManifestParsed,this)},i.getLicenseServerUrl=function(e){switch(e){case wn.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},i._attemptKeySystemAccess=function(e,t,n){var i=this,a=function(e,t,n,i){if(e===wn.WIDEVINE)return function(e,t,n){var i={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})})),t.forEach((function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})})),[i]}(t,n,i);throw new Error("Unknown key-system: "+e)}(e,t,n,this._drmSystemOptions);l.b.log("Requesting encrypted media key-system access");var r=this.requestMediaKeySystemAccess(e,a);this.mediaKeysPromise=r.then((function(t){return i._onMediaKeySystemAccessObtained(e,t)})),r.catch((function(t){l.b.error('Failed to obtain key-system "'+e+'" access:',t)}))},i._onMediaKeySystemAccessObtained=function(e,t){var n=this;l.b.log('Access for key-system "'+e+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i);var a=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return i.mediaKeys=t,l.b.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),t}));return a.catch((function(e){l.b.error("Failed to create media-keys:",e)})),a},i._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},i._onNewMediaKeySession=function(e){var t=this;l.b.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},i._onKeySessionMessage=function(e,t){l.b.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){l.b.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},i.onMediaEncrypted=function(e){var t=this;if(l.b.log('Media is encrypted using "'+e.initDataType+'" init data type'),!this.mediaKeysPromise)return l.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){t._media&&(t._attemptSetMediaKeys(n),t._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};this.mediaKeysPromise.then(n).catch(n)},i._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return l.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});l.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},i._generateRequestWithPreferredKeySession=function(e,t){var n=this,i=this._mediaKeysList[0];if(!i)return l.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)l.b.warn("Key-Session already initialized but requested again");else{var a=i.mediaKeysSession;if(!a)return l.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return l.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});l.b.log('Generating key-session request for "'+e+'" init data type'),i.mediaKeysSessionInitialized=!0,a.generateRequest(e,t).then((function(){l.b.debug("Key-session generation succeeded")})).catch((function(e){l.b.error("Error generating key-session request:",e),n.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},i._createLicenseXhr=function(e,t,n){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,n);var a=this._licenseXhrSetup;if(a)try{a.call(this.hls,i,e),a=void 0}catch(e){l.b.error(e)}try{i.readyState||i.open("POST",e,!0),a&&a.call(this.hls,i,e)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i},i._onLicenseRequestReadyStageChange=function(e,t,n,i){if(4===e.readyState)if(200===e.status){this._requestLicenseFailureCount=0,l.b.log("License request succeeded");var a=e.response,o=this._licenseResponseCallback;if(o)try{a=o.call(this.hls,e,t)}catch(e){l.b.error(e)}i(a)}else{if(l.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var u=3-this._requestLicenseFailureCount+1;l.b.warn("Retrying license request, "+u+" attempts left"),this._requestLicense(n,i)}},i._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===wn.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},i._requestLicense=function(e,t){l.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return l.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),a=this._createLicenseXhr(i,e,t);l.b.log("Sending license request to URL: "+i);var o=this._generateLicenseRequestChallenge(n,e);a.send(o)}catch(e){l.b.error("Failure requesting DRM license: "+e),this.hls.trigger(r.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},i.onMediaAttached=function(e,t){if(this._emeEnabled){var n=t.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},i.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},i.onManifestParsed=function(e,t){if(this._emeEnabled){var n=t.levels.map((function(e){return e.audioCodec})).filter((function(e){return!!e})),i=t.levels.map((function(e){return e.videoCodec})).filter((function(e){return!!e}));this._attemptKeySystemAccess(wn.WIDEVINE,n,i)}},t=e,(n=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&An(t.prototype,n),e}();function Ln(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function On(e,t,n){return t&&Ln(e.prototype,t),n&&Ln(e,n),e}function Pn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Dn(){return(Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(En||(En={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(In||(In={})),function(e){e.VOD="v",e.LIVE="l"}(Cn||(Cn={}));var Nn=function(){function e(t){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(e){try{n.apply(e,{ot:En.MANIFEST,su:!n.initialized})}catch(e){l.b.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,i=n.hls.levels[t.level],a=n.getObjectType(t),r={d:1e3*t.duration,ot:a};a!==En.VIDEO&&a!==En.AUDIO&&a!=En.MUXED||(r.br=i.bitrate/1e3,r.tb=n.getTopBandwidth(a)/1e3,r.bl=n.getBufferLength(a)),n.apply(e,r)}catch(e){l.b.warn("Could not generate segment CMCD data.",e)}},this.hls=t;var i=this.config=t.config,a=i.cmcd;null!=a&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||e.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.a.MEDIA_DETACHED,this.onMediaDetached,this),e.on(r.a.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.a.MEDIA_DETACHED,this.onMediaDetached,this),e.off(r.a.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var n,i;this.audioBuffer=null===(n=t.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(i=t.tracks.video)||void 0===i?void 0:i.buffer},t.createData=function(){var e;return{v:1,sf:In.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,n){void 0===n&&(n={}),Dn(n,this.createData());var i=n.ot===En.INIT||n.ot===En.VIDEO||n.ot===En.MUXED;if(this.starved&&i&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var a=e.toHeaders(n);if(!Object.keys(a).length)return;t.headers||(t.headers={}),Dn(t.headers,a)}else{var r=e.toQuery(n);if(!r)return;t.url=e.appendQueryToUri(t.url,r)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?En.TIMED_TEXT:"initSegment"===e.sn?En.INIT:"audio"===t?En.AUDIO:"main"===t?this.hls.audioTracks.length?En.VIDEO:En.MUXED:void 0},t.getTopBandwidth=function(e){var t,n=0,i=this.hls;if(e===En.AUDIO)t=i.audioTracks;else{var a=i.maxAutoLevel,r=a>-1?a+1:i.levels.length;t=i.levels.slice(0,r)}for(var s,o=Pn(t);!(s=o()).done;){var l=s.value;l.bitrate>n&&(n=l.bitrate)}return n>0?n:NaN},t.getBufferLength=function(e){var t=this.hls.media,n=e===En.AUDIO?this.audioBuffer:this.videoBuffer;return n&&t?1e3*ue.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},On(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},On(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,n=[],i=function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e},a=function(e){return Math.round(e)},r=function(e){return 100*a(e/100)},s={br:a,d:a,bl:r,dl:r,mtp:r,nor:function(e){return encodeURIComponent(e)},rtp:r,tb:a},l=Pn(Object.keys(e||{}).sort());!(t=l()).done;){var u=t.value,c=e[u];if(i(c)&&!("v"===u&&1===c||"pr"==u&&1===c)){var d=s[u];d&&(c=d(c));var h,f=o(c);h="ot"===u||"sf"===u||"st"===u?u+"="+c:"boolean"===f?u:"number"===f?u+"="+c:u+"="+JSON.stringify(c),n.push(h)}}return n.join(",")},e.toHeaders=function(t){for(var n={},i=["Object","Request","Session","Status"],a=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(t);s<o.length;s++){var l=o[s];a[null!=r[l]?r[l]:1][l]=t[l]}for(var u=0;u<a.length;u++){var c=e.serialize(a[u]);c&&(n["CMCD-"+i[u]]=c)}return n},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){if(!t)return e;var n=e.includes("?")?"&":"?";return""+e+n+t},e}(),Bn=n(12),Un=/^age:\s*[\d.]+\s*$/m,jn=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new Bn.a,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var a=this.xhrSetup;try{if(a)try{a(n,t.url)}catch(e){n.open("GET",t.url,!0),a(n,t.url)}n.readyState||n.open("GET",t.url,!0);var r=this.context.headers;if(r)for(var s in r)n.setRequestHeader(s,r[s])}catch(e){return void this.callbacks.onError({code:n.status,text:e.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var i=t.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){t.onreadystatechange=null,t.onprogress=null;var r=t.status;if(r>=200&&r<300){var s,o;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),o="arraybuffer"===e.responseType?(s=t.response).byteLength:(s=t.responseText).length,n.loaded=n.total=o,!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(n,e,s,t),!this.callbacks)return;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,n,e,t)}else n.retry>=a.maxRetry||r>=400&&r<499?(l.b.error(r+" while loading "+e.url),this.callbacks.onError({code:r,text:t.statusText},e,t)):(l.b.warn(r+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){l.b.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&Un.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();function Fn(e){var t="function"==typeof Map?new Map:void 0;return(Fn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Yn(e,arguments,Zn(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Hn(i,e)})(e)}function Yn(e,t,n){return(Yn=Gn()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Hn(a,n.prototype),a}).apply(null,arguments)}function Gn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var Vn=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||zn,this.controller=new self.AbortController,this.stats=new Bn.a}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var i=this,r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();var s=function(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Kn({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}(e,this.controller.signal),o=n.onProgress,l="arraybuffer"===e.responseType,u=l?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(r,e,i.response)}),t.timeout),self.fetch(this.request).then((function(n){if(i.response=i.loader=n,!n.ok){var s=n.status,u=n.statusText;throw new Wn(u||"fetch, bad network response",s,n)}return r.loading.first=Math.max(self.performance.now(),r.loading.start),r.total=parseInt(n.headers.get("Content-Length")||"0"),o&&Object(a.a)(t.highWaterMark)?i.loadProgressively(n,r,e,t.highWaterMark,o):l?n.arrayBuffer():n.text()})).then((function(s){var l=i.response;self.clearTimeout(i.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first),r.loaded=r.total=s[u];var c={url:l.url,data:s};o&&!Object(a.a)(t.highWaterMark)&&o(r,e,s,l),n.onSuccess(c,r,e,l)})).catch((function(t){if(self.clearTimeout(i.requestTimeout),!r.aborted){var a=t.code||0;n.onError({code:a,text:t.message},e,t.details)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,n,i,a){void 0===i&&(i=0);var r=new lt.a,s=e.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return r.dataLength&&a(t,n,r.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return t.loaded+=u,u<i||r.dataLength?(r.push(l),r.dataLength>=i&&a(t,n,r.flush(),e)):a(t,n,l,e),o()})).catch((function(){return Promise.reject()}))}()},e}();function zn(e,t){return new self.Request(e.url,t)}var Wn=function(e){var t,n;function i(t,n,i){var a;return(a=e.call(this,t)||this).code=void 0,a.details=void 0,a.code=n,a.details=i,a}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,Hn(t,n),i}(Fn(Error)),qn=Vn,Xn=/\s/;function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ti=$n($n({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:jn,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:ot,bufferController:At,capLevelController:Tn,fpsController:_n,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Sn,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:{newCue:function(e,t,n,i){for(var a,r,s,o,l,u=[],c=self.VTTCue||self.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,o=0,l="",!(a=i.rows[d]).isEmpty()){for(var h=0;h<a.chars.length;h++)Xn.test(a.chars[h].uchar)&&s?o++:(l+=a.chars[h].uchar,s=!1);a.cueStartTime=t,t===n&&(n+=1e-4),o>=16?o--:o++;var f=$t(l.trim()),p=on(t,n,f);e&&e.cues&&e.cues.getCueById(p)||((r=new c(t,n,f)).id=p,r.line=d+1,r.align="left",r.position=10+Math.min(80,10*Math.floor(8*o/32)),u.push(r))}return e&&u.length&&(u.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),u.forEach((function(t){return P(e,t)}))),u}},enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:gt,subtitleTrackController:wt,timelineController:bn,audioStreamController:dt,audioTrackController:pt,emeController:kn,cmcdController:Nn});function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ii=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Qe.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Qn({},e,t)}(e.DefaultConfig,t);this.userConfig=t,Object(l.a)(n.debug),this._autoLevelCapping=-1,n.progressive&&function(e){var t=e.loader;t!==qn&&t!==jn?(l.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=qn,e.progressive=!0,e.enableSoftwareAES=!0,l.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}(n);var i=n.abrController,a=n.bufferController,r=n.capLevelController,s=n.fpsController,o=this.abrController=new i(this),u=this.bufferController=new a(this),c=this.capLevelController=new r(this),d=new s(this),h=new k(this),f=new L(this),p=new B(this),m=this.levelController=new ie(this),v=new ae(this),g=this.streamController=new it(this,v);c.setStreamController(g),d.setStreamController(g);var x=[m,g];this.networkControllers=x;var b=[h,f,o,u,c,d,p,v];this.audioTrackController=this.createController(n.audioTrackController,null,x),this.createController(n.audioStreamController,v,x),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,x),this.createController(n.subtitleStreamController,v,x),this.createController(n.timelineController,null,b),this.emeController=this.createController(n.emeController,null,b),this.cmcdController=this.createController(n.cmcdController,null,b),this.latencyController=this.createController(F,null,b),this.coreComponents=b}e.isSupported=function(){return function(){var e=ze();if(!e)return!1;var t=We(),n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}()};var t,n,a,o=e.prototype;return o.createController=function(e,t,n){if(e){var i=t?new e(this,t):new e(this);return n&&n.push(i),i}return null},o.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},o.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},o.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},o.off=function(e,t,n,i){void 0===n&&(n=this),this._emitter.off(e,t,n,i)},o.listeners=function(e){return this._emitter.listeners(e)},o.emit=function(e,t,n){return this._emitter.emit(e,t,n)},o.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){l.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(r.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},o.listenerCount=function(e){return this._emitter.listenerCount(e)},o.destroy=function(){l.b.log("destroy"),this.trigger(r.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},o.attachMedia=function(e){l.b.log("attachMedia"),this._media=e,this.trigger(r.a.MEDIA_ATTACHING,{media:e})},o.detachMedia=function(){l.b.log("detachMedia"),this.trigger(r.a.MEDIA_DETACHING,void 0),this._media=null},o.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,a=this.url=i.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});l.b.log("loadSource:"+a),t&&n&&n!==a&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(r.a.MANIFEST_LOADING,{url:e})},o.startLoad=function(e){void 0===e&&(e=-1),l.b.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},o.stopLoad=function(){l.b.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},o.swapAudioCodec=function(){l.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},o.recoverMediaError=function(){l.b.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},o.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=e,a=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return r.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:ti},set:function(t){e.defaultConfig=t}}],(n=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){l.b.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){l.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){l.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){l.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){l.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(l.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&ni(t.prototype,n),a&&ni(t,a),e}();ii.defaultConfig=void 0}]).default},"object"==o(t)&&"object"==o(e)?e.exports=s():(a=[],void 0===(r="function"==typeof(i=s)?i.apply(t,a):i)||(e.exports=r)))},64783:function(e,t,n){var i,a,r,s,o=n(69946).default;s=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function r(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=i(e);if(t){var s=i(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return r(this,n)}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return r}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var h="undefined"!=typeof window&&window.THREE?window.THREE:{LinearFilter:e.LinearFilter,Sprite:e.Sprite,SpriteMaterial:e.SpriteMaterial,Texture:e.Texture},f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var i,r,o,c=s(d);function d(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(255, 255, 255, 1)";return t(this,d),(e=c.call(this,new h.SpriteMaterial({map:new h.Texture})))._text="".concat(n),e._textHeight=i,e._color=a,e._backgroundColor=!1,e._padding=0,e._borderWidth=0,e._borderRadius=0,e._borderColor="white",e._strokeWidth=0,e._strokeColor="white",e._fontFace="Arial",e._fontSize=90,e._fontWeight="normal",e._canvas=document.createElement("canvas"),e._texture=e.material.map,e._texture.minFilter=h.LinearFilter,e._genCanvas(),e}return i=d,(r=[{key:"text",get:function(){return this._text},set:function(e){this._text=e,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(e){this._textHeight=e,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(e){this._borderWidth=e,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(e){this._borderRadius=e,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(e){this._borderColor=e,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(e){this._fontFace=e,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize=e,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight=e,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(e){this._strokeWidth=e,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(e){this._strokeColor=e,this._genCanvas()}},{key:"_genCanvas",value:function(){var e=this,t=this._canvas,n=t.getContext("2d"),i=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],a=i.map((function(t){return t*e.fontSize*.1})),r=(Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius]).map((function(t){return t*e.fontSize*.1})),s=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],o=s.map((function(t){return t*e.fontSize*.1})),c=this.text.split("\n"),d="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);n.font=d;var h=Math.max.apply(Math,u(c.map((function(e){return n.measureText(e).width})))),f=this.fontSize*c.length;if(t.width=h+2*a[0]+2*o[0]+2,t.height=f+2*a[1]+2*o[1]+20,this.borderWidth){if(n.strokeStyle=this.borderColor,a[0]){var p=a[0]/2;n.lineWidth=a[0],n.beginPath(),n.moveTo(p,r[0]),n.lineTo(p,t.height-r[3]),n.moveTo(t.width-p,r[1]),n.lineTo(t.width-p,t.height-r[2]),n.stroke()}if(a[1]){var m=a[1]/2;n.lineWidth=a[1],n.beginPath(),n.moveTo(Math.max(a[0],r[0]),m),n.lineTo(t.width-Math.max(a[0],r[1]),m),n.moveTo(Math.max(a[0],r[3]),t.height-m),n.lineTo(t.width-Math.max(a[0],r[2]),t.height-m),n.stroke()}if(this.borderRadius){var v=Math.max.apply(Math,u(a)),g=v/2;n.lineWidth=v,n.beginPath(),[!!r[0]&&[r[0],g,g,r[0]],!!r[1]&&[t.width-r[1],t.width-g,g,r[1]],!!r[2]&&[t.width-r[2],t.width-g,t.height-g,t.height-r[2]],!!r[3]&&[r[3],g,t.height-g,t.height-r[3]]].filter((function(e){return e})).forEach((function(e){var t=l(e,4),i=t[0],a=t[1],r=t[2],s=t[3];n.moveTo(i,r),n.quadraticCurveTo(a,r,a,s)})),n.stroke()}}this.backgroundColor&&(n.fillStyle=this.backgroundColor,this.borderRadius?(n.beginPath(),n.moveTo(a[0],r[0]),[[a[0],r[0],t.width-r[1],a[1],a[1],a[1]],[t.width-a[0],t.width-a[0],t.width-a[0],a[1],r[1],t.height-r[2]],[t.width-a[0],t.width-r[2],r[3],t.height-a[1],t.height-a[1],t.height-a[1]],[a[0],a[0],a[0],t.height-a[1],t.height-r[3],r[0]]].forEach((function(e){var t=l(e,6),i=t[0],a=t[1],r=t[2],s=t[3],o=t[4],u=t[5];n.quadraticCurveTo(i,s,a,o),n.lineTo(r,u)})),n.closePath(),n.fill()):n.fillRect(a[0],a[1],t.width-2*a[0],t.height-2*a[1])),n.translate.apply(n,u(a)),n.translate.apply(n,u(o)),n.font=d,n.fillStyle=this.color,n.textBaseline="bottom";var x=this.strokeWidth>0;x&&(n.lineWidth=this.strokeWidth*this.fontSize/10,n.strokeStyle=this.strokeColor),c.forEach((function(t,i){var a=(h-n.measureText(t).width)/2,r=(i+1)*e.fontSize+20;n.moveTo(0,20),x&&n.strokeText(t,a,r),n.fillText(t,a,r)})),this._texture.image=t,this._texture.needsUpdate=!0;var b=this.textHeight*c.length+2*i[1]+2*s[1];this.scale.set(b*t.width/t.height,b,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(e){return h.Sprite.prototype.copy.call(this,e),this.color=e.color,this.backgroundColor=e.backgroundColor,this.padding=e.padding,this.borderWidth=e.borderWidth,this.borderColor=e.borderColor,this.fontFace=e.fontFace,this.fontSize=e.fontSize,this.fontWeight=e.fontWeight,this.strokeWidth=e.strokeWidth,this.strokeColor=e.strokeColor,this}}])&&n(i.prototype,r),o&&n(i,o),d}(h.Sprite);return f},"object"===o(t)?e.exports=s(n(6977)):(a=[n(6977)],void 0===(r="function"==typeof(i=s)?i.apply(t,a):i)||(e.exports=r))},37357:function(){window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout)},96596:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Hl}});var i={};n.r(i),n.d(i,{deletePicture:function(){return ot},getPictureList:function(){return rt},uploadPicture:function(){return it}});var a=n(94434),r=n.n(a),s=n(35290),o=n.n(s),l=n(411),u=n.n(l),c=n(46686),d=n.n(c),h=n(93236),f=n(59082),p=n(55859),m=function(){var e=(0,p.useMediaQuery)({maxWidth:1200});return{isPhone:e,isPc:!e}},v=n(62086),g=function(e){var t=e.img,i=e.title,a=(0,f.useIntl)(),r=m().isPhone,s=(0,h.useState)(!1),o=d()(s,2),l=o[0],u=o[1];return(0,v.jsxs)("div",{className:"flex flex-col items-center sm:w-[30px] xl:w-[40px]",children:[(0,v.jsxs)("div",{className:"bg-[rgba(0,0,0,0.3)] xl:hover:bg-white sm:w-[30px] sm:h-[30px] ".concat("home"===t?"xl:w-[40px] xl:h-[40px]":"xl:h-[48px] xl:w-[48px]","  \n        rounded-full flex items-center justify-center cursor-pointer relative\t"),onMouseEnter:function(){r||u(!0)},onMouseLeave:function(){r||u(!1)},children:[(0,v.jsx)("img",{className:" sm:h-[14px] xl:h-[21px] ".concat(l?"opacity-0":" opacity-100"),src:n(74669)("./".concat(t,".png")),draggable:"false"}),(0,v.jsx)("img",{className:"sm:h-[14px] xl:h-[21px] absolute-center ".concat(l?"opacity-100":" opacity-0"," "),src:n(74669)("./".concat(t+"_hover",".png")),draggable:"false"})]}),r?"home.shoot"!==i&&"home.chat"!==i&&(0,v.jsx)("span",{className:" sm:text-10 xl:text-16 text-white font-OPPO-R whitespace-nowrap",children:a.formatMessage({id:i})}):(0,v.jsx)("span",{style:l?{opacity:1}:{opacity:0},className:" sm:text-10 xl:text-16 text-white font-OPPO-R whitespace-nowrap",children:a.formatMessage({id:i})})]})},x=function(){var e=(0,h.useRef)(!1);return(0,h.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e},b=n(32446),y=n(93435),M=n(84875),w=n.n(M),T=n(37320),S=n(24673),A={hide:"hide___XBWSo",hot:"hot___BIFIF",container:"container___HQhbE",box:"box___Wjbpl",petalBox:"petalBox___B3ZKf",petal:"petal___qc0iu",panel:"panel___HtQI8",action:"action___t3sAC",emoji_iconBox:"emoji_iconBox___ofv7l",mask:"mask___GRouj",emojiWrap:"emojiWrap___KUE_i",animate_3:"animate_3___taa2r",next:"next___umDzH",emoji_icon:"emoji_icon___j5221",btn_next:"btn_next___mxf6b",btn_prev:"btn_prev___lX1zI",ttt:"ttt___wBd1o","tp-rotv_c":"tp-rotv_c___Ekg3S"},E=n(30279),I=n.n(E),C=n(44463),k=n.n(C),L=["name","configPath","style"],O=function(e){var t=e.name,n=(e.configPath,e.style),i=k()(e,L);return null!=i&&i.className?i.className=t.split(".")[0]+" "+i.className:i.className=t.split(".")[0],(0,v.jsx)("div",I()({style:n},i))},P=n(5763),R=["emoji_1","emoji_2","emoji_3","emoji_4","emoji_5","emoji_6","emoji_7","emoji_8","emoji_9","emoji_10","emoji_11","emoji_12","emoji_13","emoji_14","emoji_15","emoji_16"],D=!0,N=null,B=function(e){var t=e.element,i=(0,h.useState)(!1),a=d()(i,2),s=a[0],o=a[1],l=(0,h.useState)(1),u=d()(l,2),c=(u[0],u[1]),f=(0,h.useState)(0),p=d()(f,2),g=p[0],M=p[1],_=(0,h.useState)([]),E=d()(_,2),I=E[0],C=E[1],k=(m().isPhone,(0,h.useState)(!0)),L=d()(k,2),B=L[0],U=L[1],j=(x(),1),F=.3,Y=.1,G="power1.inOut",H="50% 102%",Z=w()({animate_3:B});(0,h.useLayoutEffect)((function(){return s?K():(U(!0),T.ZP.killTweensOf(".".concat(A.emojiWrap))),function(){}}),[s]),(0,h.useEffect)((function(){c(1),V(0)}),[s]),(0,h.useEffect)((function(){return y.Z.on(b.Z.CLICK_ANY_WHERE,q),function(){y.Z.off(b.Z.CLICK_ANY_WHERE,q),T.ZP.killTweensOf("#test1"),T.ZP.killTweensOf("#test2"),T.ZP.killTweensOf("#test3"),T.ZP.killTweensOf("#test4"),T.ZP.killTweensOf("#test5")}}),[]);var K=function(){T.ZP.fromTo("#test4",{opacity:0,rotation:216,transformOrigin:H},{opacity:j,duration:F,ease:G,scale:1}),T.ZP.fromTo("#test5",{opacity:0,rotation:216,transformOrigin:H},{opacity:j,ease:G,scale:1,rotation:288,duration:F,delay:1*Y}),T.ZP.fromTo("#test1",{opacity:0,rotation:-72,transformOrigin:H},{opacity:j,ease:G,rotation:0,duration:F,delay:2*Y}),T.ZP.fromTo("#test2",{opacity:0,rotation:0,transformOrigin:H},{opacity:j,ease:G,scale:1,rotation:72,duration:F,delay:3*Y}),T.ZP.fromTo("#test3",{opacity:0,rotation:72,transformOrigin:H},{opacity:j,ease:G,scale:1,rotation:144,duration:F,delay:4*Y,onComplete:function(){U(!1)}})},V=S.Z.debounce((function(e){B||(T.ZP.killTweensOf(".".concat(A.emojiWrap)),T.ZP.fromTo(".".concat(A.emojiWrap),{rotation:-360},{rotation:0,duration:1.2,ease:"power3.inOut",transformOrigin:"50% 50%"}));var t=[],n=(e=void 0!==e?e:g)+7;n<=R.length?t=R.slice(e,n):(t=R.slice(e,R.length),n-=R.length,t=[].concat(r()(t),r()(R.slice(0,n)))),setTimeout((function(){c((function(e){return e+1})),M(n),C(t)}),700)}),1500,{leading:!0,trailing:!1}),z=S.Z.debounce((function(){T.ZP.killTweensOf(".".concat(A.emojiWrap)),T.ZP.fromTo(".".concat(A.emojiWrap),{rotation:360},{rotation:0,duration:1.2,ease:"power3.inOut",transformOrigin:"50% 50%"});var e=[],t=g-14,n=g-7;t>=0?n>R.length?(e=R.slice(t,n),n-=R.length,e=[].concat(r()(e),r()(R.slice(0,n)))):e=R.slice(t,n):n<0?(n=R.length+n,t=R.length+t,e=R.slice(t,n)):(e=R.slice(0,n),t=R.length+t,e=[].concat(r()(R.slice(t,R.length)),r()(e))),setTimeout((function(){c((function(e){return e-1})),M(n),C(e)}),600)}),1500,{leading:!0,trailing:!1}),W=S.Z.debounce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emoji";"emoji"===t?(y.Z.emit(b.Z.SHOW_3D_EMOJI,e),(0,P.R)("1_0",e.toString())):"action"===t&&(y.Z.emit(b.Z.SHOW_3D_ACTION,e),(0,P.R)("1_1",e.toString())),q()}),1e3,{leading:!0,trailing:!1,maxWait:1e3}),q=function(){o(!1)};return(0,v.jsxs)("div",{style:{zIndex:s?"999":"",height:"100%",pointerEvents:"none"},className:" relative",children:[(0,v.jsxs)("div",{id:"container",className:"".concat(A.container," ").concat(s?"":A.hide),style:{pointerEvents:s?"auto":"none"},children:[(0,v.jsx)("div",{className:A.box,children:(0,v.jsx)("div",{className:A.petalBox,children:(0,v.jsxs)("svg",{className:A.petal,xmlns:"http://www.w3.org/2000/svg",width:"117.785",height:"72.23",viewBox:"0 0 117.785 72.23",children:[(0,v.jsxs)("g",{id:"test1","data-name":"1",transform:"translate(-141.449 -319.119)",onClick:function(){return W(1,"action")},children:[(0,v.jsx)("path",{id:"ttt","data-name":" 1983",d:"M4820.661-3735.814l-51.433-71.026a88.149,88.149,0,0,1,24.058-12.243,88.48,88.48,0,0,1,27.615-4.391,88.462,88.462,0,0,1,27.562,4.375,88.2,88.2,0,0,1,24.021,12.195l-51.823,71.091Z",transform:"translate(-4627.78 4142.593)",fill:"#00000080"}),(0,v.jsx)("path",{id:"_2231","data-name":" 2231",d:"M-137.923-147.542c.307-3.286-.391-21.6-.421-22.377a11.922,11.922,0,0,0,2.582-1.652,3.349,3.349,0,0,0,1.37-2.391,5.784,5.784,0,0,0-.634-2.8,1.168,1.168,0,0,0-.994-.607,1.266,1.266,0,0,0-.365.057,1.366,1.366,0,0,0-.133.049l-.022.008a2.245,2.245,0,0,0-1.257,2.038,3.235,3.235,0,0,1-.233.937,6.9,6.9,0,0,1-3.437,1.919,9.283,9.283,0,0,0,3.66-1.75,1.75,1.75,0,0,0,.4-1.09c.1-.641.217-1.368.922-1.641a1.114,1.114,0,0,1,.414-.09c.931,0,1.192,1.589,1.318,2.975.073,1.761-1.912,3.161-3.589,4.025h0v-.005l-.023.014c-.021.013-.056.031-.1.055l-.158.078a4.538,4.538,0,0,1-1.821.473c-1.154,0-1.828-.725-2.006-2.157-.073-1.676.912-4.156,2.508-6.318,1.762-2.388,3.829-3.839,5.673-3.984a4.358,4.358,0,0,1,.89-.09,7.639,7.639,0,0,1,4,1.374A14.7,14.7,0,0,1-125.9-177.3c1.524,1.929,2.251,3.844,1.947,5.123-.289,1.317-.939,1.984-1.932,1.984a2.875,2.875,0,0,1-1.027-.211,3.828,3.828,0,0,1-.419-.192l-.038-.019a91.434,91.434,0,0,1,.382,13.92c-.229,4.75-.813,8.333-1.6,9.828-.013,0-.03.03-.059.077a2.407,2.407,0,0,1-.4.509,2.272,2.272,0,0,1-1.615.588c-.062,0-.126,0-.191-.005a1.659,1.659,0,0,1-1.524-1.84,44.062,44.062,0,0,0-.355-11.635.384.384,0,0,1,0,.049c-.1,1.789-.652,10.789-1.457,12.257a1.864,1.864,0,0,1-1.885,1.281A1.811,1.811,0,0,1-137.923-147.542Zm6.5-30.283a5.763,5.763,0,0,0-.631,2.8c.007,1.424,1.5,2.632,2.759,3.394a17.345,17.345,0,0,0,2.6,1.273,15.374,15.374,0,0,1-2.472-1.247c-1.187-.755-2.589-1.961-2.528-3.42.124-1.384.386-2.974,1.317-2.974a1.107,1.107,0,0,1,.415.091c.7.272.819,1,.92,1.64a1.748,1.748,0,0,0,.4,1.089,9.255,9.255,0,0,0,3.6,1.738,6.852,6.852,0,0,1-3.377-1.905,3.185,3.185,0,0,1-.234-.937,2.247,2.247,0,0,0-1.256-2.038h0l-.022-.007c-.025-.011-.072-.03-.134-.049a1.236,1.236,0,0,0-.365-.057A1.169,1.169,0,0,0-131.428-177.825Zm-10.165-.343-1.731-.516a.5.5,0,0,1-.337-.622.5.5,0,0,1,.085-.165.5.5,0,0,1,.536-.172l1.731.516a.5.5,0,0,1,.337.623.5.5,0,0,1-.478.357A.5.5,0,0,1-141.593-178.168Zm14.964-1.379a.487.487,0,0,1-.156-.1.5.5,0,0,1-.02-.706l1.241-1.312a.5.5,0,0,1,.706-.02.5.5,0,0,1,.02.706l-1.241,1.312a.5.5,0,0,1-.364.157A.5.5,0,0,1-126.629-179.546Zm-14.2-.561-1.937-1.844a.5.5,0,0,1-.017-.707.5.5,0,0,1,.707-.017l1.937,1.845a.5.5,0,0,1,.017.706.5.5,0,0,1-.113.089.5.5,0,0,1-.249.066A.5.5,0,0,1-140.832-180.107Zm12.5-.52a.5.5,0,0,1-.338-.621l.755-2.565a.5.5,0,0,1,.62-.338.5.5,0,0,1,.339.621l-.755,2.566a.5.5,0,0,1-.48.358A.48.48,0,0,1-128.328-180.627Zm-12.371-7.306a5.5,5.5,0,0,1,5.5-5.5,5.5,5.5,0,0,1,5.5,5.5,5.5,5.5,0,0,1-5.5,5.5A5.5,5.5,0,0,1-140.7-187.934Z",transform:"translate(324.91 527.736)",fill:"#f8fbff"})]}),(0,v.jsxs)("g",{id:"test2",className:A.petal,transform:"translate(-141.449 -319.119)",onClick:function(){return W(5,"action")},children:[(0,v.jsx)("path",{d:"M4820.661-3735.814l-51.433-71.026a88.149,88.149,0,0,1,24.058-12.243,88.48,88.48,0,0,1,27.615-4.391,88.462,88.462,0,0,1,27.562,4.375,88.2,88.2,0,0,1,24.021,12.195l-51.823,71.091Z",transform:"translate(-4627.78 4142.593)",fill:"#00000080"}),(0,v.jsx)("path",{d:"M-317.317-684.522a76.989,76.989,0,0,0,0-14.377c-.6-4.817-.707-9.083-.707-9.083s-2.327,4.647-2.477,7.745a1.241,1.241,0,0,1-2.328.353c-.906-1.352.045-5.3.745-7.3s4.372-9.188,8.193-9.488a7.794,7.794,0,0,1,3.671.489c1.531.75,7.074.071,7.3-7.054a1.341,1.341,0,0,1,2.531-.456c.1.7,1.152,9.978-8.588,12.057.111.033,2.734,23.369.431,27.747a3.928,3.928,0,0,1-.431.551,2.176,2.176,0,0,1-1.7.547,1.558,1.558,0,0,1-1.431-1.728,40.791,40.791,0,0,0-.333-10.926s-.536,10.038-1.371,11.556a1.736,1.736,0,0,1-1.769,1.2A1.7,1.7,0,0,1-317.317-684.522Zm-2.607-37.928a5.162,5.162,0,0,1,5.162-5.162,5.162,5.162,0,0,1,5.162,5.162,5.162,5.162,0,0,1-5.162,5.162A5.162,5.162,0,0,1-319.924-722.451Zm21.907-.37a.33.33,0,0,1-.074-.024.345.345,0,0,1-.2-.38,2.1,2.1,0,0,0-.916-2.184.344.344,0,0,1-.118-.471.343.343,0,0,1,.434-.138.232.232,0,0,1,.035.018,2.859,2.859,0,0,1,.766.723,2.71,2.71,0,0,1,.474,2.185.344.344,0,0,1-.337.278A.345.345,0,0,1-298.016-722.821Zm-7.9-.274a2.711,2.711,0,0,1,.474-2.183,2.884,2.884,0,0,1,.766-.722l.036-.019a.344.344,0,0,1,.435.139.344.344,0,0,1-.12.471,2.1,2.1,0,0,0-.916,2.183.343.343,0,0,1-.271.4.342.342,0,0,1-.067.007A.344.344,0,0,1-305.916-723.095Zm6.763.084a.279.279,0,0,1-.074-.024.343.343,0,0,1-.2-.38,1.072,1.072,0,0,0-.461-1.108.343.343,0,0,1-.12-.471.347.347,0,0,1,.473-.12,1.757,1.757,0,0,1,.784,1.832.343.343,0,0,1-.336.278A.345.345,0,0,1-299.153-723.011Zm-5.626-.273a1.752,1.752,0,0,1,.784-1.83.305.305,0,0,1,.035-.018.345.345,0,0,1,.436.139.344.344,0,0,1-.12.47,1.07,1.07,0,0,0-.461,1.107.344.344,0,0,1-.272.4.345.345,0,0,1-.066.006A.344.344,0,0,1-304.779-723.284Z",transform:"matrix(0.309, -0.951, 0.951, 0.309, 957.677, 275.16)",fill:"#f8fbff"})]}),(0,v.jsxs)("g",{id:"test3",className:A.petal,transform:"translate(-141.449 -319.119)",onClick:function(){return W(2,"action")},children:[(0,v.jsx)("path",{d:"M4820.661-3735.814l-51.433-71.026a88.149,88.149,0,0,1,24.058-12.243,88.48,88.48,0,0,1,27.615-4.391,88.462,88.462,0,0,1,27.562,4.375,88.2,88.2,0,0,1,24.021,12.195l-51.823,71.091Z",transform:"translate(-4627.78 4142.593)",fill:"#00000080"}),(0,v.jsx)("path",{d:"M-417.7-675.938a180.293,180.293,0,0,0-.277-22.86c-.086-.726-.157-1.41-.219-2.015v0c-.039-.38-.076-.74-.114-1.083-.946.749-3.346.317-3.716-1.116-.305-1.315-.619-2.894-.865-4.466a30.686,30.686,0,0,0-4.107-.213c-1.042,0-2.206.163-3.7.213a1.577,1.577,0,0,1-1.483-1.3,1.415,1.415,0,0,1,.884-1.587c.585-.373,3.923-1.107,7.943-1.572a6.675,6.675,0,0,1,.269-2.489,2.073,2.073,0,0,1,3.513-.86,10.007,10.007,0,0,1,1.036,2.969h0v.009a35.58,35.58,0,0,1,.729,7.429,66.064,66.064,0,0,0,.063-7.462c.352-.008.687-.012,1-.012,3.723,0,6.235.495,7.465,1.468,1.1.764,1.974,2.867,2.592,6.252a69.162,69.162,0,0,1,.915,10.946,98.113,98.113,0,0,1-.457,11.265c-.363,3.468-.9,6.028-1.526,7.209-.013,0-.032.032-.063.083a2.489,2.489,0,0,1-.426.542,2.414,2.414,0,0,1-1.72.626c-.066,0-.135,0-.2-.006a1.769,1.769,0,0,1-1.624-1.96,46.873,46.873,0,0,0-.378-12.39.37.37,0,0,1,0,.052c-.109,1.905-.693,11.491-1.553,13.053a1.98,1.98,0,0,1-2.006,1.364A1.929,1.929,0,0,1-417.7-675.938Zm-1.281-43.015a5.855,5.855,0,0,1,5.855-5.855,5.855,5.855,0,0,1,5.855,5.855,5.856,5.856,0,0,1-5.855,5.855A5.855,5.855,0,0,1-418.981-718.952Z",transform:"matrix(-0.809, -0.588, 0.588, -0.809, 270.952, -456.799)",fill:"#f8fbff"})]}),(0,v.jsxs)("g",{id:"test4",className:A.petal,transform:"translate(-141.449 -319.119)",onClick:function(){return W(3,"action")},children:[(0,v.jsx)("path",{d:"M4820.661-3735.814l-51.433-71.026a88.149,88.149,0,0,1,24.058-12.243,88.48,88.48,0,0,1,27.615-4.391,88.462,88.462,0,0,1,27.562,4.375,88.2,88.2,0,0,1,24.021,12.195l-51.823,71.091Z",transform:"translate(-4627.78 4142.593)",fill:"#00000080"}),(0,v.jsx)("path",{d:"M-204.323-672.148c1.214-2.258,5.028-11.931,3.337-16.981,0-.077-2.5,7.153-7.766,7.39-2.129.145-5.683-4.991-5.668-7.011-.05-1.691,2.62-2.194,3.305-.822.449,2.424,6.856,7.311,4.794-10.049-.027-.012-4.381.2-6.281,7.216-2,3.129-3.009,0-3.009,0s.388-7.017,4.973-10.783,10.343-4.06,10.577-9.08c-.1-4.866-3.2-6.143-4.323-7.627-.689-.522-.584-2.459,2.052-2.048s8.521,6.663,6.133,16.273c-.768,4.739,4.639,17.4-3.409,33.523-.98,1.716-2.058,2.319-2.946,2.319A1.78,1.78,0,0,1-204.323-672.148Zm-8.609-40.812a5.717,5.717,0,0,1,5.717-5.717,5.717,5.717,0,0,1,5.717,5.717,5.717,5.717,0,0,1-5.717,5.717A5.717,5.717,0,0,1-212.932-712.96Z",transform:"matrix(-0.809, 0.588, -0.588, -0.809, -385.118, -90.12)",fill:"#f8fbff"})]}),(0,v.jsxs)("g",{id:"test5",className:A.petal,transform:"translate(-141.449 -319.119)",onClick:function(){return W(4,"action")},children:[(0,v.jsx)("path",{d:"M4820.661-3735.814l-51.433-71.026a88.149,88.149,0,0,1,24.058-12.243,88.48,88.48,0,0,1,27.615-4.391,88.462,88.462,0,0,1,27.562,4.375,88.2,88.2,0,0,1,24.021,12.195l-51.823,71.091Z",transform:"translate(-4627.78 4142.593)",fill:"#00000080"}),(0,v.jsx)("path",{d:"M-204.72-947.23c.037-.019-10.33-3.678-10.33-3.678s-2.026-.414-1.705-2.2,2.595-.988,2.595-.988l8.338,2.405s4.718,1.647,6.558-1.06,6.066-9.059,6.066-9.059a1.649,1.649,0,0,1,2.259-.657c1.371.832-.554,4.6-4.653,12.477.02,0,8.167,30.733,2.968,30.84-3.419-.026-2.454-9.9-5.406-14.25.041.186-2.344,14.28-5.209,14.408a1.664,1.664,0,0,1-.321.035C-207.09-918.954-200.047-933.709-204.72-947.23Zm-3.916-10a5.1,5.1,0,0,1,5.1-5.1,5.1,5.1,0,0,1,5.1,5.1,5.1,5.1,0,0,1-5.1,5.1A5.1,5.1,0,0,1-208.636-957.229Zm-11.138,4.178a3.329,3.329,0,0,1,.965-2.65.472.472,0,0,1,.668.029.474.474,0,0,1-.027.667,2.362,2.362,0,0,0-.666,1.859.472.472,0,0,1-.422.518l-.049,0A.473.473,0,0,1-219.774-953.051Zm-2.193-.1a5.447,5.447,0,0,1,1.579-4.346.474.474,0,0,1,.668.029.475.475,0,0,1-.028.667,4.568,4.568,0,0,0-1.278,3.555.473.473,0,0,1-.423.518l-.049,0A.473.473,0,0,1-221.967-953.149Zm33.635-7.993a.473.473,0,0,1-.423-.518,2.357,2.357,0,0,0-.664-1.858.474.474,0,0,1-.029-.669.473.473,0,0,1,.668-.029,3.326,3.326,0,0,1,.965,2.65.473.473,0,0,1-.47.426Zm2.193-.1a.473.473,0,0,1-.423-.518,4.568,4.568,0,0,0-1.278-3.555.474.474,0,0,1-.026-.668.473.473,0,0,1,.667-.028,5.448,5.448,0,0,1,1.578,4.346.473.473,0,0,1-.47.426Z",transform:"matrix(0.259, 0.966, -0.966, 0.259, -667.603, 789.533)",fill:"#f8fbff"})]})]})})}),(0,v.jsx)("div",{className:A.mask,children:(0,v.jsx)("div",{className:A.emojiWrap,children:I.map((function(e,t){return(0,v.jsx)("div",{id:"emoji".concat(t),className:"".concat(A.emoji_iconBox," flex-row-center-center ").concat(A[Z]," "),style:{transform:"rotate("+30*(t-2.4)+"deg)"},onClick:function(){return W(Number(e.split("_")[1]))},children:(0,v.jsx)(O,{className:A.emoji_icon,name:e,style:{transform:"translate(-50%,-50%) rotate("+(360-30*(t-2.4))+"deg)"}})},e)}))})}),(0,v.jsx)("img",{className:A.btn_next,src:n(39177),alt:"",onClick:function(){return V()}}),(0,v.jsx)("img",{className:A.btn_prev,src:n(76105),alt:"",onClick:function(){return z()}})]}),(0,v.jsx)("div",{style:{pointerEvents:"auto"},children:h.cloneElement(t,{onClick:function(){D&&((0,P.R)("0_6"),o((function(e){return!e})),D=!1,clearTimeout(N),N=setTimeout((function(){D=!0}),700))}})})]})},U=h.memo(B),j=n(3290),F=n(96791),Y=n(89835),G=n(53401),H=Object.defineProperty,Z=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,z=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const W=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))K.call(t,n)&&z(e,n,t[n]);if(Z)for(var n of Z(t))V.call(t,n)&&z(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",role:"img"},e),h.createElement("path",{d:"M1.025 11.824a.601.601 0 0 1-.849-.852l10.8-10.8a.6.6 0 1 1 .849.849L6.848 6l4.975 4.972a.6.6 0 0 1-.848.849L6 6.848l-4.975 4.976ZM.169.985A.577.577 0 0 1 .985.172L4.446 3.63a.577.577 0 0 1-.816.816Z",fill:"#fff"}));var q=function(e){var t=e.onClose;return(0,v.jsx)("div",{onClick:t,className:"w-fit h-fit drawer-header absolute sm:top-[10px] sm:right-[10px] xl:top-[20px] xl:right-[20px]  before:top-[-20px]  before:bottom-[-20px] before:left-[-20px] before:right-[-20px] before:absolute cursor-pointer backdrop-blur-[0px]",style:{content:""},children:(0,v.jsx)(W,{className:"sm:w-[12px] xl:w-[12px]"})})},X=n(92628),Q=function(e){var t=e.onClose;return(0,v.jsx)("div",{onClick:t,className:"w-fit h-fit drawer-header absolute sm:top-[20px] sm:left-[20px] xl:left-[30px] xl:top-[30px] xl:cursor-pointer  before:top-[-20px]  before:bottom-[-20px] before:left-[-20px] before:right-[-20px] before:absolute",style:{content:""},children:(0,v.jsx)("img",{className:"sm:w-[19px] xl:w-[24px]",src:n(11629)})})},J=n(68220),$=["children","visible","handleClose"],ee=["visible"],te=0,ne={mask:!0,maskStyle:{background:"transparent"},closable:!0,isBulr:!0,width:520,closeType:"cross",showDruation:.3,hideDruation:.2,zIndex:999},ie=function(e){var t=e.children,n=e.visible,i=e.handleClose,a=k()(e,$),r=(0,h.useState)(I()(I()({},ne),a)),s=d()(r,2),o=s[0],l=(s[1],(0,h.useState)(!1)),u=d()(l,2),c=u[0],f=u[1],p=(0,h.useState)(++te),m=d()(p,2),g=m[0];m[1];(0,J.Z)((function(){n?f(n):(T.p8.to(".g-modals-content-".concat(g),{scaleX:.5,scaleY:.5,opacity:0,duration:o.hideDruation,ease:"power2.out",onComplete:function(){f(n)}}),T.p8.to(".g-modals-mask-".concat(g),{opacity:0,duration:o.hideDruation,ease:"power2.out"}))}),[n]),(0,h.useLayoutEffect)((function(){c&&setTimeout((function(){T.p8.to(".g-modals-content-".concat(g),{scaleX:1,scaleY:1,opacity:1,duration:o.showDruation,ease:"power2.out"}),o.mask&&T.p8.to(".g-modals-mask-".concat(g),{opacity:1,duration:o.showDruation,ease:"power2.out"})}),200)}),[c]);var x=function(){a.onCancel?a.onCancel():i&&i()};return c?(0,v.jsx)(G.Z,{wrapperId:"react-portal-modal-container",children:(0,v.jsxs)("div",{className:"g-modals-box",style:{zIndex:o.zIndex},children:[(null==o?void 0:o.mask)&&(0,v.jsx)("div",{className:"g-modals-mask opacity-0 g-modals-mask-".concat(g),style:null==o?void 0:o.maskStyle}),(0,v.jsxs)("div",{id:"modal-content",className:"g-modals-content g-modals-content-".concat(g,"\n          w-[").concat(a.width,"] ").concat(o.isBulr?"backdrop-blur-[20px] bg-[rgba(127,127,127,0.2)]":"none"," \n           ").concat(a.contentClassName," scale-50 opacity-0 "),style:I()({},a.style),children:[o.title&&(0,v.jsx)("div",{className:"sm:text-16 xl:text-20 font-OPPO-B text-white sm:top-[20px] xl:top-[20px] ab-x-center leading-[1.2] z-[1]",children:(0,v.jsx)("span",{children:o.title})}),(0,v.jsxs)("div",{className:"g-modals-body relative",children:[t,(null==o?void 0:o.closable)&&("cross"===o.closeType?(0,v.jsx)(q,{onClose:x}):"arrow"===o.closeType?(0,v.jsx)(Q,{onClose:x}):(0,v.jsx)(q,{onClose:x}))]})]})]})}):null},ae=[];ie.open=function(e){var t=I()(I()({},e),{},{visible:!0}),n={id:Symbol("$$_modal"),setShow:null,mounted:!1,show:function(){var e=n.setShow;e&&e(!0)},hidden:function(){var e=n.setShow;e&&e(!1)},destroy:function(){var e;r.unmount(),null==n||null===(e=n.parentDom)||void 0===e||e.remove();var t=ae.indexOf(n);t>-1&&ae.splice(t,1)}};ae.push(n);var i=function(e){var t=(0,h.useState)(!0),i=d()(t,2),a=i[0],r=i[1];n.setShow=r;var s=e.visible,o=k()(e,ee);return(0,h.useEffect)((function(){n.mounted=!0,r(s)}),[]),(0,v.jsx)(ie,I()(I()({},o),{},{handleClose:function(){return n.mounted&&n.hidden()},visible:a}))},a=document.createElement("div");document.querySelector("#react-portal-modal-container").append(a),n.parentDom=a;var r=X.createRoot(a);return r&&r.render((0,v.jsx)(i,I()({},t))),n},ie.close=function(e){0!==(null==ae?void 0:ae.length)&&(e?"string"!=typeof e?null==e||e.destroy():ae.find((function(t){return t.name===e&&(t.destroy(),!0)})):ae.pop().destroy())};var re=ie,se=n(65296),oe=n(74398),le=n(62891),ue=function(e,t){var n=(0,h.useState)(t||0),i=d()(n,2),a=i[0],r=i[1],s=(0,oe.Z)({onEnd:e}),l=d()(s,2),c=l[0],f=l[1],p=(0,le.Z)();(0,h.useEffect)((function(){a&&m()}),[a]),(0,J.Z)((function(){"visible"===p&&a&&m()}),[p]);var m=function(){var e=u()(o()().mark((function e(){var t,n,i,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getServerTime();case 2:t=e.sent,n=t.code,i=t.data,200===n?(r=Date.now()-1e3*(null==i?void 0:i.Time),f(a+r)):f(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return[Math.round(c/1e3),r]},ce=[[{id:101,ip_name:"Pucky",goods_id:1808,exhibit_name:"Sparkle Beanie ",exhibit_detail:"\nSparkle Beanie \nPVC    \n10CM    \n125RMB/\n594\n\n316278\n2023115\nPUCKY Sparkle Beanie1822:32432421252,2507\n ",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-8.17,Y:-111.4,no_img:"",is_img:"",ip_img_arr:""},{id:102,ip_name:"Pucky",goods_id:1800,exhibit_name:"Beanie",exhibit_detail:"\nBeanie\n      \n10CM    \n230RMB/\n41\n\n41\n2023115\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-16.52,Y:-150.35,no_img:"",is_img:"",ip_img_arr:""},{id:103,ip_name:"Pucky",goods_id:1810,exhibit_name:"Beanie",exhibit_detail:"\nBeanie\n      \n10CM    \n230RMB/\n41\n\n41\n2023115\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-16.52,Y:-133.73,no_img:"",is_img:"",ip_img_arr:""},{id:104,ip_name:"Pucky",goods_id:1981,exhibit_name:"The Ghost - Sparkle Blue",pick_name:"The Ghost -\nSparkle Blue",exhibit_detail:"\nThe Ghost - Sparkle Blue\nPVC    \n8.5CM   \n290RMB/\n34  \n\n34\n20221230\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-24.14,Y:-87.17,no_img:"",is_img:"",ip_img_arr:""},{id:105,ip_name:"Pucky",goods_id:1982,exhibit_name:"The Ghost - Sparkle Pink",exhibit_detail:"\nThe Ghost - Sparkle Pink\nPVC    \n8.5CM   \n290RMB/\n34  \n\n34\n20221230\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-35.67,Y:-92.86,no_img:"",is_img:"",ip_img_arr:""},{id:106,ip_name:"Pucky",goods_id:1802,exhibit_name:"The Ghost - Happy Bubbles",pick_name:"The Ghost -\nHappy Bubbles",exhibit_detail:"\nThe Ghost - Happy Bubbles\nPVC    \n8.5CM   \n290RMB/\n107  \n\n107\n20221230\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-7.6,Y:-66.2,no_img:"",is_img:"",ip_img_arr:""},{id:107,ip_name:"Pucky",goods_id:1,exhibit_name:"",exhibit_detail:"\n      \nPVC    \n7.8CM   \n400RMB/\n42  \n\n42\n20221230\n",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-4.1,Y:-99.5,no_img:"",is_img:"",ip_img_arr:""},{id:108,ip_name:"Pucky",goods_id:1,exhibit_name:"",exhibit_detail:"\n      \nPVC    \n7.8CM   \n500RMB/\n92  \n\n92\n20221230\n",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-24.87,Y:-99.3,no_img:"",is_img:"",ip_img_arr:""},{id:109,ip_name:"Pucky",goods_id:1799,exhibit_name:"PUCKY ",exhibit_detail:"\nPUCKY \nPVC    \n26CM   \n1600RMB/\n49  \n\n2029\n20221230\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-20.7,Y:-54.8,no_img:"",is_img:"",ip_img_arr:""},{id:110,ip_name:"Pucky",goods_id:1,exhibit_name:"PUCKY x Dogdogbengpeng Dream a Dream",pick_name:"PUCKY x Dogdogbengpeng\nDream a Dream",exhibit_detail:"\n PUCKY x Dogdogbengpeng Dream a Dream     \n   \n26.5CM \n2500RMB/     \n50  \n\n50\n20221230\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-4,Y:-77.4,no_img:"",is_img:"",ip_img_arr:""},{id:111,ip_name:"Pucky",goods_id:1794,exhibit_name:"PUCKY ",exhibit_detail:"\nPUCKY \n   \n27CM \n2200RMB/     \n80  \n\n2060\n20221230\n",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-15.86,Y:-121,no_img:"",is_img:"",ip_img_arr:""},{id:112,ip_name:"Pucky",goods_id:1806,exhibit_name:"The Ghost - Bubble Gum",exhibit_detail:"\n \nThe Ghost - Bubble Gum\nPVC    \n8.5CM   \n290RMB/\n97  \n\n97\n20221230\nPUCKY",ip_detail:"PUCKY\nPUCKY\nIPPUCKY\nPUCKYPUCKY\n",X:-1.5,Y:-87.9,no_img:"",is_img:"",ip_img_arr:""},{id:113,ip_name:"KENNYSWORK",goods_id:1,exhibit_name:"Molly      ",pick_name:"Molly\n",exhibit_detail:"\nMolly\nPVC    \n10CM    \n449RMB/\n32\n\n32\nMollyMolly",ip_detail:"\nKennyswork\nKenny Wong\nIPMOLLY",X:6.8,Y:-113.2,no_img:"",is_img:"",ip_img_arr:""},{id:114,ip_name:"KENNYSWORK",goods_id:1791,exhibit_name:"Molly      ",exhibit_detail:"\nMolly      \nPVC/  \n17CM    \n999RMB/\n284 \n\n284\nmolly kenny",ip_detail:"\nKennyswork\nKenny Wong\nIPMOLLY",X:60.5,Y:-48.25,no_img:"",is_img:"",ip_img_arr:""},{id:115,ip_name:"KENNYSWORK",goods_id:1,exhibit_name:"Molly-",exhibit_detail:"\nMolly-  \nPVC    \n17CM    \n799RMB/\n184 \n\n164\nMollyMollyMollyMolly",ip_detail:"\nKennyswork\nKenny Wong\nIPMOLLY",X:12,Y:-102,no_img:"",is_img:"",ip_img_arr:""},{id:116,ip_name:"KENNYSWORK",goods_id:1803,exhibit_name:"Alien Molly ",exhibit_detail:"\nAlien Molly     \nPVC    \n10CM    \n399RMB/\n500\n\n240260\nMolly  Molly 10 Molly \nAlien MollyAlien Molly10Alien Molly1010Alien Molly Alien Molly~",ip_detail:"\nKennyswork\nKenny Wong\nIPMOLLY",X:60.5,Y:-32.9,no_img:"",is_img:"",ip_img_arr:""},{id:117,ip_name:"Kennyswork X ",goods_id:1,exhibit_name:"\nMOLLY   ",exhibit_detail:"\nMOLLY \n PVC ABS   \n30*CM  \n4299RMB/     \n183\n\n181\nMOLLYMOLLY",ip_detail:"Kennyswork X \nKenny Wong X \nIPMOLLY",X:60.5,Y:-63.1,no_img:"",is_img:"",ip_img_arr:2},{id:118,ip_name:"SKULLPANDA PLANET",goods_id:1,exhibit_name:" SKULLPANDA\n-Fatal Enchantment     ",exhibit_detail:"\n SKULLPANDA -Fatal Enchantment     \n   \n14.5CM \n1080RMB/     \n199\n\n169\n vs.\n\n",ip_detail:"\nSKULLPANDA\n\nIPSKULLPANDA\nSKULLPANDATATA",X:8.8,Y:-86.6,no_img:"",is_img:"",ip_img_arr:""},{id:119,ip_name:"SKULLPANDA PLANET",goods_id:1,exhibit_name:"SKULLPANDA -Saint Poison  ",pick_name:"SKULLPANDA\n-Saint Poison",exhibit_detail:"\nSKULLPANDA -Saint Poison  \n   \n14.5CM \n1080RMB/     \n199   \n \n179   \n vs.\n\n",ip_detail:"\nSKULLPANDA\n\nIPSKULLPANDA\nSKULLPANDATATA",X:12.9,Y:-61.7,no_img:"",is_img:"",ip_img_arr:""},{id:120,ip_name:"SKULLPANDA PLANET",goods_id:1814,exhibit_name:"SKULLPANDA BABY-",exhibit_detail:"\nSKULLPANDA BABY-\n   \n12.5CM \n820RMB/\n224\n  \n124100     \n",ip_detail:"\nSKULLPANDA\n\nIPSKULLPANDA\nSKULLPANDATATA",X:8.9,Y:-73.87,no_img:"",is_img:"",ip_img_arr:""},{id:121,ip_name:"",goods_id:1912,exhibit_name:"",exhibit_detail:"\n \n\nPU\n20CM\n2500RMB/\n10\n\n10\n \n \n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:56.74,Y:-199.85,no_img:"",is_img:"",ip_img_arr:3},{id:122,ip_name:"",goods_id:1913,exhibit_name:"1",exhibit_detail:"\n \n1\nPU\n20CM\n2500RMB/\n10\n\n10\n  \n \n \nT ",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:56.74,Y:-176.5,no_img:"",is_img:"",ip_img_arr:3},{id:123,ip_name:"",goods_id:1915,exhibit_name:"2",exhibit_detail:"\n \n2\nPU\n20CM\n2500RMB/\n10\n\n10 \n  \n\n \nT \n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:56.74,Y:-165,no_img:"",is_img:"",ip_img_arr:3},{id:124,ip_name:"",goods_id:1911,exhibit_name:"",exhibit_detail:"\n \n\nPU\n20CM\n2700RMB/\n10\n\n10 \n\n\n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:56.74,Y:-187.8,no_img:"",is_img:"",ip_img_arr:3},{id:125,ip_name:"",goods_id:1917,exhibit_name:"",exhibit_detail:"\n \n\n\n50CM\n1700RMB/\n2\n\n2\n\n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:23.46,Y:-229.44,no_img:"",is_img:"",ip_img_arr:3},{id:126,ip_name:"",goods_id:1919,exhibit_name:"",exhibit_detail:"\n \n\n\n50CM\n1700RMB/\n2\n\n2\nHIPANDA\n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:33,Y:-221.1,no_img:"",is_img:"",ip_img_arr:3},{id:127,ip_name:"",goods_id:1920,exhibit_name:"D.",exhibit_detail:"\n \nD.\n\n50CM\n1700RMB/\n2\n\n2\n\n\n \n\n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:33,Y:-221.1,no_img:"",is_img:"",ip_img_arr:3},{id:128,ip_name:"",goods_id:1921,exhibit_name:"\n",exhibit_detail:"\n \n\n\n50CM\n1700RMB/\n2\n\n2\nKIWIWI\n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:23.46,Y:-229.44,no_img:"",is_img:"",ip_img_arr:3},{id:129,ip_name:"",goods_id:1937,exhibit_name:"",exhibit_detail:"\n \n\nPVC\n18CM\n799RMB/\n220\n\n220\n \n\n",ip_detail:"KIWIWI\n\nIP\nKIWIWI--\n\n\n\n",X:56.74,Y:-211,no_img:"",is_img:"",ip_img_arr:3},{id:130,ip_name:"KONATSUYA",goods_id:1991,exhibit_name:"Negora Emerald Marble",exhibit_detail:"\n \nNegora Emerald Marble\nSofubi\n9.5CM\n175RMB/\n22\n\n22\n\n",ip_detail:"KONATSUYA\n\nIP\nKonatsuSofubi",X:-50.2,Y:-208.1,no_img:"",is_img:"",ip_img_arr:""},{id:132,ip_name:"KONATSUYA",goods_id:1962,exhibit_name:"Daioh Shibara Snow-Ice",exhibit_detail:"\n \nDaioh Shibara Snow-Ice\nSofubi\n19.5CM\n484RMB/\n8\n\n18\n\n",ip_detail:"KONATSUYA\n\nIP\nKonatsuSofubi",X:-35,Y:-224.15,no_img:"",is_img:"",ip_img_arr:""},{id:131,ip_name:"KONATSUYA",goods_id:1961,exhibit_name:"Daioh Negora Snow-Ice",exhibit_detail:"\n \nDaioh Negora Snow-Ice\nSofubi\n19.5CM\n484RMB/\n18\n\n18\n\n",ip_detail:"KONATSUYA\n\nIP\nKonatsuSofubi",X:-35,Y:-224.15,no_img:"",is_img:"",ip_img_arr:""},{id:133,ip_name:"MODOLI",goods_id:1965,exhibit_name:"MODOLI-A01",exhibit_detail:"\n \nMODOLI-A01\nPVC\n23CM\n399RMB/\n470\n\n470\nLuckylove\n",ip_detail:"MODOLI\nBBKK\nIPMODOLIMODOLI !  \n    \nModoliBandaKomoyaModoli .....\n \nModoli\n",X:1.65,Y:-144.42,no_img:"",is_img:"",ip_img_arr:""},{id:134,ip_name:"MODOLI",goods_id:1955,exhibit_name:"MODOLI-A01",pick_name:"MODOLI-A01\n",exhibit_detail:"\n \nMODOLI-A01\nPVC\n15CM\n599RMB/\n150\n\n150\n*\n",ip_detail:"MODOLI\nBBKK\nIPMODOLIMODOLI !  \n    \nModoliBandaKomoyaModoli .....\n \nModoli\n",X:8.65,Y:-157.1,no_img:"",is_img:"",ip_img_arr:""},{id:135,ip_name:"MODOLI",goods_id:1943,exhibit_name:"MODOLI PARTS 01 MIX",exhibit_detail:"\n \nMODOLI PARTS 01 MIX\nPVC\n10.2CM\n699RMB/\n270\n\n270\nPARTSPARTS\n",ip_detail:"MODOLI\nBBKK\nIPMODOLIMODOLI !  \n    \nModoliBandaKomoyaModoli .....\n \nModoli\n",X:1.65,Y:-128.3,no_img:"",is_img:"",ip_img_arr:""},{id:136,ip_name:"",goods_id:1971,exhibit_name:"",exhibit_detail:"\n \n\nPVC\n13.5CM\n380RMB/\n5\n\n5\n\n \n",ip_detail:"\n\nIP\n",X:16.56,Y:-172.5,no_img:"",is_img:"",ip_img_arr:""},{id:137,ip_name:"",goods_id:1972,exhibit_name:"-",exhibit_detail:"\n \n-\nPVC\n13.5CM\n380RMB/\n5\n\n5\n\n \n",ip_detail:"\n\nIP\n",X:-8.2,Y:-202.3,no_img:"",is_img:"",ip_img_arr:""},{id:138,ip_name:"",goods_id:1973,exhibit_name:"-",exhibit_detail:"\n \n-\nPVC\n13.5CM\n380RMB/\n5\n\n5\n\n \n",ip_detail:"\n\nIP\n",X:8,Y:-202.1,no_img:"",is_img:"",ip_img_arr:""},{id:139,ip_name:"",goods_id:1974,exhibit_name:"-",exhibit_detail:"\n \n-\nPVC\n13.5CM\n380RMB/\n5\n\n5\n\n \n",ip_detail:"\n\nIP\n",X:-16.6,Y:-187.3,no_img:"",is_img:"",ip_img_arr:""},{id:140,ip_name:"",goods_id:1975,exhibit_name:"-",exhibit_detail:"\n \n-\nPVC\n13.5CM\n380RMB/\n5\n\n5\n\n \n",ip_detail:"\n\nIP\n",X:-16.6,Y:-170.2,no_img:"",is_img:"",ip_img_arr:""},{id:141,ip_name:"",goods_id:1976,exhibit_name:"-",exhibit_detail:"\n \n-\nPVC\n13.5CM\n380RMB/\n5\n\n5\n\n \n",ip_detail:"\n\nIP\n",X:16.56,Y:-187.7,no_img:"",is_img:"",ip_img_arr:""},{id:267,ip_name:"BAZBON",goods_id:1790,exhibit_name:"BAZBON RIBBON",exhibit_detail:"\nBAZBON RIBBON\n\n20CM\n1599RMB/ \n246   \n\n246\n2023215\n B-girlRIBBONRIBBON",ip_detail:"BAZBON\n\nIP, NIKEMCM UPTEMPO",X:-65,Y:-165.1,no_img:"",is_img:"",ip_img_arr:""},{id:268,ip_name:"BAZBON",goods_id:1812,exhibit_name:"BAZBON HORN CAP BOY     ",exhibit_detail:"\nBAZBON HORN CAP BOY     \n    \n20CM     \n1599RMB/      \n246 \n\n246\n2023215\n",ip_detail:"BAZBON\n\nIP, NIKEMCM UPTEMPO",X:-64.8,Y:-188.8,no_img:"",is_img:"",ip_img_arr:""}],[{id:201,ip_name:"COOLABO",goods_id:1924,exhibit_name:"skyCAT 1/6 ENBT SERIES with KOJUNKOJUN",exhibit_detail:"\nskyCAT 1/6 ENBT SERIES with KOJUNKOJUN \nPVC    \n20CM    \n1200RMB/     \n23  \n\n23\nCOOLABOKOJUNA-2LUCKYFORCESsky CAT 1/6 SCALES",ip_detail:"COOLABO\ncoolrain&LABO\nIPCOOLABOcoolrainLABO, coolrainLABO 2021COOLABO",X:-103.45,Y:-136.5,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:202,ip_name:"COOLABO",goods_id:1951,exhibit_name:"CHICKEN KILLER ",pick_name:"CHICKEN KILLER\n",exhibit_detail:"\nCHICKEN KILLER     \nPVC    \n22CM    \n680RMB/\n19  \n\n19\nCOOLABOCRITIC WEAR",ip_detail:"COOLABO\ncoolrain&LABO\nIPCOOLABOcoolrainLABO, coolrainLABO 2021COOLABO",X:-91.56,Y:-140.58,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:203,ip_name:"COOLABO",goods_id:1927,exhibit_name:"superb 6th _BILLY\n-",exhibit_detail:"\nsuperb 6th _BILLY -   \nPVCABS \n30CM    \n1100RMB/     \n6    \n\n6\nCOOLABOBROWNBREATH",ip_detail:"COOLABO\ncoolrain&LABO\nIPCOOLABOcoolrainLABO, coolrainLABO 2021COOLABO",X:-78.95,Y:-140.58,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:204,ip_name:"COOLABO",goods_id:1789,exhibit_name:"Duck to the Future",pick_name:"Duck to the Future\n",exhibit_detail:" Duck to the Future   \n \n 20CM\n 4300RMB/ \n 4 \n\n4\n\n-",ip_detail:"COOLABO\ncoolrain&LABO\nIPCOOLABOcoolrainLABO, coolrainLABO 2021COOLABO",X:-66.95,Y:-136.27,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:205,ip_name:"AZURA",goods_id:1914,exhibit_name:"AZURA",exhibit_detail:"AZURA\nPVC/ABS//\n9.1-11.3cm\n828 RMB/\n24\n\n24\nAZURA\n \n*7",ip_detail:"AZURA\n\nPDC\nAZURA\nIPAZURA\n\n AZURA\n\nAZURA",X:-38,Y:-27.22,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:206,ip_name:"BOBO&COCO",goods_id:1918,exhibit_name:"MEGA BOBO&COCO 1000% ",exhibit_detail:"MEGA BOBO&COCO 1000% \nPVC/ABS/PC\n65CM\n3999RMB/\n10\n\n10\n",ip_detail:"BOBO & COCO\n\nPDCBOBO & COCO\n \nIPBOBO Ta COCO ",X:-16.6,Y:-22.95,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:207,ip_name:"TAPOO",goods_id:1977,exhibit_name:"TAPOO",exhibit_detail:"TAPOO\nPVC/ABS\n7.0cm-9.7cm\n828RMB/\n5\n\n5\nTAPOOMillyTAPOOTa\n \n*7",ip_detail:"TAPOO\nCiecy\nPDCCiecy\n\n\nIPTAPOO\n\n TAPOO\nTA...",X:-31.6,Y:-32.78,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:208,ip_name:"Zsiga",goods_id:1987,exhibit_name:"Zsiga",exhibit_detail:"Zsiga\nPVC/ABS\n7.1-10.0cm\n828RMB/\n12\n\n12\n\n \n*7",ip_detail:"Zsiga\nDan\nPDCDan, Zsiga\nIPZsiga,TA",X:-25.17,Y:-38,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:209,ip_name:"Hirono",goods_id:1936,exhibit_name:"Hirono",pick_name:"Hirono\n",exhibit_detail:"Hirono\nPVC/ABS/\n5.9cm-10.5cm\n828 RMB/\n24\n\n24\n \n\n\n\n\n \n\n\n\n\n\n\n \n\n\n\n\n\n\n\n\n \n\n\n\n \n\n\n\n\n \n\n*7\n\n\n\n\n\n\n\n\n\n\n\n\n \n\n\n\n\n\n",ip_detail:"Hirono\nLang\nIPHirono\n\n\nHirono",X:-9.6,Y:-10.94,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:210,ip_name:"PINO JELLY",goods_id:1959,exhibit_name:"PINO JELLY\n",exhibit_detail:"PINO JELLY\nPVC/ABS//\n7.0cm-8.5cm\n828 RMB/\n24\n\n24\nPINO JELLY\n \n*7",ip_detail:"PINO JELLY\nYUMI\nIP\n PINO JELLY \nPINO JELLY \n",X:38.32,Y:-27.12,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:211,ip_name:"Vita",goods_id:1983,exhibit_name:"Vita Lowride ",exhibit_detail:"Vita Lowride \nPVC/ABS\n16.5CM\n699RMB/\n200\n\n200\noversizelowrideVita100%Vitacome and join mehomie",ip_detail:"Vita\nNINEGO\nIPVita  DJ\n\nCookie Vita \n\n",X:-48.77,Y:-122.85,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:212,ip_name:"YUKI",goods_id:1986,exhibit_name:"YUKI",exhibit_detail:"YUKI\nPVC\n5.7cm\n708 RMB/\n24\n\n24\n\nYUKI\n \n*7",ip_detail:"YUKI\nLang\nIP......\n YUKI",X:25.38,Y:-38.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:213,ip_name:"Sweet Bean ",goods_id:1998,exhibit_name:"",exhibit_detail:"\nABS/PVC/\n7.4*15.9*13.6CM\n599RMB/\n100\n\n100\nTa\n\n",ip_detail:"Sweet Bean \n\nPDC\n\nIP\nTa\n",X:10.2,Y:-9.74,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:214,ip_name:"Sweet Bean ",goods_id:1895,exhibit_name:"",exhibit_detail:"\nPVC\n14.2cm\n499 RMB/\n480\n\n15030011.1730\n",ip_detail:"Sweet Bean \n\nPDC\n\nIP\nTa\n",X:16.7,Y:-22.77,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:215,ip_name:"Sweet Bean ",goods_id:1997,exhibit_name:"",exhibit_detail:"\nPVC/ABS/\n8.2-9.7cm\n711RMB/\n24\n\n24\n\n\nTA\n \n*7",ip_detail:"Sweet Bean \n\nPDC\n\nIP\nTa\n",X:32,Y:-32.9,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:216,ip_name:"inner flow",goods_id:1948,exhibit_name:" Hirono ",exhibit_detail:" Hirono \n/\n23*23*26CM\n10999RMB/\n5\n\n5\ninner flowLangHirono",ip_detail:"inner flow\nLang\nHirono\n\n",X:105.5,Y:-28.53,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:217,ip_name:"inner flow",goods_id:2,exhibit_name:"Hirono ",exhibit_detail:"Hirono \n\n38x38x60CM\n18800RMB/\n0\n\nLangHirono",ip_detail:"inner flow\nLang\nHirono\n\n",X:92,Y:-27.2,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:218,ip_name:"inner flow",goods_id:1949,exhibit_name:"Hirono ",exhibit_detail:"Hirono \n\n38x38x60CM\n18800RMB/\n1\n\n1\ninner flowLangHirono",ip_detail:"inner flow\nLang\nHirono\n\n",X:95,Y:-36.54,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:219,ip_name:"inner flow",goods_id:1947,exhibit_name:"Hirono  ",exhibit_detail:"Hirono  \n\n40*30*32CM\n3999RMB/\n2\n\n2\ninner flowLangHirono",ip_detail:"inner flow\nLang\nHirono\n\n",X:80.1,Y:-30.34,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:220,ip_name:"inner flow",goods_id:1946,exhibit_name:"",exhibit_detail:"\n\n90*70CM\n1499RMB/\n2\n\n2\ninner flowLang",ip_detail:"inner flow\nLang\nHirono\n\n",X:78.18,Y:-129.7,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:221,ip_name:"inner flow",goods_id:2,exhibit_name:"",exhibit_detail:"\n\n17*14*36CM\n4999RMB/\n0\n\n",ip_detail:"inner flow\n\n\n",X:133,Y:-101.3,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:222,ip_name:"inner flow",goods_id:2,exhibit_name:"",exhibit_detail:"\n\n43*43*22CM\n9880RMB/\n0\n\n",ip_detail:"inner flow\n\n\n\n",X:77.2,Y:-18.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:223,ip_name:"inner flow",goods_id:2,exhibit_name:"MUSE",exhibit_detail:"MUSE\n\n33*33*23CM\n3999RMB/\n0\n\ninner flowUnderverse",ip_detail:"inner flow\nAshley Wood\n3A\nUnderverseCEOAshley Wood \n\n",X:71.78,Y:-117.14,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:224,ip_name:"inner flow",goods_id:1926,exhibit_name:"",exhibit_detail:"\n\n33*17*26CM\n1999RMB/\n2\n\n2\nBIRDMAN",ip_detail:"inner flow\nFELIX_\nFELIX_\n\n",X:65.16,Y:-104.13,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:225,ip_name:"inner flow",goods_id:1993,exhibit_name:"",exhibit_detail:"\n\n23*13*43CM\n5499RMB/\n2\n\n2\ninner flow",ip_detail:"inner flow\n\n199115\n2015\n201930\n",X:122.43,Y:-143.9,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:226,ip_name:"inner flow",goods_id:2004,exhibit_name:"-",exhibit_detail:"-\n\n14*10*35CM\n4999RMB/\n2\n\n2\n",ip_detail:"inner flow\n\n\n",X:133,Y:-115.42,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:227,ip_name:"inner flow",goods_id:2,exhibit_name:"-",exhibit_detail:"-\n\n30*18*21CM\n1999RMB/\n0\n\n",ip_detail:"inner flow\nPhilip Colbert\n(Philip Colbert)\n\n \n",X:101.4,Y:-143.9,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:228,ip_name:"inner flow",goods_id:2,exhibit_name:"-",pick_name:"-\n",exhibit_detail:"-\n\n30*18*21CM\n1999RMB/\n0\n\n",ip_detail:"inner flow\nPhilip Colbert\n(Philip Colbert)\n\n \n",X:112.2,Y:-143.9,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:229,ip_name:"inner flow",goods_id:1992,exhibit_name:" 2Call Me 2",pick_name:" 2Call Me 2\n",exhibit_detail:" 2Call Me 2\n\n90*70CM\n1499RMB/\n2\n\n2\n",ip_detail:"inner flow\n\n\n\n",X:133,Y:-130,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:230,ip_name:"SATYR RORY",goods_id:1,exhibit_name:"SATYR RORY--\nSay Hello to Little Rory ",exhibit_detail:"SATYR RORY--Say Hello to Little Rory \n\n13CM\n1399RMB/\n15\n\n15\n\n ",ip_detail:"SATYR RORY\nSeulgie\nIPSatyr\n\n \nSATYR RORY\n\nRORY\n\n\n",X:8.4,Y:-59.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:231,ip_name:"SATYR RORY",goods_id:1,exhibit_name:"SATYR RORY-Middy Blouse-PINK",exhibit_detail:"SATYR RORY-Middy Blouse-PINK\n\n13CM\n1399RMB/\n11\n\n11\n",ip_detail:"SATYR RORY\nSeulgie\nIPSatyr\n\n \nSATYR RORY\n\nRORY\n\n\n",X:0,Y:-59.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:232,ip_name:"SATYR RORY",goods_id:1,exhibit_name:"SATYR RORY-Middy Blouse-BLUE",exhibit_detail:"SATYR RORY-Middy Blouse-BLUE\n\n13CM\n1399RMB/\n11\n\n11\n",ip_detail:"SATYR RORY\nSeulgie\nIPSatyr\n\n \nSATYR RORY\n\nRORY\n\n\n",X:-8.4,Y:-59.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:233,ip_name:"Silent Trick",goods_id:1,exhibit_name:"Dreamland Protector ",pick_name:"Dreamland Protector\n",exhibit_detail:"Dreamland Protector \nPVC\n18CM\n699RMB/\n193 \n\n193\nLiLiOS",ip_detail:"Silent Trick\nmspring\nmspring Maryland Institute College of Art MICA2022POP MART Art ToyLiLiOS\nIPLiLiOS\n\n",X:-27.32,Y:-107.2,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:234,ip_name:"Silent Trick",goods_id:1,exhibit_name:"Strawberry Rescue ",pick_name:"Strawberry Rescue\n",exhibit_detail:"Strawberry Rescue \nPVC\n18CM\n699RMB/\n193\n\n193\nLiLiOSSOS\n\nlilios",ip_detail:"Silent Trick\nmspring\nmspring Maryland Institute College of Art MICA2022POP MART Art ToyLiLiOS\nIPLiLiOS\n\n",X:0,Y:-107.2,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:235,ip_name:"Silent Trick",goods_id:1,exhibit_name:"Strawberry Rescue ",pick_name:"Strawberry Rescue\n",exhibit_detail:"Strawberry Rescue \nPVC\n18CM\n699RMB/\n193\n\n193\nLiLiOS",ip_detail:"Silent Trick\nmspring\nmspring Maryland Institute College of Art MICA2022POP MART Art ToyLiLiOS\nIPLiLiOS\n\n\n",X:-13.4,Y:-107.2,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:236,ip_name:"CRYBABY",goods_id:1923,exhibit_name:"CRYBABY ",exhibit_detail:"CRYBABY \nPVC\n16CM\n1299RMB/\n400\n\n400\nCRYBABY~~",ip_detail:"CRYBABY\nMolly\nIPCRYBABYCRYBABY",X:24.9,Y:-98.26,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:237,ip_name:"CRYBABY",goods_id:1922,exhibit_name:"CRYBABY ",exhibit_detail:"\nCRYBABY   \nPVC    \n16CM    \n1299RMB/     \n400\n\n400\nCRYBABY~~",ip_detail:"CRYBABY\nMolly\nIPCRYBABYCRYBABY",X:41,Y:-80.67,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:238,ip_name:"CRYBABY",goods_id:1,exhibit_name:"MEGA\n400% CRYBABY ",exhibit_detail:"\nMEGA 400% CRYBABY \nPVC/  \n30CM    \n1999RMB/     \n100\n\n90\nMEGA 400% CRYBABY ",ip_detail:"CRYBABY\nMolly\nIPCRYBABYCRYBABY",X:17.76,Y:-104.77,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:239,ip_name:"CRYBABY",goods_id:1793,exhibit_name:"CRYBABY",exhibit_detail:"\nCRYBABY\nPVC\n10CM    \n299RMB/     \n1000\n\n700\n",ip_detail:"CRYBABY\nMolly\nIPCRYBABYCRYBABY",X:32.95,Y:-91.95,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:240,ip_name:"LAB X INSTINCTOY",goods_id:1916,exhibit_name:"LAB X INSTINCTOY Erosion ",exhibit_detail:"\nLAB X INSTINCTOY Erosion  \n   \n22CM*16CM*30CM    \n2499RMB/     \n97\n \n97\n INSTINCTOYLIQUID",ip_detail:"LAB X INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-55.6,Y:-1.56,no_img:"",is_img:"",ip_img_arr:2,is_white:!0},{id:241,ip_name:"INSTINCTOY",goods_id:1910,exhibit_name:"Big Ice Liquid Poppin' Orange\n",exhibit_detail:"\nBig Ice Liquid Poppin' Orange  \nSofubi\n10.4CM*10CM     \n369RMB/\n45  \n\n1511.1730\n",ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-88.2,Y:-8.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:242,ip_name:"INSTINCTOY",goods_id:1978,exhibit_name:"Big Ice Liquid Poppin' Blue\n",exhibit_detail:"\nBig Ice Liquid Poppin' Blue   \nSofubi\n10.4CM*10CM     \n369RMB/\n45  \n\n45\n ",ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-109.7,Y:-12.3,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:243,ip_name:"INSTINCTOY",goods_id:1979,exhibit_name:"Big Ice Liquid Poppin' Purple\n",exhibit_detail:"\nBig Ice Liquid Poppin' Purple \nSofubi\n10.4CM*10CM     \n369RMB/\n45  \n\n45\n ",ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-99,Y:-10.15,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:244,ip_name:"Yosuke Ueno x INSTINCTOY ",goods_id:1908,exhibit_name:"Yosuke Ueno x INSTINCTOY\nHapico 3rd color Galaxy\n",exhibit_detail:"\nYosuke Ueno x INSTINCTOY Hapico 3rd color Galaxy\nSofubi\n11.7CM*23CM\n1200RMB/     \n45  \n\n2520\n HAPICO   DNA ",ip_detail:"Yosuke Ueno x INSTINCTOY \n \nIP2005 INSTINCTOY20082015Designer Toy AwardsINSTINCTOY20\n \nHAPICO  \n \n \nHAPICO DNA ",X:-44.4,Y:.7,no_img:"",is_img:"",ip_img_arr:2,is_white:!0},{id:245,ip_name:"INSTINCTOY",goods_id:1,exhibit_name:"Big Ice Liquid Poppin' Rainbow\n",exhibit_detail:"\nBig Ice Liquid Poppin' Rainbow \nSofubi\n10.4CM*10CM     \n399RMB/\n45  \n\n30\n ",ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-144.1,Y:-37.94,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:246,ip_name:"INSTINCTOY",goods_id:1,exhibit_name:"Monster Fluffy Green\n",exhibit_detail:"\nMonster Fluffy Green \nSofubi\n11.4CM*13.4CM\n699RMB/\n95  \n\n83\n Monster Fluffy ",ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-144.1,Y:-29.25,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:247,ip_name:"INSTINCTOY",goods_id:1,exhibit_name:"Fluffy Green ",pick_name:"Fluffy Green\n",exhibit_detail:"\nFluffy Green \nSofubi\n6CM*5.6CM\n189RMB/\n95  \n\n85\nFluffy ",ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-144.1,Y:-20.5,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:248,ip_name:"INSTINCTOY",goods_id:1967,exhibit_name:'Big Thunder Liquid\n"Pink Clear',exhibit_detail:'Big Thunder Liquid "Pink Clear\nSofubi\n13CM*11.4CM\n399RMB/\n45  \n\n45\n ',ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-132.67,Y:-89.54,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:249,ip_name:"INSTINCTOY",goods_id:1968,exhibit_name:'Big Thunder Liquid\n"Blue Clear',exhibit_detail:'Big Thunder Liquid "Blue Clear\nSofubi\n13CM*11.4CM\n399RMB/\n45  \n\n45\n ',ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-132.67,Y:-61.1,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:250,ip_name:"INSTINCTOY",goods_id:1969,exhibit_name:'Big Thunder Liquid\n"Orange Clear',pick_name:'Big Thunder Liquid\n"Orange Clear\n',exhibit_detail:'Big Thunder Liquid "Orange Clear\nSofubi\n13CM*11.4CM\n399RMB/\n45  \n\n45\n ',ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-132.67,Y:-75.5,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:251,ip_name:"INSTINCTOY",goods_id:1970,exhibit_name:'Big Thunder Liquid "Purple Clear',pick_name:'Big Thunder Liquid "Purple Clear\n',exhibit_detail:'Big Thunder Liquid "Purple Clear\nSofubi\n13CM*11.4CM\n399RMB/\n45  \n\n45\n ',ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-132.67,Y:-103.94,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:252,ip_name:"INSTINCTOY",goods_id:1,exhibit_name:'Big Thunder Liquid "Rainbow Clear',pick_name:'Big Thunder Liquid "Rainbow Clear\n',exhibit_detail:'Big Thunder Liquid "Rainbow Clear\nSofubi\n13CM*11.4CM\n419RMB/\n45  \n\n45\n ',ip_detail:"INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-144.1,Y:-47.15,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:253,ip_name:"INSTINCTOY X KENNYSWORK",goods_id:1896,exhibit_name:"Baby Erosion Molly\n-    ",exhibit_detail:"\nBaby Erosion Molly-\nSofubi\n9.5CM   \n239RMB/\n670\n\n220400\nINSTINCTOYKENNYSWORK",ip_detail:"kennyswork  INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-66.3,Y:-3.4,no_img:"",is_img:"",ip_img_arr:2,is_white:!0},{id:254,ip_name:"INSTINCTOY X KENNYSWORK",goods_id:1897,exhibit_name:"Baby Ice Erosion Molly\n-",exhibit_detail:"\nBaby Ice Erosion Molly-\nSofubi\n9.5CM   \n239RMB/\n670\n\n230390\nINSTINCTOYKENNYSWORK",ip_detail:"kennyswork  INSTINCTOY\n \nIP2005INSTINCTOY\n2008\n2015Designer Toy Awards\nINSTINCTOY20",X:-77,Y:-5.6,no_img:"",is_img:"",ip_img_arr:2,is_white:!0},{id:255,ip_name:"GOOLYGOOLY",goods_id:1990,exhibit_name:"GOOLYGOOLY",exhibit_detail:"\nGOOLYGOOLY\n\n297*420mm\n189RMB/\n96\n\n96\n 2021\n \n\n \n",ip_detail:"GOOLYGOOLY\nKim Hyun\nIPKim Hyun, GOOLY GOOLY\n \nGOOLY GOOLY\n \n",X:113.77,Y:-70,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:256,ip_name:"GOOLYGOOLY\n",goods_id:1999,exhibit_name:"GOOLYGOOLY++",pick_name:"GOOLYGOOLY\n++",exhibit_detail:"\nGOOLYGOOLY++\n\n\n125*170mm\n   70*70mm\n   120*150mm\n117RMB/\n90\n\n90\nGOOLYGOOLYGOOLYGOOLY9+GOOLYGOOLY 2+GOOLYGOOLY2\n \n\n9\n \nGOOLYGOOLY\n \n",ip_detail:"GOOLYGOOLY\nKim Hyun\nIPKim Hyun, GOOLY GOOLY\n \nGOOLY GOOLY\n \n",X:102.77,Y:-58.35,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:257,ip_name:"GOOLYGOOLY",goods_id:2001,exhibit_name:"GOOLYGOOLY\n12",exhibit_detail:"\nGOOLYGOOLY12\n\n65*60mm/45*40mm\n69RMB/\n388\n\n388\n12\n 12GOOLYGOOLY",ip_detail:"GOOLYGOOLY\nKim Hyun\nIPKim Hyun, GOOLY GOOLY\n \nGOOLY GOOLY\n \n",X:126.46,Y:-25.65,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:258,ip_name:"GOOLYGOOLY",goods_id:2e3,exhibit_name:"GOOLYGOOLY\n13",exhibit_detail:"\nGOOLYGOOLY13\n\n60*(40~60)mm\n79RMB/\n387\n\n387\n13\n13",ip_detail:"GOOLYGOOLY\nKim Hyun\nIPKim Hyun, GOOLY GOOLY\n \nGOOLY GOOLY\n \n",X:102.7,Y:-82.66,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:259,ip_name:"GOOLYGOOLY",goods_id:1994,exhibit_name:"GOOLYGOOLY",exhibit_detail:"\nGOOLYGOOLY(11\n\n297*420mm\n129RMB/\n187\n\n187\n11\n",ip_detail:"GOOLYGOOLY\nKim Hyun\nIPKim Hyun, GOOLY GOOLY\n \nGOOLY GOOLY\n \n",X:126.46,Y:-39.57,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:260,ip_name:"GOOLYGOOLY",goods_id:2002,exhibit_name:"GOOLYGOOLY ",pick_name:"GOOLYGOOLY\n",exhibit_detail:"\nGOOLYGOOLY \nPVC\n8CM\n69RMB/\n136\n\n136\nGOOLYGOOLY 8 697\n \nDaisyDaisy\n",ip_detail:"GOOLYGOOLY\nKim Hyun\nIPKim Hyun, GOOLY GOOLY\n \nGOOLY GOOLY\n \n",X:90.2,Y:-70,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:261,ip_name:"Flying DongDong",goods_id:1984,exhibit_name:"Flying DongDong\n-",exhibit_detail:"\nFlying DongDong-    \nPVC    \n10CM    \n199RMB/\n698\n\n698\nFlying DongDongDongDong, ",ip_detail:"Flying DongDong\nCLOCKHOUSE\nIPDongDong DongDongDongDong",X:-75.65,Y:-92.87,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:262,ip_name:"Flying DongDong",goods_id:1954,exhibit_name:"Flying DongDong",pick_name:"Flying DongDong\n",exhibit_detail:"\nFlying DongDong    \nPVC    \n10CM    \n600RMB/\n34\n\n34\nDongDong,",ip_detail:"Flying DongDong\nCLOCKHOUSE\nIPDongDong DongDongDongDong",X:-70.46,Y:-74.6,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:263,ip_name:"Flying DongDong",goods_id:1930,exhibit_name:"Flying DongDong\n-",exhibit_detail:"\nFlying DongDong-\n   \n15CM  \n899RMB/\n9\n\n9\nDongDong",ip_detail:"Flying DongDong\nCLOCKHOUSE\nIPDongDong DongDongDongDong",X:-94.84,Y:-75.87,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:264,ip_name:"Flying DongDong",goods_id:1980,exhibit_name:"Flying DongDong",pick_name:"Flying DongDong\n",exhibit_detail:"\nFlying DongDong\n \n/   \n350RMB/\n29\n\n29\nDongDong",ip_detail:"Flying DongDong\nCLOCKHOUSE\nIPDongDong DongDongDongDong",X:-86,Y:-94.2,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:265,ip_name:"Flying DongDong",goods_id:1988,exhibit_name:"Flying DongDong",pick_name:"Flying DongDong\n",exhibit_detail:"\nFlying DongDong\nPVC\n8CM    \n199RMB/ \n580\n\n580\nDONGDONG",ip_detail:"Flying DongDong\nCLOCKHOUSE\nIPDongDong DongDongDongDong",X:-69,Y:-84.7,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:266,ip_name:"Flying DongDong",goods_id:1935,exhibit_name:"Flying DongDong",exhibit_detail:"\nFlying DongDong\nPVC\n15CM    \n799RMB/ \n400\n\n400\nFlying DongDong39Flying DongDongID221\nFlying DongDong",ip_detail:"Flying DongDong\nCLOCKHOUSE\nIPDongDong DongDongDongDong",X:-94.3,Y:-87.87,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:142,ip_name:"PHILIP COLBERT",goods_id:1,exhibit_name:"PHILIP COLBERT\n",exhibit_detail:"\n \nPHILIP COLBERT\n\n45CM\n359RMB/\n277\n\n277\n \n\n \n\n",ip_detail:"PHILIP COLBERT\nPHILIP COLBERT\nIP\nPhilip Colbert \n \n",X:135.1,Y:-88.85,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:143,ip_name:"PHILIP COLBERT",goods_id:1,exhibit_name:"PHILIP COLBERT\n",exhibit_detail:"\n \nPHILIP COLBERT\n\n25CM\n199RMB/\n25\n\n25\n\n \n\n",ip_detail:"PHILIP COLBERT\nPHILIP COLBERT\nIP\nPhilip Colbert \n \n",X:135.1,Y:-78.94,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:144,ip_name:"PHILIP COLBERT",goods_id:1995,exhibit_name:"PHILIP COLBERT\n",exhibit_detail:"\n \nPHILIP COLBERT\n\n35*40CM\n129RMB/\n36\n\n36\n \n\n \n\n",ip_detail:"PHILIP COLBERT\nPHILIP COLBERT\nIP\nPhilip Colbert \n \n",X:132.8,Y:-68.7,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:145,ip_name:"PHILIP COLBERT",goods_id:1996,exhibit_name:"PHILIP COLBERT\n",exhibit_detail:"\n \nPHILIP COLBERT\n\n35*40CM\n129RMB/\n44\n\n44\n\n \n\n",ip_detail:"PHILIP COLBERT\nPHILIP COLBERT\nIP\nPhilip Colbert \n \n",X:129.12,Y:-59.3,no_img:"",is_img:"",ip_img_arr:"",is_white:!0},{id:269,ip_name:"",goods_id:1792,exhibit_name:"",exhibit_detail:"\n \n\nPVC,ABS\n9CM\n199RMB/\n6001/24\n\n200400\nHAPICOHAPICOHAPICO\n",ip_detail:"Yosuke Ueno\n\nIP\nHAPICO  \n \n \nHAPICO DNA ",X:-82.28,Y:-67.68,no_img:"",is_img:"",ip_img_arr:"",is_white:!0}],[{id:301,ip_name:"",goods_id:1942,exhibit_name:"Cookie",exhibit_detail:"\n      \nCookie\n\n13.5CM\n699RMB/\n278\n\n278\n\n\n ",ip_detail:"\nCookie\nIP\n\n,\n\n",X:-54.35,Y:-29.3,no_img:"",is_img:"",ip_img_arr:""},{id:302,ip_name:"",goods_id:1893,exhibit_name:"Cookie",exhibit_detail:"\n      \nCookie\n\n12.5CM\n699RMB/\n380\n\n50330\n\n\n ",ip_detail:"\nCookie\nIP\n\n,\n\n",X:-54.35,Y:-4.4,no_img:"",is_img:"",ip_img_arr:""},{id:303,ip_name:"",goods_id:1907,exhibit_name:"Julie",exhibit_detail:"\n      \nJulie\nPVC\n7CM\n199RMB/\n496\n\n100400\nJulie\n ",ip_detail:"\nCookie\nIP\n\n,\n\n",X:-54.35,Y:-16.8,no_img:"",is_img:"",ip_img_arr:""},{id:304,ip_name:"GUMMY",goods_id:1902,exhibit_name:"",exhibit_detail:"\n \n\nPVC\n7CM\n199RMB/\n300\n\n100200\n\n",ip_detail:"GUMMY\nGrace\nIP\nGUMMY\n",X:47.5,Y:-289.6,no_img:"",is_img:"",ip_img_arr:""},{id:305,ip_name:"GUMMY",goods_id:1905,exhibit_name:"",exhibit_detail:"\n \n\n\n16CM\n699RMB/\n310\n\n50260\n\n",ip_detail:"GUMMY\nGrace\nIP\nGUMMY\n",X:36.8,Y:-289.6,no_img:"",is_img:"",ip_img_arr:""},{id:306,ip_name:"NOMIGEE",goods_id:1904,exhibit_name:"NOMIGEE",exhibit_detail:"\n \nNOMIGEE\n\n11CM\n780RMB/\n113\n\n3380\n\nNONOMIGEE\n\n",ip_detail:"NOMIGEE\nMilking\nIP\nNOMIGEE",X:55.38,Y:-77.42,no_img:"",is_img:"",ip_img_arr:""},{id:307,ip_name:"NOMIGEE",goods_id:1903,exhibit_name:"NOMIGEE",exhibit_detail:"\n \nNOMIGEE\n\n11CM\n780RMB/\n113\n\n335011.1730\n\n",ip_detail:"NOMIGEE\nMilking\nIP\nNOMIGEE",X:55.38,Y:-84.36,no_img:"",is_img:"",ip_img_arr:""},{id:308,ip_name:"NOMIGEE",goods_id:1899,exhibit_name:"NOMIGEE",exhibit_detail:"\n \nNOMIGEE\n\n11CM\n780RMB/\n113\n\n3083\n\n",ip_detail:"NOMIGEE\nMilking\nIP\nNOMIGEE",X:55.38,Y:-91.27,no_img:"",is_img:"",ip_img_arr:""},{id:309,ip_name:"NOMIGEE",goods_id:1898,exhibit_name:"NOMIGEE",exhibit_detail:"\n \nNOMIGEE\n\n11CM\n880RMB/\n143\n\n30113\nNOMIGEENOMIGEENOMIGEE\n",ip_detail:"NOMIGEE\nMilking\nIP\nNOMIGEE",X:55.38,Y:-66,no_img:"",is_img:"",ip_img_arr:""},{id:310,ip_name:"\n   \nSUSUMI\n \n ",goods_id:1,exhibit_name:"SUSUMI",exhibit_detail:"\n \nSUSUMI\n\n11CM\n750RMB/\n113\n\n103\nsusumi\n \n\n",ip_detail:"SUSUMI\nPEPEKO\nIP\nSUSUMI",X:55.1,Y:-139,no_img:"",is_img:"",ip_img_arr:""},{id:311,ip_name:"\n   \nSUSUMI\n \n ",goods_id:1,exhibit_name:"SUSUMI",exhibit_detail:"\n \nSUSUMI\nPVCABS\n11CM\n780RMB/\n93\n\n83\nSUSUMI\n \n\n",ip_detail:"SUSUMI\nPEPEKO\nIP\nSUSUMI",X:55.4,Y:-171.6,no_img:"",is_img:"",ip_img_arr:""},{id:312,ip_name:"\n   \nSUSUMI\n \n ",goods_id:1,exhibit_name:"TUTUMI",exhibit_detail:"\n \nTUTUMI\n\n9CM\n650RMB/\n128\n\n118\n \nTUTUMI,\n \n",ip_detail:"SUSUMI\nPEPEKO\nIP\nSUSUMI",X:55.4,Y:-157.76,no_img:"",is_img:"",ip_img_arr:""},{id:313,ip_name:"ViViCat",goods_id:1960,exhibit_name:"VIVICAT",exhibit_detail:"\n \nVIVICAT\nViViCat-PVC-\n25CM\n499RMB/\n145\n\n145\n~ViViCat\n",ip_detail:"ViViCat\n\nIP\n RobinViViCatRobinViViCat",X:-53.75,Y:-102,no_img:"",is_img:"",ip_img_arr:""},{id:314,ip_name:"ViViCat",goods_id:1958,exhibit_name:"VIVICAT",exhibit_detail:"\n \nVIVICAT\nViViCat-PVC-\n25CM\n499RMB/\n145\n\n145\n~ViViCat\n",ip_detail:"ViViCat\n\nIP\n RobinViViCatRobinViViCat",X:-54.4,Y:-87.16,no_img:"",is_img:"",ip_img_arr:""},{id:315,ip_name:"ViViCat",goods_id:2003,exhibit_name:"ViViCat",exhibit_detail:"\n \nViViCat\n\n17CM15CM150cm\n69RMB/\n95\n\n45\nViViCatViViCat\n",ip_detail:"ViViCat\n\nIP\n RobinViViCatRobinViViCat",X:-54.4,Y:-76.8,no_img:"",is_img:"",ip_img_arr:""},{id:316,ip_name:"YOYO YEUNG STUDIO",goods_id:1795,exhibit_name:"Raby  ",exhibit_detail:"\n \nRaby  \n\n9CM\n820RMB/\n106\n\n3076\n \nRABY YOKI\n \nRABY\n \n RABY\n",ip_detail:"YOYO YEUNG STUDIO\nYoyo Yeung\nIP\nYoyo Yeung Studio  IP     ",X:-37.67,Y:-289.6,no_img:"",is_img:"",ip_img_arr:""},{id:317,ip_name:"YOYO YEUNG STUDIO",goods_id:1797,exhibit_name:"Raby ",exhibit_detail:"\n \nRaby \n\n5CM\n260RMB/\n196 \n\n30166\nRABY   RABY\n \nRABY \n",ip_detail:"YOYO YEUNG STUDIO\nYoyo Yeung\nIP\nYoyo Yeung Studio  IP     ",X:-49.69,Y:-289.6,no_img:"",is_img:"",ip_img_arr:""},{id:318,ip_name:"YOYO YEUNG STUDIO",goods_id:1989,exhibit_name:"Kenneth",exhibit_detail:"\n \nKenneth\nPVC\n6CM\n199RMB/\n500\n\n500\nkenneth kenneth \n",ip_detail:"YOYO YEUNG STUDIO\nYoyo Yeung\nIP\nYoyo Yeung Studio  IP     ",X:-58.6,Y:-289.6,no_img:"",is_img:"",ip_img_arr:""},{id:319,ip_name:"\n   \nFairy Zoe\n \n ",goods_id:1934,exhibit_name:"ZOE",exhibit_detail:"\n \nZOE\nPVCABSPMMA\n17CM\n799RMB/\n499\n\n499\n \nParty~ZOE\n",ip_detail:"Fairy Zoe\n\nIP\nZOEZOE  ",X:-54.4,Y:-60,no_img:"",is_img:"",ip_img_arr:""},{id:320,ip_name:"",goods_id:1892,exhibit_name:"--",pick_name:"--\n",exhibit_detail:"\n \n--\n\n11.5CM\n720RMB/\n93\n\n2073\n\n",ip_detail:"\nTOBY\nIP\n\n",X:55.4,Y:-211.6,no_img:"",is_img:"",ip_img_arr:""},{id:321,ip_name:"",goods_id:1900,exhibit_name:"--",pick_name:"--\n",exhibit_detail:"\n \n--\n\n11.5CM\n720RMB/\n143\n\n30113\n\n",ip_detail:"\nTOBY\nIP\n\n",X:55.4,Y:-185.3,no_img:"",is_img:"",ip_img_arr:""},{id:322,ip_name:"",goods_id:1909,exhibit_name:"-",exhibit_detail:"\n \n-\nPVC\n12.5CM\n720RMB/\n103\n\n7311.1730\n\n",ip_detail:"\nTOBY\nIP\n\n",X:55.4,Y:-194.9,no_img:"",is_img:"",ip_img_arr:""},{id:323,ip_name:"BUNNY",goods_id:1956,exhibit_name:"BUNNY      ",exhibit_detail:"\nBUNNY      \nPVC,PVC  \n10CM     \n599RMB/ \n100 \n\n100\n\nBUNNY",ip_detail:"BUNNY\n\nIPBUNNY\n",X:-53.86,Y:-45.7,no_img:"",is_img:"",ip_img_arr:""},{id:324,ip_name:"CandCHAKA",goods_id:1,exhibit_name:"CHAKA Island in the Blue",pick_name:"CHAKA\nIsland in the Blue",exhibit_detail:"\nCHAKA Island in the Blue     \n   \n26CM  \n980RMB/\n26  \n\n26\n20221230\n\n",ip_detail:"CAND CHAKA\nHannah Li\nIPCHAKACHAKA",X:55.1,Y:-122.6,no_img:"",is_img:"",ip_img_arr:""},{id:325,ip_name:"DUCKOO",goods_id:1798,exhibit_name:"DUCKOO",exhibit_detail:"\nDUCKOO      \n   \n16CM  \n499RMB/\n300  \n\n300\n\nDUCKOOYA\n \nDUCKOO39DUCKOOID252\n",ip_detail:"DUCKOO\nCHOKOCIDER\nIPDUCKOO",X:-53.85,Y:-277,no_img:"",is_img:"",ip_img_arr:""},{id:326,ip_name:"KOUYA",goods_id:1928,exhibit_name:"KOUYA--",pick_name:"KOUYA--\n",exhibit_detail:"\nKOUYA--      \nPVC  \n10CM  \n899RMB/\n18  \n\n18\n",ip_detail:"KOUYA\n\nIPKOUYATutu Jiang2016\nKOUYA,  ",X:-26.43,Y:-85.37,no_img:"",is_img:"",ip_img_arr:""},{id:327,ip_name:"KOUYA",goods_id:1929,exhibit_name:"KOUYA--",pick_name:"KOUYA--\n",exhibit_detail:"\nKOUYA--     \nPVC  \n10CM  \n899RMB/\n18  \n\n18\nKOUYA",ip_detail:"KOUYA\n\nIPKOUYATutu Jiang2016\nKOUYA,  ",X:-26.43,Y:-94.1,no_img:"",is_img:"",ip_img_arr:""},{id:328,ip_name:"KOUYA",goods_id:1925,exhibit_name:"KOUYA--",pick_name:"KOUYA--\n",exhibit_detail:"\nKOUYA--   \nPVC  \n10CM  \n1200RMB/\n10  \n\n10\n\nkouya",ip_detail:"KOUYA\n\nIPKOUYATutu Jiang2016\nKOUYA,  ",X:-20.53,Y:-89.7,no_img:"",is_img:"",ip_img_arr:""},{id:329,ip_name:"MIGO.mido",goods_id:1,exhibit_name:"MIGO",exhibit_detail:"\nMIGO\nPU\n12.5CM  \n720RMB/\n45  \n\n45\n20221215\nMIGO",ip_detail:"MIGO.mido\nGwen\nIP\n-midoMIGOPennyMIGO:",X:-17.9,Y:-116.43,no_img:"",is_img:"",ip_img_arr:""},{id:330,ip_name:"MIGO.mido",goods_id:1906,exhibit_name:"MIGO&PENNY",exhibit_detail:"\nMIGO&PENNY\nPVC\n7CM  \n299RMB/\n550\n\n200350\n\nMIGO~\n\n",ip_detail:"MIGO.mido\nGwen\nIP\n-midoMIGOPennyMIGO:",X:0,Y:-116.43,no_img:"",is_img:"",ip_img_arr:""},{id:331,ip_name:"MIGO.mido",goods_id:1894,exhibit_name:"MIGO&PENNY",exhibit_detail:"\nMIGO&PENNY\nPVC\n7CM  \n299RMB/\n200  \n\n50150\n\n\n\nPenny\n \nMIGO",ip_detail:"MIGO.mido\nGwen\nIP\n-midoMIGOPennyMIGO:",X:18.34,Y:-116.43,no_img:"",is_img:"",ip_img_arr:""},{id:332,ip_name:"FLABJACKS",goods_id:1952,exhibit_name:"FLABJACKS MAPLE WOOD GAL\n",exhibit_detail:"\nFLABJACKS MAPLE WOOD GAL  \n   \n16.5CM \n680RMB/\n19  \n\n19\n ",ip_detail:"FLABJACKS\nTON MAK\nIPFLABJACKS Animism  ",X:26.1,Y:-85.37,no_img:"",is_img:"",ip_img_arr:""},{id:333,ip_name:"FLABJACKS",goods_id:1953,exhibit_name:"FLABJACKS QUACK QUACK GAL\n",exhibit_detail:"\nFLABJACKS QUACK QUACK GAL \n   \n16.5CM \n680RMB/\n11  \n\n19\n ",ip_detail:"FLABJACKS\nTON MAK\nIPFLABJACKS Animism  ",X:26.1,Y:-93.9,no_img:"",is_img:"",ip_img_arr:""},{id:334,ip_name:"FLABJACKS",goods_id:1963,exhibit_name:"FLABJACKS MIDNIGHT\nBANANA BOO ",exhibit_detail:"\nFLABJACKS MIDNIGHT BANANA BOO \n   \n14.5CM \n480RMB/\n21    \n\n21\n ",ip_detail:"FLABJACKS\nTON MAK\nIPFLABJACKS Animism  ",X:20.29,Y:-85.1,no_img:"",is_img:"",ip_img_arr:""},{id:335,ip_name:"FLABJACKS",goods_id:1964,exhibit_name:"FLABJACKS RAINBOW 2020 BANANA BOO ",pick_name:"FLABJACKS RAINBOW 2020 BANANA BOO\n",exhibit_detail:"\nFLABJACKS RAINBOW 2020 BANANA BOO \n   \n14.5CM \n480RMB/\n5    \n\n5\nFLABJACKS",ip_detail:"FLABJACKS\nTON MAK\nIPFLABJACKS Animism  ",X:20.29,Y:-93.56,no_img:"",is_img:"",ip_img_arr:""},{id:336,ip_name:"009 Space Walker",goods_id:1985,exhibit_name:" 009 Space Walker UNIO\n",exhibit_detail:"\n009 Space Walker UNIO \nPVC \n9CM  \n199RMB/   \n600    \n\n600\nUNIOYUNA",ip_detail:"009 Space Walker\n009\nIPUNIO\nUnio \nYunaUnioUnioUnio",X:17,Y:-223.68,no_img:"",is_img:"",ip_img_arr:""},{id:337,ip_name:"009 Space Walker",goods_id:1941,exhibit_name:"009 Space Walker\nMartian ",exhibit_detail:"009 Space Walker Martian    \nPVC \n16.5CM     \n700RMB/   \n43      \n\n43\nMartian",ip_detail:"009 Space Walker\n009\nIPUNIO\nUnio \nYunaUnioUnioUnio",X:17,Y:-166.7,no_img:"",is_img:"",ip_img_arr:""},{id:338,ip_name:"009 Space Walker",goods_id:1933,exhibit_name:"009 Space Walker \nExplorer UNIO     ",exhibit_detail:"\n009 Space Walker Explorer UNIO \nPVC \n17CM\n800RMB/   \n93      \n\n93\nUNIO",ip_detail:"009 Space Walker\n009\nIPUNIO\nUnio \nYunaUnioUnioUnio",X:17,Y:-194.15,no_img:"",is_img:"",ip_img_arr:""},{id:339,ip_name:"009 Space Walker",goods_id:1939,exhibit_name:"009 Space Walker \nRomantic Martian   ",exhibit_detail:"\nRomantic Martian   \nPVC \n16.5CM     \n780RMB/   \n73      \n\n73\nMartian",ip_detail:"009 Space Walker\n009\nIPUNIO\nUnio \nYunaUnioUnioUnio",X:17,Y:-180,no_img:"",is_img:"",ip_img_arr:""},{id:340,ip_name:"009 Space Walker",goods_id:1938,exhibit_name:"009 Space Walker \nBoombu     ",exhibit_detail:"\nBoombu\nPVC \n17.7CM     \n780RMB/   \n93     \n\n93\nBoombu\n",ip_detail:"009 Space Walker\n009\nIPUNIO\nUnio \nYunaUnioUnioUnio",X:17,Y:-238,no_img:"",is_img:"",ip_img_arr:""},{id:341,ip_name:"009 Space Walker",goods_id:1931,exhibit_name:"009 Space Walker \nRocket on UNIO ",pick_name:"009 Space Walker \nRocket on UNIO\n",exhibit_detail:"\nRocket on UNIO      \nPVC \n17CM\n880RMB/   \n63      \n\n63\n UNIOdressing code",ip_detail:"009 Space Walker\n009\nIPUNIO\nUnio \nYunaUnioUnioUnio",X:17,Y:-208.85,no_img:"",is_img:"",ip_img_arr:""},{id:342,ip_name:"HOW2WORK",goods_id:1805,exhibit_name:" ",exhibit_detail:"\n      \nPVC    \n12.5CM \n680RMB/\n76  \n\n76\n",ip_detail:"\nHow2work \nLouis Wong\nIPHow2work2001How2work      ",X:-54.35,Y:-135.46,no_img:"",is_img:"",ip_img_arr:""},{id:343,ip_name:"HOW2WORK",goods_id:1804,exhibit_name:"SK8 ONE-CHU ",exhibit_detail:"\nSK8 ONE-CHU \nPVC    \n18CM    \n650RMB/\n16  \n\n16\n",ip_detail:"\nHow2work \nCHARR \nIPHow2work2001How2work      ",X:-54.35,Y:-153.48,no_img:"",is_img:"",ip_img_arr:""},{id:344,ip_name:"HOW2WORK",goods_id:1809,exhibit_name:"THE CAT CAR     ",exhibit_detail:"\nTHE CAT CAR   \nPVC    \n20CM    \n1200RMB/     \n6  \n\n6",ip_detail:"\nHow2work \nKila Cheung     \nIPHow2work2001How2work      ",X:-54.35,Y:-144.2,no_img:"",is_img:"",ip_img_arr:""},{id:345,ip_name:"DIMOO WORLD",goods_id:1,exhibit_name:"DIMOO ",exhibit_detail:"\nDIMOO    \n   \n10cm DIMOO5.4cm    \n1599 RMB/    \n343\n\n313\nDIMOOJELLYDIMOOJELLY",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:.8,Y:-71.8,no_img:"",is_img:"",ip_img_arr:""},{id:346,ip_name:"DIMOO WORLD",goods_id:1,exhibit_name:"DIMOOPLUS",exhibit_detail:"\nDIMOOPLUS  \nPVC+ \n22cm \n1899RMB/     \n43\n\n43\nDIMOODIMOO",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:18,Y:-71.8,no_img:"",is_img:"",ip_img_arr:""},{id:347,ip_name:"DIMOO WORLD",goods_id:1,exhibit_name:"DIMOO",exhibit_detail:"\nDIMOO\nPVC+ \n11.5cm \n920RMB/     \n413\n\n363\nDIMOODIMOO",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:-18,Y:-71.8,no_img:"",is_img:"",ip_img_arr:""},{id:348,ip_name:"DIMOO WORLD",goods_id:1,exhibit_name:"DIMOOPLUS",exhibit_detail:"\nDIMOOPLUS\nPVC+ \n22cm \n1899RMB/     \n513\n\n513\nDIMOODIMOO",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:55.38,Y:-43.15,no_img:"",is_img:"",ip_img_arr:""},{id:349,ip_name:"DIMOO WORLD",goods_id:"",exhibit_name:"DIMOO",exhibit_detail:"\nDIMOO\nPVC+ \n12.5cm \n920RMB/     \n1314\n\n11.171314\nDIMOO",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:9.34,Y:-55.5,no_img:"",is_img:"",ip_img_arr:""},{id:350,ip_name:"DIMOO WORLD",goods_id:"",exhibit_name:"DIMOO",exhibit_detail:"\nDIMOO\nPVC\n12.5cm \n920RMB/     \n\nDIMOO\n11.17\nDIMOO",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:-9,Y:-55.5,no_img:"",is_img:"",ip_img_arr:""},{id:351,ip_name:"DIMOO WORLD",goods_id:1816,exhibit_name:"DIMOO",exhibit_detail:"\nDIMOO\nPVC\n7cm\n199RMB/     \n3000\n\n14001000\nDIMOO",ip_detail:"DIMOO WORLD\nAYAN DENG\nIPDIMOO WORLDDIMOODIMOOAyanDIMOO WORLD",X:0,Y:-40,no_img:"",is_img:"",ip_img_arr:""},{id:352,ip_name:"HACIPUPU",goods_id:1,exhibit_name:" HACIPUPU-    ",exhibit_detail:"\nHACIPUPU-      \n\n10CM\n680RMB/   \n298\n   \n268 \nHACIPUPUHACIPUPU",ip_detail:"\nHACIPUPU\nAgee&Yep\nIPHACIPUPU",X:55.4,Y:-14,no_img:"",is_img:"",ip_img_arr:""},{id:353,ip_name:"HACIPUPU",goods_id:1,exhibit_name:"HACIPUPU- ",exhibit_detail:"\nHACIPUPU-      \n   \n10CM    \n680RMB/\n298\n\n268\n\n\nHACIPUPU",ip_detail:"\nHACIPUPU\nAgee&Yep\nIPHACIPUPU",X:55.4,Y:-27.46,no_img:"",is_img:"",ip_img_arr:""},{id:354,ip_name:"HACIPUPU",goods_id:1,exhibit_name:"HACIPUPU-     ",exhibit_detail:"\nHACIPUPU-     \n   \n10CM    \n680RMB/\n298\n \n278  \n\nHACIPUPU",ip_detail:"\nHACIPUPU\nAgee&Yep\nIPHACIPUPU",X:55.4,Y:-1.15,no_img:"",is_img:"",ip_img_arr:""},{id:355,ip_name:"The Monsters of Kasing Lung",goods_id:1817,exhibit_name:" COPE ",exhibit_detail:"\n COPE  \nPVC    \n9CM     \n149RMB/\n489\n   \n400\nLABUBU+",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-171.6,no_img:"",is_img:"",ip_img_arr:""},{id:356,ip_name:"The Monsters of Kasing Lung",goods_id:1,exhibit_name:"Haan",exhibit_detail:"\nHaan\nPVC    \n9CM     \n149RMB/\n289\n   \n239\nLABUBU+",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-181.8,no_img:"",is_img:"",ip_img_arr:""},{id:357,ip_name:"The Monsters of Kasing Lung",goods_id:1,exhibit_name:" Atlas",exhibit_detail:"\n Atlas\nPVC    \n10CM     \n179RMB/\n189\n\n139   \nZIMOMO+",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-191.86,no_img:"",is_img:"",ip_img_arr:""},{id:358,ip_name:"The Monsters of Kasing Lung",goods_id:1945,exhibit_name:" Depth",exhibit_detail:"\n Depth      \nPVC    \n14.5CM \n699RMB/\n141\n   \n141\nYaya",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-202.4,no_img:"",is_img:"",ip_img_arr:""},{id:359,ip_name:"The Monsters of Kasing Lung",goods_id:1801,exhibit_name:" Dien",exhibit_detail:"\n Dien    \nPVC    \n14.5CM \n699RMB/\n141\n \n7071  \nTycoco",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-221.58,no_img:"",is_img:"",ip_img_arr:""},{id:360,ip_name:"The Monsters of Kasing Lung",goods_id:1944,exhibit_name:" Vert",exhibit_detail:"\n Vert\nPVC    \n14.5CM \n699RMB/\n141\n \n141  \nSpooky",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-232.8,no_img:"",is_img:"",ip_img_arr:""},{id:361,ip_name:"The Monsters of Kasing Lung",goods_id:1813,exhibit_name:" Titan Six",exhibit_detail:"\n Titan Six\nPVC    \n19CM \n899RMB/\n129\n   \n129\nZIMOMO+",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-161.43,no_img:"",is_img:"",ip_img_arr:""},{id:362,ip_name:"The Monsters of Kasing Lung",goods_id:1,exhibit_name:"BG ",exhibit_detail:"\nBG \nPVC    \n19CM    \n999RMB/\n65  \n   \n45\nBG BearZIMOMO",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-7.4,Y:-138,no_img:"",is_img:"",ip_img_arr:""},{id:363,ip_name:"The Monsters of Kasing Lung",goods_id:1,exhibit_name:"GOJIMOMO ",exhibit_detail:"\nGOJIMOMO\nPVC    \n20CM    \n999RMB/\n222\n\n192   \nGOJIMOMO",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-243.1,no_img:"",is_img:"",ip_img_arr:""},{id:364,ip_name:"The Monsters of Kasing Lung",goods_id:1,exhibit_name:" Swaver",exhibit_detail:"\n Swaver \nPVC/  \n29CM    \n1599RMB/     \n172\n\n172   \nLabubu",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:-17,Y:-212.36,no_img:"",is_img:"",ip_img_arr:""},{id:365,ip_name:"The Monsters of Kasing Lung",goods_id:1815,exhibit_name:"LABUBU  ",exhibit_detail:"\nLABUBU      \nPVC    \n9CM     \n199RMB/\n5000     \n   \n35001500\nLABUBU",ip_detail:"\nThe Monsters by Kasing Lung\n\nIP2015KasingKasingThe Monsters:  LabubuTycocoKasing",X:7.7,Y:-137.95,no_img:"",is_img:"",ip_img_arr:""},{id:366,ip_name:"Green Cow Garden",goods_id:1796,exhibit_name:"Woo ",exhibit_detail:"\nWoo \nPVC\n14.7CM\n680RMB/\n93\n\n93\nWoo",ip_detail:"Green Cow Garden\n(Kohei Ogawa)\n \nKohei Ogawa\n \nIPGreen Cow Garden",X:-54.35,Y:-194.47,no_img:"",is_img:"",ip_img_arr:""},{id:367,ip_name:"Green Cow Garden",goods_id:1,exhibit_name:"BG LOVE ME",exhibit_detail:"\nBG LOVE ME\nPVC\n16.5CM\n800RMB/\n193\n\n173\nBG Bear",ip_detail:"Green Cow Garden\n(Kohei Ogawa)\n \nKohei Ogawa\n \nIPGreen Cow Garden",X:-54.35,Y:-202.4,no_img:"",is_img:"",ip_img_arr:""},{id:368,ip_name:"Green Cow Garden",goods_id:1,exhibit_name:"BG Tora",exhibit_detail:"\nBG Tora\nPVC\n16.5CM\n850RMB/\n143\n\n123\n!?",ip_detail:"Green Cow Garden\n(Kohei Ogawa)\n \nKohei Ogawa\n \nIPGreen Cow Garden",X:-54.35,Y:-178.5,no_img:"",is_img:"",ip_img_arr:""},{id:369,ip_name:"Green Cow Garden",goods_id:1,exhibit_name:"BG Pink Hoddie",exhibit_detail:"\nBG Pink Hoddie\nPVC\n16.5CM\n780RMB/\n93\n\n93\nBG Bear",ip_detail:"Green Cow Garden\n(Kohei Ogawa)\n \nKohei Ogawa\n \nIPGreen Cow Garden",X:-54.35,Y:-170.6,no_img:"",is_img:"",ip_img_arr:""},{id:370,ip_name:"Green Cow Garden",goods_id:1940,exhibit_name:"Green Cow Garden\n",pick_name:"Green Cow Garden\n",exhibit_detail:"\nGreen Cow Garden \nPVC\n9CM\n199RMB/\n600\n\n500\nBG Bear",ip_detail:"Green Cow Garden\n(Kohei Ogawa)\n \nKohei Ogawa\n \nIPGreen Cow Garden",X:-54.35,Y:-186.55,no_img:"",is_img:"",ip_img_arr:""},{id:371,ip_name:"b.wing",goods_id:1811,exhibit_name:"b.wing\nA Good Night  ",exhibit_detail:"\nA Good Night    \nPVC    \n9.2CM   \n150RMB/\n143\n\n143\n A",ip_detail:"b.wing\nb.wing\nIPb.wingA",X:-54.35,Y:-256.9,no_img:!0,is_img:"",ip_img_arr:""},{id:372,ip_name:"b.wing",goods_id:1950,exhibit_name:"b.wing\nA Careless Whisper  ",exhibit_detail:"\nA Careless Whisper   \nPVC    \n18CM    \n680RMB/\n193\n\n193\n A",ip_detail:"b.wing\nb.wing\nIPb.wingA",X:-54.35,Y:-241.95,no_img:!0,is_img:"",ip_img_arr:""},{id:373,ip_name:"b.wing",goods_id:1807,exhibit_name:"b.wing\nA Good Afternoon     ",exhibit_detail:"\nA Good Afternoon     \nPVC    \n9.2CM   \n150RMB/\n143\n\n143\n A+",ip_detail:"b.wing\nb.wing\nIPb.wingA",X:-54.35,Y:-249.3,no_img:!0,is_img:"",ip_img_arr:""},{id:374,ip_name:"b.wing",goods_id:1,exhibit_name:"b.wing\nA 69% Purple Addict   ",exhibit_detail:"\nA 69% Purple Addict   \nPVC    \n18CM    \n680RMB/\n113\n\n113\nAA ",ip_detail:"b.wing\nb.wing\nIPb.wingA",X:-54.35,Y:-234,no_img:!0,is_img:"",ip_img_arr:""},{id:375,ip_name:"b.wing",goods_id:1,exhibit_name:"b.wing\nShall We Fly?!-",exhibit_detail:"\nShall We Fly?!-\nPVC    \n20CM    \n1200RMB/\n93\n\n93\n AA",ip_detail:"b.wing\nb.wing\nIPb.wingA",X:-54.35,Y:-264.5,no_img:!0,is_img:"",ip_img_arr:""},{id:376,ip_name:"The Little Hut",goods_id:1932,exhibit_name:"Byron + Rangeron Marten+ ",pick_name:"Byron + Rangeron Marten+\n",exhibit_detail:"\n \nByron + Rangeron Marten+ \nShoko+T9G\nSofubi\nByron 10cm Rangeron 10.5cm\n869RMB/\n97\n\n97\nMarten\n \n",ip_detail:"The Little Hut\nThe Little HutT9G Shoko NakazawaShon Chen",X:55.4,Y:-275.8,no_img:"",is_img:"",ip_img_arr:""},{id:377,ip_name:"The Little Hut",goods_id:1966,exhibit_name:"Rangeas Jr. ",exhibit_detail:"\n \nRangeas Jr. \nT9G\nSofubi\n11CM\n399RMB/\n97\n\n97\nRangeas Jr.\n \n",ip_detail:"The Little Hut\nThe Little HutT9G Shoko NakazawaShon Chen",X:55.4,Y:-258.74,no_img:"",is_img:"",ip_img_arr:""},{id:378,ip_name:"The Little Hut",goods_id:1957,exhibit_name:"\n     \nKomataro Pearl\n \n ",exhibit_detail:"\n \nKomataro Pearl\nT9G\nSofubi\n15CM\n529RMB/\n97\n\n97\nKomataro\n \n",ip_detail:"The Little Hut\nThe Little HutT9G Shoko NakazawaShon Chen",X:55.4,Y:-267.1,no_img:"",is_img:"",ip_img_arr:""},{id:379,ip_name:"The Little Hut",goods_id:1891,exhibit_name:"Seedlas Brother Tropical Fish Blue ",pick_name:"Seedlas Brother Tropical Fish Blue\n",exhibit_detail:"\n \nSeedlas Brother Tropical Fish Blue \nShoko\nSofubi\n11CM\n399RMB/\n145\n\n7570\n\n \n",ip_detail:"The Little Hut\nThe Little HutT9G Shoko NakazawaShon Chen",X:55.4,Y:-250.1,no_img:"",is_img:"",ip_img_arr:""},{id:380,ip_name:"The Little Hut",goods_id:1901,exhibit_name:"Seedlas Brother Tropical Fish Blue ",pick_name:"Seedlas Brother Tropical Fish Blue\n",exhibit_detail:"\n \nSeedlas Brother Tropical Fish Blue \nShoko\nSofubi\n11CM\n399RMB/\n145\n\n7570\n\n \n",ip_detail:"The Little Hut\nThe Little HutT9G Shoko NakazawaShon Chen",X:55.4,Y:-241.9,no_img:"",is_img:"",ip_img_arr:""}],[{id:401,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY\nSHANGHAI 021",exhibit_detail:"MEGA 1000% SPACE MOLLY SHANGHAI 021\nPVC/ABS/PC\n 70*CM\n4,999 RMB/\n  ",ip_detail:"MEGA SPACE MOLLY\nKENNY WONG\nIP2016Kenny WongSPACE MOLLY\nMOLLY\n\nKennySPACE MOLLYMOLLY\n",X:61,Y:-147.8,no_img:"",is_img:"",ip_img_arr:""},{id:402,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 79.7*CM\n5,999 RMB/\n",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY MOLLY  KennySPACE MOLLYMOLLY  ",X:-15.1,Y:-91.5,no_img:"",is_img:"",ip_img_arr:""},{id:403,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 79.7*CM\n5,999 RMB/\n\n",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:15.9,Y:-91.5,no_img:"",is_img:"",ip_img_arr:""},{id:404,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 70*CM\n4,999 RMB/\n1000%",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY MOLLY  KennySPACE MOLLYMOLLY  ",X:61,Y:-57.6,no_img:"",is_img:"",ip_img_arr:""},{id:405,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE\nMOLLY  PHILIP COLBERT",exhibit_detail:"MEGA 1000% SPACE MOLLY  PHILIP COLBERT\nPVC/ABS/PC\n 70*CM\n5,999 RMB/\n",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY MOLLY  KennySPACE MOLLYMOLLY  ",X:-60.4,Y:-147.8,no_img:"",is_img:"",ip_img_arr:""},{id:406,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY ",pick_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 70*CM\n4,999 RMB/\n ",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY MOLLY  KennySPACE MOLLYMOLLY  ",X:61,Y:-102.6,no_img:"",is_img:"",ip_img_arr:""},{id:407,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY ",pick_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 70*CM\n5,999 RMB/\nOVER THE MOON",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY MOLLY  KennySPACE MOLLYMOLLY  ",X:-60.4,Y:-102.6,no_img:"",is_img:"",ip_img_arr:""},{id:408,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY  ",pick_name:"MEGA\n1000% SPACE\nMOLLY  ",exhibit_detail:"MEGA 1000% SPACE MOLLY  \nPVC/ABS/PC\n 70*CM\n5,999 RMB/\n",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:61,Y:-13,no_img:"",is_img:"",ip_img_arr:""},{id:410,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE\nMOLLY  ",exhibit_detail:"MEGA 1000% SPACE MOLLY  \nPVC/ABS/PC\n 70*CM\n5,999 RMB/\n",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:12.66,Y:-46.8,no_img:"",is_img:"",ip_img_arr:""},{id:411,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000%/100% SPACE\nMOLLY  EDG ",exhibit_detail:"MEGA 1000%/100% SPACE MOLLY  EDG \nPVC/ABS/PC\n 70*CM\n5,999 RMB/\n \nEDG",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:-60.4,Y:-13,no_img:"",is_img:"",ip_img_arr:""},{id:412,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY ",pick_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 70*CM\n 5,999 RMB/    9,999 RMB/\nASES\n \n\n\n\nSPACE MOLLY...",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:-10.2,Y:-46.8,no_img:"",is_img:"",ip_img_arr:""},{id:413,ip_name:"MEGA SPACE MOLLY",goods_id:2,exhibit_name:"MEGA\n1000% SPACE MOLLY ",pick_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"MEGA 1000% SPACE MOLLY \nPVC/ABS/PC\n 70*CM\n4,999 RMB/\n......\nMOLLY",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:-60.4,Y:-57.6,no_img:"",is_img:"",ip_img_arr:""},{id:414,ip_name:"MEGA SPACE MOLLY",goods_id:1,exhibit_name:"MEGA\n1000% SPACE MOLLY ",pick_name:"MEGA\n1000% SPACE MOLLY\n",exhibit_detail:"\nMEGA SPACE MOLLY 1000% \nABS/PC/PVC\n704mm\n5999/\n282000\n28\nIPSPACE MOLLYTA",ip_detail:"MEGA SPACE MOLLY \nKENNY WONG\n IP2016Kenny WongSPACE MOLLY\n MOLLY \n KennySPACE MOLLYMOLLY  ",X:0,Y:-98,no_img:"",is_img:"",ip_img_arr:""}]],de=n(69436),he=Object.defineProperty,fe=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,ve=(e,t,n)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ge=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))pe.call(t,n)&&ve(e,n,t[n]);if(fe)for(var n of fe(t))me.call(t,n)&&ve(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12.853 12.384",role:"img"},e),h.createElement("path",{d:"M11.855 3.213H.997a1 1 0 0 0-.992 1.1l.731 7.177a1 1 0 0 0 .992.9h9.4a1 1 0 0 0 .992-.9l.731-7.177a1 1 0 0 0-.992-1.1Zm-10.859 1h10.859l-.731 7.177h-9.4L.993 4.213Z"}),h.createElement("path",{d:"M7.821 0a1.5 1.5 0 0 1 1.494 1.439v3.392a.5.5 0 0 1-1 .037V1.496a.5.5 0 0 0-.461-.5H5.025a.5.5 0 0 0-.5.461V4.83a.5.5 0 0 1-1 .037V1.496A1.5 1.5 0 0 1 4.964.002h2.847ZM9.167 9.471v.5a.5.5 0 0 1-.5.5H4.181a.5.5 0 0 1-.5-.5v-.5Z"}));var xe,be=n(77404),ye=n(66415),Me=n(6759),we=n(78349),Te=n(19702),_e=function(e){var t=(0,h.useRef)(null),n=(0,h.useRef)(!1),i=(0,Te.Z)({startPoint:{x:0,y:0},isAddEvent:!1,oldMousePoint:{x:0,y:0}});(0,h.useEffect)((function(){return a(),function(){r()}}),[]);var a=function(n){var a,r;if(!i.isAddEvent&&(t.current||(function(e){if(e)if("string"==typeof e){var n=document.querySelector(".".concat(e));if(!n)return;t.current=n}else t.current=e}(n||e),t.current)))if((0,we.tq)()){if(!(0,we.gn)()){var s,o;null===(s=t.current)||void 0===s||s.addEventListener("touchstart",l),null===(o=t.current)||void 0===o||o.addEventListener("touchmove",u,{passive:!1}),i.isAddEvent=!0}}else null===(a=t.current)||void 0===a||a.addEventListener("mousedown",l),null===(r=document)||void 0===r||r.addEventListener("click",d,!0),i.isAddEvent=!0},r=function(){var e,n;if((0,we.tq)()){if(!(0,we.gn)()){var a,r;null===(a=t.current)||void 0===a||a.removeEventListener("touchstart",l),null===(r=t.current)||void 0===r||r.removeEventListener("touchmove",u)}}else null===(e=t.current)||void 0===e||e.removeEventListener("mousedown",l),null===(n=document)||void 0===n||n.removeEventListener("click",d,!0);i.isAddEvent=!1,t.current=null},s=function(){var e,t;null===(e=document)||void 0===e||e.removeEventListener("mousemove",u),null===(t=document)||void 0===t||t.removeEventListener("mouseup",c)},o=function(e){return{x:e.touches?e.touches[0].pageX:e.clientX,y:e.touches?e.touches[0].pageY:e.clientY}},l=function(e){var t,n;i.startPoint=o(e),i.oldMousePoint=i.startPoint,(0,we.tq)()||(null===(t=document)||void 0===t||t.addEventListener("mousemove",u),null===(n=document)||void 0===n||n.addEventListener("mouseup",c))},u=(0,h.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var a=o(e);if(!n.current&&f(a.x,a.y,i.oldMousePoint.x,i.oldMousePoint.y)>5&&(n.current=!0),!(0,we.tq)()||Me.NO.islandscape){var r,s,l,u=a.x-i.startPoint.x,c=a.y-i.startPoint.y,d=(null===(r=t.current)||void 0===r?void 0:r.scrollLeft)||0,h=(null===(s=t.current)||void 0===s?void 0:s.scrollTop)||0;null===(l=t.current)||void 0===l||l.scrollTo(d-u,h-c),i.startPoint=a}else{var p,m,v,g=a.x-i.startPoint.x,x=a.y-i.startPoint.y,b=(null===(p=t.current)||void 0===p?void 0:p.scrollLeft)||0,y=(null===(m=t.current)||void 0===m?void 0:m.scrollTop)||0;null===(v=t.current)||void 0===v||v.scrollTo(b-x,y+g),i.startPoint=a}}),[]),c=function(e){n.current&&(e.preventDefault(),e.stopPropagation()),(0,we.tq)()||s(),i.startPoint={x:0,y:0}},d=function(e){n.current&&(e.stopPropagation(),e.preventDefault(),n.current=!1)},f=(0,h.useCallback)((function(e,t,n,i){var a=e-n,r=t-i;return Math.sqrt(a*a+r*r)}),[]);return{addScrollEvent:a,removeScrollEvent:r}},Se=n(38300),Ae=function(e){var t=e.text_detail;return(0,v.jsx)(v.Fragment,{children:t.trim().split("\n").map((function(e,t){return(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("span",{className:" ".concat(e.includes("")&&e.split("")[0].trim().length<10?"text-white font-OPPO-M":"text-[#DEDEDE]"),children:e.includes("")?e.split("")[0].trim()+"":e}),(0,v.jsx)("span",{className:"text-[#DEDEDE] font-OPPO-R",children:e.includes("")&&e.split("")[1].trim()})]},t)}))})};!function(e){e[e.LIMIT=1]="LIMIT",e[e.ONTIME=2]="ONTIME",e[e.LOTTERY=3]="LOTTERY",e[e.ONHOUR=4]="ONHOUR",e[e.DISPLAY=5]="DISPLAY"}(xe||(xe={}));var Ee=function(e){var t=e.text;(0,f.useIntl)();return(0,v.jsx)("div",{className:"main-title z-[1] w-fit sm:px-[10px] xl:px-[10px] sm:h-[24px] xl:h-[30px] bg-[#000]/30\n        absolute left-[50%] translate-x-[-50%] sm:top-[20px] xl:top-[30px] text-white font-OPPO-R flex-row-center-center rounded-[5px]",children:(0,v.jsx)("span",{className:"sm:text-10 xl:text-16 whitespace-nowrap",children:t})})},Ie=n(98777),Ce=n.n(Ie),ke=Object.defineProperty,Le=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,Re=(e,t,n)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const De=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))Oe.call(t,n)&&Re(e,n,t[n]);if(Le)for(var n of Le(t))Pe.call(t,n)&&Re(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.654 14.04",role:"img"},e),h.createElement("path",{"data-name":"\\u8DEF\\u5F84 4214",d:"M13.133 3.048h-2.049a1.971 1.971 0 0 0 .023-2.535c-.766-.686-2.222-.332-3.31.8a4.217 4.217 0 0 0-.465.585 3.831 3.831 0 0 0-.465-.585C5.779.179 4.33-.168 3.567.513a1.97 1.97 0 0 0 .015 2.535H1.529A1.454 1.454 0 0 0 .05 4.471v1.076a1.439 1.439 0 0 0 1.163 1.387v5.49a1.6 1.6 0 0 0 1.629 1.567h8.969a1.6 1.6 0 0 0 1.629-1.567V6.933a1.431 1.431 0 0 0 1.163-1.387V4.47a1.443 1.443 0 0 0-1.471-1.423Zm-2.71-1.824c.255.231.143.946-.435 1.661a.516.516 0 0 0-.09.166H7.856a2.882 2.882 0 0 1 .668-1.076c.773-.805 1.644-.986 1.899-.751ZM4.674 2.885c-.578-.708-.691-1.43-.435-1.661s1.126-.051 1.891.751a2.842 2.842 0 0 1 .668 1.076H4.756a.5.5 0 0 0-.082-.17ZM2.22 12.433v-5.46h4.616v6.067H2.85a.623.623 0 0 1-.631-.611Zm9.592.6H7.826V6.962h4.616v5.462a.613.613 0 0 1-.63.6Zm1.794-7.482a.475.475 0 0 1-.48.462h-11.6a.475.475 0 0 1-.48-.462V4.47a.475.475 0 0 1 .48-.462h11.6a.475.475 0 0 1 .48.462v1.076Z",fill:"#fff",stroke:"#fff",strokeWidth:.1}));var Ne=function(e){var t=e.venueId,i=e.modelId,a=e.onClose,r=(0,f.useIntl)(),s=(0,f.useModel)("global"),l=s.setLotteryVisible,c=s.setWxAuthVis,p=(0,h.useState)(),m=d()(p,2),g=m[0],x=m[1],M=(0,h.useState)(!1),w=d()(M,2),T=w[0],_=w[1],S=(0,h.useState)(!1),A=d()(S,2),E=A[0],I=A[1],C=(0,h.useState)(!0),k=d()(C,2),L=k[0],O=k[1],R=(0,h.useState)(""),D=d()(R,2),N=D[0],B=D[1],U=(0,h.useState)(0),j=d()(U,2),F=j[0],Y=j[1],G=(0,h.useState)(!0),H=d()(G,2),Z=H[0],K=H[1],V=(0,h.useState)(""),z=d()(V,2),W=z[0],q=z[1],X=(0,f.useRequest)(ye.getGoodsInfo,{manual:!0,debounceInterval:400}),Q=X.loading,$=X.data,ee=X.run,te=X.error,ne=(0,le.Z)(),ie=(0,h.useState)(!1),ae=d()(ie,2),re=ae[0],se=ae[1];_e("exhibit-detail"),(0,h.useLayoutEffect)((function(){me()}),[]),(0,J.Z)((function(){ke(),$&&Me()}),[$]),(0,J.Z)((function(){K(Q)}),[Q]),(0,J.Z)((function(){"visible"===ne&&(me(),c(!1))}),[ne]),(0,h.useEffect)((function(){return y.Z.on(b.Z.CANCEL_AUTH,a),function(){y.Z.off(b.Z.CANCEL_AUTH,a)}}),[]),(0,J.Z)((function(){te&&(be.Z.open({text:""}),O(!1),se(!0))}),[te]);var oe=function(){var e=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=ue(oe),fe=d()(he,2),pe=(fe[0],fe[1]),me=(0,h.useCallback)((function(){var e,n,a=t-1;a>=0&&i&&(n=ce[a].find((function(e){return e.id===i})),x(n));var r={goodsId:(null===(e=n)||void 0===e?void 0:e.goods_id)||2};ee(r)}),[]),ve=function(e){return Ce()(1e3*e).format("DDHHmm")},Me=(0,h.useCallback)((function(){if(200===(null==$?void 0:$.code))if($.data){var e=$.data.GoodsInfo.StartTime,t=$.data.GoodsInfo.Type;switch(Y(t),Le(),t){case xe.LIMIT:case xe.ONTIME:e>$.data.Time?(pe(1e3*e),q("".concat(ve(e)," ")),_(!0)):0===$.data.GoodsInfo.Stock&&(I(!0),q(""));break;case xe.LOTTERY:B(r.formatMessage({id:"exhibit.lottery"}));break;case xe.ONHOUR:B(r.formatMessage({id:"exhibit.on-time"})),q(" ".concat(ve(e)," "));break;case xe.DISPLAY:O(!1)}}else Y(xe.DISPLAY),O(!1);else 7007===$.code?(c(!0),O(!1)):O(!1)}),[$]),we=(0,h.useCallback)((function(){y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"model",otherId:null==g?void 0:g.id}),(0,P.R)("11_1")}),[g]),Te=(0,h.useCallback)((function(){y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_model",otherId:null==g?void 0:g.id}),(0,P.R)("11_4")}),[g]),Ie=(0,h.useCallback)((function(){F===xe.LOTTERY&&(l(!0),(0,P.R)("11_2"))}),[F]),ke=function(){localStorage.removeItem("exhibitId"),localStorage.removeItem("venueId")},Le=function(){I(!1),_(!1),q(""),O(!0),se(!1)};return(0,v.jsxs)(v.Fragment,{children:[W&&(0,v.jsx)(Ee,{text:W}),(0,v.jsxs)("div",{className:"w-full h-full relative bg-exhibit-bg bg-cover-center",children:[(0,v.jsxs)("div",{className:"flex flex-col absolute sm:top-[20px] sm:right-[20px] xl:cursor-pointer xl:top-[20px] xl:right-[20px] z-[1] items-center  group xl:hover:text-[#49A3BA]",onClick:we,children:[(0,v.jsx)("div",{className:"sm:h-[24px] xl:h-[36px] sm:w-[24px] xl:w-[36px] w-full  rounded-full bg-white/20 bg-exhibit-share  bg-no-repeat bg-cover xl:group-hover:bg-exhibit-share-hover  "}),(0,v.jsx)("span",{className:" sm:text-10 xl:text-16",children:r.formatMessage({id:"person.share"})})]}),(0,v.jsxs)("div",{className:"flex-row-around-center sm:pr-[40px] xl:pr-[40px]  w-full h-full z-[0]",children:[(0,v.jsxs)("div",{className:"h-full flex-1 flex-shrink-0 flex-row-center-center relative ",children:[(0,v.jsx)("img",{draggable:!1,id:"exhibit-img",className:"sm:size-[186px,246px] xl:size-[225px,300px]  object-cover ignore:border-[3px] rounded-[10px] border-solid border-[#FFC183]/20",onError:function(e){var t;null===(t=document.getElementById("exhibit-img"))||void 0===t||t.setAttribute("src",n(80669))},src:Se.Z.imgBaseUrl+"/image/exhibit/exhibit_".concat(null==g?void 0:g.id,".jpg")}),(0,v.jsx)("img",{draggable:!1,className:" absolute sm:bottom-[8%] xl:bottom-[8%] sm:w-[181px] xl:w-[181px]",src:n(29747)})]}),(0,v.jsxs)("div",{className:"relative sm:w-[390px] xl:w-[400px] h-full flex-shrink-0  flex-column-center-center ",children:[(0,v.jsxs)("div",{className:"exhibit-detail w-full sm:h-[240px] xl:h-[300px] sm:px-[15px] xl:px-[20px] relative flex flex-col flex-shrink-0 sm:rounded-[10px] xl:rounded-[10px] bg-[#626262]/30 backdrop-blur-[24px] overflow-y-auto overflow-x-hidden hidebar border-[#935221]/50 border-[1px]",children:[(0,v.jsx)("div",{className:" leading-[1.25] sm:text-20 xl:text-20  sm:mt-[10px] xl:mt-[10px] font-OPPO-B whitespace-pre-wrap",children:"".concat(null!=g&&g.exhibit_name?g.exhibit_name.trim():r.formatMessage({id:"exhibit.default_title"}))}),(0,v.jsx)("div",{className:"rounded-full flex-shrink-0 sm:w-[30px] sm:h-[3px] xl:size-[30px,3px] bg-[#FFF] sm:mt-[10px] xl:mt-[15px]"}),(0,v.jsxs)("div",{className:" flex-1  sm:mt-[10px] xl:mt-[10px] sm:text-14 xl:text-16 whitespace-pre-wrap text-[#fff]/50",children:[null!=g&&g.exhibit_detail?(0,v.jsx)(Ae,{text_detail:null==g?void 0:g.exhibit_detail}):(0,v.jsx)(Ae,{text_detail:r.formatMessage({id:"exhibit.default_detail"})}),!(null!=g&&g.no_img)&&(null!=g&&g.ip_img_arr?(0,v.jsx)("div",{className:"flex  sm:my-[20px]  xl:my-[20px] items-center ",children:new Array(Number(null==g?void 0:g.ip_img_arr)).fill(0).map((function(e,t){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("img",{draggable:!1,id:"ip-img",className:"sm:w-[80px]  xl:w-[90px] ".concat(0!==t&&"sm:ml-[20px] xl:ml-[20px]"),src:Se.Z.imgBaseUrl+"/image/exhibit/ip/ip_img_".concat(null!=g&&g.ip_name?(null==g?void 0:g.ip_name.trim())+Number(t+1):"Pucky",".png")},t)})}))}):(0,v.jsx)("img",{draggable:!1,id:"ip-img",onError:function(e){var t;null===(t=document.getElementById("ip-img"))||void 0===t||t.setAttribute("src",n(6617))},className:"sm:w-[80px] sm:my-[30px] xl:size-[90px,90px] xl:my-[30px]",src:Se.Z.imgBaseUrl+"/image/exhibit/ip/ip_img_".concat(null!=g&&g.ip_name?null==g?void 0:g.ip_name.trim():"Pucky",".png")})),null!=g&&g.ip_detail?(0,v.jsx)(Ae,{text_detail:null==g?void 0:g.ip_detail}):(0,v.jsx)(Ae,{text_detail:r.formatMessage({id:"exhibit.default_ip_detail"})})]})]}),(0,v.jsxs)("div",{className:"flex  sm:bottom-[20px] xl:bottom-[40px]  ab-x-center tracking-[5px] font-OPPO-R",children:[Z?(0,v.jsx)("div",{className:"flex-row-center-center sm:w-[110px] sm:h-[28px] xl:size-[110px,28px] sm:mr-[15px] xl:mr-[30px]\nrounded-full border-[#FFFFFF] border-[1px] xl:cursor-pointer",children:(0,v.jsx)("span",{className:"text-white sm:text-14 xl:text-14 sm:ml-[6px] xl:ml-[6px]",children:"loading..."})}):(0,v.jsxs)(v.Fragment,{children:[L&&!T&&!E&&F!==xe.LOTTERY&&F!==xe.ONHOUR&&(0,v.jsx)(de.Z,{path:"/packages/activity/pages/pts_goods_detail?id=".concat(null!=g&&g.goods_id?null==g?void 0:g.goods_id:""),onClick:function(){(0,P.R)("11_3")},children:(0,v.jsxs)("div",{className:"flex-row-center-center sm:w-[110px] sm:h-[28px] xl:size-[110px,28px] sm:mr-[15px] xl:mr-[30px]\n          rounded-full  xl:cursor-pointer   bg-[#D65883] ",children:[(0,v.jsx)(ge,{className:"sm:w-[12px] xl:w-[12px] fill-[#fff]"}),(0,v.jsxs)("span",{className:"text-white sm:text-14 xl:text-14 sm:ml-[6px] xl:ml-[6px]",children:[" ",r.formatMessage({id:"exhibit.purchase"})]})]})}),L&&(T||E)&&(0,v.jsxs)("div",{className:"flex-row-center-center sm:w-[110px] sm:h-[28px] xl:size-[110px,28px] sm:mr-[15px] xl:mr-[30px]\n          rounded-full   xl:cursor-pointer ".concat(T?"bg-[#6B6B6B] text-white":"bg-[#6B6B6B]/50 text-[#BABABA]/50 "),onClick:function(){},children:[(0,v.jsx)(ge,{className:"sm:w-[12px] xl:w-[12px] ".concat(T?"fill-[#FFF]":"fill-[#BABABA]/50"," ")}),(0,v.jsx)("span",{className:"sm:text-14 xl:text-14 sm:ml-[6px] xl:ml-[6px]",children:r.formatMessage({id:"exhibit.".concat(T?"no_time":"no_count")})})]}),L&&(F===xe.LOTTERY||F===xe.ONHOUR)&&!E&&(0,v.jsxs)("div",{className:"flex-row-center-center  ".concat(F===xe.LOTTERY?"sm:w-[140px] xl:w-[140px] bg-[#C2D170]":"sm:w-[110px] xl:w-[140px] bg-[#6055CD]","  sm:h-[28px] xl:size-[110px,28px] sm:mr-[15px] xl:mr-[30px]\nrounded-full  xl:cursor-pointer"),onClick:Ie,children:[F===xe.LOTTERY?(0,v.jsx)(De,{className:"sm:w-[12px] xl:w-[12px] fill-[#fff]"}):(0,v.jsx)(ge,{className:"sm:w-[12px] xl:w-[12px] fill-[#fff]"}),(0,v.jsx)("span",{className:"text-white sm:text-14 xl:text-14 sm:ml-[6px] xl:ml-[6px]",children:N})]}),re&&(0,v.jsx)("div",{className:"flex-row-center-center bg-slate-500 sm:w-[120px]  sm:h-[28px] xl:size-[110px,28px] sm:mr-[15px] xl:mr-[30px]\nrounded-full  xl:cursor-pointer",onClick:a,children:(0,v.jsx)("span",{className:"text-white sm:text-14 xl:text-14 ",children:r.formatMessage({id:"please.close"})})})]}),(0,v.jsxs)("div",{className:"flex-row-center-center sm:w-[110px] sm:h-[28px]  xl:size-[110px,28px] rounded-full border-[#FFFFFF] border-[1px] xl:cursor-pointer",onClick:Te,children:[(0,v.jsx)("img",{className:"sm:w-[12px] xl:w-[12px]",src:n(36384)}),(0,v.jsx)("span",{className:"text-white sm:text-14 xl:text-14 sm:ml-[6px] xl:ml-[6px]",children:r.formatMessage({id:"exhibit.shoot"})})]})]})]})]})]})]})},Be=h.memo(Ne),Ue=n(48097);function je(){return Fe.apply(this,arguments)}function Fe(){return(Fe=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.Z.get(Se.Z.api.getTaskList));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.Z.get(Se.Z.api.finishTask,{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He,Ze=n(39974),Ke=function(){var e=(0,f.useIntl)(),t=(0,f.useModel)("task"),i=t.taskList,a=t.setTaskList,r=t.setTaskTip,s=(0,f.useModel)("user").updataUserInfo,l=(0,f.useModel)("global"),c=(l.isNetLoading,l.setIsNetLoading),p=(0,h.useRef)(),m=(0,h.useState)(!1),g=d()(m,2),x=g[0],M=g[1],w=(0,h.useState)({title:"",prize:20,type:""}),T=d()(w,2),_=T[0],S=T[1],A=(0,f.useRequest)(Ye,{manual:!0,debounceInterval:400,throwOnError:!0}),E=A.loading,I=A.data,C=A.run,k=A.error;(0,h.useEffect)((function(){return y.Z.on(b.Z.FINISH_TASK,O),D(),localStorage.getItem("token")&&L(),function(){y.Z.off(b.Z.FINISH_TASK,O)}}),[]),(0,h.useEffect)((function(){p.current=i,N(i)}),[i]),(0,J.Z)((function(){200===(null==I?void 0:I.code)&&(y.Z.emit(b.Z.REFRESH_TASK_LIST),L(),S({type:I.data.Type,title:I.data.Title,prize:I.data.Prize}),M(!0),R())}),[I]),(0,J.Z)((function(){clearTimeout(He),E?He=setTimeout((function(){c(!0)}),500):c(!1)}),[E]),(0,J.Z)((function(){clearTimeout(He),k&&(c(!1),y.Z.emit(b.Z.SYSTEM_ERROR,"task"))}),[k]);var L=function(){je().then((function(e){200===(null==e?void 0:e.code)&&a(e.data.DailyTask)}))},O=function(e){var t={type:e};if(p.current){var n=p.current.find((function(t){return t.Id===e}));if((null==n?void 0:n.DailyNum)===(null==n?void 0:n.FinishNum))return;C(t)}},P=function(e){var t={id:e.TaskId,title:e.TaskName,prize:e.Prize};S(t),M(!0),y.Z.emit(b.Z.REFRESH_TASK_LIST),L(),R()},R=function(){var e=u()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.getUserDetail({},(function(e){}));case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){Ze.Z.on("Base.PushTaskFinish",P)},N=function(e){var t=e.find((function(e){return e.DailyNum!==e.FinishNum}));r(!!t)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(re,{mask:!0,maskStyle:{background:"rgba(0, 0, 0, 0.8)"},isBulr:!1,contentClassName:"finish-task w-fit h-fit backdrop-blur-[20px] bg-[rgba(127,127,127,0.2)] rounded-[10px]",visible:x,onCancel:function(){M(!1)},children:(0,v.jsxs)("div",{className:" sm:size-[245px,160px] sm:rounded-[10px] sm:text-14 font-OPPO-B xl:text-16  xl:size-[350px,200px] xl:rounded-[10px]  flex flex-col items-center",children:[(0,v.jsx)("div",{className:"sm:mt-[10px] xl:mt-[15px] whitespace-pre-wrap text-center",children:"".concat(e.formatMessage({id:"task.finish_task"}),"\n").concat(_.title)}),(0,v.jsx)("img",{className:"sm:w-[60px] xl:w-[66px] sm:mt-[7px] xl:mt-[7px]",src:n(40735)}),(0,v.jsxs)("div",{className:" text-center font-OPPO-R sm:text-12 xl:text-14 sm:mt-[5px] xl:mt-[5px]",children:[e.formatMessage({id:"task.acquire"}),(0,v.jsxs)("span",{className:" font-OPPO-B",children:[" ",_.prize," "]}),e.formatMessage({id:"task.energy"})]})]})})})},Ve=function(e){var t=e.showGuide,i=e.onClick,a=(0,h.useState)(0),r=d()(a,2),s=r[0],o=r[1],l=m().isPhone;(0,h.useEffect)((function(){return o(1),function(){}}),[]),(0,h.useEffect)((function(){t&&u()}),[t]),(0,h.useEffect)((function(){2===s&&i()}),[s]);var u=function(){T.ZP.fromTo("#guide-progress",{width:"0%"},{duration:3,width:"100%",ease:"none",onComplete:function(){o((function(e){return e+1}))}})};return(0,v.jsx)(v.Fragment,{children:t&&(l?(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"phone-home-guide-bg flex items-center justify-center",onClick:function(){o((function(e){return e+1})),T.ZP.killTweensOf("#guide-progress")},children:[(0,v.jsx)("img",{hidden:1!==s,alt:" ",className:"phone-people-control",src:n(64613)}),(0,v.jsx)("div",{className:"guide-progress-bac",children:(0,v.jsx)("div",{id:"guide-progress",className:"guide-progress-now"})})]})}):(0,v.jsxs)("div",{className:"pc-guide-bg",onClick:function(){o((function(e){return e+1}))},children:[(0,v.jsx)("img",{hidden:1!==s,alt:" ",className:"pc-control",src:n(56287)}),(0,v.jsx)("div",{className:"guide-progress-bac",children:(0,v.jsx)("div",{id:"guide-progress",className:"guide-progress-now"})})]}))})},ze=n(68907),We=Object.defineProperty,qe=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,Je=(e,t,n)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const $e=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))Xe.call(t,n)&&Je(e,n,t[n]);if(qe)for(var n of qe(t))Qe.call(t,n)&&Je(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 138 14",role:"img"},e),h.createElement("defs",null,h.createElement("pattern",{id:"lj_pop_logo_svg__a",preserveAspectRatio:"none",width:"100%",height:"100%",viewBox:"0 0 1594 160"},h.createElement("image",{width:1594,height:160,xlinkHref:"data:image/png;base64,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AAIQgAAEIACBQRJA0THIYUNoCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAETABFB/MAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIACBwRJA0THYoUNwCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEUHQwByAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEBgsARQdgx06BIcABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQABFB3MAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIACBwRJA0THYoUNwCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEUHQwByAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEBgsARQdgx06BIcABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQABFB3MAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIACBwRJA0THYoUNwCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEUHQwByAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEBgsARQdgx06BIcABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQABFB3MAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIACBwRJA0THYoUNwCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEUHQwByAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEBgsARQdgx06BIcABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQABFB3MAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIACBwRJA0THYoUNwCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEUHQwByAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEBgsARQdgx06BIcABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQABFB3MAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIACBwRJA0THYoUNwCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAE/g/cpjNSxZmfiwAAAABJRU5ErkJggg=="}))),h.createElement("path",{fill:"url(#lj_pop_logo_svg__a)",d:"M0 0h138v14H0z"}));var et=0,tt={count:0},nt=function(){(0,f.useIntl)();var e=(0,f.useModel)("loading"),t=e.setShowLoading,i=e.isFirstLoading,a=e.setIsFirstLoading,r=e.setHasEnterWorld,s=e.setShowGuide,o=((0,f.useModel)("user").id,(0,h.useState)(0)),l=d()(o,2),u=l[0],c=l[1],p=(0,h.useState)(!1),m=d()(p,2),g=m[0],x=m[1];(0,h.useEffect)((function(){return y.Z.emit(b.Z.INIT_SCENE),y.Z.on(b.Z.LOAD_PROGRESS,w),function(){y.Z.off(b.Z.LOAD_PROGRESS,w)}}),[]),(0,h.useEffect)((function(){var e;return(0,ze.Do)()||(e=setInterval((function(){et<1&&w(et+=.1)}),100)),function(){et=0,T.ZP.killTweensOf(tt),T.ZP.killTweensOf("#progress-now"),clearInterval(e)}}),[]),(0,h.useEffect)((function(){Math.floor(u)>=100&&(i?(x(!0),a(!1)):(x(!1),setTimeout((function(){M((function(){t(!1),s(!0)}))}),1e3)))}),[u]),(0,h.useLayoutEffect)((function(){return g&&(T.ZP.fromTo(".in-world-button",{scale:1},{scale:1,duration:1,transformOrigin:"center"}),T.ZP.fromTo(".in-world-button",{opacity:0,translateY:20},{opacity:1,translateY:0,duration:1.1,delay:.2})),function(){}}),[g]);var M=function(e){T.ZP.to(".loading-wrap",{opacity:0,scale:1.05,duration:.8,ease:"Power4.out",onComplete:function(){e&&e()}})},w=function(e){tt&&T.ZP.killTweensOf(tt),T.ZP.to(tt,{count:e,duration:.1,onUpdate:function(){!function(e){c(100*e)}(e),T.ZP.to("#progress-now",{width:100*e+"%",duration:.1})}})};return(0,v.jsxs)("div",{className:"loading-wrap h-full w-full fixed top-0 left-0  bg-loading-bg bg-no-repeat bg-center bg-cover bg-black  z-[1001] backdrop-blur-[0]",children:[(0,v.jsx)($e,{className:"sm:w-[170px] xl:w-[340px]  ab-x-center sm:bottom-[26px] xl:bottom-[50px] loading-text-safe-ios  "}),g&&(0,v.jsx)("div",{className:"in-world-button ab-x-center sm:bottom-[14%] xl:bottom-[24%] rounded-[5px]  sm:sm:w-[140px] sm:sm:h-[36px] xl:w-[280px] xl:h-[72px] xl:max-h-[80px] xl:max-w-[350px] sm:text-16 xl:text-[32px] ignore:xxl:text-[32px] font-OPPO-R  cursor-pointer text-white loading-btn-safe-ios",onClick:function(){M((function(){t(!1),r(!0)})),(0,P.R)("0_0"),y.Z.emit(b.Z.FIRST_CLICK)},children:(0,v.jsx)("img",{className:"w-full h-full",src:n(32748)})}),(0,v.jsxs)("div",{id:"progress-back",className:"w-full sm:h-[12px] xl:h-[30px] absolute bottom-0 bg-[#6E6E6E]/30 ".concat((0,we.gn)()?"progress-safe-ios":""),children:[(0,v.jsx)("div",{id:"progress-now",className:"w-0 sm:h-[12px] xl:h-[30px] absolute bottom-0 bg-[#353535]"}),(0,v.jsx)("div",{className:"sm:text-10  xl:text-20 sm:h-[12px] xl:h-[30px] flex-row-center-center text-white font-OPPO-B ab-x-center  origin-center   ",children:Math.floor(u)>=100?"100%":"".concat(Math.floor(u),"%")})]})]})};function it(e){return at.apply(this,arguments)}function at(){return(at=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.Z.post(Se.Z.api.uploadPic,{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return st.apply(this,arguments)}function st(){return(st=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.Z.post(Se.Z.api.picList,{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return lt.apply(this,arguments)}function lt(){return(lt=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.Z.post(Se.Z.api.deletePic,{data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=i,ct=null,dt=-1,ht=1,ft=function(){var e=(0,h.useState)(!1),t=d()(e,2),i=t[0],a=t[1],r=(0,h.useState)(""),s=d()(r,2),l=s[0],c=s[1],p=(0,h.useState)(!0),m=d()(p,2),g=(m[0],m[1]),M=(0,h.useState)(""),w=d()(M,2),T=w[0],_=w[1],S=(0,h.useState)(""),A=d()(S,2),E=(A[0],A[1]),I=(0,f.useModel)("global"),C=(I.shareType,I.setShareType),k=(0,f.useModel)("user").imageInfoModel,L=(0,f.useModel)("venue").venueId,O=(0,f.useIntl)(),P=(0,h.useState)(""),R=d()(P,2),D=R[0];R[1],x();(0,h.useEffect)((function(){return y.Z.on(b.Z.VISIBLE_POSTER_MODAL,B),function(){y.Z.off(b.Z.VISIBLE_POSTER_MODAL,B),(0,ze.vH)()}}),[]),(0,h.useEffect)((function(){dt=L}),[L]),(0,h.useEffect)((function(){ht=k||1}),[k]),(0,h.useEffect)((function(){}),[i]);var N=function(){var e=u()(o()().mark((function e(t,n){var i,a,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n,i="","pick_model"===t?(C(1),i="model_".concat(ht,"_").concat(n),_("".concat(Se.Z.imgBaseUrl,"/image/poster/").concat(i,".jpg"))):"pick_scene"===t?(i="scene_".concat(ht,"_").concat(n),_("".concat(Se.Z.imgBaseUrl,"/image/poster/").concat(i,".jpg")),y.Z.emit(b.Z.FINISH_TASK,Y.U.PICK_SCENE)):"pick_mark"===t?(i="pick_".concat(ht,"_").concat(n),_("".concat(Se.Z.imgBaseUrl,"/image/poster/").concat(i,".jpg")),y.Z.emit(b.Z.FINISH_TASK,Y.U.PICK_MARK)):"model"===t?(C(1),i="model_".concat(n),_("".concat(Se.Z.imgBaseUrl,"/image/poster/").concat(i,".jpg"))):"self"===t&&(C(2),i="poster_".concat(ht),_("".concat(Se.Z.imgBaseUrl,"/image/poster/").concat(i,".jpg"))),!(t.indexOf("pick")>-1)){e.next=10;break}return a={img:i+".jpg",type:t||"",brand_id:dt,car_id:"",mark_id:""},e.next=7,ut.uploadPicture(a);case 7:r=e.sent,r.code;case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){var t=e.visible,n=e.type,i=e.otherId;t?(c(n||""),a(!0),g(!0),_(""),E(""),N(n,i)):(a(!1),U())},U=function(){ct&&(clearTimeout(ct),ct=null)};return(0,v.jsx)(re,{visible:i,isBulr:!1,onCancel:function(){switch(y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!1}),l){case"self":y.Z.emit(b.Z.FINISH_TASK,Y.U.SHARE_MARK);break;case"model":case"pick_model":y.Z.emit(b.Z.FINISH_TASK,Y.U.SHARE_LOOK)}C(0)},maskStyle:{background:"rgba(0,0,0,0.8)",backdropFilter:"blur(0px)"},contentClassName:"w-fit h-fit",children:(0,v.jsxs)("div",{className:"sm:w-[214px] xl:w-[344px] flex flex-col justify-start items-center sm:text-10 xl:text-16 backdrop-blur-[0px]",children:[(0,v.jsx)("div",{className:"relative sm:mt-[14px] sm:w-[136px] sm:min-w-[136px] xl:mt-[34px] xl:w-[246px] flex justify-center items-center",children:(0,v.jsx)("img",{draggable:!1,className:"w-full min-h-full",id:"poster",src:T,alt:"",onTouchStart:function(){ct=setTimeout((function(){}),500)},onTouchEnd:U})}),(0,v.jsxs)("div",{className:"sm:text-12 sm:mt-[10px] xl:text-16 xl:gap-x-[60px] xl:mt-[25px] flex text-white font-OPPO-R",children:[!(0,we.tq)()&&(0,v.jsxs)("div",{className:"sm:w-[30px] xl:w-[48px] group flex flex-col items-center phone-function-btn cursor-pointer",onClick:function(){(0,ze.tg)(D,"poster")},children:[(0,v.jsx)("div",{className:"sm:w-[30px] sm:h-[30px] xl:w-[48px] xl:h-[48px] rounded-full bg-white/20 backdrop-blur-[20px] flex justify-center items-center group-hover:xl:bg-white",children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("img",{className:"sm:w-[15px] xl:w-[23px] select-none",src:n(69686)}),(0,v.jsx)("img",{className:"sm:w-[15px] xl:w-[23px] absolute left-0 top-0 select-none opacity-0 bg-white group-hover:xl:opacity-100",src:n(41610)})]})}),!(0,we.tq)()&&(0,v.jsx)("span",{className:"xl:mt-[3px] opacity-0 group-hover:xl:opacity-100",children:O.formatMessage({id:"save"})})]}),(0,we.tq)()&&(0,v.jsx)("span",{className:" text-white text-center whitespace-pre-wrap",children:O.formatMessage({id:"save.tip"})})]})]})})},pt=h.memo(ft),mt=function(e){var t=e.showGuide,i=e.onClick,a=(0,h.useState)(0),r=d()(a,2),s=r[0],o=r[1];(0,h.useEffect)((function(){return o(1),function(){}}),[]),(0,h.useEffect)((function(){t&&l()}),[t]),(0,h.useEffect)((function(){2===s&&i()}),[s]);var l=function(){T.ZP.fromTo("#guide-progress",{width:"0%"},{duration:3,width:"100%",ease:"none",onComplete:function(){o((function(e){return e+1}))}})};return(0,v.jsx)(v.Fragment,{children:t&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"phone-venue-guide-bg mask flex items-center justify-center",onClick:function(){o((function(e){return e+1})),T.ZP.killTweensOf("#guide-progress")},children:[(0,v.jsx)("img",{hidden:1!==s,alt:" ",className:"phone-people-control",src:n(73083)}),(0,v.jsx)("div",{className:"guide-progress-bac",children:(0,v.jsx)("div",{id:"guide-progress",className:"guide-progress-now"})})]})})})},vt=function(e){e.onClose;var t=e.showType,i=void 0===t?"privacy":t,a=((0,f.useIntl)(),(0,h.useState)([1,2,3,4,5,6])),r=d()(a,2),s=r[0],l=(r[1],(0,h.useState)(["01","02","03","04","05","06"])),c=d()(l,2),p=c[0],m=c[1],g=(0,f.useModel)("global").setRuleType;_e("rules-list"),(0,h.useEffect)((function(){return"lottery"===i&&x(),function(){g("privacy")}}),[]);var x=function(){var e=u()(o()().mark((function e(){var t,n,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getServerTime();case 2:t=e.sent,(n=Number(Ce()(1e3*t.data.Time).format("DD")))>=17&&n<=21?(i=["01",n.toString(),"03","04","05","06"],m(i)):n>21&&m(["01","21","03","04","05","06"]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"w-full h-full relative flex flex-col items-center xl:pb-[50px]",children:[(0,v.jsx)("div",{className:"sm:text-[.18rem] xl:text-24 font-OPPO-B sm:mt-[10px] ignore:xl:mt-[50px] ",children:{privacy:"",lottery:"",rule:""}[i]}),(0,v.jsx)("div",{className:" rules-list sm:px-[20px] sm:w-full xl:w-[900px] flex-1 sm:mt-[20px] xl:mt-[33px] overflow-auto hidebar",children:(0,v.jsx)("div",{className:"flex-dir-[col]",children:function(){switch(i){case"privacy":default:return s.map((function(e,t){return(0,v.jsx)("img",{draggable:!1,className:"w-full",src:n(72249)("./privacy_0".concat(t+1,".png"))},t)}));case"rule":return s.map((function(e,t){return(0,v.jsx)("img",{draggable:!1,className:"w-full",src:n(20045)("./rules_0".concat(t+1,".png"))},t)}));case"lottery":return p.map((function(e,t){return(0,v.jsx)("img",{draggable:!1,className:"w-full",src:n(45377)("./lotteryRule_".concat(e,".png"))},t)}))}}()})})]})},gt=function(e){var t=e.venueId,i=e.id,a=((0,f.useIntl)(),(0,h.useState)()),r=d()(a,2),s=r[0],o=r[1];return(0,h.useEffect)((function(){var e=t-1;if(e>=0){var n=ce[e].find((function(e){return e.id===i}));o(n)}}),[i]),(0,v.jsx)("div",{className:"sm:max-w-[252px] sm:w-fit sm:h-[45px] sm:max-h-[45px] xl:size-[252px,45px] relative flex sm:text-[0.08rem] xl:text-10 font-OPPO-M overflow-hidden",style:{borderImageSlice:"45.5 236 45.5 129 fill",borderImageWidth:"45.5px 236px 45.5px 129px",borderImageOutset:"0px 0px 0px 0px",borderImageRepeat:"stretch stretch",borderImageSource:'url("'.concat(n(44602),'")'),borderStyle:"solid"},children:(0,v.jsx)("div",{className:"relative top-0 left-0 ignore:sm:pl-[10px] ignore:sm:pr-[110px] sm:min-w-[220px] sm:max-h-[45px]",children:(0,v.jsx)("div",{className:"flex-row-center-center xl:scale-[0.75] h-full z-[1] leading-[1.2] whitespace-pre-wrap text-center sm:mt-[3px]",children:(0,v.jsxs)("span",{style:{wordBreak:"break-word"},children:[" ",null==s?void 0:s.exhibit_name.trim()]})})})})},xt=Object.defineProperty,bt=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,wt=(e,t,n)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Tt=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))yt.call(t,n)&&wt(e,n,t[n]);if(bt)for(var n of bt(t))Mt.call(t,n)&&wt(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19.5 21.502",role:"img"},e),h.createElement("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},h.createElement("path",{d:"M17.504 7.109a5.976 5.976 0 0 1 0 7.3M4.07 15.795h-1.4a1.922 1.922 0 0 1-1.922-1.922V7.608A1.922 1.922 0 0 1 2.67 5.686h3.669M7.788 17.434l1.952 2.518a2.064 2.064 0 0 0 3.7-1.267V2.816a2.065 2.065 0 0 0-3.7-1.267L6.53 5.685"})));var _t,St;!function(e){e.EVENT="event",e.TIME="time"}(_t||(_t={})),function(e){e.OPEN="open",e.LOGIN="login",e.GRTPRIZE="getprize",e.LOTTERY="lottery"}(St||(St={}));var At=!0,Et=!1,It=function(e){var t=e.hidden,n=(0,h.useState)(!1),i=d()(n,2),a=i[0],s=i[1],l=(0,h.useState)(!1),c=d()(l,2),p=(c[0],c[1],(0,h.useState)(!1)),m=d()(p,2),g=(m[0],m[1],(0,h.useState)([])),x=d()(g,2),M=x[0],w=x[1],_=(0,h.useState)([]),S=d()(_,2),A=(S[0],S[1],(0,h.useState)({priority:0,text:""})),E=d()(A,2),I=E[0],C=E[1],k=(0,h.useState)({priority:0,text:""}),L=d()(k,2),O=L[0],P=L[1],R=(0,h.useRef)([]),D=(0,h.useRef)([]),N=(0,h.useRef)([]),B=(0,h.useRef)(null),U=(0,h.useRef)(null),j=(0,h.useRef)(null),F=(0,h.useRef)([]),Y=.1,G=.3,H=(0,h.useRef)(null),Z=(0,h.useState)(0),K=d()(Z,2),V=(K[0],K[1]),z=(0,h.useRef)(null),W=((0,le.Z)(),(0,f.useModel)("global",(function(e){return{showBroadcast:e.showBroadcast,broadcastList:e.broadcastList,setShowBroadcast:e.setShowBroadcast}}))),q=W.showBroadcast,X=W.broadcastList,Q=W.setShowBroadcast,J=(0,f.useModel)("loading",(function(e){return{hasEnterWorld:e.hasEnterWorld}})).hasEnterWorld;(0,h.useEffect)((function(){return y.Z.on(b.Z.BROADCAST_EVENT,ae),y.Z.on(b.Z.SOCKET_HEARTBEAT,ee),function(){y.Z.off(b.Z.BROADCAST_EVENT,ae),At=!0,Et=!1}}),[]),(0,h.useEffect)((function(){$()}),[]);var $=function(){var e=u()(o()().mark((function e(){var t,n,i,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getServerTime();case 2:t=e.sent,n=t.code,i=t.data,200===n&&(a=Date.now()-1e3*(null==i?void 0:i.Time),V(i.Time),z.current=a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){H.current&&(a&&t&&s(!1),a||t||s(!0))}),[t]),(0,h.useEffect)((function(){q?M.length>0&&null==H.current?(oe(),ce()):he():ue()}),[q]),(0,h.useEffect)((function(){J&&te()}),[X,J]),(0,h.useEffect)((function(){At&&M.length&&(y.Z.off(b.Z.SOCKET_HEARTBEAT,ee),Q(!0),At=!1,Et||(oe(),ce()))}),[M]),(0,h.useEffect)((function(){w(R.current)}),[R.current]);var ee=function e(){R.current.length>0?y.Z.off(b.Z.SOCKET_HEARTBEAT,e):te()},te=function(e){X.length;var t=r()(X);null!=e&&e.length&&(t=r()(e)),(t=t.filter((function(e){return!N.current.find((function(t){return t.id===e.Id}))}))).length&&t.forEach((function(e){re({priority:0,text:e.Content,loop:!0,venueName:e.JumpId,showCount:null!=e&&e.ShowCount?Number(e.ShowCount):0,id:e.Id,startTime:e.StartTime||"",endTime:e.EndTime||"",key:e.Key,eventType:e.Event,duration:Number(e.ShowTime),type:e.Type,invalid:!1})}))},ne=function(e){if(e.showCount){var t=F.current.findIndex((function(t){return t.id===e.id}));-1===t&&e.id?F.current.push({id:e.id,showCount:1}):F.current[t].showCount+=1}},ie=function(e){if(Number(e.startTime)&&Number(e.endTime)){R.current.length;var t=Date.now();0!==z.current&&(t=Date.now()-z.current),"number"!=typeof z.current&&$(),(t/1e3<Number(e.startTime)||t/1e3>Number(e.endTime))&&(e.invalid=!0),Number(e.startTime),Number(e.endTime)}var n;e.showCount&&1===e.type&&(((null===(n=F.current.find((function(t){return t.id===e.id})))||void 0===n?void 0:n.showCount)||0)>=e.showCount&&(e.invalid=!0));if(e.eventType===_t.EVENT)D.current.find((function(t){return t===e.key}))?e.invalid&&(D.current=D.current.filter((function(t){return t!==e.key}))):e.invalid=!0;return!e.invalid},ae=function(e){var t=e.type;D.current.push(t);var n=X.filter((function(e){return"event"===e.Event&&e.Key===t}));n.length&&te(n)},re=function(e){if(e.text){e.priority||(e.priority=0),e.duration||(e.duration=3);var t=r()(R.current);ie(e)&&(1==e.priority?t.unshift(e):t.push(e)),R.current=t,R.current.length&&w(R.current)}},oe=function(){y.Z.off(b.Z.SOCKET_HEARTBEAT,ee),s((function(e){return!0}))},ue=function(){s(!1)},ce=function(){if(!(Et||M.length<=0)){Et=!0;var e=B.current.clientWidth,t=R.current.shift();t&&(ne(t),t&&t.loop&&ie(t)&&R.current.push(t),T.ZP.set([U.current],{x:e,y:0}),C(t),setTimeout((function(){var n=U.current.clientWidth,i=n-e,a=(i=i<=0?e:n)/Y/1e3;H.current=T.ZP.timeline(),H.current.to(U.current,{x:e-i,duration:a,ease:"none"}).to(U.current,{duration:t.duration,onComplete:function(){(null==t?void 0:t.eventType)===_t.TIME&&N.current.push(t),de(1)}})})))}},de=function e(t){var n,i;if(R.current.length<=0)return fe(),ue(),void pe();var a=(null===(n=B.current)||void 0===n?void 0:n.clientWidth)||0,r=(null===(i=B.current)||void 0===i?void 0:i.clientHeight)||0,s=R.current.shift();if(s)if(ne(s),s.loop&&ie(s)&&R.current.push(s),0==t){T.ZP.set([U.current],{x:0,y:r}),C(s);var o=U.current.clientWidth-a;o<=0&&(o=0);var l=o/Y/1e3;H.current.clear(),T.ZP.to(j.current,{y:-r,duration:G}),H.current.to(U.current,{y:0,duration:G}).to(U.current,{delay:1,x:-o,duration:l,ease:"none"}).to(U.current,{duration:s.duration,onComplete:function(){(null==s?void 0:s.eventType)===_t.TIME&&N.current.push(s),e(1)}})}else if(1==t){T.ZP.set([j.current],{x:0,y:r}),P(s);var u=j.current.clientWidth-a;u<=0&&(u=0);var c=u/Y/1e3;H.current.clear(),T.ZP.to(U.current,{y:-r,duration:G}),H.current.to(j.current,{y:0,duration:G}).to(j.current,{delay:1,x:-u,duration:c,ease:"none"}).to(j.current,{duration:s.duration,onComplete:function(){(null==s?void 0:s.eventType)===_t.TIME&&N.current.push(s),e(0)}})}},he=function(){H.current&&H.current.paused&&H.current.resume()},fe=function(){H.current&&H.current.kill(),H.current=null,C({priority:0,text:""}),P({priority:0,text:""})},pe=function(){y.Z.on(b.Z.SOCKET_HEARTBEAT,ee),F.current=[],Et=!1,At=!0},me=function(e){var t=e.item;return t.venueName?(0,v.jsx)("span",{onClick:function(){var e;-1==(e=t.venueName).indexOf("http")?y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:parseInt(e)}):location.href=e},children:t.text}):(0,v.jsx)("span",{children:t.text})};return(0,v.jsx)("div",{className:"broadcast-background ".concat(a?"broadcast-show":"broadcast-hide"," flex justify-center items-center sm:text-14 xl:text-[16px]"),onTransitionEnd:function(){a?M.length>0&&null==H.current?ce():he():H.current&&H.current.pause()},children:(0,v.jsxs)("div",{className:"broadcast-wrapper flex justify-start items-center",children:[(0,v.jsx)(Tt,{className:"trumpeticon sm:size-[15px,16px] xl:size-[20px,21px]"}),(0,v.jsxs)("div",{className:"broadcast",ref:B,children:[(0,v.jsx)("div",{className:"broadcast-text flex justify-center items-center h-full",ref:U,children:(0,v.jsx)(me,{item:I})}),(0,v.jsx)("div",{className:"broadcast-text flex justify-center items-center h-full",ref:j,children:(0,v.jsx)(me,{item:O})})]})]})})},Ct=h.memo(It),kt=function(){var e=(0,f.useIntl)(),t=(0,h.useState)(!1),n=d()(t,2),i=n[0],a=n[1],r=(0,h.useState)(!1),s=d()(r,2),o=(s[0],s[1],(0,f.useModel)("global")),l=o.setRuleVis,u=(o.setPriVis,o.setRuleType),c=(0,f.useModel)("loading").setShowGuide,p=(0,f.useModel)("user"),m=(p.id,p.isNew);(0,h.useEffect)((function(){g()}),[]);var g=function(){0===m&&a(!0)};return(0,v.jsx)(re,{visible:i,closable:!1,isBulr:!1,contentClassName:"sm:size-[370px,220px] ignore:xl:size-[370px,220px]  backdrop-blur-[20px] bg-[rgba(127,127,127,0.2)] rounded-[10px]",children:(0,v.jsxs)("div",{className:"agree-modal w-full h-full flex flex-col items-center sm:px-[15px] ignore:xl:px-[15px] sm:pt-[20px] ignore:xl:pt-[20px] font-OPPO-R sm:text-12 ignore:xl:text-[12px] leading-[1.3]",children:[(0,v.jsx)("div",{className:" font-OPPO-B sm:text-14 ignore:xl:text-[14px]",children:e.formatMessage({id:"agree.title"})}),(0,v.jsx)("div",{className:"  text-[#FFF]/60 text-center  sm:mt-[15px] ignore:xl:mt-[15px] leading-[1.35]",children:e.formatMessage({id:"agree.detail"})}),(0,v.jsxs)("div",{className:"flex sm:mt-[15px] ignore:xl:mt-[15px] tracking-wide",children:[(0,v.jsx)("div",{children:e.formatMessage({id:"agree.click"})}),(0,v.jsx)("div",{className:"text-[#18D1FF] border-b-[1px] border-[#FFF]/50",onClick:function(){l(!0),u("rule"),(0,P.R)("12_4")},children:e.formatMessage({id:"agree.rule"})}),"",(0,v.jsx)("div",{className:"text-[#18D1FF] border-b-[1px] border-[#FFF]/50",onClick:function(){l(!0),(0,P.R)("12_3")},children:e.formatMessage({id:"agree.privacy"})})]}),(0,v.jsxs)("div",{className:" sm:w-[220px] ignore:xl:w-[220px] justify-between flex sm:mt-[25px] ignore:xl:mt-[25px]",children:[(0,v.jsx)("div",{className:"sm:size-[90px,26px] ignore:xl:size-[90px,26px]   rounded-full border-[1px] flex-row-center-center ",onClick:function(){(0,P.R)("12_1"),(0,ze.I3)()},children:e.formatMessage({id:"agree.refuse"})})," ",(0,v.jsx)("div",{className:"sm:size-[90px,26px] ignore:xl:size-[90px,26px]  rounded-full border-[1px] flex-row-center-center ",onClick:function(){a(!1),c(!0),(0,P.R)("12_2")},children:e.formatMessage({id:"agree.confirm"})})]})]})})},Lt=n(28451),Ot=1,Pt=2,Rt={MainSquare:{id:107e3,name:"MainSquare",assetsName:"MainSquare",type:Ot,originPos:new Lt.Pa4(0,0,-80),originRotation:0,camera:{originPos:new Lt.Pa4(0,1,-168),originTarget:new Lt.Pa4(0,1,-168),fov:55,near:.5,far:500,clipDistance:270}},PopmartVenue:{id:107001,name:"PopmartVenue",assetsName:"PopmartVenue",type:Pt,originPos:new Lt.Pa4(0,0,-10),originRotation:Math.PI,entryPos:new Lt.Pa4(19.72,0,-46.69),entryRotation:1.26,camera:{originPos:new Lt.Pa4(0,1,-168),originTarget:new Lt.Pa4(0,1,-168),fov:55,near:.5,far:500,clipDistance:270}},PopmartVenue2:{id:107002,name:"PopmartVenue2",assetsName:"PopmartVenue2",type:Pt,originPos:new Lt.Pa4(0,0,10),originRotation:Math.PI,entryPos:new Lt.Pa4(-24.67,0,-42.96),entryRotation:-1.12,camera:{originPos:new Lt.Pa4(0,1,-168),originTarget:new Lt.Pa4(0,1,-168),fov:55,near:.5,far:500,clipDistance:270}},PopmartVenue3:{id:107003,name:"PopmartVenue3",assetsName:"PopmartVenue3",type:Pt,originPos:new Lt.Pa4(0,0,0),originRotation:Math.PI,entryPos:new Lt.Pa4(-26.5,0,29.02),entryRotation:-.75,camera:{originPos:new Lt.Pa4(0,1,-168),originTarget:new Lt.Pa4(0,1,-168),fov:55,near:.5,far:500,clipDistance:270}},PopmartVenue4:{id:107004,name:"PopmartVenue4",assetsName:"PopmartVenue4",type:Pt,originPos:new Lt.Pa4(0,0,-10),originRotation:Math.PI,entryPos:new Lt.Pa4(23.23,0,44.37),entryRotation:2.09,camera:{originPos:new Lt.Pa4(0,1,-168),originTarget:new Lt.Pa4(0,1,-168),fov:55,near:.5,far:500,clipDistance:270}},HonorVenue:{id:107005,name:"HonorVenue",assetsName:"HonorVenue",type:Pt,originPos:new Lt.Pa4(0,0,-35),originRotation:0,entryPos:new Lt.Pa4(68.52,0,10.49),entryRotation:.88,camera:{originPos:new Lt.Pa4(0,1,-168),originTarget:new Lt.Pa4(0,1,-168),fov:55,near:.5,far:500,clipDistance:270}}},Dt=function(){var e=(0,f.useIntl)(),t=function(e){var t;null===(t=document.getElementById("ip-img"))||void 0===t||t.remove()};return(0,v.jsx)("div",{className:"w-full h-full overflow-auto hidebar absolute top-0 left-0 bg-exhibit-bg bg-cover-center flex flex-col",children:ce.map((function(n,i){return n.map((function(n,i){return(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)("div",{className:"flex-shrink-0 flex-row-center-center relative ",children:(0,v.jsx)("img",{id:"exhibit-img",className:"sm:size-[186px,246px] xl:size-[225px,300px]  object-cover ignore:border-[3px] rounded-[10px] border-solid border-[#FFC183]/20",src:Se.Z.imgBaseUrl+"/image/exhibit/exhibit_".concat(null==n?void 0:n.id,".jpg")})}),(0,v.jsxs)("div",{className:"exhibit-detail flex-1 h-fit sm:px-[15px] xl:px-[20px] relative flex flex-col flex-shrink-0 sm:rounded-[10px] xl:rounded-[10px] bg-[#626262]/30 backdrop-blur-[24px]  border-[#935221]/50 border-[1px]",children:[(0,v.jsx)("div",{className:" leading-[1.25] sm:text-20 xl:text-20  sm:mt-[10px] xl:mt-[10px] font-semibold",children:"".concat(null!=n&&n.exhibit_name?n.exhibit_name.trim():e.formatMessage({id:"exhibit.default_title"}))}),(0,v.jsx)("div",{className:"rounded-full flex-shrink-0 sm:w-[30px] sm:h-[3px] xl:size-[30px,3px] bg-[#FFF] sm:mt-[10px] xl:mt-[15px]"}),(0,v.jsxs)("div",{className:" flex-1  sm:mt-[10px] xl:mt-[10px] sm:text-14 xl:text-16 whitespace-pre-wrap text-[#fff]/50",children:[null!=n&&n.exhibit_detail?(0,v.jsx)(Ae,{text_detail:null==n?void 0:n.exhibit_detail}):e.formatMessage({id:"exhibit.default_detail"}),!(null!=n&&n.no_img)&&(null!=n&&n.ip_img_arr?(0,v.jsx)("div",{className:"flex  sm:my-[20px]  xl:my-[20px] items-center ",children:new Array(Number(null==n?void 0:n.ip_img_arr)).fill(0).map((function(e,t){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("img",{draggable:!1,id:"ip-img",className:"sm:w-[80px]  xl:w-[90px] ".concat(0!==t&&"sm:ml-[20px] xl:ml-[20px]"),src:Se.Z.imgBaseUrl+"/image/exhibit/ip/ip_img_".concat(null!=n&&n.ip_name?(null==n?void 0:n.ip_name.trim())+Number(t+1):"Pucky",".png")})})}))}):(0,v.jsx)("img",{draggable:!1,id:"ip-img",onError:t,className:"sm:w-[80px] sm:my-[30px] xl:size-[90px,90px] xl:my-[30px]",src:Se.Z.imgBaseUrl+"/image/exhibit/ip/ip_img_".concat(null!=n&&n.ip_name?null==n?void 0:n.ip_name.trim():"Pucky",".png")})),(null==n?void 0:n.ip_detail)&&(0,v.jsx)(Ae,{text_detail:null==n?void 0:n.ip_detail})]})]})]})}))}))})},Nt=n(47216),Bt=n.n(Nt),Ut=function(){var e=(0,f.useModel)("global"),t=e.authVis,n=e.setAuthVis,i=(0,f.useIntl)();return(0,v.jsx)(re,{visible:t,isBulr:!1,onCancel:function(){n(!1),y.Z.emit(b.Z.CANCEL_AUTH)},contentClassName:"sm:size-[245px,160px] xl:size-[245px,160px]  backdrop-blur-[20px] bg-[rgba(127,127,127,0.2)] rounded-[10px]",children:(0,v.jsxs)("div",{className:"w-full h-full flex flex-col sm:text-12 xl:text-12 items-center font-OPPO-R",children:[(0,v.jsx)("div",{className:"sm:mt-[50px] xl:mt-[50px] whitespace-pre-wrap text-center leading-[1.3]",children:i.formatMessage({id:"wxauth.text"})}),(0,v.jsx)("div",{className:"sm:size-[90px,26px] xl:size-[90px,26px] border-[1px] border-[#FFF] rounded-full flex-row-center-center sm:mt-[35px] xl:mt-[35px]",onClick:function(){(0,P.R)("13_1"),(0,ze.y1)()},children:i.formatMessage({id:"auth.go"})})]})})},jt=function(){var e=(0,f.useModel)("global"),t=e.unStartVis,n=e.setUnStartVis,i=(0,f.useIntl)(),a=function(){n(!1),(0,P.R)("14_1")};return(0,v.jsx)(re,{visible:t,isBulr:!1,onCancel:a,contentClassName:"sm:size-[245px,160px] xl:size-[245px,160px]  backdrop-blur-[20px] bg-[rgba(127,127,127,0.2)] rounded-[10px]",children:(0,v.jsxs)("div",{className:"w-full h-full flex flex-col sm:text-12 xl:text-12 items-center font-OPPO-R",children:[(0,v.jsx)("div",{className:"sm:text-14 xl:text-14 font-OPPO-B sm:mt-[20px] xl:mt-[20px]",children:i.formatMessage({id:"unstart.title"})}),(0,v.jsxs)("div",{className:"sm:mt-[15px] xl:mt-[15px] whitespace-pre-wrap text-center leading-[1.3]",children:["",(0,v.jsxs)("span",{className:" font-OPPO-B",children:[" ",i.formatMessage({id:"unstart.time"})]}),"","\n",""]}),(0,v.jsx)("div",{className:"sm:size-[90px,26px] xl:size-[90px,26px] border-[1px] border-[#FFF] rounded-full flex-row-center-center sm:mt-[27px] xl:mt-[27px]",onClick:a,children:i.formatMessage({id:"unstart.know"})})]})})},Ft=function(){var e=(0,f.useModel)("global"),t=e.wxAuthVis,n=e.setWxAuthVis,i=(0,f.useIntl)();return(0,v.jsx)(re,{visible:t,isBulr:!1,onCancel:function(){n(!1),y.Z.emit(b.Z.CANCEL_AUTH)},contentClassName:"sm:size-[245px,160px] xl:size-[245px,160px]  backdrop-blur-[20px] bg-[rgba(127,127,127,0.2)] rounded-[10px]",children:(0,v.jsxs)("div",{className:"w-full h-full flex flex-col sm:text-12 xl:text-12 items-center font-OPPO-R",children:[(0,v.jsx)("div",{className:"sm:mt-[50px] xl:mt-[50px] whitespace-pre-wrap text-center leading-[1.3]",children:i.formatMessage({id:"auth.text"})}),(0,v.jsx)(de.Z,{path:Se.Z.wxRegisterPath,onClick:function(){(0,P.R)("13_1")},children:(0,v.jsx)("div",{className:"sm:size-[90px,26px] xl:size-[90px,26px] border-[1px] border-[#FFF] rounded-full flex-row-center-center sm:mt-[35px] xl:mt-[35px]",children:i.formatMessage({id:"auth.go"})})})]})})},Yt=function(e){var t=e.type,n=e.close,i=(0,f.useIntl)(),a=(0,h.useMemo)((function(){return{default:{tips:i.formatMessage({id:"error.system"}),btn:i.formatMessage({id:"refresh"})},task:{tips:i.formatMessage({id:"error.again"}),btn:i.formatMessage({id:"know"})}}}),[]);return(0,v.jsxs)("div",{className:"ignore:sm:w-[245px] ignore:sm:h-[160px] ignore:xl:w-[350px] ignore:xl:h-[200px] relative text-white font-OPPO-R",children:[(0,v.jsx)("div",{className:"w-[80%] sm:text-[0.12rem] xl:text-16 text-center absolute -translate-x-[50%] -translate-y-[50%] left-[50%] top-[40%]",children:a[t].tips}),(0,v.jsx)("div",{className:"ignore:sm:bottom-[16px] ignore:sm:w-[90px] ignore:sm:h-[26px] ignore:xl:bottom-[30px] ignore:xl:w-[94px] ignore:xl:h-[25px] sm:text-12 xl:text-14 absolute -translate-x-[50%] left-[50%] rounded-full border-[1px] border-white flex justify-center items-center",onClick:function(){"default"===t?window.location.reload():n&&n()},children:a[t].btn})]})},Gt=function(){var e=(0,f.useIntl)(),t=(0,f.useModel)("global"),n=t.cloneVis,i=t.setCloneVis,a=t.clonePtizeInfo,r=t.addApiOntimePrizeId;(0,h.useEffect)((function(){}),[n]),(0,h.useEffect)((function(){null!=a&&a.prizeId&&s(null==a?void 0:a.prizeId)}),[a]);var s=function(){var e=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.submitWealGoods({goodsId:t},(function(e){e&&null!=e&&e.code&&200!=(null==e?void 0:e.code)&&999!=(null==e?void 0:e.code)&&r(t)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)(re,{visible:n,onCancel:function(){i(!1)},contentClassName:"w-fit h-fit sm:rounded-[10px] xl:rounded-[10px] relative",mask:!0,maskStyle:{background:"rgba(0, 0, 0, 0.8)"},children:(0,v.jsxs)("div",{className:"sm:size-[245px,auto] xl:size-[490px,auto] flex-dir-[col] justify-between items-center sm:py-[16px] xl:py-[30px]",children:[(0,v.jsxs)("div",{className:"sm:text-[0.12rem] xl:text-[0.16rem] flex flex-col items-center text-white font-OPPO-R leading-[1.5]",children:[(0,v.jsx)("span",{className:" whitespace-pre-line text-center sm:text-14 font-OPPO-B",children:e.formatMessage({id:"timemodal.title1"})}),(0,v.jsx)("span",{className:"sm:size-[110px] sm:mt-[12px] flex justify-center items-center",children:(0,v.jsx)("img",{src:null==a?void 0:a.prizeImg,className:"h-full"})}),(0,v.jsx)("span",{className:"sm:text-12 xl:text-[16px] font-OPPO-R sm:mt-[15px] xl:mt-[15px]",children:null==a?void 0:a.prizeName})]}),(0,v.jsxs)("div",{className:"flex-dir-[col] justify-center items-center",children:[(0,v.jsxs)("span",{className:" sm:text-8 xl:text-[12px] font-OPPO-M text-white/50",children:["","2022.12.17-2022.12.21"]}),(0,v.jsx)("span",{className:" sm:text-8 xl:text-[12px] font-OPPO-R text-white/50 sm:mb-[12px] xl:mb-[15px]",children:e.formatMessage({id:"timemodal.title2"})}),(0,v.jsx)(de.Z,{className:"sm:size-[90px,26px] sm:rounded-[140px] sm:text-[0.12rem]  xl:size-[180px,52px] xl:rounded-full xl:text-[0.14rem] text-white ignore:border-[1px] border-solid flex justify-center items-center xl:hover:bg-white-text",path:"/packages/activity/pages/pts_goods_detail?id=".concat(null==a?void 0:a.prizeId),onClick:function(){(0,P.R)("9_1")},children:e.formatMessage({id:"scrape"})})]})]})})},Ht=function(){(0,f.useIntl)();var e=(0,f.useModel)("loading"),t=e.showLoading,n=e.setShowLoading,i=e.showGuide,a=e.setShowGuide,s=(0,f.useModel)("venue"),l=s.venueId,c=s.setVenueId,p=s.modelId,m=s.setModelId,g=s.inVenue,x=s.datailVis,M=s.setDatailVis,w=s._modelId,T=s.set_modelId,_=s.viewId,S=s.setViewId,A=(0,f.useModel)("user"),E=A.isNew,I=A.setIsNew,C=(A.isFirstVenue,A.setIsFirstVenue,(0,h.useState)(!1)),k=d()(C,2),L=k[0],O=k[1],R=(0,h.useState)(!1),D=d()(R,2),N=D[0],B=D[1],U=(0,h.useState)(!1),G=d()(U,2),H=G[0],Z=G[1],K=(0,h.useState)("default"),V=d()(K,2),z=V[0],W=V[1],q=(0,f.useModel)("global"),X=(q.priVis,q.setPriVis,q.ruleVis),Q=q.setRuleVis,J=(q.setShowBroadcast,q.setBroadcastList),$=q.ruleType,ee=q.mainShow,te=q.broadcastList,ne=(q.authVis,q.setAuthVis),ie=(q.setUnStartVis,q.openUnStart,q.setShareType),ae=q.apiOntimePool,se=(q.addApiOntimePrizeId,q.submitPrize),oe=(0,h.useRef)(0),le=(0,f.useRequest)(j.Z.updateUserDetail,{manual:!0,debounceInterval:400}).run;(0,h.useEffect)((function(){return y.Z.on(b.Z.SHOW_LOADING,ue),y.Z.on(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,de),y.Z.on(b.Z.CHANGE_SCENE,me),y.Z.on(b.Z.SYSTEM_ERROR,xe),y.Z.on(b.Z.OPEN_OFFLINE_MODAL,be),ve(),ce(),ye(),function(){y.Z.off(b.Z.SHOW_LOADING,ue),y.Z.off(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,de),y.Z.off(b.Z.CHANGE_SCENE,me),y.Z.off(b.Z.SYSTEM_ERROR,xe),y.Z.off(b.Z.OPEN_OFFLINE_MODAL,be)}}),[]),(0,h.useEffect)((function(){oe.current=l}),[l]);var ue=function(){n(!0)},ce=(0,h.useCallback)((function(){var e=Bt().parse(window.location.search,{ignoreQueryPrefix:!0}).sceneId;e&&c(parseInt(e)-Rt.MainSquare.id)}),[]),de=function(e){e.id.length>0?(O(!0),m(r()(e.id))):(O(!1),m([]))},he=function(){var e=u()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,ze.ao)()?(T(t),pe(t),O(!1),m([]),n=[].concat(r()(_.filter((function(e){return e!=t}))),[t]),S(n),(0,P.R)("10_1"),ie(1)):(ne(!0),fe(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){y.Z.emit(b.Z.R2T_WECHAT_AUTH),localStorage.setItem("lastOpenModal","exhibit"),localStorage.setItem("venueId",l.toString()),localStorage.setItem("exhibitId",e.toString())},pe=function(e){_.includes(e)||y.Z.emit(b.Z.FINISH_TASK,Y.U.PICK_LOOK),M(!0)},me=function(e){oe.current!==e.sceneId&&(a(!1),c(e.sceneId-Rt.MainSquare.id))},ve=function(){var e=u()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.toGetBroadCastList)();case 2:(t=e.sent)&&J(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){ie(0),M(!1)},xe=function(e){W("string"==typeof e&&e?e:"default"),Z(!0)},be=function(e){e&&(W("default"),Z(!0))},ye=function(){var e=localStorage.getItem("ontimepool");e&&"[]"!=e&&(ae.current=JSON.parse(e),se())};return(0,v.jsxs)("div",{children:[t&&(0,v.jsx)(nt,{}),0===E&&i&&(0,v.jsx)(Ve,{showGuide:0===E,onClick:function(){le({is_new:1}),I(1),(0,P.R)("15_1")}}),g&&1===E&&5!==l&&i&&(0,v.jsx)(mt,{showGuide:1===E,onClick:function(){le({is_new:2}),I(2),(0,P.R)("15_2")}}),!!te.length&&(0,v.jsx)(Ct,{hidden:!ee}),(0,v.jsx)("div",{hidden:!L,className:" ab-y-center sm:right-[30px] xl:right-[20%] flex flex-col",children:p&&p.map((function(e,t){return(0,v.jsx)("div",{onClick:function(){he(e)},className:"".concat(0!==t?"sm:mt-[16px] xl:mt-[20px]":""),children:(0,v.jsx)(gt,{venueId:oe.current,id:e})},t)}))}),!(0,ze.Do)()&&(0,v.jsxs)("div",{className:"fixed bottom-0 left-0 bg-red-500 text-16",children:[(0,v.jsx)("div",{onClick:function(){y.Z.emit(b.Z.SHOW_LOADING),y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.PopmartVenue3.id})},children:(0,v.jsx)("span",{children:""})}),(0,v.jsx)("div",{onClick:function(){y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_mark",otherId:1})},children:(0,v.jsx)("span",{children:""})}),(0,v.jsx)("div",{onClick:function(){y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:[353]})},children:(0,v.jsx)("span",{children:"2"})}),(0,v.jsx)("div",{onClick:function(){y.Z.emit(b.Z.FINISH_TASK,Y.U.PLAY_HAPPY)},children:(0,v.jsx)("span",{children:""})}),(0,v.jsx)("div",{onClick:function(){B(!0)},children:(0,v.jsx)("span",{children:""})})]}),(0,v.jsx)(re,{closeType:"arrow",visible:N,contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] overflow-hidden",onCancel:function(){return B(!1)},children:(0,v.jsx)(Dt,{})}),(0,v.jsx)(re,{visible:x,mask:!1,closable:!0,onCancel:ge,contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] overflow-hidden",closeType:"arrow",children:(0,v.jsx)(Be,{onClose:ge,venueId:oe.current,modelId:w})}),(0,v.jsx)(re,{mask:!1,closable:!0,closeType:"arrow",visible:X,onCancel:function(){return Q(!1)},contentClassName:"ios-safe !bg-black/60",children:(0,v.jsx)(vt,{onClose:function(){return Q(!1)},showType:$})}),(0,v.jsx)(kt,{}),(0,v.jsx)(pt,{}),(0,v.jsx)(Ke,{}),(0,v.jsx)(Ut,{}),(0,v.jsx)(jt,{}),(0,v.jsx)(Ft,{}),(0,v.jsx)(Gt,{}),(0,v.jsx)(re,{visible:H,onCancel:function(){return Z(!1)},contentClassName:"w-fit h-fit rounded-[20px]",maskStyle:{background:"rgba(0, 0, 0, 0.5)"},closable:!1,zIndex:1002,children:(0,v.jsx)(Yt,{type:z,close:function(){return Z(!1)}})})]})},Zt=function(e){var t=e.close;return(0,v.jsx)("div",{className:"sm:w-[24px] sm:h-[24px] sm:left-[-5px] xl:w-[42px] xl:h-[42px]  xl:left-[-15px] flex justify-center items-center rounded-full bg-[#7F7F7F]/[0.2]  backdrop-blur-[20px] absolute top-2/4 translate-x-[-100%] translate-y-[-50%] cursor-pointer",onClick:t,children:(0,v.jsx)("img",{className:"w-[50%]",src:n(69725)})})},Kt=[1,2],Vt=n(11148),zt=n(38209),Wt=n.n(zt),qt={shift:"ignore:mr-[18px] bg-[#a2a6b4]",Shift:"ignore:mr-[18px] bg-[#a2a6b4]",bksp:"ignore:ml-[13px] max-w-[15%] bg-[#a2a6b4]",space:"",down:"ignore:max-w-[18%] bg-[#3478f3] !text-white",switch:"ignore:max-w-[9%] bg-[#a2a6b4]",switch_zh:"ignore:max-w-[9%] bg-[#a2a6b4]",switch_en:"ignore:max-w-[9%] bg-[#a2a6b4]",123:"ignore:max-w-[9%] bg-[#a2a6b4]",more:"ignore:mr-[18px] max-w-[15%] bg-[#a2a6b4]"},Xt=function(e){e.keyWidth;var t=e.name,n=e.display,i=e.onKeyDown,a=(e.onKeyUp,(0,h.useState)(!1)),r=d()(a,2),s=r[0],o=r[1],l=(0,h.useRef)(void 0);(0,h.useEffect)((function(){return function(){l.current&&clearTimeout(l.current)}}),[]);var u=/{(.+?)}/g,c=(0,h.useMemo)((function(){var e=u.exec(t);return e?e[1]:"standarda"}),[t]),f=Wt()((function(){o(!1),l.current&&clearTimeout(l.current)})),p=Wt()((function(){o(!1)})),m=function(e){i&&i(e)};return(0,v.jsx)("div",{className:"simple-keyboard-key simple-keyboard-key-".concat(c," ").concat("flex-1 p-[5px] ignore:mr-[5px] ignore:last:mr-0 ignore:h-[34px] rounded-[5px] bg-white shadow-[0px_1px_0px_0px_#868a8d] text-[0.14rem] text-black font-bold flex justify-center items-center duration-200"," ").concat(qt[c]," ").concat(s?"opacity-50":""),"data-key":t,onTouchStart:function(e){e.stopPropagation(),o(!0);var t=e.target.getAttribute("data-key");m(t)},onTouchEnd:f,onTouchCancel:p,onTouchMove:f,children:n.includes("</svg>")?(0,v.jsx)("div",{className:"pointer-events-none",dangerouslySetInnerHTML:{__html:n}}):(0,v.jsx)("span",{className:"pointer-events-none",children:n})})},Qt=function(e){var t=e.word,n=(e.onWordDown,e.onWordUp,e.onWordClick),i=(0,h.useState)(!1),a=d()(i,2),r=a[0],s=a[1],o=t.w,l=(t.p,Wt()((function(){s(!1)}))),u=Wt()((function(){s(!1)}));return(0,v.jsx)("div",{className:"simple-keyboard-word ".concat("ignore:px-[10px] ignore:h-[30px] bg-transprent text-[0.14rem] text-black font-bold whitespace-nowrap flex justify-center items-center duration-200"," ").concat(r?"bg-[#aaabac] opacity-50":""),onTouchStart:function(e){s(!0)},onTouchEnd:l,onTouchMove:u,onTouchCancel:u,onClick:function(){n&&n(t)},children:o})},Jt=n(32222),$t=n.n(Jt),en=n(67929),tn=n.n(en),nn={8:"{bksp}",16:"{switch}",32:"{space}",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",108:"{down}",109:"-",110:".",111:"/"};var an=function(e){var t=(0,h.useState)(e),n=d()(t,2),i=n[0],a=n[1],r=(0,h.useRef)(i);return r.current=i,[i,a,(0,h.useCallback)((function(){return r.current}),[])]},rn={show:!1,isCompleteAndClose:!0,isCompleteAndClean:!1,inputKey:"default",layout:{default:["q w e r t y u i o p","a s d f g h j k l","{shift} z x c v b n m {bksp}","{123} {switch_zh} {space} {down}"],default_en:["q w e r t y u i o p","a s d f g h j k l","{shift} z x c v b n m {bksp}","{123} {switch_en} {space} {down}"],shift_zh:["Q W E R T Y U I O P","A S D F G H J K L","{Shift} Z X C V B N M {bksp}","{123} {switch_zh} {space} {down}"],shift_en:["Q W E R T Y U I O P","A S D F G H J K L","{Shift} Z X C V B N M {bksp}","{123} {switch_en} {space} {down}"],number_zh:["1 2 3 4 5 6 7 8 9 0","- /      @  ","{more}      . {bksp}","{switch_zh} {space} {down}"],number_en:["1 2 3 4 5 6 7 8 9 0",'- / : ; ( ) $ & @ "',"{more} . , ? ! ' {bksp}","{switch_en} {space} {down}"],more_zh:["  { } # % ^ * + =","_  \\ | ~   $ & ","{123}       {bksp}","{switch_zh} {space} {down}"],more_en:["[ ] { } # % ^ * + =","_ \\ | ~ < >    ","{123} . , ? ! ' {bksp}","{switch_en} {space} {down}"]},display:{"{shift}":'<svg xmlns="http://www.w3.org/2000/svg" width="24.772" height="23.265" viewBox="0 0 24.772 23.265"><path d="M17.228,23.291H8.1a2,2,0,0,1-2-2V15.085H1.722c-.465,0-.952-.435-1.241-1.109a1.581,1.581,0,0,1,.053-1.665L11.95.336a1,1,0,0,1,1.448,0L24.793,12.312a1.581,1.581,0,0,1,.053,1.665c-.289.673-.776,1.108-1.242,1.108H19.228V21.29A2,2,0,0,1,17.228,23.291ZM12.674,1.956,2.527,12.6a.5.5,0,0,0,.362.844H7.74V20.65a1,1,0,0,0,1,1h7.847a1,1,0,0,0,1-1V13.443h4.852A.5.5,0,0,0,22.8,12.6L12.674,1.956Z" transform="translate(-0.278 -0.026)"/></svg>',"{Shift}":'<svg xmlns="http://www.w3.org/2000/svg" width="22.637" height="21.225" viewBox="0 0 22.637 21.225"><g transform="translate(-16.685 -16.524)"><path d="M7,13.749H1.5c-.932,0-1.729-1.861-1.086-2.535h0L10.789.334a1,1,0,0,1,1.448,0L22.59,11.215h0c.642.675-.155,2.534-1.087,2.534H16l1.5-1.5v7a2,2,0,0,1-2,2h-8a2,2,0,0,1-2-2v-7Z" transform="translate(16.5 16.5)"/><path d="M5.025,10.5V17a1,1,0,0,0,1,1h7a1,1,0,0,0,1-1V10.5h4.334a.5.5,0,0,0,.362-.845L9.534,0,.33,9.655a.5.5,0,0,0,.362.845Z" transform="translate(18.479 18.249)"/></g></svg>',"{bksp}":'<svg xmlns="http://www.w3.org/2000/svg" width="30.645" height="22.5" viewBox="0 0 30.645 22.5"><g transform="translate(-26.105 -26.25)"><path d="M8,9.06,4.641,5.7,1.283,9.06A.75.75,0,0,1,.221,8L3.58,4.641.221,1.283A.75.75,0,0,1,1.283.221L4.641,3.58,8,.221A.75.75,0,0,1,9.06,1.283L5.7,4.641,9.06,8A.75.75,0,1,1,8,9.06Z" transform="translate(39.77 32.752)"/><path d="M9.865.589A2,2,0,0,1,11.282,0H25.451a4,4,0,0,1,4,4V17a4,4,0,0,1-4,4H11.282a2,2,0,0,1-1.418-.589L.7,11.205a1,1,0,0,1,0-1.411Z" transform="translate(26.549 27)" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"/></g></svg>',"{space}":" ","{down}":"","{123}":"123","{switch}":'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><path d="M1.5.5V27.574" transform="translate(12.5)" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"/><path d="M0,0S7.074,2.383,7.074,12.563,0,26.074,0,26.074" transform="translate(14 1)" fill="none" stroke="#000" stroke-linejoin="bevel" stroke-miterlimit="10" stroke-width="1.5"/><path d="M0,0S-7.074,2.383-7.074,12.563,0,26.074,0,26.074" transform="translate(13.574 1)" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"/><path d="M.5,1.5h27" transform="translate(0 12)" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"/><path d="M0,3.219S5.25,0,10.5,0,21,3.219,21,3.219" transform="translate(3.5 18.5)" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"/><path d="M0-3.219S5.25,0,10.5,0,21-3.219,21-3.219" transform="translate(3.5 9.219)" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"/><g fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="1.5"><circle cx="14" cy="14" r="14" stroke="none"/><circle cx="14" cy="14" r="13.25" fill="none"/></g></svg>',"{switch_zh}":"","{switch_en}":"","{more}":"#+="},layoutName:"default",initValue:"",maxLength:-1},sn=0,on=!1,ln=h.forwardRef((function(e,t){var i=(0,h.useState)(tn()($t()(rn),e)),a=d()(i,1)[0],r=a.show,s=a.layout,l=a.layoutName,c=a.initValue,p=a.display,m=a.isCompleteAndClose,g=a.isCompleteAndClean,x=e.inputRef,M=e.show,w=e.inputKey,T=void 0===w?"default":w,_=e.initValue,S=e.position,A=e.onKeyPress,E=e.onChange,I=e.onComplete,C=e.onVisible,k=(0,f.useModel)("keyboard"),L=k.setKeyboard,O=k.setKeyWrapperHeight,P=k.setKeyboardKey,R=k.keyBoardId,D=k.setKeyboardId,N=k.keyboardNum,B=k.setKeyboardNum,U=(0,h.useState)(r||!1),j=d()(U,2),F=j[0],Y=j[1],H=(0,h.useState)(sn++),Z=d()(H,1)[0],K=(0,h.useState)(!0),V=d()(K,2),z=V[0],W=V[1],q=(0,h.useState)(l),X=d()(q,2),Q=X[0],$=X[1],ee=an(c||""),te=d()(ee,3),ne=te[0],ie=te[1],ae=te[2],re=(0,h.useState)("zh"),oe=d()(re,2),le=oe[0],ue=oe[1],ce=an(""),de=d()(ce,3),he=de[0],fe=de[1],pe=de[2],me=(0,h.useState)([]),ve=d()(me,2),ge=ve[0],xe=ve[1],be=an([]),ye=d()(be,3),Me=ye[0],Te=ye[1],Se=ye[2],Ae=(0,h.useState)(!0),Ee=d()(Ae,2),Ie=Ee[0],Ce=(Ee[1],(0,h.useState)(!1)),ke=d()(Ce,2),Le=ke[0],Oe=ke[1],Pe=(0,h.useRef)(null),Re=(0,Vt.Z)(document.querySelector(".simple-keyboard-wrapper")),De=Re.width,Ne=Re.height,Be=(0,h.useState)(64),Ue=d()(Be,2),je=Ue[0],Fe=Ue[1],Ye=/{.+}/i,Ge=/[a-z]/,He=_e(""),Ze=He.addScrollEvent,Ke=He.removeScrollEvent;(0,h.useEffect)((function(){var e,t;(We(),null!=x&&x.current)&&(null!==(e=x.current)&&void 0!==e&&e.addEventListener?x.current.addEventListener("focus",Qe):null===(t=x.current)||void 0===t||t.input.addEventListener("focus",Qe));return function(){var e,t;null!=x&&x.current&&(null!==(e=x.current)&&void 0!==e&&e.removeEventListener?x.current.removeEventListener("focus",Qe):null===(t=x.current)||void 0===t||t.input.removeEventListener("focus",Qe));y.Z.off("close_other_keyboard",ft)}}),[]),(0,h.useEffect)((function(){return(0,we.tq)()&&window.addEventListener("keydown",pt),function(){(0,we.tq)()&&window.removeEventListener("keydown",pt)}}),[S]),(0,h.useEffect)((function(){P(T),ie(_||"")}),[T]),(0,J.Z)((function(){if("boolean"==typeof M){if(on)return void(C&&C(!1));Y(M)}}),[M]),(0,J.Z)((function(){var e,t;F?(D(Z),B(N+1),W(!(N>=1)),qe(),null===(e=document.querySelector("#homepage"))||void 0===e||e.addEventListener("touchstart",Je),L(F)):(D(0),B(N-1),N>1?W(!1):(W(!0),L(F)),null===(t=document.querySelector("#homepage"))||void 0===t||t.removeEventListener("touchstart",Je));C&&C(F)}),[F]),(0,J.Z)((function(){R!==Z&&0!==R&&F&&ft()}),[R]),(0,h.useEffect)((function(){We()}),[De]),(0,h.useEffect)((function(){Ne&&O(Ne)}),[Ne]),(0,J.Z)((function(){E&&E({target:{value:ne}}),Xe(100)}),[ne]),(0,h.useEffect)((function(){he?rt():Te([])}),[he]),(0,h.useEffect)((function(){var e,t,n;null!==(e=Pe.current)&&void 0!==e&&e.clientWidth&&(null===(t=Pe.current)||void 0===t?void 0:t.clientWidth)<(null===(n=Pe.current)||void 0===n?void 0:n.scrollWidth)?(Oe(!0),Ze(Pe.current),Pe.current.scrollTo({left:0})):(Oe(!1),Ke())}),[Me]);var Ve=function(e){if(-1===a.maxLength)ie(e);else if(e.length>a.maxLength){var t=e.slice(0,a.maxLength);ie(t)}else ie(e)},We=function(){var e=De||Math.max(document.documentElement.clientWidth,document.documentElement.clientHeight),t=e-.1*e*2,n=((t=t>684?684:t)-45)/10;Fe(n);var i=document.querySelector(".simple-keyboard-wrapper");i&&i.style.setProperty("--wordbox","".concat(t,"px")),i&&i.style.setProperty("--key-width","".concat(n,"px"))},qe=function(){ze.EV&&(Te([{p:"",w:ze.EV}]),(0,ze.Ty)())},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;setTimeout((function(){var e,t,n,i,a;null!=x&&x.current&&(null!==(e=x.current)&&void 0!==e&&e.addEventListener?(null===(t=x.current)||void 0===t?void 0:t.scrollWidth)-(null===(n=x.current)||void 0===n?void 0:n.clientWidth)>0&&(x.current.scrollLeft=(null===(i=x.current)||void 0===i?void 0:i.scrollWidth)-(null===(a=x.current)||void 0===a?void 0:a.clientWidth)+20):x.current.input.scrollWidth-x.current.input.clientWidth>0&&(x.current.input.scrollLeft=x.current.input.scrollWidth-x.current.input.clientWidth+20))}),e)},Qe=function(e){var t;(0,we.tq)()?(e.preventDefault(),e.stopPropagation(),null===(t=document.activeElement)||void 0===t||t.blur(),on||(Y(!0),ie(e.target.value),Xe())):y.Z.emit(b.Z.R2T_LOCK_INPUT,!0)},Je=function e(t){var n;(0,we.tq)()&&"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName&&"simpleInput"!==t.target.getAttribute("data-name")&&(Y(!1),null===(n=document.querySelector("#homepage"))||void 0===n||n.removeEventListener("touchstart",e),on=!0,setTimeout((function(){on=!1}),500))},$e=function(e){if(Ye.test(e))et(e);else{var t=(0,ze.MM)(ae(),S,e);Ve(t),"zh"===le&&Ge.test(e)&&fe(pe()+e)}A&&A(e)},et=function(e){switch(e){case"{bksp}":ot(e);break;case"{space}":lt();break;case"{switch}":break;case"{switch_en}":ct();break;case"{switch_zh}":ut();break;case"{shift}":fe(""),"shift_zh"!==Q&&"shift_en"!==Q&&$("shift_"+le);break;case"{Shift}":$("default"+("zh"==le?"":"_en"));break;case"{123}":dt();break;case"{more}":$("more_"+le);break;case"{down}":ht()}},tt=function(e){},nt=function(e){var t=e.w;if(!e.p)return fe(""),Te([]),void Ve((0,ze.MM)(ne,S,t));se.Z.reportWords({w:t});var n=t.length;if(n<=ge.length){var i=mt(ge,n);fe(i.length>1?i[1].join(""):"");var a=ne.split(i[0].join("")).join(t);Ve(a)}else fe(""),Ve((0,ze.MM)(ne,S,t))},it=function(){},at=function(){},rt=function(){var e=u()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getCandidateWords({py:he});case 2:if(t=e.sent,0!==(null==(n=t.data)?void 0:n.WordList.length)||""==he.trim()){e.next=7;break}return xe((null==n?void 0:n.PinyinList)||[]),e.abrupt("return");case 7:Te((null==n?void 0:n.WordList)||[]),xe((null==n?void 0:n.PinyinList)||[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st=Wt()((function(){var e,t,n,i;null!==(e=Pe.current)&&void 0!==e&&e.clientWidth&&(null===(t=Pe.current)||void 0===t?void 0:t.scrollLeft)+(null===(n=Pe.current)||void 0===n?void 0:n.clientWidth)>=(null===(i=Pe.current)||void 0===i?void 0:i.scrollWidth)?Oe(!1):Oe(!0)}),300),ot=function(){var e=ae();if(0!==S){if(void 0!==S){var t=e.slice(0,-(e.length-S))+e.slice(S+1);Ve(t)}else{var n=e.slice(0,-1);Ve(n)}"zh"===le&&fe(pe().slice(0,-1))}},lt=function(){var e=(0,ze.MM)(ae(),S," "),t=Se();null!==pe().trim()&&t.length>0?nt(t[0]):Ve(e)},ut=function(){"default"!=Q?$("default"):(ue("en"),fe(""),$("default_en"))},ct=function(){"default_en"!=Q?$("default_en"):(ue("zh"),fe(""),$("default"))},dt=function(){"more_zh"===Q||"more_en"===Q?$("number_"+le):(fe(""),$("number_zh"!==Q&&"number_en"!==Q?"number_"+le:"zh"===le?"default":"default_en"))},ht=function(){I&&I(ne),y.Z.emit(b.Z.INPUT_COMPLETE,T),m&&Y(!1),g&&Ve(""),fe("")},ft=function(){Y(!1),fe("")},pt=function(e){var t=nn[e.keyCode];t&&$e(t)},mt=function(e,t){return[e.slice(0,t),e.slice(t,e.length)]};return(0,v.jsx)(G.Z,{wrapperId:"page-root",children:(0,v.jsxs)("div",{className:"simple-keyboard-wrapper w-full max-w-[100vmax] px-[10vmax] ignore:pt-[42px] ignore:pb-[10px] bg-[#cdd0d7] z-[1000] fixed left-0 bottom-0 pointer-events-auto ".concat(z?"duration-500":""," ").concat(F?"translate-y-0":"translate-y-full"),"data-mode":le,onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,v.jsxs)("div",{className:"simple-keyboard-wordbox bg-[#cdd0d7] w-full ignore:max-w-[684px] ignore:h-[30px] absolute ignore:top-[6px] left-2/4 -translate-x-2/4 overflow-hidden flex duration-300 ".concat(Me.length>0?"block":"hidden"),style:{height:Ie?"30px":"100%"},children:[(0,v.jsx)("div",{ref:Pe,className:"simple-keyboard-words ".concat(Ie?"simple-keyboard-words--fold":""," z-[2]"),onScroll:st,children:Me.map((function(e,t){return(0,v.jsx)(Qt,{word:e,onWordDown:it,onWordUp:at,onWordClick:nt},t)}))}),(0,v.jsxs)("div",{className:"relative ignore:w-[32px] ignore:h-[30px] flex shrink-0 justify-center items-center duration-300 ".concat(Le?"opacity-100":"opacity-0"),onClick:function(){},children:[(0,v.jsx)("div",{className:"absolute -left-[2px] ignore:h-[24px] ignore:w-[1px] bg-[#c0c3cb]/80 z-[2]"}),(0,v.jsx)("div",{className:"absolute -left-[1px] ignore:h-[24px] ignore:w-[1px] bg-[#c0c3cb] z-[1]"}),(0,v.jsx)("div",{className:"absolute left-0 ignore:h-[24px] ignore:w-[1px] bg-[#adb0b8] z-[3]"}),(0,v.jsx)("img",{draggable:!1,className:"select-none origin-center w-2/4 duration-300 ".concat(Ie?"scale-y-100 -rotate-90":"-scale-y-100"),src:n(88284)})]})]}),(0,v.jsx)("div",{className:"simple-keyboard-keys layout_".concat(Q," ignore:max-w-[684px] mx-auto ignore:mb-[2px] flex flex-col justify-start items-center z-[5]"),children:s[Q].map((function(e,t){return(0,v.jsx)("div",{className:"simple-keyboard-row flex justify-center w-full ignore:mb-[6px] ignore:last:mb-0",children:s[Q][t].split(" ").map((function(e,t){return(0,v.jsx)(Xt,{keyWidth:je,name:e,display:(n=e,"{space}"===n?"zh"===le?" ":"space":p[n]||n),onKeyDown:$e,onKeyUp:tt},e);var n}))},t)}))})]})})})),un=ln,cn=["value","placeholder","className","style","maxLength","onChange","onFouce","onBlur"],dn=function(e){var t=e.value,n=e.placeholder,i=e.className,a=e.style,r=e.maxLength,s=e.onChange,o=e.onFouce,l=e.onBlur,u=k()(e,cn),c=(0,h.useState)(t||""),f=d()(c,2),p=f[0],m=f[1],g=(0,h.useState)(""),x=d()(g,2),b=x[0],y=x[1],M=(0,h.useState)(!1),w=d()(M,2),_=w[0],S=w[1],A=(0,h.useState)(void 0),E=d()(A,2),C=E[0],L=E[1],O=(0,h.useRef)(null),P=(0,h.useRef)(null),R=(0,h.useRef)(null),D=(0,we.tq)(),N=(0,h.useRef)([]).current,B=(0,h.useRef)(null),U=(0,h.useRef)(null).current;(0,J.Z)((function(){K()}),[p]),(0,h.useEffect)((function(){return function(){Z()}}),[]);var j=function(e){var t=document.createElement("span");t.innerHTML=e,t.style.whiteSpace="pre";var n=N.length-(C||0);t.setAttribute("data-index",n+""),t.setAttribute("data-name","simpleInput"),P.current&&R.current&&(N.splice(n,0,t),P.current.insertBefore(t,R.current))},F=function(e,t){var n=N[e];n&&(n.innerHTML=t,n.setAttribute("data-index",e+""))};(0,h.useEffect)((function(){for(var e=b||"".split(""),t=p.split(""),n=0;n<t.length;n++)e[n]?t[n]!==e[n]&&F(n,t[n]):j(t[n]);e.length>t.length&&N.splice(t.length,e.length-t.length).map((function(e){e.remove()}));y(p)}),[p]),(0,h.useEffect)((function(){s&&s({target:{value:b}})}),[b]);var Y=function(){var e;H(),S(!0),o&&o(),null===(e=document.querySelector("#homepage"))||void 0===e||e.addEventListener("touchstart",G)},G=function e(t){var n;"simpleInput"!==t.target.getAttribute("data-name")&&(Z(),S(!1),l&&l(),null===(n=document.querySelector("#homepage"))||void 0===n||n.removeEventListener("touchstart",e))},H=function(){if(B.current)B.current.play();else{var e,t;if(null===(e=R.current)||void 0===e||!e.children[0])return;B.current=T.ZP.to(null===(t=R.current)||void 0===t?void 0:t.children[0],{duration:1,opacity:1,ease:"steps(1)",repeat:-1})}},Z=function(){var e,t;null===(e=B.current)||void 0===e||null===(t=e.revert())||void 0===t||t.kill(),B.current=null},K=function(){var e,t,n;(null===(e=B.current)||void 0===e||!e.paused)&&(t=1,null===(n=B.current)||void 0===n||n.pause(t)),U&&clearTimeout(U),U=setTimeout((function(){H(),U=null}),500)};return(0,v.jsxs)(v.Fragment,{children:[D?(0,v.jsxs)("div",{ref:O,className:"flex justify-start items-center px-[4px] py-[8px] overflow-x-auto hidebar ".concat(i),style:a,onClick:function(e){_||Y()},"data-name":"simpleInput",children:[(0,v.jsx)("div",{ref:P,className:"simple-input-text w-fit h-full flex justify-start items-center","data-name":"simpleInput",children:(0,v.jsx)("div",{ref:R,className:"relative w-0 h-full pointer-events-none",children:(0,v.jsx)("div",{className:"simple-input-cursor ignore:w-[1px] h-full absolute left-0 top-0 bg-white"})})}),!p&&(0,v.jsx)("span",{children:n})]}):(0,v.jsx)("input",{defaultValue:p,placeholder:n,className:i,style:a,maxLength:r,onChange:function(e){s&&s(e)},onFocus:function(e){o&&o(e)},onBlur:function(e){l&&l(e)}}),(0,v.jsx)(un,I()({initValue:t,onChange:function(e){m(e.target.value),void 0!==C&&L(C)},show:_,position:C,maxLength:r},u))]})},hn=function(e){var t=e.visible,n=e.onClose,i=e.onOK,a=e.title,r=e.value,s=(0,h.useState)(r||""),o=d()(s,2),l=o[0],u=o[1],c=(0,f.useModel)("keyboard").keyboard;(0,h.useEffect)((function(){!t&&u(r)}),[t]),(0,J.Z)((function(){c?T.p8.to(".change_text_box",{y:-88,duration:.5}):T.p8.to(".change_text_box",{y:0,duration:.5})}),[c]);var p=function(){i&&i(l)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(re,{visible:t,onCancel:function(){n&&n()},contentClassName:"change_text_box sm:size-[245px,146px] xl:size-[300px,180px] rounded-[10px] bg-[#7F7F7F]/[0.2]",children:(0,v.jsxs)("div",{className:"sm:text-16 xl:text-16 flex flex-col items-center",children:[(0,v.jsxs)("div",{className:" font-OPPO-M sm:mt-[10px] xl:mt-[10px]",children:[a," "]}),(0,v.jsx)("div",{className:"sm:w-[200px] sm:h-[30px]  xl:w-[260px] xl:h-[40px] sm:mt-[20px] xl:mt-[20px]  text-white border-b-[1px] border-white flex items-center justify-between",children:(0,v.jsx)(dn,{className:"w-full h-full bg-transparent text-center flex justify-center",value:l,onChange:function(e){u(e.target.value)},style:{color:"#fff",fontSize:"inherit"},maxLength:9,onComplete:p})}),(0,v.jsx)("div",{className:"sm:size-[90px,26px] xl:size-[94px,25px] sm:mt-[20px] xl:mt-[30px]  rounded-full border-[1px] border-white flex-row-center-center xl:hover:bg-white-text",onClick:p,children:""})]})})})},fn=Object.defineProperty,pn=Object.getOwnPropertySymbols,mn=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,gn=(e,t,n)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const xn=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))mn.call(t,n)&&gn(e,n,t[n]);if(pn)for(var n of pn(t))vn.call(t,n)&&gn(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13.229 13.229",role:"img"},e),h.createElement("path",{"data-name":"\\u8DEF\\u5F84 3794",d:"M9.3 1.121a.961.961 0 1 1 0 1.922.933.933 0 0 1-.44-.107l-.243-.127-.141-.235a.96.96 0 0 1 .825-1.453M2.728 5.637a1.594 1.594 0 0 1 1.123.46l.242.237.125.312a1.586 1.586 0 0 1 .114.593 1.654 1.654 0 0 1-.022.266l-.054.332-.186.282a1.6 1.6 0 1 1-1.34-2.481m8.424 4.548a.961.961 0 1 1-.961.961v-.064l.018-.269.155-.219a.965.965 0 0 1 .786-.408M9.3 0a2.082 2.082 0 0 0-2.082 2.082 2.06 2.06 0 0 0 .3 1.07l-2.88 2.144a2.723 2.723 0 1 0 .368 3.437l4.071 2.276v.138a2.081 2.081 0 1 0 .381-1.2L5.421 7.689a2.762 2.762 0 0 0 .037-.448 2.73 2.73 0 0 0-.192-1.007l3.086-2.3A2.082 2.082 0 1 0 9.3 0Z",fill:"current"}));var bn=Object.defineProperty,yn=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,Tn=(e,t,n)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const _n=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))Mn.call(t,n)&&Tn(e,n,t[n]);if(yn)for(var n of yn(t))wn.call(t,n)&&Tn(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10.888 12.098",role:"img"},e),h.createElement("path",{"data-name":"\\u8DEF\\u5F84 2368",d:"M6.747 0a1.21 1.21 0 0 1 .855.354l2.931 2.926a1.21 1.21 0 0 1 .355.857v5.069a3.025 3.025 0 0 1-3.022 2.893H2.896A3.025 3.025 0 0 1 .003 9.077V2.894A3.025 3.025 0 0 1 3.024.001Zm-.71 1.21h-3.01a1.815 1.815 0 0 0-1.815 1.815V9.18a1.815 1.815 0 0 0 1.812 1.708H7.97a1.815 1.815 0 0 0 1.707-1.812V4.849H7.744a1.815 1.815 0 0 1-1.708-1.812V1.21Zm1.221 6.654a.605.605 0 1 1 0 1.21H3.627a.605.605 0 1 1 0-1.21Zm0-2.42a.605.605 0 1 1 0 1.21H3.627a.605.605 0 1 1 0-1.21Zm-3.025-2.42a.605.605 0 0 1 0 1.21h-.6a.605.605 0 1 1 0-1.21Zm3.019-1.31v1.385a.6.6 0 0 0 .6.534h1.314Z",fill:"current"}));var Sn=Object.defineProperty,An=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,In=Object.prototype.propertyIsEnumerable,Cn=(e,t,n)=>t in e?Sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const kn=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))En.call(t,n)&&Cn(e,n,t[n]);if(An)for(var n of An(t))In.call(t,n)&&Cn(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 11.924 11.174",role:"img"},e),h.createElement("path",{"data-name":"\\u8DEF\\u5F84 3850",d:"M5.962 3.183a2.403 2.403 0 1 0 0 4.807 2.516 2.516 0 0 0 .435-.042.452.452 0 0 0-.079-.9.459.459 0 0 0-.084.008 1.56 1.56 0 0 1-.271.028 1.5 1.5 0 1 1 1.513-1.5 1.4 1.4 0 0 1-.029.267.453.453 0 0 0 .369.526.472.472 0 0 0 .083.007.454.454 0 0 0 .449-.371 2.3 2.3 0 0 0 .043-.43 2.371 2.371 0 0 0-.712-1.7 2.428 2.428 0 0 0-1.717-.7Zm5.855 1.3a.4.4 0 0 0-.309-.316 2.067 2.067 0 0 1-1.343-.979 2.029 2.029 0 0 1-.187-1.637.4.4 0 0 0-.122-.422A5.96 5.96 0 0 0 7.918.023a.409.409 0 0 0-.431.106 2.1 2.1 0 0 1-3.051 0 .417.417 0 0 0-.432-.106 5.957 5.957 0 0 0-1.937 1.108.4.4 0 0 0-.122.419 2.026 2.026 0 0 1-.186 1.638 2.063 2.063 0 0 1-1.343.979.407.407 0 0 0-.309.317 5.718 5.718 0 0 0 0 2.209.4.4 0 0 0 .308.316 2.067 2.067 0 0 1 1.343.978 2.026 2.026 0 0 1 .186 1.638.4.4 0 0 0 .123.421 5.969 5.969 0 0 0 1.937 1.106.41.41 0 0 0 .43-.105 2.1 2.1 0 0 1 3.052 0 .408.408 0 0 0 .3.128.428.428 0 0 0 .134-.022 5.969 5.969 0 0 0 1.937-1.107.4.4 0 0 0 .122-.421 2.021 2.021 0 0 1 .187-1.638 2.062 2.062 0 0 1 1.343-.978.407.407 0 0 0 .308-.316 5.729 5.729 0 0 0 0-2.21ZM8.946 9.368a4.828 4.828 0 0 1-1.169.668 2.762 2.762 0 0 0-3.632 0 4.831 4.831 0 0 1-1.169-.668 2.664 2.664 0 0 0-.311-1.9 2.728 2.728 0 0 0-1.507-1.215 4.577 4.577 0 0 1 0-1.336 2.728 2.728 0 0 0 1.507-1.215 2.678 2.678 0 0 0 .311-1.9 4.831 4.831 0 0 1 1.169-.668 2.761 2.761 0 0 0 3.632 0 4.831 4.831 0 0 1 1.169.668 2.675 2.675 0 0 0 .31 1.9 2.728 2.728 0 0 0 1.507 1.215 4.664 4.664 0 0 1 .049.669 4.351 4.351 0 0 1-.048.666 2.728 2.728 0 0 0-1.507 1.215 2.683 2.683 0 0 0-.311 1.901Z",fill:"current"}));var Ln=Object.defineProperty,On=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Dn=(e,t,n)=>t in e?Ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Nn=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))Pn.call(t,n)&&Dn(e,n,t[n]);if(On)for(var n of On(t))Rn.call(t,n)&&Dn(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20.622 19.761",role:"img"},e),h.createElement("path",{"data-name":"\\u8DEF\\u5F84 4214",d:"M18.458 4.309h-2.876c.853-1.368.885-2.8.032-3.557-1.074-.963-3.118-.466-4.645 1.125a5.918 5.918 0 0 0-.653.821 5.376 5.376 0 0 0-.653-.821C8.136.286 6.103-.2 5.029.752c-.864.76-.822 2.189.021 3.557H2.175a2.041 2.041 0 0 0-2.075 2v1.51a2.019 2.019 0 0 0 1.632 1.946v7.7a2.241 2.241 0 0 0 2.285 2.2h12.587a2.241 2.241 0 0 0 2.285-2.2v-7.7a2.008 2.008 0 0 0 1.632-1.946v-1.51a2.025 2.025 0 0 0-2.064-2Zm-3.8-2.564c.358.324.2 1.328-.611 2.331a.725.725 0 0 0-.126.233h-2.868a4.044 4.044 0 0 1 .937-1.51c1.086-1.125 2.307-1.377 2.665-1.054ZM6.59 4.076c-.811-.993-.969-2.007-.611-2.331s1.58-.071 2.654 1.054a3.988 3.988 0 0 1 .937 1.51H6.704a.694.694 0 0 0-.116-.234ZM3.14 17.473V9.811h6.477v8.511H4.028a.874.874 0 0 1-.888-.849Zm13.46.841h-5.589V9.801h6.477v7.661a.861.861 0 0 1-.884.852Zm2.517-10.5a.666.666 0 0 1-.674.649H2.175a.666.666 0 0 1-.674-.649v-1.51a.666.666 0 0 1 .674-.649h16.283a.666.666 0 0 1 .674.649v1.51Z",fill:"current",stroke:"current",strokeWidth:.2}));var Bn=Object.defineProperty,Un=Object.getOwnPropertySymbols,jn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,Yn=(e,t,n)=>t in e?Bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Gn=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))jn.call(t,n)&&Yn(e,n,t[n]);if(Un)for(var n of Un(t))Fn.call(t,n)&&Yn(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19.368 19.368",role:"img"},e),h.createElement("path",{"data-name":"\\u8054\\u5408 21",d:"M4.955 19.143a2.365 2.365 0 0 1-2.365-2.365v-.72a2.6 2.6 0 0 1 0-5.181V6.61a4.257 4.257 0 0 1 4.256-4.257h.474v-.709A1.419 1.419 0 0 1 8.685.225h1.94a1.419 1.419 0 0 1 1.418 1.366v.762h.482a4.257 4.257 0 0 1 4.257 4.257v4.267a2.6 2.6 0 0 1 0 5.181v.72a2.365 2.365 0 0 1-2.365 2.365ZM3.536 6.61v10.168a1.419 1.419 0 0 0 1.419 1.419h9.459a1.419 1.419 0 0 0 1.419-1.419V6.61a3.311 3.311 0 0 0-3.308-3.311H6.846a3.311 3.311 0 0 0-3.31 3.311Zm-2.394 6.829a1.656 1.656 0 0 0 1.447 1.67v-3.284a1.656 1.656 0 0 0-1.447 1.614Zm15.636 1.67a1.655 1.655 0 0 0 0-3.284ZM11.103 2.353v-.709a.473.473 0 0 0-.437-.472H8.738a.474.474 0 0 0-.472.438v.744ZM6.634 8.368v-.981h6.031v.981Z",fill:"current",stroke:"current",strokeWidth:.5}));var Hn=0,Zn=function(e){var t=e.close,i=e.openMyBag,a=e.openSetting,r=(e.openTask,e.openExchange,e.openBaoBox),s=e.openDiary,l=(0,f.useModel)("user"),c=l.integral,p=l.userName,m=(l.shareId,l.imageInfoModel),g=l.updataUserInfo,x=(0,f.useModel)("global"),M=x.setRuleVis,w=x.setRuleType,T=(0,f.useModel)("keyboard"),_=(T.keyboard,T.keyboardKey,(0,f.useIntl)()),S=(0,h.useState)(""),A=d()(S,2),E=(A[0],A[1],(0,h.useState)((function(){var e=Kt.indexOf(m);return Hn=e,e}))),I=d()(E,2),C=I[0],k=I[1],L=(0,h.useState)(!1),O=d()(L,2),R=O[0],D=O[1],N=((0,h.useRef)(null),(0,Te.Z)({inputUserName:p,userName:p})),B=(0,f.useRequest)(j.Z.updateUserDetail,{manual:!0,debounceInterval:400}),U=(B.loading,B.data),F=B.run,Y=B.error;(0,h.useEffect)((function(){return G(),y.Z.on(b.Z.CLICK_ANY_WHERE,V),function(){y.Z.off(b.Z.CLICK_ANY_WHERE,V)}}),[]),(0,J.Z)((function(){C!==Hn&&F({ImageInfoModel:Kt[C]},Z)}),[C]),(0,J.Z)((function(){null!=U&&U.NickName&&g(U)}),[U]),(0,J.Z)((function(){Y&&(H(),N.inputUserName=N.userName)}),[Y]),(0,J.Z)((function(){y.Z.emit(b.Z.CHARACTER_MODEL_UPDATE,m)}),[m]),(0,J.Z)((function(){y.Z.emit(b.Z.CHARACTER_UPDATE_NICKNAME,p),N.userName=p}),[p]);var G=function(){var e=u()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.getUserDetail();case 2:null!=(t=e.sent)&&t.UserId&&g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){k(Hn),g({ImageInfoModel:Kt[Hn]})},Z=function(e){var t,n;200===(null==e?void 0:e.code)?(N.inputUserName=null==e||null===(t=e.data)||void 0===t||null===(n=t.UserInfo)||void 0===n?void 0:n.NickName,Hn=C,be.Z.open({text:""})):706===(null==e?void 0:e.code)?N.inputUserName=N.userName:(H(),N.inputUserName=N.userName,be.Z.open({text:","}))},K=function(){var e=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&r(),t&&t(),(0,P.R)("3_6");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){(0,we.tq)()||y.Z.emit(b.Z.R2T_LOCK_INPUT,!1)};return(0,v.jsxs)("div",{className:"sm:px-[10px] sm:justify-center sm:items-center w-full h-full flex",children:[(0,v.jsxs)("div",{className:"sm:h-fit ignore:xl:px-[20px] ignore:xl:py-[40px] xl:justify-start relative w-full h-full flex flex-col\n      items-center leading-[1.2]",children:[(0,v.jsxs)("div",{className:"w-full flex justify-between items-start",children:[(0,v.jsx)("div",{className:"sm:size-[90px,35px] xl:size-[190px,90px] flex justify-center items-center relative bg-coin-bar-bg bg-no-repeat bg-contain bg-center sm:-mt-[5px] xl:-mt-[15px] sm:ml-[-5px] xl:-ml-[10px]",onClick:function(){s&&s(),t&&t(),(0,P.R)("3_8")},children:(0,v.jsx)("div",{className:"flex justify-center items-center",children:(0,v.jsx)("span",{className:"sm:text-[0.1rem] xl:text-[0.2rem] text-white font-OPPO-R",children:c})})}),(0,v.jsxs)("div",{className:"sm:text-[0.1rem] xl:text-[0.16rem] text-white font-OPPO-R flex leading-[1.5]",children:[(0,v.jsxs)("div",{className:"sm:w-[22px] ignore:xl:w-[48px] flex flex-col items-center cursor-pointer group xl:hover:text-[#49A3BA]",onClick:function(){y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"self"}),(0,P.R)("3_0")},children:[(0,v.jsx)("div",{className:"sm:h-[22px] ignore:xl:h-[48px] w-full rounded-full bg-white/20 flex justify-center items-center xl:hover:!text-[#49A3BA]",children:(0,v.jsx)(xn,{className:"fill-current sm:size-[13px] xl:size-[28px]"})}),(0,v.jsx)("span",{className:"whitespace-nowrap",children:_.formatMessage({id:"profile.share"})})]}),(0,v.jsxs)("div",{className:"sm:w-[22px] sm:ml-[10px] ignore:xl:w-[48px] xl:ml-[20px] relative flex flex-col items-center cursor-pointer group xl:hover:text-[#49A3BA]",onClick:function(){M(!0),w("rule"),(0,P.R)("3_1")},children:[(0,v.jsx)("div",{className:"sm:h-[22px] ignore:xl:h-[48px] w-full rounded-full bg-white/20 flex justify-center items-center",children:(0,v.jsx)(_n,{className:"fill-current sm:size-[12px,14px] xl:size-[25px,27px]"})}),(0,v.jsx)("span",{className:"whitespace-nowrap",children:_.formatMessage({id:"profile.rule"})})]}),(0,v.jsxs)("div",{className:"sm:w-[22px] sm:ml-[10px] ignore:xl:w-[48px] xl:ml-[20px] flex flex-col items-center cursor-pointer group xl:hover:text-[#49A3BA]",onClick:function(){a&&a(),t&&t(),(0,P.R)("3_2")},children:[(0,v.jsx)("div",{className:"sm:h-[22px] ignore:xl:h-[48px] w-full rounded-full bg-white/20 flex justify-center items-center ",children:(0,v.jsx)(kn,{className:"fill-current sm:size-[14px] xl:size-[26px]"})}),(0,v.jsx)("span",{className:"whitespace-nowrap",children:_.formatMessage({id:"profile.setting"})})]})]})]}),(0,v.jsxs)("div",{className:"w-full flex flex-1 flex-col justify-around items-center overflow-hidden",children:[(0,v.jsxs)("div",{className:"sm:mt-[18px] sm:h-[167px] xl:mt-[40px] xl:h-[368px] relative w-full flex justify-center",children:[(0,v.jsx)("img",{className:"sm:w-auto ignore:xl:w-auto h-full",src:n(88682)("./role_skin_".concat(Kt[C],".png"))}),(0,v.jsxs)("div",{className:"absolute w-full translate-y-[-50%] top-2/4 flex justify-between",children:[(0,v.jsx)("div",{className:"sm:w-[8px] xl:w-[15px] cursor-pointer usebefore before:absolute-center  sm:before:w-[30px] sm:before:h-[30px] xl:before:h-[40px] xl:before:w-[40px]",onClick:function(){var e=C-1<0?Kt.length-1:C-1;k(e),(0,P.R)("3_4",Kt[e].toString())},children:(0,v.jsx)("img",{draggable:!1,className:"sm:w-[8px] xl:w-[15px]",src:n(6090)})})," ",(0,v.jsx)("div",{className:"sm:w-[8px] xl:w-[15px] cursor-pointer usebefore before:absolute-center  sm:before:w-[30px] sm:before:h-[30px] xl:before:h-[40px] xl:before:w-[40px]",onClick:function(){var e=(C+1)%Kt.length;k(e),(0,P.R)("3_4",Kt[e].toString())},children:(0,v.jsx)("img",{draggable:!1,className:"sm:w-[8px] xl:w-[15px]",src:n(94689)})})]})]}),(0,v.jsxs)("div",{className:"sm:mt-[23px] sm:w-[112px] sm:h-[18px] sm:text-10 xl:mt-[38px] ignore:xl:w-[260px] ignore:xl:h-[40px] xl:text-24 text-white border-b-[1px] border-white flex items-center justify-between",onClick:function(){D(!0)},children:[(0,v.jsx)("span",{className:"text-center w-full sm:pr-[5px] xl:pr-[5px]",children:N.inputUserName}),(0,v.jsx)("img",{draggable:!1,className:"sm:w-[10px] ignore:xl:w-[22px]",src:n(49450)})]})]}),(0,v.jsxs)("div",{className:"sm:mt-[15px] sm:text-[0.1rem] xl:mt-[38px] xl:text-[0.2rem] w-full flex justify-between flex-wrap leading-[1] font-OPPO-M",children:[(0,v.jsx)("div",{className:"sm:w-[85px] sm:h-[45px] sm:rounded-[10px] ignore:xl:w-[170px] ignore:xl:h-[100px] xl:rounded-[24px] group bg-white/30 xl:hover:bg-[#FFF]/60  backdrop-blur-[8px] cursor-pointer flex flex-col justify-center items-center text-white xl:hover:text-[#49A3BA]",onClick:K,children:(0,v.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,v.jsx)(Nn,{className:"fill-current sm:size-[20px,19px]"}),(0,v.jsx)("span",{className:"sm:mt-[5px] xl:mt-[10px] font-OPPO-M",children:_.formatMessage({id:"profile.baobox"})})]})}),(0,v.jsx)("div",{className:"sm:w-[85px] sm:h-[45px] sm:rounded-[10px] ignore:xl:w-[170px] ignore:xl:h-[100px] xl:rounded-[24px] group bg-white/30 xl:hover:bg-[#FFF]/60  backdrop-blur-[8px] cursor-pointer flex flex-col justify-center items-center xl:hover:text-[#49A3BA]",onClick:function(){i&&i(),t&&t(),(0,P.R)("3_7")},children:(0,v.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,v.jsx)(Gn,{className:"fill-current sm:size-[19px]"}),(0,v.jsx)("span",{className:"sm:mt-[5px] xl:mt-[10px] font-OPPO-M sm:text-10",children:_.formatMessage({id:"profile.bag"})})]})})]})]}),(0,v.jsx)(hn,{visible:R,title:"",value:N.inputUserName,onOK:function(e){!function(e){""!==e.trim()?(e!==N.userName&&F({nickname:e},Z),D(!1),(0,P.R)("3_5")):D(!1)}(e)},onClose:function(){return D(!1)}})]})},Kn=n(74967),Vn=Object.defineProperty,zn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,Xn=(e,t,n)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Qn=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))Wn.call(t,n)&&Xn(e,n,t[n]);if(zn)for(var n of zn(t))qn.call(t,n)&&Xn(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"img"},e),h.createElement("path",{d:"M0 8a8 8 0 1 0 8-8 8 8 0 0 0-8 8Z",fill:"#20b759"}),h.createElement("path",{d:"m7.053 10.457-3.03-3.03a.535.535 0 0 0-.757.757l3.03 3.03a.535.535 0 0 0 .757-.757Z",fill:"#fff"}),h.createElement("path",{d:"M12.745 4.789a.536.536 0 0 0-.757 0l-5.555 5.557a.535.535 0 0 0 .757.757l5.555-5.555a.535.535 0 0 0 0-.759Z",fill:"#fff"}));var Jn=Object.defineProperty,$n=Object.getOwnPropertySymbols,ei=Object.prototype.hasOwnProperty,ti=Object.prototype.propertyIsEnumerable,ni=(e,t,n)=>t in e?Jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ii=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))ei.call(t,n)&&ni(e,n,t[n]);if($n)for(var n of $n(t))ti.call(t,n)&&ni(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img"},e),h.createElement("defs",null,h.createElement("radialGradient",{id:"task_icon_svg__c",cx:.378,cy:.493,r:.753,gradientTransform:"matrix(.619 .786 -.922 .726 .599 -.161)",gradientUnits:"objectBoundingBox"},h.createElement("stop",{offset:0,stopColor:"#ffd400"}),h.createElement("stop",{offset:1,stopColor:"#ff0"})),h.createElement("radialGradient",{id:"task_icon_svg__d",cx:.518,cy:.492,r:1.011,gradientTransform:"matrix(-.902 .432 -.23 -.48 1.098 .505)",gradientUnits:"objectBoundingBox"},h.createElement("stop",{offset:0,stopColor:"#fff700"}),h.createElement("stop",{offset:1,stopColor:"#ffe296"})),h.createElement("clipPath",{id:"task_icon_svg__a"},h.createElement("circle",{cx:12,cy:12,r:12,transform:"translate(590.488 26.488)",fill:"#fff",stroke:"#707070"})),h.createElement("filter",{id:"task_icon_svg__b",x:2.682,y:1.433,filterUnits:"userSpaceOnUse"},h.createElement("feOffset",{dy:1}),h.createElement("feGaussianBlur",{stdDeviation:1,result:"d"}),h.createElement("feFlood",{floodColor:"#7f6900",floodOpacity:.6}),h.createElement("feComposite",{operator:"in",in2:"d"}),h.createElement("feComposite",{in:"SourceGraphic"}))),h.createElement("g",{transform:"translate(-590.488 -26.488)",clipPath:"url(#task_icon_svg__a)"},h.createElement("g",{transform:"translate(590.49 26.49)",filter:"url(#task_icon_svg__b)"},h.createElement("path",{d:"m282.235 175.131-5.074-1.053 2.168-7.378-9.729 9.568 5.074 1.053-2.168 7.378Z",transform:"translate(-263.92 -163.27)",fill:"url(#task_icon_svg__c)"})),h.createElement("path",{d:"M5.074 10.6 0 9.549 9.706 0h.014L4.639 8.87l3.744.742-5.42 8.178Z",transform:"translate(596.17 29.939)",fill:"url(#task_icon_svg__d)"})));var ai,ri=function(e){var t=e.isLast,n=(e.Id,e.Title),i=e.Prize,a=e.DailyNum,r=e.FinishNum,s=(0,f.useIntl)(),o=(0,f.useModel)("global");o.setTaskIndex,o.setTaskDis;return(0,v.jsx)("div",{className:"task w-full sm:h-[60px] xl:h-[75px] sm:px-[10px] xl:px-[14px] flex-shrink-0",children:(0,v.jsxs)("div",{className:"w-full h-full ".concat(t?"":"border-b-[1px]","  border-[#FFFFFF]/20 flex items-center justify-between "),children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsxs)("div",{className:"sm:size-[40px,40px] xl:size-[40px,40px] bg-[#7F7F7F]/20 rounded-[5px] flex flex-col items-center sm:justify-center",children:[(0,v.jsx)(ii,{className:" flex-shrink-0 sm:w-[24px] sm:h-[24px] xl:size-[24px,24px] sm:mt-[2px] xl:mt-[2px]"}),(0,v.jsxs)("div",{className:"sm:text-[0.08rem] xl:text-20 xl:scale-50 origin-top leading-[1.5]",children:["+",i]})]}),(0,v.jsxs)("div",{className:"sm:text-12 xl:text-14 sm:ml-[10px] xl:ml-[10px]  xl:w-[160px] text-white flex-1",children:[" ",(0,v.jsx)("span",{children:n.replace("\\n","\n")})]})]}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsxs)("div",{className:"sm:text-12 xl:text-14 sm:mr-[8px] xl:mr-[8px]  text-justify whitespace-nowrap ",children:[r," / ",a]}),r===a?(0,v.jsx)("div",{className:"sm:size-[64px,20px] xl:size-[72px,27px] flex-row-center-center",children:(0,v.jsx)(Qn,{className:"sm:w-[16px] xl:w-[20px]"})}):(0,v.jsx)("div",{className:"sm:size-[64px,20px] xl:size-[72px,27px] text-[#FFF]/50 rounded-[24px] border-[1px] border-[#FFF]/50 sm:text-12 xl:text-14 flex-row-center-center ",onClick:function(){},children:(0,v.jsx)("span",{className:"sxl:scale-75",children:s.formatMessage({id:"task.unfinish"})})})]})]})})},si=function(){var e=(0,f.useModel)("task"),t=e.taskList,n=e.setTaskList;(0,h.useEffect)((function(){return i(),y.Z.on(b.Z.REFRESH_TASK_LIST,i),function(){y.Z.off(b.Z.REFRESH_TASK_LIST,i)}}),[]);var i=function(){je().then((function(e){200===(null==e?void 0:e.code)&&n(e.data.DailyTask)}))};return(0,v.jsxs)("div",{className:"w-full flex h-fit bg-[#fff]/20 rounded-[10px]",children:[(0,v.jsx)("div",{className:"flex flex-col w-[50%] h-fit overflow-auto hidebar  xl:rounded-[5px]",children:t.slice(0,5).map((function(e,t){return(0,v.jsx)(ri,{isLast:4===t,Id:e.Id,Title:e.Title,Prize:e.Prize,DailyNum:e.DailyNum,FinishNum:e.FinishNum},e.Id)}))}),(0,v.jsx)("div",{className:"flex flex-col w-[50%] h-fit overflow-auto hidebar = xl:rounded-[5px]",children:t.slice(5,t.length).map((function(e,t){return(0,v.jsx)(ri,{isLast:4===t,Id:e.Id,Title:e.Title,Prize:e.Prize,DailyNum:e.DailyNum,FinishNum:e.FinishNum},e.Id)}))})]})},oi=function(){(0,f.useIntl)();return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:" w-full h-full sm:pt-[45px] xl:pt-[60px] font-OPPO-R",children:(0,v.jsx)("div",{className:"flex w-full h-full",children:(0,v.jsx)("div",{className:"flex flex-col sm:px-[50px] xl:px-[50px]  w-full",children:(0,v.jsx)("div",{className:"mt-[15px]  w-full h-full overflow-auto",children:(0,v.jsx)(si,{})})})})})})},li=h.memo(oi),ui=function(e){var t=e.index,n=e.props,i=e.border,a=e.myClass,r=e.click;return(0,v.jsxs)("div",{className:"relative ".concat(t%5!=0&&"sm:ml-[10px] xl:ml-[10px]"," sm:mt-[10px] xl:mt-[10px] rounded-[5px]  flex justify-center items-center xl:cursor-pointer ").concat(a),onClick:function(){return r&&r()},children:[i&&(0,v.jsx)("div",{className:"absolute top-0 left-0 w-full h-full rounded-[5px] border-white ignore:border-[2px]"}),(0,v.jsx)("img",{className:"w-full",src:n})]})},ci=n(93275),di=n.n(ci),hi=n(25562),fi=(ai={},di()(ai,hi.g.QUALIFIED+"",""),di()(ai,hi.g.HOBBY+"",""),di()(ai,hi.g.COUPON+"",""),di()(ai,hi.g.CARD+"",""),ai),pi=function(e){var t,n,i,a,r,s,l,c,p=e.props,m=e.myClass,g=e.click,x=e.active,M=e.differenceTime,w=(0,f.useIntl)(),T=(0,h.useState)(!0),_=d()(T,2),S=_[0],A=_[1],E=((0,le.Z)(),(0,h.useState)(!1)),I=d()(E,2),C=I[0],k=I[1],L=(0,f.useModel)("global",(function(e){return{setAuthVis:e.setAuthVis}})).setAuthVis;(0,h.useEffect)((function(){return function(){y.Z.off(b.Z.TIME_COUNTDOWN,U)}}),[]),(0,h.useEffect)((function(){var e;Se.Z.wxOpenAppPaths[null===(e=p.PrizeInfo)||void 0===e?void 0:e.SendType]}),[null===(t=p.PrizeInfo)||void 0===t?void 0:t.SendType]),(0,h.useEffect)((function(){var e;Number(null===(e=p.PrizeInfo)||void 0===e?void 0:e.SendType)===hi.g.QUALIFIED&&y.Z.on(b.Z.TIME_COUNTDOWN,U),(0,ze.ao)()&&k(!0)}),[]);var O,R,D=function(){var e;S&&Number(null===(e=p.PrizeInfo)||void 0===e?void 0:e.SendType)===hi.g.QUALIFIED||(L(!0),y.Z.emit(b.Z.R2T_WECHAT_AUTH),localStorage.setItem("lastOpenModal","mybag"))},N=function(){var e,t,n;return(0,v.jsx)("div",{onClick:D,className:"ml-auto sm:w-[80px] sm:h-[26px] xl:size-[100px,30px] xl:hover:bg-white-text border-white border-[1px] rounded-full xl:cursor-pointer flex justify-center items-center text-white sm:text-12 xl:text-[12px] font-OPPO-R ".concat(Number(null===(e=p.PrizeInfo)||void 0===e?void 0:e.SendType)===hi.g.QUALIFIED&&S?" text-white-30 border-white-30":" text-white border-white"),children:Number(null===(t=p.PrizeInfo)||void 0===t?void 0:t.SendType)===hi.g.QUALIFIED&&S?"":fi[null===(n=p.PrizeInfo)||void 0===n?void 0:n.SendType]})},B=function(e){var t;return null==e?void 0:e.replace("{{ID}}",(null===(t=p.PrizeInfo)||void 0===t?void 0:t.Id)+"")},U=function(){var e=u()(o()().mark((function e(){var t,n,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=1e3*Number(null==p?void 0:p.TimeAdd),n=Date.now()-M,(i=Math.floor((n-t)/1e3/60))<15&&A(!1),i>=15&&(A(!0),y.Z.off(b.Z.TIME_COUNTDOWN,U));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e;switch(Number(null===(e=p.PrizeInfo)||void 0===e?void 0:e.SendType)){case hi.g.QUALIFIED:(0,P.R)("7_5");break;case hi.g.HOBBY:(0,P.R)("7_6");break;case hi.g.COUPON:(0,P.R)("7_7");break;case hi.g.CARD:(0,P.R)("7_8")}};return(0,v.jsxs)("div",{className:"relative flex justify-start items-center ".concat(m," sm:text-12 xl:text-16 font-OPPO-R xl:cursor-pointer xl:px-[10px] sm:pr-[10px] ").concat(x&&"bg-white/10"," sm:h-[65px]"),onClick:function(){return g&&g()},children:[(0,v.jsx)("div",{className:"sm:w-[52px] sm:h-[52px] xl:w-[70px] xl:h-[70px] overflow-hidden flex justify-center items-center border-white relative",children:(0,v.jsx)("img",{className:"w-full min-h-full",src:(null===(R=p.PrizeInfo)||void 0===R?void 0:R.Img)||""})}),(0,v.jsxs)("div",{className:"sm:ml-[15px] xl:ml-[10px] xl:w-[200px] sm:w-[200px] flex flex-col justify-start items-start text-white font-OPPO-M",children:[(0,v.jsx)("div",{className:"xl:clamp sm:clamp-1 sm:text-13 xl:text-15 sm:mb-[3px]",children:null===(n=p.PrizeInfo)||void 0===n?void 0:n.Name}),(0,v.jsx)("div",{className:"sm:text-8 xl:text-10 origin-left text-white",children:Number(null===(i=p.PrizeInfo)||void 0===i?void 0:i.SendType)===hi.g.QUALIFIED&&(0,v.jsx)("div",{children:"15"})}),(0,v.jsx)("div",{className:"sm:text-8 xl:text-10 origin-left text-white",children:Number(null===(a=p.PrizeInfo)||void 0===a?void 0:a.SendType)===hi.g.CARD&&(0,v.jsx)("div",{children:": 2022.12.17-2022.12.21"})}),(0,v.jsx)("div",{className:"sm:text-8 xl:text-10 origin-left text-white/50",children:"".concat(w.formatMessage({id:"prize.get_time"})," : ").concat((O=Number(null==p?void 0:p.TimeAdd),Ce()(1e3*O).format("MM-DD HH:mm")))})]}),Number(null===(r=p.PrizeInfo)||void 0===r?void 0:r.SendType)===hi.g.QUALIFIED&&(0,v.jsx)("div",{className:"flex-1",children:C?(0,v.jsx)(de.Z,{children:(0,v.jsx)(N,{}),path:B(Se.Z.wxOpenAppPaths[hi.g.QUALIFIED]),isDisabled:S,onClick:j}):(0,v.jsx)(N,{})}),Number(null===(s=p.PrizeInfo)||void 0===s?void 0:s.SendType)===hi.g.HOBBY&&(0,v.jsx)("div",{className:"flex-1",children:(0,v.jsx)(de.Z,{children:(0,v.jsx)(N,{}),path:Se.Z.wxOpenAppPaths[hi.g.HOBBY],onClick:j})}),Number(null===(l=p.PrizeInfo)||void 0===l?void 0:l.SendType)===hi.g.COUPON&&(0,v.jsx)("div",{className:"flex-1",children:(0,v.jsx)(de.Z,{children:(0,v.jsx)(N,{}),path:Se.Z.wxOpenAppPaths[hi.g.COUPON],onClick:j})}),Number(null===(c=p.PrizeInfo)||void 0===c?void 0:c.SendType)===hi.g.CARD&&(0,v.jsx)("div",{className:"flex-1",children:C?(0,v.jsx)(de.Z,{children:(0,v.jsx)(N,{}),path:B(Se.Z.wxOpenAppPaths[hi.g.CARD]),onClick:j}):(0,v.jsx)(N,{})})]})},mi=n(47067),vi=Object.defineProperty,gi=Object.getOwnPropertySymbols,xi=Object.prototype.hasOwnProperty,bi=Object.prototype.propertyIsEnumerable,yi=(e,t,n)=>t in e?vi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Mi=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))xi.call(t,n)&&yi(e,n,t[n]);if(gi)for(var n of gi(t))bi.call(t,n)&&yi(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17.2 14.356",role:"img"},e),h.createElement("path",{"data-name":"\\u8DEF\\u5F84 3722",d:"M3.49 14.356A3.493 3.493 0 0 1 0 10.866V5.888a3.5 3.5 0 0 1 3.49-3.491h7.731a3.493 3.493 0 0 1 3.489 3.491v4.978a3.494 3.494 0 0 1-3.491 3.49ZM1.335 11.8a2.354 2.354 0 0 0 2.155 1.413h7.731a2.351 2.351 0 0 0 2.349-2.348V5.887a2.351 2.351 0 0 0-2.348-2.349h-7.73a2.351 2.351 0 0 0-2.348 2.349v4.493l3.449-3.45a.571.571 0 0 1 .808 0l2.255 2.253 1.482-1.482a.571.571 0 0 1 .808 0l2.025 2.026a.572.572 0 0 1 0 .809.572.572 0 0 1-.809 0L9.54 8.913l-1.482 1.482a.571.571 0 0 1-.808 0L4.995 8.14Zm14.724-3.424V5.859a4.724 4.724 0 0 0-4.719-4.718H6.502a.571.571 0 0 1-.571-.572.572.572 0 0 1 .571-.571h4.838a5.869 5.869 0 0 1 5.86 5.863v2.514a.57.57 0 0 1-.57.571.57.57 0 0 1-.572-.57Zm-5.52-1.648a.894.894 0 0 1 0-1.262.894.894 0 0 1 1.262 0 .894.894 0 0 1 0 1.262.891.891 0 0 1-.631.261.891.891 0 0 1-.631-.261Z",fill:"#fff"}));var wi,Ti=n(79664),_i=function(e){var t=e.targetSelect,n=(0,f.useIntl)(),i=(0,h.useState)(0),a=d()(i,2),r=a[0],s=a[1],l=(0,f.useModel)("global"),c=l.setRuleVis,p=l.setRuleType,m=(0,h.useState)([]),g=d()(m,2),x=g[0],M=g[1],w=(0,h.useState)(0),T=d()(w,2),_=T[0],S=T[1],A=(0,h.useState)([]),E=d()(A,2),I=E[0],C=E[1],k=(0,h.useState)(0),L=d()(k,2),O=L[0],R=L[1],D=(0,h.useState)(""),N=d()(D,2),B=N[0],U=N[1],j=(0,h.useState)(!1),F=d()(j,2),Y=F[0],G=F[1],H=(0,h.useState)(0),Z=d()(H,2),K=Z[0],V=Z[1],z=(0,h.useState)(0),W=d()(z,2),q=W[0],X=W[1],Q=(0,le.Z)(),$=(0,f.useRequest)(ut.getPictureList,{manual:!0}),ee=$.data,te=$.loading,ne=$.run,ie=$.error,ae=(0,f.useRequest)(mi.B,{manual:!0}),re=ae.data,oe=ae.loading,ue=ae.run,ce=ae.error,de=(0,h.useState)(1),he=d()(de,2),fe=he[0],pe=(he[1],(0,h.useState)(!1)),me=d()(pe,2),ve=(me[0],me[1],(0,Vt.Z)(document.documentElement)),ge=(ve.width,ve.height,_e("").addScrollEvent);(0,h.useEffect)((function(){return t&&s(t),wi||be(),function(){clearInterval(wi),wi=null}}),[]),(0,J.Z)((function(){if(ee&&200===(null==ee?void 0:ee.code)){var e=null==ee?void 0:ee.data;M(e),e.length>_?U(e[_]):U("")}}),[ee]),(0,h.useEffect)((function(){if(re&&200===re.code){var e=(null==re?void 0:re.data)||[];C(e),e.length>O?U(e[O].PrizeInfo.Poster):U("")}}),[re]),(0,h.useLayoutEffect)((function(){0===r?(ye(),ge("photo-scroll")):(Me(),ge("prize-scroll"))}),[r]),(0,h.useEffect)((function(){1===r&&Ae(0)}),[I]),(0,h.useEffect)((function(){G(!(!te&&!oe))}),[te,oe]),(0,h.useEffect)((function(){(ie||ce)&&y.Z.emit(b.Z.SYSTEM_ERROR,"task")}),[ie,ce]),(0,h.useEffect)((function(){xe()}),[]),(0,J.Z)((function(){"visible"===Q&&K&&xe()}),[Q]),(0,h.useEffect)((function(){}),[K]);var xe=function(){var e=u()(o()().mark((function e(){var t,n,i,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getServerTime();case 2:t=e.sent,n=t.code,i=t.data,200===n?(a=Date.now()-1e3*(null==i?void 0:i.Time),V(i.Time),X(a)):y.Z.emit(b.Z.SYSTEM_ERROR,"task");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){wi=setInterval((function(){y.Z.emit(b.Z.TIME_COUNTDOWN)}),1e3)},ye=function(){ne({page:fe,page_size:50})},Me=function(){ue()},Te=function(e){0===e?(0,P.R)("7_2"):(0,P.R)("7_3"),U(""),s(e)},Ae=function(e){var t,n,i,a;null!==(t=I[e])&&void 0!==t&&null!==(n=t.PrizeInfo)&&void 0!==n&&n.SendType&&(R(e),U(null===(i=I[e])||void 0===i||null===(a=i.PrizeInfo)||void 0===a?void 0:a.Img))},Ee=function(e){if(!B||0!=r)return null;var t=e.split(".jpg")[0];return"".concat(Se.Z.imgBaseUrl,"/image/poster/share/").concat(t,".jpg")},Ie=(0,h.useMemo)((function(){if(!B||0!=r)return null;var e=B.split(".jpg")[0];return"".concat(Se.Z.imgBaseUrl,"/image/poster/").concat(e,".jpg")}),[B]),Ce=(0,h.useCallback)((function(e){var t=e.photoIndex;return(0,v.jsx)("div",{className:" h-full",children:(0,v.jsx)("div",{className:"photo-scroll mx-auto sm:w-[365px] xl:w-[365px] h-full overflow-auto  flex flex-wrap content-start",children:x.length>0?x.map((function(e,n){return(0,v.jsx)(ui,{index:n,props:Ee(e),border:n===t,myClass:"sm:size-[65px,104px] xl:size-[65px,104px] overflow-hidden",click:function(){!function(e){(0,P.R)("7_4"),S(e),U(x[e])}(n)}},n)})):(0,v.jsx)("div",{className:"w-full h-full flex justify-center items-center text-white/70 sm:text-14 xl:text-16",children:""})})})}),[x]),ke=(0,h.useCallback)((function(e){var t=e.prizeIndex;return(0,v.jsx)("div",{className:"h-full",children:(0,v.jsx)("div",{className:"prize-scroll mx-auto sm:w-[365px] xl:w-full h-full overflow-auto flex flex-wrap content-start ",children:I.length>0?I.map((function(e,n){return(0,v.jsx)(pi,{props:e,active:n===t,differenceTime:q,myClass:"w-full sm:h-[62px] xl:h-[90px] overflow-hidden border-white/20 border-b-[1px] sm:pl-[5px] xl:pl-[10px]",click:function(){Ae(n)}},n)})):(0,v.jsx)("div",{className:"w-full h-full flex justify-center items-center text-white/70 sm:text-14 xl:text-18",children:""})})})}),[I]),Le=function(){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"sm:w-[130px] xl:w-[180px] flex justify-center items-center rounded-[5px] overflow-hidden relative sm:border-[2px] xl:border-[2px] border-[#fff]",children:Ie&&(0,v.jsx)("img",{className:"min-h-full xl:w-full",src:Ie})}),(0,we.CL)()&&(0,v.jsx)("p",{className:"sm:mt-[10px] xl:mt-[20px] text-white sm:text-12 xl:text-16 whitespace-pre-wrap text-center",children:n.formatMessage({id:"bag.photoTip"})})]})},Oe=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"sm:size-[200px] xl:size-[275px] flex justify-center items-center overflow-hidden border-[#fff] rounded-[5px] sm:border-[2px] xl:border-[2px] bg-no-repeat bg-center bg-cover",style:{backgroundImage:"url(".concat(B,")")}})})};return(0,v.jsxs)("div",{className:"relative sm:py-[20px] sm:pl-[20px] sm:pt-[60px] xl:pt-[80px] xl:pb-[20px] xl:pl-[20px] h-full flex flex-col xl:text-16",children:[(0,v.jsxs)("div",{className:"sm:w-[24px] sm:top-[17px] sm:right-[20px] xl:top-[20px] xl:right-[20px]  ignore:xl:w-[48px] absolute flex flex-col items-center cursor-pointer group xl:hover:text-[#49A3BA]",onClick:function(){c(!0),p("rule"),(0,P.R)("7_1")},children:[(0,v.jsx)("div",{className:"sm:h-[24px] ignore:xl:h-[48px] w-full rounded-full bg-white/20 flex justify-center items-center",children:(0,v.jsx)(_n,{className:"fill-current sm:size-[12px,14px] xl:size-[25px,27px]"})}),(0,v.jsx)("span",{className:"whitespace-nowrap sm:text-10",children:n.formatMessage({id:"profile.rule"})})]}),(0,v.jsxs)("div",{className:" flex flex-1 justify-between overflow-hidden",children:[(0,v.jsxs)("div",{className:"sm:w-[385px] xl:w-[55%] flex flex-col rounded-[10px] overflow-hidden",children:[(0,v.jsxs)("div",{className:"w-full sm:h-[40px] xl:h-[50px] flex sm:text-12 xl:text-16 text-white font-OPPO-M xl:cursor-pointer",children:[(0,v.jsx)("div",{className:"w-full flex justify-center items-center ".concat(0===r?"bg-white/20 border-[#707070]/20 border-b-[1px]":"bg-white/10 border-[#fff]/20 border-r-[0.5px]"),onClick:function(){return Te(0)},children:(0,v.jsxs)("div",{className:"flex items-center ".concat(0===r?"opacity-1":"opacity-20"),children:[(0,v.jsx)(Mi,{className:"sm:h-[16px] xl:h-[20px] w-auto sm:mr-[4px] xl:mr-[6px]"}),(0,v.jsx)("span",{className:" flex-shrink-0",children:n.formatMessage({id:"bag.myphoto"})})]})}),(0,v.jsx)("div",{className:"w-full flex justify-center items-center ".concat(1===r?"bg-white/20 border-[#707070]/20 border-b-[1px]":"bg-white/10 border-[#fff]/20 border-l-[0.5px]"),onClick:function(){return Te(1)},children:(0,v.jsxs)("div",{className:"flex items-center ".concat(1===r?"opacity-1":"opacity-20"),children:[(0,v.jsx)(De,{className:"sm:h-[16px] xl:h-[20px] w-auto sm:mr-[4px] xl:mr-[6px]"}),(0,v.jsx)("span",{className:" flex-shrink-0",children:n.formatMessage({id:"bag.myprize"})})]})})]}),(0,v.jsxs)("div",{className:"bg-white/20 flex-1 overflow-hidden",children:[0===r&&(0,v.jsx)(Ce,{photoIndex:_}),1===r&&(0,v.jsx)(ke,{prizeIndex:O})]})]}),(0,v.jsx)("div",{className:"flex-1 h-full flex flex-col items-center justify-center",children:B&&(0,v.jsxs)(v.Fragment,{children:[0===r&&(0,v.jsx)(Le,{}),1===r&&(0,v.jsx)(Oe,{})]})})]}),Y&&(0,v.jsx)(Ti.Z,{wrapperClassName:"spin",spinning:Y,tip:""})]})},Si=n(9189),Ai=n.n(Si),Ei=n(58482),Ii=n.n(Ei),Ci=n(47722),ki=n.n(Ci),Li=n(76779),Oi=n.n(Li),Pi=n(46332),Ri=n.n(Pi),Di=n(36171),Ni=new(Ii()((function e(){if(Ai()(this,e),window.debug3D)return this.debug=new Di.Pane,this.debug.containerElem_.style.width="320px",this.debug.containerElem_.style.right="150px",(0,we.tq)()&&this.debug.dispose(),this.debug.addFolder({title:""})}))),Bi=n(98711),Ui=n(99035),ji=n(15928),Fi=function(){function e(){if(Ai()(this,e),e.instance)return e.instance;e.instance=this}return Ii()(e,[{key:"replaceCommonShader",value:function(e){e.vertexShader=e.vertexShader.replace("#include <virtualverse_vertex_parts>","\n    varying vec3 vViewDir;\n    varying vec3 vWorldPos;\n"),e.vertexShader=e.vertexShader.replace("#include <virtualverse_vertex>","\n    #ifdef USE_INSTANCING\n        vViewDir = -vec3(modelViewMatrix * instanceMatrix * vec4(position, 1.0));\n        vWorldPos = vec3(modelMatrix * instanceMatrix * vec4(position, 1.0));\n    #else\n        vViewDir = -vec3(modelViewMatrix * vec4(position, 1.0));\n        vWorldPos = vec3(modelMatrix * vec4(position, 1.0));\n    #endif\n"),e.fragmentShader=e.fragmentShader.replace("#include <virtualverse_fragment_parts>","\n    varying vec3 vViewDir;\n    varying vec3 vWorldPos;\n"),e.fragmentShader=e.fragmentShader.replace("#include <virtualverse_fragment>","\n    #ifndef DISABLE_TONEMAPPING\n        #ifdef USE_LINEARMAPPING\n            gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );\n        #else\n            #include <tonemapping_fragment>\n        #endif\n    #endif\n\n    \n\n    #include <encodings_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n"),e.fragmentShader=e.fragmentShader.replace("#include <vv_clipping_fragment>","\n    #ifdef USE_CLIPPING\n    if(isClipping(vViewDir.xy, vWorldPos, 6.0))\n        discard;\n    #endif\n")}},{key:"setThreeTexture",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&(t&&(e.encoding=Lt.knz),e.flipY=n)}},{key:"disposeObject",value:function(e,t){e.geometry&&(e.geometry.boundsTree&&e.geometry.disposeBoundsTree(),e.geometry.dispose(),e.geometry=null),e.material&&(e.material.map&&e.material.map.dispose(),e.material.envMap&&e.material.envMap.dispose(),e.material.alphaMap&&e.material.alphaMap.dispose(),e.material.bumpMap&&e.material.bumpMap.dispose(),e.material.emissiveMap&&e.material.emissiveMap.dispose(),e.material.metalnessMap&&e.material.metalnessMap.dispose(),e.material.roughnessMap&&e.material.roughnessMap.dispose(),e.material.normalMap&&e.material.normalMap.dispose(),e.material.aoMap&&e.material.aoMap.dispose(),e.material.dispose(),e.material=null),e.skeleton&&(e.skeleton.dispose(),e.skeleton=null),t&&t.remove(e)}},{key:"changeSceneTest",value:function(e){if(!(0,we.tq)()&&window.debug3D)switch(e.code){case"KeyT":case"Digit6":case"Digit7":case"Digit8":case"Digit9":break;case"Digit1":e.shiftKey&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.PopmartVenue.id});break;case"Digit2":e.shiftKey&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.PopmartVenue2.id});break;case"Digit3":e.shiftKey&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.PopmartVenue3.id});break;case"Digit4":e.shiftKey&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.PopmartVenue4.id});break;case"Digit5":e.shiftKey&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.HonorVenue.id});break;case"Digit0":e.shiftKey&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.MainSquare.id})}}},{key:"uploadLocalTexture",value:function(e){var t=this;this.textureLoader||(this.textureLoader=new Lt.dpR);var n=document.createElement("input");n.name="file-input",n.id="file-input",n.type="file",n.addEventListener("change",(function(i){var a=n.files;t.textureLoader.load(window.URL.createObjectURL(a[0]),(function(t){e(t)}))})),n.click()}},{key:"uploadLocalGlb",value:function(e){var t=this;if(!this.gltfLoader){var n=new Bi._;n.setDecoderPath("./libs/draco/"),n.setDecoderConfig({type:"js"});var i=new Ui.E;i.setDRACOLoader(n),this.gltfLoader=i}var a=document.createElement("input");a.name="file-input",a.id="file-input",a.type="file",a.addEventListener("change",(function(n){var i=a.files;t.gltfLoader.load(window.URL.createObjectURL(i[0]),(function(t){e(t)}))})),a.click()}},{key:"uploadJSON",value:function(e){var t=document.createElement("input");t.name="file-input",t.id="file-input",t.type="file",t.addEventListener("change",(function(n){var i=t.files,a=new FileReader;a.readAsText(i[0],"UTF-8"),a.onload=function(t){var n=t.target.result;e(JSON.parse(n))}})),t.click()}},{key:"isSupportReflect",value:function(){return!/15.4/.test((0,we.oK)())&&"low"!==ji.Z.level}},{key:"isTextureError",value:function(){return/15.1|15.2/.test((0,we.oK)())}},{key:"addMaterialDebug",value:function(t,n){if(window.debug3D&&t&&t.uniforms&&n){var i=function(i){if(t.uniforms[i].noDebug||"uTime"===i)return"continue";var a=t.uniforms[i].value,r=t.uniforms[i].label||i;if(a instanceof Lt.xEZ)n.addButton({title:"",label:r}).on("click",(function(){e.getInstance().uploadLocalTexture((function(e){e.encoding=a.encoding,e.mapping=a.mapping,e.flipY=a.flipY,e.wrapS=a.wrapS,e.wrapT=a.wrapT,t.uniforms[i].value=e}))}));else if("number"==typeof a)n.addInput(t.uniforms[i],"value",{step:.001,label:r});else if(a instanceof Lt.Ilk){var s={color:"#"+a.getHexString()};n.addInput(s,"color",{view:"color",label:r}).on("change",(function(){t.uniforms[i].value.set(s.color)}))}else a instanceof Lt.FM8?n.addInput(t.uniforms[i],"value",{x:{step:.01},y:{step:.01},label:r}):a instanceof Lt.Pa4?n.addInput(t.uniforms[i],"value",{x:{step:.01},y:{step:.01},z:{step:.01},label:r}):a instanceof Lt.Ltg&&n.addInput(t.uniforms[i],"value",{x:{step:.01},y:{step:.01},z:{step:.01},w:{step:.01},label:r})};for(var a in t.uniforms)i(a)}}},{key:"addModelDebug",value:function(t,n,i){var a=this;window.debug3D&&t&&i&&(this.modelList||(this.modelList={}),this.modelList[t.uuid]=t,i.addButton({title:"",label:"glb"}).on("click",(function(){e.getInstance().uploadLocalGlb((function(i){i.scene.traverse((function(e){e.isMesh&&(e.material=n)})),a.modelList[t.uuid].parent.add(i.scene),a.modelList[t.uuid].parent.remove(a.modelList[t.uuid]),a.modelList[t.uuid]=i.scene,a.sceneRenderer&&a.modelList[t.uuid].parent.isBloom&&e.getInstance().addSelectiveBloom(a.sceneRenderer,a.modelList[t.uuid].parent)}))})))}},{key:"addSelectiveBloom",value:function(e,t){e&&t&&(this.sceneRenderer=e,t.isBloom=!0,t.traverse((function(t){(t.isMesh||t.isSkinnedMesh)&&(t.isBloom=!0,e.passes.bloomEffect.addSelection(t))})))}}],[{key:"getInstance",value:function(){return e.instance?e.instance:e.instance=new e}}]),e}();di()(Fi,"instance",void 0);var Yi=new(function(){function e(){Ai()(this,e),this.characters={}}return Ii()(e,[{key:"has",value:function(e){return!!this.characters[e]}},{key:"add",value:function(e,t){this.characters[e]=t}},{key:"remove",value:function(e){delete this.characters[e]}},{key:"get",value:function(e){return this.characters[e]}},{key:"update",value:function(e){Object.values(this.characters).forEach((function(t){return t.update(e)}))}},{key:"getAllByType",value:function(e){return Object.values(this.characters).filter((function(t){return t.roleType===e}))}},{key:"getAll",value:function(){return Object.values(this.characters)}},{key:"clear",value:function(){var e=this;Object.keys(this.characters).forEach((function(t){e.get(t).dispose(),e.remove(t)}))}}]),e}()),Gi=n(49513),Hi=n(53514),Zi=n(9522),Ki=n.n(Zi),Vi=function(){function e(){Ai()(this,e),di()(this,"setFPS",(function(e){Hi.ZP.ticker.fps(e)})),this._tickList=[],this._pause=!0}return Ii()(e,[{key:"start",value:function(){this._pause=!1}},{key:"stop",value:function(){this._pause=!0}},{key:"pause",get:function(){return this._pause}},{key:"addTicker",value:function(e){-1===this._tickList.indexOf(e)&&this._tickList.push(e)}},{key:"removeTicker",value:function(e){var t=this._tickList.indexOf(e);-1!==t&&this._tickList.splice(t,1)}},{key:"update",value:function(e,t,n){if(!this._pause){var i,a=Ki()(this._tickList);try{for(a.s();!(i=a.n()).done;){i.value.update(t,e)}}catch(e){a.e(e)}finally{a.f()}}}}]),e}(),zi=(n(37357),function(){function e(t){var n=this;if(Ai()(this,e),di()(this,"tick",(function(e,t,i){n.driver.update(e,t,i)})),di()(this,"setFPS",(function(e){n.driver.setFPS(e)})),e.instance)return e.instance;e.instance=this,this.driver=new Vi,this.requestId=-1,Hi.ZP.ticker.lagSmoothing(500,17),Hi.ZP.ticker.add(this.tick)}return Ii()(e,[{key:"start",value:function(){this.driver.start()}},{key:"stop",value:function(){this.driver.stop()}},{key:"add",value:function(e){this.driver.addTicker(e)}},{key:"remove",value:function(e){this.driver.removeTicker(e)}}],[{key:"getInstance",value:function(){return e.instance?e.instance:e.instance=new e}}]),e}());di()(zi,"instance",void 0);var Wi=n(87802),qi={low:{antialias:!1,player:10,vplayer:5,maxPixelRatio:2,fps:30},middle:{antialias:!0,player:30,vplayer:15,maxPixelRatio:2,fps:30},high:{antialias:!0,player:50,vplayer:30,maxPixelRatio:3,fps:60}},Xi=n(49304),Qi=n.n(Xi),Ji=n(23458),$i=n.n(Ji),ea=n(91455),ta=function(){function e(){Ai()(this,e),this.loaded=0,this.toLoad=0,this.loadQueue=[],this.loadedGroup=[],this._setLoaders()}return Ii()(e,[{key:"_setLoaders",value:function(){var e=this;this.loaders=[];var t=new Lt.dpR;this.loaders.push({extensions:["jpg","jpeg","png"],action:function(n){t.load(n.source,(function(t){e.fileLoadEnd({name:n.name,type:n.type},t)}),(function(e){y.Z.emit(b.Z.SYSTEM_ERROR)}))}});var n=new Bi._;n.setDecoderPath("./libs/draco/"),n.setDecoderConfig({type:"js"}),this.loaders.push({extensions:["drc"],action:function(t){n.load(t.source,(function(n){e.fileLoadEnd(t,n)}))}});var i=new Ui.E;i.setDRACOLoader(n),this.loaders.push({extensions:["glb","gltf","bin","exe"],action:function(t){i.load(t.source,(function(n){e.fileLoadEnd(t,n)}),(function(){}),(function(e){y.Z.emit(b.Z.SYSTEM_ERROR)}))}});var a=new ea.L;this.loaders.push({extensions:["obj"],action:function(t){a.load(t.source,(function(n){e.fileLoadEnd(t,n)}),(function(){}),(function(e){y.Z.emit(b.Z.SYSTEM_ERROR)}))}});var r=new Lt.Gql;this.loaders.push({extensions:["json"],action:function(t){r.load(t.source,(function(n){e.fileLoadEnd(t,n)}),(function(){}),(function(e){y.Z.emit(b.Z.SYSTEM_ERROR)}))}})}},{key:"_loadNext",value:function(){var e=this,t=this.loadQueue[0].list;this.loaded=0,this.toLoad=this.loadQueue[0].list.length;var n,i=Ki()(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.source;a.source instanceof Array&&(r=a.source[0]);var s=r.match(/\.([a-z0-9]+)$/);s&&void 0!==s[1]&&function(){var t=s[1],n=e.loaders.find((function(e){return e.extensions.find((function(e){return e===t}))}));n&&n.action(a)}()}}catch(e){i.e(e)}finally{i.f()}}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.loadedGroup.push(t),this.loadQueue.push({name:t,list:e}),1==this.loadQueue.length&&this._loadNext()}},{key:"fileLoadEnd",value:function(e,t){this.loaded++,y.Z.emit(b.Z.EVT_FILE_LOADED,e,t),this.loaded===this.toLoad&&(y.Z.emit(b.Z.EVT_GROUP_LOADED,this.loadQueue[0].name),this.loadQueue.shift(),this.loadQueue.length>0&&this._loadNext())}}]),e}(),na={Common:[{name:"manModel",source:n(58371),type:"model"},{name:"man1Texture",source:n(7152),type:"texture"},{name:"man2Texture",source:n(12916),type:"texture"},{name:"manMatcapTexture",source:n(60084),type:"texture"},{name:"emojiTexture",source:n(16195),type:"texture"},{name:"flowmapTexture",source:n(52797),type:"texture"},{name:"perlinNoiseTexture",source:n(44528),type:"texture"},{name:"waterdudvTexture",source:n(1995),type:"texture"}],MainSquare:[{name:"skyboxTexture",source:n(81606),type:"env"},{name:"mainSquareCollisionModel",source:n(73329),type:"model"},{name:"mainSquareGroundModel",source:n(16428),type:"model"},{name:"mainSquareGroundTexture",source:n(11341),type:"texture"},{name:"mainSquareLogo1Model",source:n(20913),type:"model"},{name:"mainSquareLogo1Texture",source:n(62017),type:"texture"},{name:"mainSquareLogo2Model",source:n(60240),type:"model"},{name:"mainSquareLogo2Texture",source:n(47171),type:"texture"},{name:"mainSquareStairsModel",source:n(70722),type:"model"},{name:"mainSquareStairsTexture",source:n(71380),type:"texture"},{name:"mainSquareStairsLightmapTexture",source:n(74998),type:"texture"},{name:"mainSquareStairsMatcapTexture",source:n(17504),type:"texture"},{name:"mainSquareGraffitiModel",source:n(68624),type:"model"},{name:"mainSquareGraffitiTexture",source:n(26238),type:"texture"},{name:"mainSquareGraffitiLightmapTexture",source:n(87548),type:"texture"},{name:"mainSquareGraffitiMatcapTexture",source:n(46562),type:"texture"},{name:"mainSquareBuilding1Model",source:n(86386),type:"model"},{name:"mainSquareBuilding2Model",source:n(37663),type:"model"},{name:"mainSquareBuilding1Texture",source:n(80198),type:"texture"},{name:"mainSquareBuilding2Texture",source:n(74004),type:"texture"},{name:"mainSquareBuilding1LightmapTexture",source:n(31193),type:"texture"},{name:"mainSquareBuilding2LightmapTexture",source:n(79904),type:"texture"},{name:"mainSquareBuildingMatcapTexture",source:n(6256),type:"texture"},{name:"mainSquareBirthModel",source:n(38236),type:"model"},{name:"mainSquareBirthTexture",source:n(27330),type:"texture"},{name:"mainSquareBirthLightmapTexture",source:n(61621),type:"texture"},{name:"mainSquareBirthMatcapTexture",source:n(3262),type:"texture"},{name:"mainSquareCenterBallModel",source:n(17494),type:"model"},{name:"mainSquareCenterBallAlphaTexture",source:n(30251),type:"texture"},{name:"mainSquareCenterBallMatcapTexture",source:n(1140),type:"texture"},{name:"mainSquareCenterBall2Model",source:n(70039),type:"model"},{name:"mainSquareCenterBall2MatcapTexture",source:n(19151),type:"texture"},{name:"mainSquareCenterBall3Model",source:n(69340),type:"model"},{name:"mainSquareCenterBall3MatcapTexture",source:n(5005),type:"texture"},{name:"mainSquareLightModel",source:n(46044),type:"model"},{name:"mainSquareLightTexture",source:n(89898),type:"texture"},{name:"mainSquareLight2Model",source:n(31761),type:"model"},{name:"mainSquareLight2Texture",source:n(4280),type:"texture"},{name:"mainSquareLight3Model",source:n(91942),type:"model"},{name:"mainSquareLight3Texture",source:n(84788),type:"texture"},{name:"mainSquareDecorationBuildingModel",source:n(34878),type:"model"},{name:"mainSquareDecorationBuildingTexture",source:n(47280),type:"texture"},{name:"mainSquareWomanModel",source:n(93690),type:"model"},{name:"mainSquareWomanAlphaDudvTexture",source:n(43098),type:"texture"},{name:"mainSquareWomanMatcapTexture",source:n(44536),type:"texture"},{name:"mainSquareTrampolineModel",source:n(24929),type:"model"},{name:"mainSquareTrampolineTexture",source:n(12008),type:"texture"},{name:"mainSquareZoomModel",source:n(60745),type:"model"},{name:"mainSquarePortalModel",source:n(91933),type:"model"},{name:"MainSquareCheckpointModel",source:n(43121),type:"model"},{name:"mainSquareTrainModel",source:n(21561),type:"model"},{name:"mainSquareTrainTexture",source:n(65026),type:"texture"},{name:"mainSquareHintSourceModel",source:n(57469),type:"model"},{name:"mainSquareHintReplaceModel",source:n(98542),type:"model"},{name:"mainSquareHintTexture",source:n(56401),type:"texture"},{name:"mainSquareScreenModel",source:n(65166),type:"obj"}],PopmartVenue:[{name:"venueCollisionModel",source:n(55406),type:"model"},{name:"venueFloorModel",source:n(55175),type:"model"},{name:"venueFloorSeamlessTexture",source:n(71822),type:"texture"},{name:"venueFloorLightmapTexture",source:n(71093),type:"texture"},{name:"venueWall1Model",source:n(17801),type:"model"},{name:"venueWall2Model",source:n(89514),type:"model"},{name:"venueWall1LightmapTexture",source:n(94821),type:"texture"},{name:"venueWall2LightmapTexture",source:n(35090),type:"texture"},{name:"venueWall1Texture",source:n(26055),type:"texture"},{name:"venueWall2Texture",source:n(72338),type:"texture"},{name:"venueEmissiveModel",source:n(86645),type:"model"},{name:"venueEmissivePictureModel",source:n(5785),type:"model"},{name:"venueEmissiveTexture",source:n(67683),type:"texture"},{name:"venueEmissivePictureLightmapTexture",source:n(25473),type:"texture"},{name:"modelTest1Model",source:n(36103),type:"model"},{name:"modelTest2Model",source:n(47952),type:"model"},{name:"modelTest3Model",source:n(37586),type:"model"},{name:"venueModelDiffuse1Texture",source:n(70503),typwe:"texture"},{name:"venueModelDiffuse2Texture",source:n(13361),typwe:"texture"},{name:"venueModelDiffuse3Texture",source:n(24374),typwe:"texture"},{name:"venueModelAlpha1Texture",source:n(69444),typwe:"texture"},{name:"venueModelAlpha2Texture",source:n(7892),typwe:"texture"},{name:"venueModelAlpha3Texture",source:n(54526),typwe:"texture"},{name:"venueModelRoughness1Texture",source:n(58702),typwe:"texture"},{name:"venueModelRoughness2Texture",source:n(49234),typwe:"texture"},{name:"venueModelRoughness3Texture",source:n(74086),typwe:"texture"},{name:"venueModelMatcap1Texture",source:n(36175),type:"texture"},{name:"venueModelMatcap2Texture",source:n(82780),type:"texture"},{name:"venueModelMatcap3Texture",source:n(9069),type:"texture"},{name:"venueShowcaseModel",source:n(63678),type:"model"},{name:"venueShowcaseLightmapTexture",source:n(15023),type:"texture"},{name:"venueWallGraffitiModel",source:n(65944),type:"model"},{name:"venueWallGraffitiLightmapTexture",source:n(55241),type:"texture"},{name:"venuePainting1Model",source:n(79314),type:"model"},{name:"venuePainting2Model",source:n(85224),type:"model"},{name:"venuePainting3Model",source:n(89711),type:"model"},{name:"venuePainting1Texture",source:n(66687),type:"texture"},{name:"venuePainting2Texture",source:n(9648),type:"texture"},{name:"venuePainting3Texture",source:n(43958),type:"texture"},{name:"venueContainerModel",source:n(47989),type:"model"},{name:"venueContainerLightmapTexture",source:n(67947),type:"texture"},{name:"venueLogo1Model",source:n(39737),type:"model"},{name:"venueLogo2Model",source:n(86784),type:"model"},{name:"venueLogo1LightmapTexture",source:n(56421),type:"texture"},{name:"venueLogo2LightmapTexture",source:n(61927),type:"texture"},{name:"venueBallModel",source:n(32013),type:"model"},{name:"venueBallemissiveModel",source:n(96427),type:"model"},{name:"venueBallLightmapTexture",source:n(6569),type:"texture"},{name:"venueArticleModel",source:n(17006),type:"model"},{name:"venueArticleLightmapTexture",source:n(74449),type:"texture"},{name:"venueScreenModel",source:n(19828),type:"model"},{name:"venueScreenTexture",source:n(13570),type:"texture"},{name:"mainSquareCenterBallModel",source:n(59903),type:"model"},{name:"mainSquareCenterBallAlphaTexture",source:n(33405),type:"texture"},{name:"mainSquareCenterBallMatcapTexture",source:n(67161),type:"texture"},{name:"venueHoloScreenModel",source:n(41218),type:"model"},{name:"venueHoloScreenTexture",source:n(58145),type:"texture"},{name:"venueUnkownModel",source:n(92352),type:"model"},{name:"venueUnkownTexture",source:n(40614),type:"texture"},{name:"venueUnkownLightmapTexture",source:n(99207),type:"texture"},{name:"venueCheckpointModel",source:n(74172),type:"model"},{name:"venueHintSourceModel",source:n(45461),type:"model"},{name:"venueHintReplaceModel",source:n(97319),type:"model"},{name:"venueHintTexture",source:n(1812),type:"texture"}],PopmartVenue2:[{name:"venueCollisionModel",source:n(80948),type:"model"},{name:"venueFloorModel",source:n(50967),type:"model"},{name:"venueFloorSeamlessTexture",source:n(5690),type:"texture"},{name:"venueFloorLightmapTexture",source:n(28464),type:"texture"},{name:"venueFloorDudvTexture",source:n(47490),type:"texture"},{name:"venueWall1Model",source:n(3451),type:"model"},{name:"venueWall2Model",source:n(56241),type:"model"},{name:"venueWall3Model",source:n(63007),type:"model"},{name:"venueWall1LightmapTexture",source:n(63238),type:"texture"},{name:"venueWall2LightmapTexture",source:n(17186),type:"texture"},{name:"venueWall3LightmapTexture",source:n(8696),type:"texture"},{name:"venueWallSeamlessTexture",source:n(9750),type:"texture"},{name:"venueEmissiveModel",source:n(70660),type:"model"},{name:"venueEmissiveTexture",source:n(30076),type:"texture"},{name:"modelTest1Model",source:n(75828),type:"model"},{name:"modelTest2Model",source:n(29271),type:"model"},{name:"modelTest3Model",source:n(86370),type:"model"},{name:"modelTest4Model",source:n(64047),type:"model"},{name:"modelTest5Model",source:n(43325),type:"model"},{name:"venueModelDiffuse1Texture",source:n(15254),typwe:"texture"},{name:"venueModelDiffuse2Texture",source:n(88417),typwe:"texture"},{name:"venueModelDiffuse3Texture",source:n(566),typwe:"texture"},{name:"venueModelDiffuse4Texture",source:n(25902),typwe:"texture"},{name:"venueModelDiffuse5Texture",source:n(99390),typwe:"texture"},{name:"venueModelAlpha1Texture",source:n(19472),typwe:"texture"},{name:"venueModelAlpha2Texture",source:n(15145),typwe:"texture"},{name:"venueModelAlpha3Texture",source:n(87942),typwe:"texture"},{name:"venueModelAlpha4Texture",source:n(50112),typwe:"texture"},{name:"venueModelAlpha5Texture",source:n(25945),typwe:"texture"},{name:"venueModelRoughness1Texture",source:n(36965),typwe:"texture"},{name:"venueModelRoughness2Texture",source:n(92291),typwe:"texture"},{name:"venueModelRoughness3Texture",source:n(38958),typwe:"texture"},{name:"venueModelRoughness4Texture",source:n(86411),typwe:"texture"},{name:"venueModelRoughness5Texture",source:n(99135),typwe:"texture"},{name:"venueModelMatcap1Texture",source:n(3578),type:"texture"},{name:"venueModelMatcap2Texture",source:n(55945),type:"texture"},{name:"venueModelMatcap3Texture",source:n(74258),type:"texture"},{name:"venueModelMatcap4Texture",source:n(60537),type:"texture"},{name:"venueModelMatcap5Texture",source:n(21383),type:"texture"},{name:"venuePainting1Model",source:n(93766),type:"model"},{name:"venuePainting2Model",source:n(35565),type:"model"},{name:"venuePainting3Model",source:n(42556),type:"model"},{name:"venuePainting4Model",source:n(8121),type:"model"},{name:"venuePainting1Texture",source:n(3605),type:"texture"},{name:"venuePainting2Texture",source:n(93808),type:"texture"},{name:"venuePainting3Texture",source:n(32593),type:"texture"},{name:"venuePainting4Texture",source:n(36100),type:"texture"},{name:"venueDecorationModel",source:n(44604),type:"model"},{name:"venueDecorationLightmapTexture",source:n(23124),type:"texture"},{name:"venueMetalModel",source:n(36377),type:"model"},{name:"venueMetalTexture",source:n(88128),type:"texture"},{name:"venueMatcapMetalTexture",source:n(12229),type:"texture"},{name:"venueShowcaseModel",source:n(81753),type:"model"},{name:"venueShowcaseLightmapTexture",source:n(3539),type:"texture"},{name:"venueLogo1Model",source:n(16822),type:"model"},{name:"venueLogo2Model",source:n(83995),type:"model"},{name:"venueLogo1LightmapTexture",source:n(10971),type:"texture"},{name:"venueLogo2LightmapTexture",source:n(34404),type:"texture"},{name:"venueGlassModel",source:n(65884),type:"model"},{name:"venueGlassMatcapTexture",source:n(13264),type:"texture"},{name:"venueGlassAlphaTexture",source:n(16227),type:"texture"},{name:"venueGlassDudvTexture",source:n(48561),type:"texture"},{name:"mainSquareCenterBallModel",source:n(29612),type:"model"},{name:"mainSquareCenterBallAlphaTexture",source:n(42389),type:"texture"},{name:"mainSquareCenterBallMatcapTexture",source:n(67014),type:"texture"},{name:"mainSquareCenterBallDudvTexture",source:n(31410),type:"texture"},{name:"mainSquareCenterBall2Model",source:n(11060),type:"model"},{name:"mainSquareCenterBall2AlphaTexture",source:n(35194),type:"texture"},{name:"mainSquareCenterBall2MatcapTexture",source:n(13908),type:"texture"},{name:"mainSquareCenterBall2DudvTexture",source:n(25665),type:"texture"},{name:"venueHoloScreenModel",source:n(52270),type:"model"},{name:"venueHoloScreenTexture",source:n(55856),type:"texture"},{name:"venueUnkownModel",source:n(51069),type:"model"},{name:"venueUnkownTexture",source:n(28476),type:"texture"},{name:"venueUnkownLightmapTexture",source:n(53372),type:"texture"},{name:"venueCheckpointModel",source:n(70191),type:"model"},{name:"venueHintSourceModel",source:n(98381),type:"model"},{name:"venueHintReplaceModel",source:n(5264),type:"model"},{name:"venueHintTexture",source:n(98553),type:"texture"}],PopmartVenue3:[{name:"venueCollisionModel",source:n(97599),type:"model"},{name:"venueFloorModel",source:n(1967),type:"model"},{name:"venueFloorSeamlessTexture",source:n(66812),type:"texture"},{name:"venueFloorLightmapTexture",source:n(73125),type:"texture"},{name:"venueWallGraffitiModel",source:n(73772),type:"model"},{name:"venueWallGraffitiLightmapTexture",source:n(63579),type:"texture"},{name:"venueWall1Model",source:n(12880),type:"model"},{name:"venueWall2Model",source:n(11915),type:"model"},{name:"venueWall3Model",source:n(41534),type:"model"},{name:"venueWall1LightmapTexture",source:n(7562),type:"texture"},{name:"venueWall1Texture",source:n(40213),type:"texture"},{name:"venueWall2LightmapTexture",source:n(20306),type:"texture"},{name:"venueWall2Texture",source:n(70121),type:"texture"},{name:"venueWall3LightmapTexture",source:n(68961),type:"texture"},{name:"venueWall3Texture",source:n(33111),type:"texture"},{name:"venueEmissiveModel",source:n(65569),type:"model"},{name:"venueEmissiveTexture",source:n(63611),type:"texture"},{name:"venueEmissivePictureModel",source:n(16309),type:"model"},{name:"venueEmissivePictureLightmapTexture",source:n(72853),type:"texture"},{name:"venueArticleModel",source:n(67152),type:"model"},{name:"venueArticleLightmapTexture",source:n(77994),type:"texture"},{name:"venueDecorationModel",source:n(56555),type:"model"},{name:"venueDecorationLightmapTexture",source:n(99572),type:"texture"},{name:"modelTest1Model",source:n(90339),type:"model"},{name:"modelTest2Model",source:n(49235),type:"model"},{name:"modelTest3Model",source:n(65996),type:"model"},{name:"modelTest4Model",source:n(70205),type:"model"},{name:"modelTest5Model",source:n(25411),type:"model"},{name:"venueModelDiffuse1Texture",source:n(30884),typwe:"texture"},{name:"venueModelDiffuse2Texture",source:n(96154),typwe:"texture"},{name:"venueModelDiffuse3Texture",source:n(24917),typwe:"texture"},{name:"venueModelDiffuse4Texture",source:n(15796),typwe:"texture"},{name:"venueModelDiffuse5Texture",source:n(6447),typwe:"texture"},{name:"venueModelAlpha1Texture",source:n(18761),typwe:"texture"},{name:"venueModelAlpha2Texture",source:n(34526),typwe:"texture"},{name:"venueModelAlpha3Texture",source:n(24864),typwe:"texture"},{name:"venueModelAlpha4Texture",source:n(45913),typwe:"texture"},{name:"venueModelAlpha5Texture",source:n(87083),typwe:"texture"},{name:"venueModelRoughness1Texture",source:n(98626),typwe:"texture"},{name:"venueModelRoughness2Texture",source:n(5994),typwe:"texture"},{name:"venueModelRoughness3Texture",source:n(99882),typwe:"texture"},{name:"venueModelRoughness4Texture",source:n(29607),typwe:"texture"},{name:"venueModelRoughness5Texture",source:n(60907),typwe:"texture"},{name:"venueModelMatcap1Texture",source:n(31416),type:"texture"},{name:"venueModelMatcap2Texture",source:n(67306),type:"texture"},{name:"venueModelMatcap3Texture",source:n(17391),type:"texture"},{name:"venueModelMatcap4Texture",source:n(57284),type:"texture"},{name:"venueModelMatcap5Texture",source:n(17125),type:"texture"},{name:"venueShowcaseModel",source:n(55156),type:"model"},{name:"venueShowcaseLightmapTexture",source:n(21181),type:"texture"},{name:"venuePicture1Model",source:n(65920),type:"model"},{name:"venuePicture2Model",source:n(748),type:"model"},{name:"venuePicture3Model",source:n(59032),type:"model"},{name:"venuePicture4Model",source:n(54166),type:"model"},{name:"venuePicture1Texture",source:n(49007),type:"texture"},{name:"venuePicture2Texture",source:n(9396),type:"texture"},{name:"venuePicture3Texture",source:n(89968),type:"texture"},{name:"venuePicture4Texture",source:n(87872),type:"texture"},{name:"venueMetalModel",source:n(31907),type:"model"},{name:"venueMetalTexture",source:n(27464),type:"texture"},{name:"venueMatcapMetalTexture",source:n(61362),type:"texture"},{name:"venueLogo1Model",source:n(50787),type:"model"},{name:"venueLogo2Model",source:n(22437),type:"model"},{name:"venueLogo1LightmapTexture",source:n(61015),type:"texture"},{name:"venueLogo2LightmapTexture",source:n(27104),type:"texture"},{name:"venueScreenModel",source:n(53538),type:"model"},{name:"venueScreenTexture",source:n(25214),type:"texture"},{name:"mainSquareCenterBallModel",source:n(28212),type:"model"},{name:"mainSquareCenterBallAlphaTexture",source:n(94014),type:"texture"},{name:"mainSquareCenterBallMatcapTexture",source:n(99185),type:"texture"},{name:"venueHoloScreenModel",source:n(84352),type:"model"},{name:"venueHoloScreenTexture",source:n(39069),type:"texture"},{name:"venueUnkownModel",source:n(40903),type:"model"},{name:"venueUnkownTexture",source:n(2189),type:"texture"},{name:"venueUnkownLightmapTexture",source:n(24129),type:"texture"},{name:"venueCheckpointModel",source:n(12714),type:"model"},{name:"venueHintSourceModel",source:n(96976),type:"model"},{name:"venueHintReplaceModel",source:n(34258),type:"model"},{name:"venueHintTexture",source:n(96316),type:"texture"}],PopmartVenue4:[{name:"venueCollisionModel",source:n(73088),type:"model"},{name:"venueFloorModel",source:n(88458),type:"model"},{name:"venueFloor1Model",source:n(91448),type:"model"},{name:"venueFloorTexture",source:n(55752),type:"texture"},{name:"venueFloorLightmapTexture",source:n(7093),type:"texture"},{name:"venueFloorLightmap1Texture",source:n(34025),type:"texture"},{name:"venueWallModel",source:n(34856),type:"model"},{name:"venueWallLightmapTexture",source:n(81510),type:"texture"},{name:"venueWallTexture",source:n(26124),type:"texture"},{name:"venueWallGraffitiModel",source:n(39117),type:"model"},{name:"venueWallGraffitiLightmapTexture",source:n(27927),type:"texture"},{name:"venueEmissiveModel",source:n(16118),type:"model"},{name:"venueEmissiveTexture",source:n(36912),type:"texture"},{name:"venueEmissivePicture1Model",source:n(18018),type:"model"},{name:"venueEmissivePicture2Model",source:n(43081),type:"model"},{name:"venueEmissivePicture1LightmapTexture",source:n(45777),type:"texture"},{name:"venueEmissivePicture2LightmapTexture",source:n(26499),type:"texture"},{name:"venueDecorationModel",source:n(59435),type:"model"},{name:"venueDecorationLightmapTexture",source:n(73343),type:"texture"},{name:"modelTest1Model",source:n(47271),type:"model"},{name:"modelTest2Model",source:n(66426),type:"model"},{name:"modelTest3Model",source:n(24087),type:"model"},{name:"modelTest4Model",source:n(86461),type:"model"},{name:"venueModelDiffuse1Texture",source:n(92458),typwe:"texture"},{name:"venueModelDiffuse2Texture",source:n(37076),typwe:"texture"},{name:"venueModelDiffuse3Texture",source:n(98428),typwe:"texture"},{name:"venueModelDiffuse4Texture",source:n(79940),typwe:"texture"},{name:"venueModelAlpha1Texture",source:n(98877),typwe:"texture"},{name:"venueModelAlpha2Texture",source:n(23273),typwe:"texture"},{name:"venueModelAlpha3Texture",source:n(68304),typwe:"texture"},{name:"venueModelAlpha4Texture",source:n(90318),typwe:"texture"},{name:"venueModelRoughness1Texture",source:n(5483),typwe:"texture"},{name:"venueModelRoughness2Texture",source:n(65407),typwe:"texture"},{name:"venueModelRoughness3Texture",source:n(96267),typwe:"texture"},{name:"venueModelRoughness4Texture",source:n(10030),typwe:"texture"},{name:"venueModelMatcap1Texture",source:n(62375),type:"texture"},{name:"venueModelMatcap2Texture",source:n(99233),type:"texture"},{name:"venueModelMatcap3Texture",source:n(54657),type:"texture"},{name:"venueModelMatcap4Texture",source:n(39276),type:"texture"},{name:"venueShowcaseModel",source:n(20689),type:"model"},{name:"venueShowcaseLightmapTexture",source:n(69245),type:"texture"},{name:"venueLogo1Model",source:n(34171),type:"model"},{name:"venueLogo1LightmapTexture",source:n(77368),type:"texture"},{name:"mainSquareCenterBallModel",source:n(82765),type:"model"},{name:"mainSquareCenterBallAlphaTexture",source:n(43414),type:"texture"},{name:"mainSquareCenterBallMatcapTexture",source:n(37094),type:"texture"},{name:"mainSquareCenterBallDudvTexture",source:n(82929),type:"texture"},{name:"venueHoloScreenModel",source:n(46826),type:"model"},{name:"venueHoloScreenTexture",source:n(72686),type:"texture"},{name:"venueHintSourceModel",source:n(8263),type:"model"},{name:"venueHintReplaceModel",source:n(87029),type:"model"},{name:"venueHintTexture",source:n(84062),type:"texture"}],HonorVenue:[{name:"venueCollisionModel",source:n(16327),type:"model"},{name:"venueFloorModel",source:n(72609),type:"model"},{name:"venueFloorTexture",source:n(97915),type:"texture"},{name:"venueFloorLightmapTexture",source:n(98072),type:"texture"},{name:"venueWall1Model",source:n(15698),type:"model"},{name:"venueWall2Model",source:n(10347),type:"model"},{name:"venueWall3Model",source:n(56267),type:"model"},{name:"venueWall1LightmapTexture",source:n(55086),type:"texture"},{name:"venueWall1Texture",source:n(15343),type:"texture"},{name:"venueWall2LightmapTexture",source:n(58331),type:"texture"},{name:"venueWall2Texture",source:n(44640),type:"texture"},{name:"venueWall3LightmapTexture",source:n(76629),type:"texture"},{name:"venueWall3Texture",source:n(26017),type:"texture"},{name:"venueEmissivePictureModel",source:n(43973),type:"model"},{name:"venueEmissivePicture2Model",source:n(18399),type:"model"},{name:"venueEmissivePictureLightmapTexture",source:n(69635),type:"texture"},{name:"venueEmissivePictureLightmap2Texture",source:n(95504),type:"texture"},{name:"modelTest1Model",source:n(10325),type:"model"},{name:"modelTest2Model",source:n(99073),type:"model"},{name:"modelTest3Model",source:n(89125),type:"model"},{name:"venueModelDiffuse1Texture",source:n(94104),typwe:"texture"},{name:"venueModelDiffuse2Texture",source:n(2342),typwe:"texture"},{name:"venueModelDiffuse3Texture",source:n(89983),typwe:"texture"},{name:"venueModelAlpha1Texture",source:n(67356),typwe:"texture"},{name:"venueModelAlpha2Texture",source:n(31524),typwe:"texture"},{name:"venueModelAlpha3Texture",source:n(89297),typwe:"texture"},{name:"venueModelRoughness1Texture",source:n(43007),typwe:"texture"},{name:"venueModelRoughness2Texture",source:n(87570),typwe:"texture"},{name:"venueModelRoughness3Texture",source:n(61773),typwe:"texture"},{name:"venueModelMatcap1Texture",source:n(35994),type:"texture"},{name:"venueModelMatcap2Texture",source:n(19996),type:"texture"},{name:"venueModelMatcap3Texture",source:n(31321),type:"texture"},{name:"venueLogo1Model",source:n(8434),type:"model"},{name:"venueLogo1LightmapTexture",source:n(3626),type:"texture"},{name:"venueScreenModel",source:n(28294),type:"obj"},{name:"venueScreenTexture",source:n(63167),type:"texture"},{name:"venueHoloScreenModel",source:n(64788),type:"model"},{name:"venueHoloScreenTexture",source:n(88792),type:"texture"},{name:"venueHintSourceModel",source:n(21714),type:"model"},{name:"venueHintReplaceModel",source:n(17712),type:"model"},{name:"venueHintTexture",source:n(29109),type:"texture"}]},ia=function(){function e(){if(Ai()(this,e),e.instance)return e.instance;e.instance=this,this.loader=new ta,this.items={},this.isInit=!0,this.setEvent()}return Ii()(e,[{key:"setEvent",value:function(){this.onFileLoadedHandler=this.onFileLoaded.bind(this),y.Z.on(b.Z.EVT_FILE_LOADED,this.onFileLoadedHandler),y.Z.on(b.Z.EVT_GROUP_LOADED,(function(e){y.Z.emit(b.Z.EVT_SCENE_RES_READY),y.Z.emit(b.Z.RES_READY)}))}},{key:"onFileLoaded",value:function(e,t){this.items[e.name]=t,y.Z.emit(b.Z.LOAD_PROGRESS,(this.loader.loaded/this.loader.toLoad).toFixed(2))}},{key:"loadGroup",value:function(e){var t;this.isInit?(t=na[e].concat(na.Common),y.Z.emit(b.Z.START_LOAD),this.isInit=!1):t=na[e],this.loader.load(t,e)}},{key:"load",value:function(e,t){this.loader.load(e,t)}},{key:"deleteGroup",value:function(e){var t=this,n=na[e];n&&n.forEach((function(e){if("texture"==e.type||"basis"==e.type||"env"==e.type)t.items[e.name].dispose(),delete t.items[e.name];else if("model"==e.type)for(var n=t.items[e.name].scene;n.children.length;){var i=n.children[0];i.geometry&&i.geometry.dispose(),i.material&&i.material.dispose(),n.remove(i)}else if("obj"==e.type)for(var a=t.items[e.name];a.children.length;){var r=a.children[0];r.geometry&&r.geometry.dispose(),r.material&&r.material.dispose(),a.remove(r)}t.items[e.name]&&delete t.items[e.name]}))}}],[{key:"getInstance",value:function(){return e.instance?e.instance:e.instance=new e}}]),e}();di()(ia,"instance",void 0);var aa=n(47856),ra=n(60232),sa=n.n(ra),oa=function(){function e(t,n,i,a){var r=this;Ai()(this,e),di()(this,"onMouseClick",(function(e){if(e){if((0,we.tq)()&&(void 0===e.clientX||void 0===e.clientY)){if(!(e.changedTouches&&e.changedTouches.length>0))return;e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY}y.Z.emit(b.Z.CLICK_ANY_WHERE),r.setPickPosition(e),r.raycaster.setFromCamera(r.pickPosition,r.camera);var t=r.raycaster.intersectObjects(r.pickTarget,!0);if(t.length){var n=t[0],i=n.object,a=n.point;r.onPick&&r.onPick(i,a)}}})),this.onPick=a,this.camera=t,this.canvas=n,this.pickTarget=i,this.computeGeometry(this.pickTarget),this.pickPosition={x:0,y:0},this.raycaster=new Lt.iMs,this.raycaster.firstHitOnly=!0,this.raycaster.layers.enableAll(),this.moveCount=0,sa()(this.canvas).on(we.Wb.touchstart,(function(){r.moveCount=0})).on(we.Wb.touchmove,(function(){r.moveCount++})).on(we.Wb.touchend,(function(e){r.moveCount<5&&r.onMouseClick(e)}))}return Ii()(e,[{key:"computeGeometry",value:function(e){e.length>0&&e.forEach((function(e){e.traverse((function(e){e.geometry&&e.geometry.computeBoundsTree&&!e.geometry.boundsTree&&(e.geometry.computeBoundsTree({maxLeafTris:5,strategy:parseFloat(aa.ms)}),e.geometry.boundsTree.splitStrategy=aa.ms)}))}))}},{key:"disposeAllBoundsTree",value:function(){this.pickTarget.length>0&&this.pickTarget.forEach((function(e){e.traverse((function(e){e.geometry&&e.geometry.disposeBoundsTree&&e.geometry.disposeBoundsTree()}))}))}},{key:"addTarget",value:function(e){this.pickTarget.push(e)}},{key:"removeTarget",value:function(e){var t=this.pickTarget.indexOf(e);-1!==t&&this.pickTarget.splice(t,1)}},{key:"getCanvasRelativePosition",value:function(e){if(!this.canvas)return{x:0,y:0};var t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}}},{key:"setPickPosition",value:function(e){var t=this.getCanvasRelativePosition(e);if(this.pickPosition.x=t.x/this.canvas.width*2-1,this.pickPosition.y=t.y/this.canvas.height*-2+1,!Me.NO.islandscape){var n=[-this.pickPosition.y,this.pickPosition.x];this.pickPosition.x=n[0],this.pickPosition.y=n[1]}}},{key:"setEnable",value:function(e){e?this.raycaster.layers.enableAll():this.raycaster.layers.disable()}},{key:"dispose",value:function(){sa()(this.canvas).unbind(),this.disposeAllBoundsTree(),this.pickTarget=null,this.onPick=null,this.canvas=null,this.camera=null,this.raycaster=null,this.pickPosition=null}}]),e}(),la=n(64783),ua=n.n(la),ca=n(538),da=0,ha=1,fa=101,pa=201,ma={DEFAULT:0,STAIRS:5,PETALS:8,EMOJI:9,CHARACTER:10},va=n(81800),ga=n.n(va),xa=1,ba=2,ya=3,Ma=ba,wa=function(){function e(t){Ai()(this,e),this.player=t,this.camera=Ho.currentScene.sceneRender.viewer.camera,this.upVector=new Lt.Pa4(0,1,0),this.forwardVector=new Lt.Pa4,this.dirVector=new Lt.Pa4,this.dirLastVector=new Lt.Pa4,this.tempVector=new Lt.Pa4,this.isJoystickPressed=!1,this.joystickRadian=0,this.isStop=!0,this.isInputLocked=!1,window.DISABLE_3D_OPERATION=!1,this.setEvents()}return Ii()(e,[{key:"setEvents",value:function(){(0,we.tq)()?(Ma=ya,this.setJoystick()):(Ma=ba,this.onKeyDownHandler=this.onKeyDown.bind(this),this.onKeyUpHandler=this.onKeyUp.bind(this),document.addEventListener("keydown",this.onKeyDownHandler,!1),document.addEventListener("keyup",this.onKeyUpHandler,!1),this.setLockInputHandler=this.setLockInput.bind(this),y.Z.on(b.Z.R2T_LOCK_INPUT,this.setLockInputHandler))}},{key:"removeEvents",value:function(){this.joystick&&this.joystick.destroy(),this.onKeyDownHandler&&document.removeEventListener("keydown",this.onKeyDownHandler,!1),this.onKeyUpHandler&&document.removeEventListener("keyup",this.onKeyUpHandler,!1),this.setLockInputHandler&&y.Z.off(b.Z.R2T_LOCK_INPUT,this.setLockInputHandler),this.touchDom&&(this.touchDom.removeEventListener("touchstart",this.preventDefaultHandler),this.touchDom.removeEventListener("touchend",this.preventDefaultHandler),this.touchDom.removeEventListener("touchmove",this.preventDefaultHandler))}},{key:"setLockInput",value:function(e){this.isInputLocked=e}},{key:"setJoystick",value:function(){var e=this;this.joystick=ga().create({zone:document.getElementById("controller-ui"),mode:"static",restOpacity:.6,position:{left:"50%",bottom:"50%"}}),this.back=document.querySelector(".nipple > .back"),this.joystick.on("move",(function(t,n){Me.NO.islandscape?e.joystickRadian=(n.angle.radian+1.5*Math.PI)%(2*Math.PI):e.joystickRadian=n.angle.radian%(2*Math.PI),T.ZP.set(e.back,{rotation:180*-e.joystickRadian/Math.PI})})),this.joystick.on("start end",(function(t,n){e.isJoystickPressed="start"===t.type,y.Z.emit(b.Z.CLICK_ANY_WHERE),"end"===t.type&&e.syncMovement()})),this.preventDefaultHandler=this.preventDefault.bind(this),this.touchDom=document.querySelector("#controller-ui"),this.touchDom.addEventListener("touchstart",this.preventDefaultHandler),this.touchDom.addEventListener("touchend",this.preventDefaultHandler),this.touchDom.addEventListener("touchmove",this.preventDefaultHandler)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"onKeyDown",value:function(e){if(!this.isInputLocked)switch(e.code){case"ArrowUp":case"KeyW":this.moveforward||(this.moveforward=!0,this.movebackward=!1);break;case"ArrowLeft":case"KeyA":this.moveleft||(this.moveleft=!0,this.moveright=!1);break;case"ArrowDown":case"KeyS":this.movebackward||(this.movebackward=!0,this.moveforward=!1);break;case"ArrowRight":case"KeyD":this.moveright||(this.moveright=!0,this.moveleft=!1)}}},{key:"onKeyUp",value:function(e){if(!this.isInputLocked){switch(e.code){case"ArrowUp":case"KeyW":this.moveforward=!1;break;case"ArrowLeft":case"KeyA":this.moveleft=!1;break;case"ArrowDown":case"KeyS":this.movebackward=!1;break;case"ArrowRight":case"KeyD":this.moveright=!1}this.moveforward||this.moveleft||this.movebackward||this.moveright||this.syncMovement()}}},{key:"update",value:function(){var e=this;if(!window.DISABLE_3D_OPERATION){this.setForwardVector();var t=this.dirVector.multiplyScalar(0);if(Ma===ya&&this.isJoystickPressed?t.add(this.getRotatedVector(this.forwardVector,this.joystickRadian)):Ma===ba&&(this.moveforward&&t.add(this.getRotatedVector(this.forwardVector,0)),this.moveleft&&t.add(this.getRotatedVector(this.forwardVector,.5*Math.PI)),this.movebackward&&t.add(this.getRotatedVector(this.forwardVector,Math.PI)),this.moveright&&t.add(this.getRotatedVector(this.forwardVector,.5*-Math.PI))),t.normalize(),0!==t.length()){this.isStop=!1;var n=this.player.position.clone().addScaledVector(t,30);T.ZP.killTweensOf(this.player.targetPosition),T.ZP.to(this.player.targetPosition,{x:n.x,y:n.y,z:n.z,duration:.12,onUpdate:function(){e.player.targetPosition=e.player.targetPosition}})}else this.isStop||(T.ZP.killTweensOf(this.player.targetPosition),this.isStop=!0,this.player.stopImmediately(!1))}}},{key:"syncMovement",value:function(){if(!window.DISABLE_3D_OPERATION){var e={X:this.player.position.x,Z:this.player.position.z,TargetX:this.player.position.x,TargetZ:this.player.position.z,MoveSpeed:this.player.options.forwardSpeed,DeltaRotation:this.player.rotation.y,StartTime:0,PushTime:0};Zo.move({LocationInfo:e})}}},{key:"setForwardVector",value:function(){this.forwardVector.setFromMatrixColumn(this.camera.matrix,0),this.forwardVector.crossVectors(this.upVector,this.forwardVector),this.forwardVector.setComponent(1,0)}},{key:"getRotatedVector",value:function(e,t){return this.tempVector.multiplyScalar(0),this.tempVector.add(e),this.tempVector.applyAxisAngle(this.upVector,t),this.tempVector}},{key:"dispose",value:function(){T.ZP.killTweensOf(this.player.targetPosition),this.player=null,this.upVector=null,this.forwardVector=null,this.dirVector=null,this.dirLastVector=null,this.tempVector=null,this.removeEvents()}}]),e}(),Ta=function(){function e(){if(Ai()(this,e),e.instance)return e.instance;e.instance=this,this.materials={}}return Ii()(e,[{key:"getMaterial",value:function(e){if(this.materials[e])return this.materials[e];var t=ia.getInstance().items[e];Fi.instance.setThreeTexture(t,!1);var n={uTime:{value:0},tColorTexture:{value:t,label:""},tMatcap:{value:ia.getInstance().items.manMatcapTexture,label:"matcap"},uMatcapMix:{value:.2,label:"matcap"},clipDistance:{value:Ho.sceneConfig.camera.clipDistance,noDebug:!0}},i=new Lt.jyz({uniforms:n,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying float vVisibility;\nvarying float vPosY;\nvarying float vWaveElevation;\nvarying float vWaveStrength;\nvarying vec2 vMatCapUV;\n \n\nuniform float clipDistance;\nuniform float uTime;\nuniform float uWaveSpeed;\nuniform float uWaveStrength;\nuniform vec3 uWaveOffset;\nuniform vec2 uWaveFrequency;\n\nuniform sampler2D tStrengthTexture;\n\n#include <virtualverse_vertex_parts>\n#include <skinning_pars_vertex>\n\nvoid main() {\n    vUv = uv;\n    vVisibility = 1.0;\n\n    #include <beginnormal_vertex>\n    #include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\n    #include <begin_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n\n    vec4 p = vec4( position, 1. );\n    vec3 e = normalize( vec3( modelViewMatrix * p ) );\n    vec3 n = normalize( normalMatrix * normal );\n\n    vec3 r = reflect( e, n );\n    float m = 2. * sqrt(\n        pow( r.x, 2. ) +\n        pow( r.y, 2. ) +\n        pow( r.z + 1., 2. )\n    );\n    \n    vMatCapUV = r.xy / m + .5;\n\n    #include <virtualverse_vertex>\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vMatCapUV;\n\nuniform sampler2D tColorTexture;\nuniform sampler2D tMatcap;\nuniform float uMatcapMix;\n\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main() {\n\t#include <vv_clipping_fragment>\n\n\t// if(vVisibility < 0.5)\n\t// \tdiscard;\n\n\tvec3 color = texture2D(tColorTexture, vUv).rgb;\n\n    vec3 matcapColor = texture2D(tMatcap,vMatCapUV).rgb;\n\n\tvec3 final = blendMultiply(color, matcapColor, uMatcapMix);\n\n\tgl_FragColor = vec4(final, 1.0);\n\n    #include <virtualverse_fragment>\n}",defines:{DISABLE_TONEMAPPING:!0,USE_CLIPPING:!0}});if(Fi.instance.replaceCommonShader(i),i.updateNormalUniforms=function(e){},this.materials[e]=i,window.debug3D){var a=Ni.addFolder({title:e,expanded:!1});Fi.getInstance().addMaterialDebug(i,a)}return i}}]),e}();di()(Ta,"instance",void 0);var _a=function(){function e(){Ai()(this,e),this.width=512,this.height=512,this.fontSize=72,this.padding=24,this.maxWidth=480,this.isUsed=!1,this.userId=null;var t=this.initTexture();this._material=new Lt.xeV({map:t,transparent:!0,depthWrite:!1,depthTest:!0})}return Ii()(e,[{key:"initTexture",value:function(){return this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.font="bold ".concat(this.fontSize,"px serif")),new Lt.ROQ(this.canvas)}},{key:"setText",value:function(e){var t=this.ctx.wrapText(e,this.padding,0,this.maxWidth,this.fontSize,!0)+this.fontSize;this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="#ffffff",this.ctx.roundRect(0,this.height-t-2*this.padding,this.width,t+2*this.padding,50),this.ctx.fill(),this.ctx.fillStyle="#000000",this.ctx.wrapText(e,this.padding,this.height-t-this.padding,this.maxWidth,this.fontSize)}},{key:"material",get:function(){return this._material}},{key:"dispose",value:function(){this._material.dispose(),this.canvas=null}}]),e}();CanvasRenderingContext2D.prototype.wrapText=function(e,t,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var s=this,o=s.canvas;void 0===i&&(i=o&&o.width||300),void 0===a&&(a=o&&parseInt(window.getComputedStyle(o).lineHeight)||parseInt(window.getComputedStyle(document.body).lineHeight));for(var l=e.split(""),u="",c=0;c<l.length;c++){var d=u+l[c],h=s.measureText(d),f=h.width;f>i&&c>0?(r||s.fillText(u,t,n),u=l[c],n+=a):u=d}return r||s.fillText(u,t,n),n}},CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,i,a){var r=Math.min(n,i);return a>r/2&&(a=r/2),this.beginPath(),this.moveTo(e+a,t),this.arcTo(e+n,t,e+n,t+i,a),this.arcTo(e+n,t+i,e,t+i,a),this.arcTo(e,t+i,e,t,a),this.arcTo(e,t,e+n,t,a),this.closePath(),this};var Sa=new(function(){function e(){Ai()(this,e),this.materialList=[]}return Ii()(e,[{key:"remove",value:function(e){var t=this.materialList.find((function(t){return t.userId===e}));t&&(this.materialList=this.materialList.filter((function(t){return t.userId!==e})),t.dispose())}},{key:"get",value:function(e,t){var n=null;if(0===this.materialList.length)n=this._newMaterial();else if(this.materialList.find((function(t){return t.userId===e})))n=this.materialList.find((function(t){return t.userId===e}));else{for(var i=0,a=this.materialList.length;i<a;i++)if(!1===this.materialList[i].isUsed){n=this.materialList[i];break}n||(n=this._newMaterial())}return n.setText(t),n.isUsed=!0,n.userId=e,n}},{key:"_newMaterial",value:function(){var e=new _a;return this.materialList.push(e),e}}]),e}()),Aa=function(){function e(t){var n=this;Ai()(this,e);var i=ia.getInstance().items.emojiTexture;i.flipY=!1,i.encoding=Lt.knz,this._material=new Lt.xeV({map:i,side:Lt.ehD}),this._material.defines=this._material.defines||{},this._material.defines.USE_UV="",this.uniforms={uvX:{value:(t-1)%4},uvY:{value:Math.floor((t-1)/4)}},this._material.onBeforeCompile=function(e){e.uniforms.uvX=n.uniforms.uvX,e.uniforms.uvY=n.uniforms.uvY,e.vertexShader=e.vertexShader.replace("#include <common>","\n                    #include <common>\n                    uniform float uvX;\n                    uniform float uvY;\n                "),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","\n                    #include <uv_vertex>\n                    vUv.y = 1.0 - vUv.y;\n                    vUv *= 0.25;\n                    vUv.x += uvX * 0.25;\n                    vUv.y += uvY * 0.25;\n                "),e.fragmentShader=e.fragmentShader.replace("#include <tonemapping_fragment>","\n                    \n                ")},i.dispose()}return Ii()(e,[{key:"material",get:function(){return this._material}}]),e}(),Ea=function(){function e(){if(Ai()(this,e),e.instance)return e.instance;e.instance=this,this.matMap={}}return Ii()(e,[{key:"remove",value:function(e){delete this.matMap[e]}},{key:"get",value:function(e){return this.matMap[e]||(this.matMap[e]=new Aa(e)),this.matMap[e]}},{key:"getAllByType",value:function(e){return Object.values(this.matMap).filter((function(t){return t.type===e}))}}],[{key:"getInstance",value:function(){return e.instance?e.instance:e.instance=new e}}]),e}();di()(Ea,"instance",void 0);var Ia=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).options=i.mergeDefault(e),i.characterId=i.options.id,i.characterName=i.options.nickname,i.characterConfig=i.options.characterConfig,i.sharePhone=i.options.sharePhone,i.skinId=1,i.actions={},i.rotationMatrix=new Lt.yGw,i._targetQuaternion=new Lt._fP,i._targetPosition=new Lt.Pa4,i._currentY0Pos=new Lt.Pa4,i.forwardRotMatrix=new Lt.yGw,i.speed=0,i.offsetHeight=0,i.velocity=new Lt.Pa4,i._actionState="Idle",i._isMoving=!1,i._isInAction=!1,i.isInitial=!0,i.isStepBack=!1,i.isJump=!1,i._rotationFriction=.1,i._emoji=null,i.emojiOption={scale:0,pos:0},i.isMe=Gi.Z.userInfo.UserId===i.characterId,i.setEvents(),i.updateMatrixCopy(),i.isMe&&Ma!==xa&&(i.characterController=new wa(ki()(i)),i.capsuleInfo={radius:1,segment:new Lt.Zzh(new Lt.Pa4(0,.5,0),new Lt.Pa4(0,1.5,0))}),i.matrixAutoUpdate=!1,i}return Ii()(n,[{key:"mergeDefault",value:function(e){return Object.assign({defaultAnimation:"Idle",forwardSpeed:.2,type:"none"},e)}},{key:"setEvents",value:function(){var e=this;this.isMe&&(this.showEmojiHandler=function(t){Ze.Z.send("Base.TosSendFace",{FaceId:t},(function(e){})),e.showEmoji(t)},y.Z.on(b.Z.SHOW_3D_EMOJI,this.showEmojiHandler),this.showActionHandler=function(t){Ze.Z.send("Base.TosSendAction",{ActionId:t},(function(e){})),e.showAction(t)},y.Z.on(b.Z.SHOW_3D_ACTION,this.showActionHandler),this.updateDressupHandler=this.updateDressup.bind(this),y.Z.on(b.Z.CHARACTER_MODEL_UPDATE,this.updateDressupHandler),this.updateNickNameHandler=this.updateNickName.bind(this),y.Z.on(b.Z.CHARACTER_UPDATE_NICKNAME,this.updateNickNameHandler))}},{key:"resetPosAndRotation",value:function(e,t){var n=new Lt.Pa4(0,1,0);this.position.copy(e),this._targetPosition.copy(this.position),this.quaternion.setFromAxisAngle(n,t),this.targetQuaternion.setFromAxisAngle(n,t),this.updateMatrixCopy(),this.updateTerrainRaycaster(),this.forceResolveCollision()}},{key:"addHelperLine",value:function(e,t){var n=new Lt.nls({color:16711680}),i=[];i.push(e),i.push(t);var a=(new Lt.u9r).setFromPoints(i),r=new Lt.x12(a,n);return this.add(r),r}},{key:"setActionState",value:function(e){this.isJump&&"Jump"!=e?this.setActionState("Jump"):e!==this._actionState&&(this.fadeToAction(e,.25),this._actionState=e)}},{key:"setIsJump",value:function(e){this.isJump=e}},{key:"createAnimation",value:function(e,t){var n=this;this.actions={};var i=new Lt.Xcj(e);t.forEach((function(e){var t=i.clipAction(e);n.actions[e.name]=t}));var a=this.options.defaultAnimation;this.actions[a]&&this.actions[a].play(),this.actions.Walking&&(this.actions.Walking.timeScale=1),this.actions.Jump&&(this.actions.Jump.timeScale=.7),this.mixer=i}},{key:"createTerrainRaycaster",value:function(){this._terrainRaycasterPos=new Lt.Pa4(0,2,.5),this._terrainRaycasterDir=new Lt.Pa4(0,-1,0),this._terrainRaycaster=new Lt.iMs(this._terrainRaycasterPos,this._terrainRaycasterDir),this._terrainRaycaster.set(this._terrainRaycasterPos,this._terrainRaycasterDir),this._terrainRaycaster.firstHitOnly=!0}},{key:"updateTerrainRaycaster",value:function(){if(this._terrainRaycaster){var e=this.forwardRotMatrix.makeRotationFromQuaternion(this.quaternion),t=Math.atan2(e.elements[8],e.elements[10]);this._terrainRaycasterPos.set(this.position.x+.5*Math.sin(t),this.position.y+2,this.position.z+.5*Math.cos(t))}}},{key:"update",value:function(e){this.visible?(this.visible&&this.mixer&&this.mixer.update(e),this.characterController&&this.characterController.update(),this.updateTerrainRaycaster(),this.quaternion.slerp(this._targetQuaternion,this._rotationFriction),this.isStepBack||(this.reachedTargetPosition()?(this.speed=0,this._isMoving=!1,this.velocity.set(0,0,0),this._isInAction||this.setActionState("Idle")):(this.speed=Lt.M8C.lerp(this.speed,1,.05),this.updatePosition(e),this._isMoving=!0,this.stopAction(),this.setActionState("Walking")))):this.reachedTargetPosition()||(this.teleportTo({target:this._targetPosition}),this.updateMatrixCopy())}},{key:"updateDressup",value:function(e,t){var n=this;e=e||1;var i=this.getObjectByName("root"),a="man".concat(e,"Texture");this.dressupMaterial=(new Ta).getMaterial(a),i.traverse((function(t){(t.isMesh||t.isSkinnedMesh)&&(n.isMe&&(t.frustumCulled=!1),t.material.dispose(),t.material=n.dressupMaterial,t.material.needsUpdate=!0,t.name==="man".concat(e)?t.visible=!0:t.visible=!1)})),this.isMe,this._emoji&&this.getObjectByName("head").add(this._emoji)}},{key:"updatePosition",value:function(e){var t=this._currentY0Pos.set(this.position.x,0,this.position.z),n=this._targetPosition.clone().sub(t),i=this.options.forwardSpeed*e*60;i*=this.calculateOffsetRatio(this.offsetHeight);var a=n.normalize().multiplyScalar(i);this.velocity.copy(a.multiplyScalar(this.speed)),this.position.add(this.velocity),this.updateMatrixCopy()}},{key:"fadeToAction",value:function(e,t){var n=this.actions[this._actionState],i=this.actions[e];n.fadeOut(t),i.reset().setEffectiveWeight(1).fadeIn(t).play()}},{key:"collisionWithObjects",value:function(e){var t=this;if("Idle"!==this._actionState||this.isInitial){var n=this._terrainRaycaster.intersectObjects(e);this.collisionWithTerrain(n),this.collisionWithScene(n),this.updateMatrixCopy(),this.initialTimeout||(this.initialTimeout=setTimeout((function(){t.isInitial=!1}),500))}}},{key:"forceResolveCollision",value:function(){var e=Ho.getScene().terrain;if(e){this.updateTerrainRaycaster();var t=this._terrainRaycaster.intersectObjects(e.allCheckObjects)[0];if(!t)return;var n=t.distance-2;this.position.y-=n,this.updateMatrixCopy()}this.updateMatrixCopy()}},{key:"collisionWithTerrain",value:function(e){if(0!=e.length){var t=e[0],n=null;for(var i in e)if("floor_collision"===e[i].object.name){n=e[i];break}if("scene_dummy"==t.object.name)this.stepBack();else if(n){var a=n.distance-2;this.position.y-=a,this.offsetHeight=-a,this.isInitial=!1,this.isStepBack&&(this.isStepBack=!1,this.stopImmediately(!1))}}else this.stepBack()}},{key:"collisionWithScene",value:function(e){if(0!=e.length)e[0]}},{key:"teleportTo",value:function(e){var t=e.target,n=e.rotation;n=void 0===n?this.rotation.y:n,this.resetPosAndRotation(t,n),this.isMe&&e.isSend&&Zo.setCharacterPos({SceneType:Ho.currentId,LocationInfo:{X:this.position.x,Z:this.position.z,DeltaRotation:this.rotation.y,TargetX:this.position.x,TargetZ:this.position.z,MoveSpeed:this.options.forwardSpeed,StartTime:0,PushTime:0}})}},{key:"updateMatrixCopy",value:function(){this.updateMatrix()}},{key:"stopImmediately",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.teleportTo({target:this.position,isSend:e})}},{key:"calculateOffsetRatio",value:function(e){return 1}},{key:"stepBack",value:function(){this.isStepBack=!0;var e=this.forwardRotMatrix.makeRotationFromQuaternion(this.quaternion),t=Math.atan2(e.elements[8],e.elements[10]),n=2*this.options.forwardSpeed;this.position.x-=n*Math.sin(t),this.position.z-=n*Math.cos(t),this._targetPosition.copy(this.position)}},{key:"reachedTargetPosition",value:function(){return this.circleContains(1,this.position,this._targetPosition)}},{key:"circleContains",value:function(e,t,n){return Math.pow(n.x-t.x,2)+Math.pow(n.z-t.z,2)<e*e}},{key:"addEmoji",value:function(e){var t=Ea.getInstance().get(e).material;this._emoji||(this._emoji=new Lt.jyi(t),this._emoji.name="emoji",this._emoji.layers.set(fa),this.getObjectByName("head").add(this._emoji)),this._emoji.material=t}},{key:"showEmoji",value:function(e){var t=this;this.addEmoji(e),this._emoji.visible=!0,this.emojiOption.scale=0,this.emojiOption.pos=0,clearTimeout(this.emojiTimeout),Hi.p8.killTweensOf(this.emojiOption),Hi.p8.to(this.emojiOption,{scale:.5,pos:.5,duration:.25,ease:ca.eJ.easeOut.config(1.7),onUpdate:function(){t._emoji.scale.setScalar(t.emojiOption.scale),t._emoji.position.y=t.emojiOption.pos},onComplete:function(){t.emojiTimeout=setTimeout((function(){t.hideEmoji()}),3e3)}})}},{key:"hideEmoji",value:function(){this._emoji.visible=!1}},{key:"addChatBubble",value:function(){this._chatbubble||(this._chatbubble=new Lt.jyi,this._chatbubble.name="chatbubble",this._chatbubble.layers.set(fa),this._chatbubble.position.y=this.isMe?.7:.9,this._chatbubble.renderOrder=ma.EMOJI,this.getObjectByName("head").add(this._chatbubble))}},{key:"showChatBubble",value:function(e){var t=this;clearTimeout(this.chatBubbleTimeout),this.addChatBubble(),this.bubbleMaterial?(this.bubbleMaterial.setText(e),this._chatbubble.material.map.needsUpdate=!0):(this.bubbleMaterial=Sa.get(this.characterId,e),this._chatbubble.material=this.bubbleMaterial.material),this._chatbubble.scale.set(2,2,1),this._chatbubble.visible=!0,this.chatBubbleTimeout=setTimeout((function(){clearTimeout(t.chatBubbleTimeout),t.hideChatBubble()}),5e3)}},{key:"hideChatBubble",value:function(){this.bubbleMaterial=null,this._chatbubble.material=Sa.defaultMaterial,Sa.remove(this.characterId),this._chatbubble.visible=!1}},{key:"showAction",value:function(e){if(this.mixer){var t=Me.Dr[e-1];this._isInAction=!0,this.setActionState(t.name),t.loop||(this.stopActionHandler&&this.mixer.removeEventListener("loop",this.stopActionHandler),this.stopActionHandler=this.stopAction.bind(this),this.mixer.addEventListener("loop",this.stopActionHandler))}}},{key:"stopAction",value:function(){this.stopActionHandler&&this.mixer.removeEventListener("loop",this.stopActionHandler),this._isInAction=!1}},{key:"updateNickName",value:function(e){e=e||this.characterName,this.nick?(this.getObjectByName("head").remove(this.nick),this.nick.material.dispose(),this.nick=null,this.characterName=e,this.updateNickName(e)):this.characterName&&this.characterName.length>0&&(this.nick=new(ua())(" "+this.characterName+" ",.16),this.nick.fontWeight="bold",this.nick.position.set(0,-.2,0),this.nick.material.depthWrite=!1,this.nick.material.depthTest=!0,this.getObjectByName("head").add(this.nick),this.nick.renderOrder=ma.NICKNAME,this.nickOpacity=1,this.isMe&&(this.nick.color="#ffff00"))}},{key:"hideNickName",value:function(){void 0!==this.nickOpacity&&(this.nickOpacity<=0?this.nick.visible=!1:(this.nickOpacity-=.05,this.nick.material.opacity=this.nickOpacity))}},{key:"showNickName",value:function(){void 0!==this.nickOpacity&&(this.nickOpacity>=1||(this.nickOpacity>0&&(this.nick.visible=!0),this.nickOpacity+=.05,this.nick.material.opacity=this.nickOpacity))}},{key:"dispose",value:function(){var e=this;this.mixer.stopAllAction(),this.mixer.uncacheRoot(this.getObjectByName("root")),this.mixer=null,clearTimeout(this.initialTimeout),clearTimeout(this.emojiTimeout),clearTimeout(this.teleportTimeout),clearTimeout(this.chatBubbleTimeout),this.characterController&&this.characterController.dispose(),this.updateDressupHandler&&y.Z.off(b.Z.CHARACTER_MODEL_UPDATE,this.updateDressupHandler),this.showEmojiHandler&&y.Z.off(b.Z.SHOW_3D_EMOJI,this.showEmojiHandler),this.updateNickNameHandler&&y.Z.off(b.Z.CHARACTER_UPDATE_NICKNAME,this.updateNickNameHandler),this.showActionHandler&&y.Z.off(b.Z.SHOW_3D_ACTION,this.showActionHandler),this.traverse((function(t){Fi.getInstance().disposeObject(t,e)}))}},{key:"roleType",get:function(){return this.options.type}},{key:"targetQuaternion",get:function(){return this._targetQuaternion},set:function(e){this._targetQuaternion=e}},{key:"characterObject",get:function(){return this.getObjectByName("Character")}},{key:"targetPosition",get:function(){return this._targetPosition},set:function(e){this._targetPosition.set(e.x,0,e.z),this._tmpXZPositon?this._tmpXZPositon.set(this.position.x,0,this.position.z):this._tmpXZPositon=new Lt.Pa4(this.position.x,0,this.position.z),this.rotationMatrix.lookAt(this._targetPosition,this._tmpXZPositon,this.up),this._targetQuaternion.setFromRotationMatrix(this.rotationMatrix)}},{key:"forwardSpeed",get:function(){return this.options.forwardSpeed}},{key:"actionState",get:function(){return this._actionState}},{key:"isMoving",get:function(){return this._isMoving}}]),n}(Lt.Tme),Ca=n(53300),ka={Man1:{type:1,modelName:"man1Model",textures:["man1Texture"]},Man2:{type:2,modelName:"man2Model",textures:["man2Texture"]},Man3:{type:3,modelName:"man3Model",textures:["man3Texture"]},Man4:{type:4,modelName:"man4Model",textures:["man4Texture"]},Man5:{type:5,modelName:"man5Model",textures:["man5Texture"]},Man6:{type:6,modelName:"man6Model",textures:["man6Texture"]},Man7:{type:7,modelName:"man7Model",textures:["man7Texture"]},Man8:{type:8,modelName:"man8Model",textures:["man8Texture"]}},La=function(){function e(){Ai()(this,e)}return Ii()(e,null,[{key:"create",value:function(e,t){var n,i=null;n=ka["Man"+t.ImageInfoModel];var a=ia.getInstance().items.manModel,r=a.scene,s=a.animations;if("main"===e){i=new Ia({id:t.UserId,nickname:t.NickName,sharePhone:t.SharePhone||"",type:"main",defaultAnimation:"Idle",material:!0,characterConfig:n});var o=Ca.d9(r);o.name="root",i.add(o),i.createAnimation(o,s),i.createTerrainRaycaster(),i.updateNickName(),i.rotation.order="YXZ",i.scale.setScalar(1.5),i.updateMatrix(),i.traverse((function(e){i.isMe?e.layers.set(ha):e.layers.set(fa),e.renderOrder=ma.CHARACTER}))}return i}}]),e}(),Oa=n(94280),Pa=n(42088),Ra=(n(68376),function(){function e(t){Ai()(this,e),this._target=t,this.capsuleInfo=t.capsuleInfo,this._target.resolver=this,this.tempSegment=new Lt.Zzh,this.tempVector=new Lt.Pa4,this.tempVector2=new Lt.Pa4}return Ii()(e,[{key:"calculate",value:function(e){var t=this._target;t.updateMatrixWorld();var n=t.capsuleInfo;this.tempSegment.copy(n.segment),this.tempSegment.start.applyMatrix4(t.matrixWorld).applyMatrix4(e),this.tempSegment.end.applyMatrix4(t.matrixWorld).applyMatrix4(e)}},{key:"resolve",value:function(e){var t=this.tempVector;t.copy(this.tempSegment.start).applyMatrix4(e);var n=this.tempVector2;n.subVectors(t,this._target.position);var i=Math.max(0,n.length()-1e-5);n.normalize().multiplyScalar(i),n.y=0,this._target.position.add(n)}},{key:"dispose",value:function(){this._target.resolver=null,this._target=null,this.capsuleInfo=null}}]),e}()),Da=function(){function e(t){var n=this;Ai()(this,e),di()(this,"extractCollideMeshes",(function(){n.container.traverse((function(e){e.isMesh&&(/dummy/.test(e.name)||/Dummy/.test(e.name))&&(e.visible=!1,n.meshes.push(e))}))})),di()(this,"createCollider",(function(){if(0!=n.meshes.length){var e=[];n.meshes.forEach((function(t){var n=t.geometry.clone();for(var i in t.updateMatrixWorld(),n.applyMatrix4(t.matrixWorld),n.attributes)"position"!==i&&n.deleteAttribute(i);e.push(n)}));var t=Oa.qf(e,!1);t.boundsTree=new Pa.r(t,{lazyGeneration:!1}),t.visible=!1,n.mergedGeometry=t;var i=new Lt.Kj0(n.mergedGeometry);i.material.wireframe=!0,i.material.opacity=1,i.material.transparent=!0,i.visible=!0,n.collider=i,n.colliderMatrixInverse.copy(n.collider.matrixWorld).invert()}})),this.resolvers=[],this.container=t,this.tempBox=new Lt.ZzF,this.meshes=[],this.debug=Ni,this.colliderMatrixInverse=new Lt.yGw,this.extractCollideMeshes(),this.createCollider(),this.setDebug()}return Ii()(e,[{key:"addResolver",value:function(e){this.resolvers.includes(e)||this.resolvers.push(e)}},{key:"removeResolver",value:function(e){var t=this.resolvers.indexOf(e);return-1!==t?this.resolvers.splice(t,1):null}},{key:"removeAllResolvers",value:function(){this.resolvers.forEach((function(e){e.dispose()})),this.resolvers.length=0}},{key:"setDebug",value:function(){if(window.debug3D);}},{key:"removeDebug",value:function(){window.debug3D}},{key:"detect",value:function(e){var t=this;if(0!=this.meshes.length){var n=e.tempVector,i=e.tempVector2,a=e.tempSegment,r=e.capsuleInfo;this.tempBox.makeEmpty(),this.tempBox.expandByPoint(a.start),this.tempBox.expandByPoint(a.end),this.tempBox.min.addScalar(-r.radius),this.tempBox.max.addScalar(r.radius),this.collider.geometry.boundsTree.shapecast({intersectsBounds:function(e){return e.intersectsBox(t.tempBox)},intersectsTriangle:function(e){var t=n,s=i,o=e.closestPointToSegment(a,t,s);if(o<r.radius){var l=r.radius-o,u=s.sub(t).normalize();a.start.addScaledVector(u,l),a.end.addScaledVector(u,l)}}})}}},{key:"update",value:function(){var e=this;0!=this.meshes.length&&this.resolvers.forEach((function(t){t.calculate(e.colliderMatrixInverse),e.detect(t),t.resolve(e.colliderMatrixInverse)}))}},{key:"dispose",value:function(){this.removeDebug()}}]),e}(),Na=n(84765),Ba=n(6210),Ua=n.n(Ba),ja={default:{mode:"default",spherical:{value:new Lt.$V(10,.55*Math.PI,Math.PI),limits:{radius:{min:5,max:1e3}}},target:{value:new Lt.Pa4(0,0,0),smoothing:.02},zoom:{sensitivity:.01},drag:{enable:!0}},thridPerson:{mode:"thridPerson",spherical:{value:new Lt.$V(10,.52*Math.PI,Math.PI),limits:{radius:{min:10,max:12}}},target:{value:null,smoothing:.01},zoom:{sensitivity:.006},drag:{enable:!0}},firstPerson:{mode:"firstPerson",spherical:{limits:{radius:{min:.1,max:.1}}},target:{value:null,smoothing:.01},zoom:{sensitivity:.006},drag:{enable:!0}}},Fa=function(){function e(t){Ai()(this,e),this.camera=t.camera,this.canvas=t.canvas,this.smallestSide=Math.min(this.canvas.width,this.canvas.height),this.curTouchId=0,this.isMobile=(0,we.tq)(),this.viewPosition=new Lt.Pa4,this.setView()}return Ii()(e,[{key:"setView",value:function(){var e=this;this.view={},this.view.mode="thridPerson",this.view.spherical={},this.view.spherical.value=new Lt.$V(8,.45*Math.PI,.15*Math.PI),this.view.spherical.last=this.view.spherical.value.clone(),this.view.spherical.limits={},this.view.spherical.limits.enable=!0,this.view.spherical.limits.phi={min:.1*Math.PI,max:.68*Math.PI},this.view.spherical.limits.theta={min:-Math.PI,max:Math.PI},this.view.spherical.smoothed=this.view.spherical.value.clone(),this.view.spherical.smoothing=.004,this.view.spherical.offset=0,this.view.drag={},this.view.drag.delta={},this.view.drag.delta.x=0,this.view.drag.delta.y=0,this.view.drag.previous={},this.view.drag.previous.x=0,this.view.drag.previous.y=0,this.view.drag.sensitivity=6,this.view.drag.resistance={x:.5,y:.15},this.view.drag.alternative=!1,this.view.drag.enable=!0,Me.NO.islandscape||(this.view.spherical.smoothing=.005,this.view.drag.sensitivity=15),this.view.zoom={},this.view.zoom.sensitivity=.01,this.view.zoom.delta=0,this.view.target={},this.view.target.value=new Lt.Pa4(0,1,0),this.view.target.smoothed=this.view.target.value.clone(),this.view.target.smoothing=1e-4,this.view.target.limits={},this.view.target.limits.x={min:-4,max:4},this.view.target.limits.y={min:1,max:6},this.view.target.limits.z={min:-4,max:4},this.view.character={},this.characterUp=new Lt.Pa4(0,2,0),this.view.down=function(t,n){if(y.Z.emit(b.Z.CLICK_ANY_WHERE),!Me.NO.islandscape){var i=[n,t];t=i[0],n=i[1]}e.view.drag.previous.x=t,e.view.drag.previous.y=n},this.view.move=function(t,n){if(Me.NO.islandscape)e.view.drag.delta.x+=(t-e.view.drag.previous.x)*e.view.drag.resistance.x,e.view.drag.delta.y+=(n-e.view.drag.previous.y)*e.view.drag.resistance.y;else{var i=[n,t];t=i[0],n=i[1],e.view.drag.delta.x+=(t-e.view.drag.previous.x)*e.view.drag.resistance.x,e.view.drag.delta.y+=-(n-e.view.drag.previous.y)*e.view.drag.resistance.y}e.view.drag.previous.x=t,e.view.drag.previous.y=n},this.view.up=function(e,t){},this.view.onMouseDown=function(t){if(t.preventDefault(),e.view.drag.enable){if(e.isMobile&&!t.clientX){if(!(t.changedTouches&&t.changedTouches.length>0))return;t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY}e.view.drag.alternative=2===t.button||1===t.button||t.ctrlKey||t.shiftKey,void 0!==t.clientX&&void 0!==t.clientY&&(e.view.down(t.clientX,t.clientY),window.addEventListener("mouseup",e.view.onMouseUp),window.addEventListener("mousemove",e.view.onMouseMove))}},this.view.onMouseUp=function(t){if(t.preventDefault(),e.view.drag.enable){if(e.isMobile&&!t.clientX){if(!(t.changedTouches&&t.changedTouches.length>0))return;t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY}void 0!==t.clientX&&void 0!==t.clientY&&(e.view.up(t.clientX,t.clientY),window.removeEventListener("mouseup",e.view.onMouseUp),window.removeEventListener("mousemove",e.view.onMouseMove))}},this.view.onMouseMove=function(t){if(t.preventDefault(),e.view.drag.enable){if(e.isMobile&&!t.clientX){if(!(t.changedTouches&&t.changedTouches.length>0))return;t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY}void 0!==t.clientX&&void 0!==t.clientY&&e.view.move(t.clientX,t.clientY)}},this.canvas.addEventListener("mousedown",this.view.onMouseDown),this.getLengthToRightTop=function(e,t){if(!Me.NO.islandscape){var n=[t,e];e=n[0],t=n[1]}return Math.pow(Math.abs(window.innerWidth-e),2)+Math.pow(Math.abs(0-t),2)},this.view.onTouchStart=function(t){if(t.preventDefault(),t.touches.length>1)for(var n=1/0,i=0;i<t.touches.length;i++){var a=t.touches[i].clientX||t.touches[i].changedTouches&&t.touches[i].changedTouches[0].clientX,r=t.touches[i].clientY||t.touches[i].changedTouches&&t.touches[i].changedTouches[0].clientY;if(void 0===a||void 0===r)return;var s=e.getLengthToRightTop(a,r);s<n&&(n=s,e.curTouchId=i)}t.touches&&t.touches[e.curTouchId]&&(e.view.down(t.touches[e.curTouchId].clientX,t.touches[e.curTouchId].clientY),e.canvas.addEventListener("touchend",e.view.onTouchEnd),e.canvas.addEventListener("touchmove",e.view.onTouchMove))},this.view.onTouchMove=function(t){if(t.preventDefault(),t.touches&&t.touches[e.curTouchId]){var n=t.touches[e.curTouchId].clientX||t.touches[e.curTouchId].changedTouches&&t.touches[e.curTouchId].changedTouches[0].clientX,i=t.touches[e.curTouchId].clientY||t.touches[e.curTouchId].changedTouches&&t.touches[e.curTouchId].changedTouches[0].clientY;void 0!==n&&void 0!==i&&e.view.move(n,i)}},this.view.onTouchEnd=function(t){t.preventDefault(),e.curTouchId=0,e.view.up(),e.canvas.removeEventListener("touchend",e.view.onTouchEnd),e.canvas.removeEventListener("touchmove",e.view.onTouchMove)},this.canvas.addEventListener("touchstart",this.view.onTouchStart),this.view.onContextMenu=function(e){e.preventDefault()},window.addEventListener("contextmenu",this.view.onContextMenu),this.view.zoomIn=function(t){e.view.zoom.delta+=t},this.view.onWheel=function(t){var n=Ua()(t);e.view.zoomIn(n.pixelY)},this.canvas.addEventListener("mousewheel",this.view.onWheel,{passive:!1}),this.canvas.addEventListener("wheel",this.view.onWheel,{passive:!1}),this.setConfig()}},{key:"setConfig",value:function(){this.viewConfig=ja;var e=_.cloneDeep(this.viewConfig.default);this.view=_.merge(this.view,e)}},{key:"setDefaultMode",value:function(){var e=_.cloneDeep(this.viewConfig.default);this.view=_.merge(this.view,e),this.view.character={}}},{key:"setThirdPersonMode",value:function(e,t){var n=_.cloneDeep(this.viewConfig.thridPerson);this.view=_.merge(this.view,n),e.visible=!0,this.view.character=e,t&&this.forceToTargetBack(e)}},{key:"setFirstPersonMode",value:function(e,t){var n=_.cloneDeep(this.viewConfig.firstPerson);this.view=_.merge(this.view,n),this.view.character=e,t&&this.forceToTargetBack(e)}},{key:"forceToTargetBack",value:function(e){e=e||this.view.character,this.view.target.value=e.position,this.view.spherical.value.theta=(e.rotation.y+Math.PI)%(2*Math.PI),this.setNavigationWithoutSmooth()}},{key:"setNavigationWithoutSmooth",value:function(){this.view.target.smoothed=this.view.target.value.clone(),this.view.spherical.smoothed=this.view.spherical.value.clone()}},{key:"viewRadius",get:function(){return this.view.spherical.value.radius},set:function(e){this.view.spherical.value.radius=e}},{key:"update",value:function(e){if(this.view.spherical.value.radius+=this.view.zoom.delta*this.view.zoom.sensitivity,this.view.spherical.value.radius=Math.min(Math.max(this.view.spherical.value.radius,this.view.spherical.limits.radius.min),this.view.spherical.limits.radius.max),"thridPerson"===this.view.mode){var t=Lt.M8C.mapLinear(this.view.spherical.value.phi,Math.PI/2+.1,this.view.spherical.limits.phi.max,this.view.spherical.limits.radius.min,1);this.view.spherical.value.radius=Math.min(this.view.spherical.value.radius,t,this.view.spherical.limits.radius.max)}if(!this.isMobile&&this.view.drag.alternative&&"default"==this.view.mode){var n=new Lt.Pa4(0,1,0),i=new Lt.Pa4(-1,0,0);n.applyQuaternion(this.camera.modes.default.camera.quaternion),i.applyQuaternion(this.camera.modes.default.camera.quaternion),n.multiplyScalar(.08*this.view.drag.delta.y),i.multiplyScalar(.08*this.view.drag.delta.x),this.view.target.value.add(n),this.view.target.value.add(i)}else this.view.spherical.value.theta-=this.view.drag.delta.x*this.view.drag.sensitivity/this.smallestSide,this.view.spherical.value.phi-=this.view.drag.delta.y*this.view.drag.sensitivity/this.smallestSide,this.view.spherical.value.phi=Math.min(Math.max(this.view.spherical.value.phi,this.view.spherical.limits.phi.min),this.view.spherical.limits.phi.max);if(this.view.drag.delta.x=0,this.view.drag.delta.y=0,this.view.zoom.delta=0,this.view.character&&"default"!==this.view.mode){var a=this.view.character.position.clone().add(this.characterUp);this.view.target.value=a.clone()}var r=this.view.spherical.value.theta-this.view.spherical.last.theta;r>1.95*Math.PI?this.view.spherical.value.theta-=2*Math.PI:r<1.95*-Math.PI&&(this.view.spherical.value.theta+=2*Math.PI),this.view.spherical.smoothed.radius+=(this.view.spherical.value.radius-this.view.spherical.smoothed.radius)*this.view.spherical.smoothing*e,this.view.spherical.smoothed.theta+=(this.view.spherical.value.theta-this.view.spherical.smoothed.theta)*this.view.spherical.smoothing*e,this.view.spherical.smoothed.phi+=(this.view.spherical.value.phi-this.view.spherical.smoothed.phi)*this.view.spherical.smoothing*e,this.view.target.smoothed.x+=(this.view.target.value.x-this.view.target.smoothed.x)*this.view.target.smoothing*e,this.view.target.smoothed.y+=(this.view.target.value.y-this.view.target.smoothed.y)*this.view.target.smoothing*e,this.view.target.smoothed.z+=(this.view.target.value.z-this.view.target.smoothed.z)*this.view.target.smoothing*e,this.viewPosition.setFromSpherical(this.view.spherical.smoothed),this.viewPosition.add(this.view.target.smoothed),this.camera.modes.default.camera.position.copy(this.viewPosition),this.camera.modes.default.camera.lookAt(this.view.target.smoothed),this.camera.modes.default.camera.updateMatrixWorld(),this.view.spherical.last.theta=this.view.spherical.value.theta,this.view.spherical.last.phi=this.view.spherical.value.phi}}]),e}(),Ya=function(){function e(t){Ai()(this,e),this.canvas=t.canvas,window.debug3D&&(this.debugFolder=Ni.addFolder({title:"",expanded:!1})),this.mode="default",this.cameraView="thridPerson",this.setCamera(),this.setModes(),this.setNavigation(),this.setNavigateModeHandler=this.setNavigateMode.bind(this),y.Z.on(b.Z.R2T_CHANGE_VIEW,this.setNavigateModeHandler)}return Ii()(e,[{key:"setNavigation",value:function(){this.navigation=new Fa({camera:this,canvas:this.canvas})}},{key:"setNavigateMode",value:function(e,t){var n=this;if(this.camera.far=Ho.sceneConfig.camera.far,this.camera.fov=Ho.sceneConfig.camera.fov,this.camera.layers.enable(fa),this.camera.layers.enable(ha),"firstPerson"===e&&this.characterTarget){this.navigation.setFirstPersonMode(this.characterTarget,t);var i=setTimeout((function(){clearTimeout(i),n.camera.layers.disable(ha)}),250)}else"thridPerson"===e&&this.characterTarget?this.navigation.setThirdPersonMode(this.characterTarget,t):(this.camera.far=1200,this.navigation.setDefaultMode());this.cameraView=e,this.camera.updateProjectionMatrix()}},{key:"setCamera",value:function(){var e=this,t=(0,we.c0)().view.size,n=Ho.sceneConfig.camera;this.camera=new Lt.cPb(n.fov,t.width/t.height,n.near,n.far),this.camera.rotation.reorder("YXZ"),this.camera.layers.enable(fa),this.camera.layers.enable(ha),this.camera.updateMatrixWorld(),this.debugFolder&&this.debugFolder.addInput(this.camera,"fov",{min:10,max:135,step:1}).on("change",(function(t){e.camera.updateProjectionMatrix()}))}},{key:"initialize",value:function(e){this.canvas=e}},{key:"setModes",value:function(){var e=this;if(this.modes={},this.modes.default={},this.modes.default.camera=this.camera.clone(),this.modes.default.camera.rotation.reorder("YXZ"),this.debugFolder){this.debugFolder.addInput({mode:"thridPerson",navRadius:5},"mode",{options:{"":"default","":"thridPerson","":"firstPerson"},label:""}).on("change",(function(t){e.setNavigateMode(t.value)}))}}},{key:"setCharacter",value:function(e){this.characterTarget=e}},{key:"resize",value:function(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.navigation.smallestSide=Math.min(e,t)}},{key:"update",value:function(e){this.navigation.update(e),this.camera.position.copy(this.modes[this.mode].camera.position),this.camera.quaternion.copy(this.modes[this.mode].camera.quaternion)}},{key:"destroy",value:function(){y.Z.off(b.Z.R2T_CHANGE_VIEW,this.setNavigateModeHandler)}}]),e}(),Ga=n(71180),Ha=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n);var i={color:"#594534",strength:57},a=new Map([["uColor",new Lt.xWb(new Lt.Ilk(i.color))],["uStrength",new Lt.xWb(i.strength)]]);if(e=t.call(this,"DepthEffect","#define GLSLIFY 1\nuniform vec3 uColor;\nuniform float uStrength;\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\n\n\tvec3 finalColor = inputColor.rgb + uColor * pow(depth, uStrength);\n\t// vec3 finalColor = inputColor.rgb * uColor * pow(depth, uStrength);\n\toutputColor = vec4( finalColor , inputColor.a);\n\t// outputColor = vec4(vec3(pow(depth, uStrength)), inputColor.a);\n\n}",{blendFunction:Ga.YQ.Normal,attributes:Ga.VB.DEPTH,uniforms:a}),window.debug3D){var r=Ni.addFolder({title:" - ",expanded:!1});r.addInput(i,"color",{view:"color",label:""}).on("change",(function(){a.get("uColor").value.set(i.color)})),r.addInput(i,"strength",{min:0,max:200,step:1,label:""}).on("change",(function(){a.get("uStrength").value=i.strength}))}return e}return Ii()(n)}(Ga.Qm),Za=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n);var i={amount:0,strength:.087},a=new Map([["uAmount",new Lt.xWb(i.amount)],["uStrength",new Lt.xWb(i.strength)]]);if(e=t.call(this,"FilmEffect","#define GLSLIFY 1\nuniform float uAmount;\nuniform float uStrength;\n\nfloat random(vec2 p) {\n\tvec2 K1 = vec2(23.14069263277926, // e^pi (Gelfond's constant)\n\t2.665144142690225 // 2^sqrt(2) (GelfondSchneider constant)\n\t);\n\treturn fract(cos(dot(p, K1)) * 12345.6789);\n}\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n\tvec2 uvRandom = uv;\n\tuvRandom.y *= random(vec2(uvRandom.y, uAmount));\n\n\tvec3 finalColor = inputColor.rgb;\n\tfinalColor += random(uvRandom) * uStrength;\n\n\toutputColor = vec4(finalColor, inputColor.a);\n}",{blendFunction:Ga.YQ.Normal,uniforms:a}),window.debug3D){var r=Ni.addFolder({title:" - ",expanded:!1}),s=e.blendMode;r.addInput(s,"blendFunction",{view:"list",options:Ga.YQ}).on("change",(function(e){s.blendFunction=Number(e.value)})),r.addInput(i,"strength",{min:0,max:1,step:.001,label:""}).on("change",(function(){a.get("uStrength").value=i.strength}))}return e}return Ii()(n,[{key:"render",value:function(){this.uniforms.get("uAmount").value+=.01}}]),n}(Ga.Qm),Ka=Ii()((function e(t,n,i){var a=this;if(Ai()(this,e),this.effect=new Ga.V$(t,n,i),this.effect.ignoreBackground=!0,this.effect.addSelection=function(e){var t=a.effect.selection;null!==e&&t.toggle(e)},window.debug3D){var r=Ni.addFolder({title:" - ",expanded:!1}),s=this.effect,o=s.blendMode;r.addInput(s,"intensity",{min:0,max:10,step:.001,label:""}),r.addInput(s.mipmapBlurPass,"radius",{min:0,max:1,step:.001,label:""}),r.addInput(s.luminanceMaterial,"threshold",{min:0,max:1,step:.001,label:""}),r.addInput(s.luminanceMaterial,"smoothing",{min:0,max:1,step:.001,label:""}),r.addInput(o.opacity,"value",{min:0,max:1,step:.01,label:""})}return this.effect})),Va=function(){function e(t){Ai()(this,e),this.renderer=t.renderer,this.scene=t.scene,this.camera=t.camera,this.performanceConfig=qi[ji.Z.level],this.setDebug(),this.renderPass=new Ga.CD(this.scene,this.camera),this.antialiasEffect=new Ga.fY,this.antialiasEffect.edgeDetectionMaterial.edgeDetectionThreshold=.05,this.depthEffect||(this.depthEffect=new Ha),this.filmEffect||(this.filmEffect=new Za),this.bloomEffect||(this.bloomEffect=new Ka(this.scene,this.camera,{blendFunction:Ga.YQ.ADD,mipmapBlur:!0,luminanceThreshold:.279,luminanceSmoothing:.344,intensity:.728,radius:.8})),this.setComposer()}return Ii()(e,[{key:"setComposer",value:function(){this.composer=new Ga.xC(this.renderer),this.composer.addPass(this.renderPass)}},{key:"setNullPass",value:function(){this.composer.removeAllPasses(),this.composer.addPass(this.renderPass),this.renderer.outputEncoding=Lt.knz}},{key:"setNormalPass",value:function(){this.composer.removeAllPasses(),this.composer.addPass(this.renderPass),this.normalPass?this.composer.addPass(this.normalPass):((0,we.tq)()?this.normalPass=new Ga.H5(this.camera,this.depthEffect,this.bloomEffect,this.filmEffect):this.normalPass=new Ga.H5(this.camera,this.antialiasEffect,this.depthEffect,this.bloomEffect,this.filmEffect),this.composer.addPass(this.normalPass),this.renderer.outputEncoding=Lt.rnI)}},{key:"update",value:function(){this.composer.render(),this.filmEffect&&this.filmEffect.render()}},{key:"resize",value:function(e,t){this.composer&&this.composer.setSize(e,t)}},{key:"setDebug",value:function(){window.debug3D}},{key:"dispose",value:function(){}}]),e}(),za=n(95870),Wa=n.n(za),qa=function(){function e(t){var n=this;if(Ai()(this,e),di()(this,"onResizeHandler",(function(e){var t=window.innerWidth,i=Wa()();if(Me.NO.islandscape||(t=Wa()(),i=window.innerWidth),!(0,we.tq)())if(t>2048){var a=qi[ji.Z.level],r=Math.min(window.devicePixelRatio,a.maxPixelRatio)*(2048/t);r=Math.max(r,1),n.renderer.setPixelRatio(r)}else{var s=qi[ji.Z.level],o=Math.min(window.devicePixelRatio,s.maxPixelRatio);n.renderer.setPixelRatio(o)}n.resize(t+1,i+1)})),di()(this,"createDebug",(function(){window.debug3D&&(n.debug=Ni)})),di()(this,"removeDebug",(function(){window.debug3D})),di()(this,"createEnv",(function(){var e=(0,we.c0)(),t=qi[ji.Z.level],i=e.scene,a=e.render,r=e.view,s=i.fog,o=i.background;n.scene=new Lt.xsS,n.scene.background=new Lt.Ilk(o);var l=s.enable,u=s.options;l&&(n.scene.fog=new Lt.ybr(new Lt.Ilk(u.color),u.near,u.far));var c=a.init,d=a.physicallyCorrectLights,h=a.autoClear,f=a.outputEncoding,p=a.toneMapping,m=a.toneMappingExposure,v=a.maxPixelRatio;a.shadowEnabled;if(c.antialias=!1,n.renderer=new Lt.CP7(I()(I()({},c),{},{canvas:n.canvas,alpha:!0})),n.renderer.setClearColor(0,1),n.renderer.setSize(r.size.width,r.size.height),n.renderer.physicallyCorrectLights=d,n.renderer.autoClear=h,n.renderer.info.autoReset=!window.debug3D,n.renderer.outputEncoding=f,n.renderer.toneMapping=p,n.renderer.toneMappingExposure=m,n.renderer.setPixelRatio(Math.min(window.devicePixelRatio,t.maxPixelRatio)),n.renderer.debug.checkShaderErrors=window.debug3D,window.isWebGL2=n.renderer.capabilities.isWebGL2,n.maxPixelRatio=v,window.debug3D){var g=Ni.addFolder({title:"",expanded:!1});g.addInput(n.renderer,"toneMapping",{options:{No:Lt.uL9,Linear:Lt.EoG,Reinhard:Lt.CdI,Cineon:Lt.YGz,ACESFilmic:Lt.LY2}}).on("change",(function(){n.renderer.toneMapping=Number(n.renderer.toneMapping)})),g.addInput(n.renderer,"toneMappingExposure",{min:0,max:5,step:.001})}})),e.instance)return e.instance;e.instance=this,this.canvas=t,this.create()}return Ii()(e,[{key:"create",value:function(){var e=this;this.createDebug(),this.createEnv(),this.createCamera(),this.setPasses(),window.addEventListener("resize",this.onResizeHandler),window.addEventListener("orientationchange",this.onResizeHandler,!1),y.Z.on(b.Z.R2T_ROTATE_SCREEN,this.onResizeHandler),this.onClearHandler=this.clear.bind(this),y.Z.on(b.Z.T2T_CLEAR_RENDERER,this.onClearHandler),window.debug3D&&(this.stats=new Na.Z,document.querySelector(".scene3d-container").appendChild(this.stats.dom),this.stats.dom.style.top="150px"),this.resource=ia.getInstance(),setTimeout((function(){e.onResizeHandler()}),100)}},{key:"createCamera",value:function(){this.viewer=new Ya({canvas:this.canvas})}},{key:"resize",value:function(e,t){this.viewer.resize(e,t),this.renderer.setSize(e,t),this.passes.resize(e,t)}},{key:"update",value:function(e){this.passes&&this.passes.update(),this.viewer.update(e),window.debug3D&&(this.stats.update(),y.Z.emit(b.Z.DEBUG_INFO,this.renderer.info),this.renderer.info.reset())}},{key:"setPasses",value:function(){this.passes=new Va({renderer:this.renderer,scene:this.scene,camera:this.viewer.camera})}},{key:"reset",value:function(){for(this.renderer.renderLists.dispose();this.scene.children.length;){var e=this.scene.children[0];e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose(),this.scene.remove(e)}}},{key:"clear",value:function(){this.renderer.clear()}},{key:"dispose",value:function(){this.reset(),this.renderer.dispose(),this.renderer.forceContextLoss(),this.renderer.domElement=null,this.renderer=null,this.canvas=null,this.removeDebug(),this.stats&&document.body.removeChild(this.stats.dom),window.removeEventListener("resize",this.onResizeHandler),y.Z.off(b.Z.T2T_CLEAR_RENDERER,this.onClearHandler)}}],[{key:"getInstance",value:function(t){return e.instance?(t&&(e.instance.canvas=t),e.instance):e.instance=new e(t)}}]),e}();di()(qa,"instance",void 0);var Xa=function(){function e(t,n){Ai()(this,e),this.canvas=t,this.config=n,this.sceneId=n.id,this.clickMeshList=[],this.initialize(),this.resource=new ia,this.preloadAssets()}return Ii()(e,[{key:"initialize",value:function(){this.sceneRender=qa.getInstance(this.canvas),this.setCameraInfo()}},{key:"setPasses",value:function(){this.sceneRender.passes.setNormalPass(),this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=.087}},{key:"setCameraInfo",value:function(){var e=Ho.sceneConfig.camera,t=e.originPos,n=e.originTarget,i=e.fov,a=e.near,r=e.far,s=(e.controls,this.sceneRender.viewer.camera);s.fov=i,s.near=a,s.far=r,s.position.copy(t),s.lookAt(n),s.updateProjectionMatrix(),s.updateMatrix()}},{key:"preloadAssets",value:function(){var e=this;y.Z.emit(b.Z.SHOW_LOADING),y.Z.once(b.Z.EVT_SCENE_RES_READY,(function(){e.onLoaded()})),this.resource.loadGroup(this.config.assetsName)}},{key:"onLoaded",value:function(){zi.getInstance().start(),this.setPasses(),Ho.sceneConfig.type===Pt&&y.Z.emit(b.Z.VISIBLE_VENUE,{visible:!0,venue_id:this.sceneId})}},{key:"addPlayer",value:function(){var e=Gi.Z.userInfo;this.character=La.create("main",e),this.character.updateDressup(Gi.Z.userInfo.ImageInfoModel,Gi.Z.userInfo.ImageInfoParts),this.sceneRender.scene.add(this.character),Yi.add(e.UserId,this.character);var t,n=Ho.sceneConfig,i=n.originPos,a=n.originRotation,r=6*(Math.random()-.5),s=6*(Math.random()-.5),o=window.localStorage.getItem("last_position");if(o&&(t=(t=o.split("_")).map((function(e){return Number(e)}))),t&&t[0]===Ho.currentId){window.localStorage.removeItem("last_position");var l=new Lt.Pa4(t[1],t[2],t[3]),u=t[4];this.character.resetPosAndRotation(l,u)}else if(i instanceof Array){var c=Math.floor(Math.random()*i.length),d=i[c];d.x+=r,d.z+=s;var h=a[c];this.character.resetPosAndRotation(d,h)}else{var f=new Lt.Pa4(i.x+r,i.y,i.z+s);this.character.resetPosAndRotation(f,a)}this.sceneRender.viewer.setCharacter(this.character),this.sceneRender.viewer.setNavigateMode(this.sceneRender.viewer.cameraView,!0),this.character.quaternion.copy(this.character.targetQuaternion),this.sceneCollision&&this.sceneCollision.addResolver(new Ra(this.character)),Zo.setConnectMode("connect"),this.goOtherSideHandler=this.goOtherSide.bind(this),y.Z.on(b.Z.R2T_GO_SIDE,this.goOtherSideHandler),this.characterMessageHandler=this.characterMessage.bind(this),y.Z.on(b.Z.R2T_SEND_MESSAGE,this.characterMessageHandler),this.onSavePositionHandler=this.onSavePosition.bind(this),y.Z.on(b.Z.R2T_WECHAT_AUTH,this.onSavePositionHandler)}},{key:"onSavePosition",value:function(){var e=Ho.currentId,t=this.character.position,n=t.x,i=t.y,a=t.z,r=this.character.rotation.y;window.localStorage.setItem("last_position","".concat(e,"_").concat(n,"_").concat(i,"_").concat(a,"_").concat(r))}},{key:"addNPC",value:function(){}},{key:"addPickHelper",value:function(){var e=this,t=this.sceneRender,n=t.viewer,i=t.canvas,a=[];this.clickMeshList&&this.clickMeshList.length&&(a=a.concat(this.clickMeshList)),this.pickHelper=new oa(n.camera,i,a,(function(t,n){e.clickCallBack(t,n)}),(function(t,n){e.moveCallBack(t,n)}))}},{key:"addSkyBox",value:function(){this.sceneRender.scene.background=new Lt.Ilk(0)}},{key:"clickCallBack",value:function(e,t){if(e instanceof Lt.TUv){for(var n,i,a,r,s,o=5,l=e;o>0&&l.parent;){if(l.characterId){n=l.characterId,i=l.characterName,a=l.characterConfig.type,r=l.skinId,s=l.sharePhone;break}l=l.parent,o--}if(n){if(n===Gi.Z.userInfo.UserId)return;y.Z.emit(b.Z.CHARACTER_CLICK,{id:n,name:i,sex:a,skin:r,sharePhone:s})}}}},{key:"characterTickHandler",value:function(e){var t=this;if(this.character){e/=1e3,Yi.update(e);var n=Ho.sceneConfig.camera.clipDistance,i=this.sceneRender.viewer.camera.position;Yi.getAll().forEach((function(e){var a=Math.abs(e.position.x-i.x)>n||Math.abs(e.position.z-i.z)>n,r=Math.abs(e.position.x-i.x)>25||Math.abs(e.position.z-i.z)>25;a?e.visible=!1:(e.collisionWithObjects(t.terrain.allCheckObjects),e.visible=!0),r?e.hideNickName():e.showNickName()})),this.sceneCollision&&this.sceneCollision.update();var a=new Ta;for(var r in a.materials)a.materials[r].updateNormalUniforms(e)}}},{key:"connectMultiplyService",value:function(){Zo.startReceiveMsg(),this.joinSceneRequest()}},{key:"goOtherSide",value:function(e,t){var n=this;if(this.character){var i=Yi.get(e);if(i)this.character.teleportTo({target:i.position,isSend:!0});else{if(t)return;y.Z.once(b.Z.SOCKET_REJOINSCENE,(function(){n.goOtherSide(e,!0)})),y.Z.emit(b.Z.SOCKET_RECONNECTED)}}}},{key:"characterMessage",value:function(e){var t=Yi.get(e.id);t&&t.showChatBubble(e.text)}},{key:"joinSceneRequest",value:function(){if(this.character){var e={X:this.character.position.x,Z:this.character.position.z,DeltaRotation:this.character.rotation.y,TargetX:this.character.position.x,TargetZ:this.character.position.z,MoveSpeed:this.character.options.forwardSpeed,StartTime:0,PushTime:0};Zo.joinScene({SceneType:this.sceneId,LocationInfo:e})}}},{key:"removeAllCharacter",value:function(){var e=this;this.character&&(this.sceneRender.scene.remove(this.character),Yi.remove(this.character.characterId),this.character.dispose(),this.character=null,this.sceneCollision&&this.sceneCollision.removeAllResolvers()),Yi.getAllByType("main").forEach((function(t){e.sceneRender.scene.remove(t)})),Yi.clear()}},{key:"collideHandler",value:function(){this.sceneCollision=new Da(this.sceneRender.scene)}},{key:"update",value:function(e){this.sceneRender.update(e),this.insidePortal&&this.insidePortal.update(e)}},{key:"dispose",value:function(){Ho.sceneConfig.type===Pt&&y.Z.emit(b.Z.VISIBLE_VENUE,{visible:!1}),this.goOtherSideHandler&&y.Z.off(b.Z.R2T_GO_SIDE,this.goOtherSideHandler),this.characterMessageHandler&&y.Z.off(b.Z.R2T_SEND_MESSAGE,this.characterMessageHandler),this.onSavePositionHandler&&y.Z.off(b.Z.R2T_WECHAT_AUTH,this.onSavePositionHandler),this.clickMeshList=null,Zo.stopReceiveMsg(),this.sceneRender.reset(),this.pickHelper&&this.pickHelper.dispose(),this.resource.deleteGroup(this.config.assetsName),this.sceneRender.scene.environment=null,this.removeAllCharacter(),this.screenButtonModel&&Fi.getInstance().disposeObject(this.screenButtonModel,this.sceneRender.scene)}}]),e}(),Qa=function(){function e(){Ai()(this,e),this.bgm=null,this.bgmId=null,this.effectMap={}}return Ii()(e,[{key:"createBGM",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.bgm&&this.bgmId!==e&&(this.bgm.pause(),this.bgm.currentTime=0),this.bgm=new Audio(t),this.bgm.loop=n,this.bgmId=e,this.bgm}},{key:"createEffect",value:function(e,t){return this.effectMap[e]||(this.effectMap[e]=new Audio(t)),this.effectMap[e]}},{key:"playEffect",value:function(e){if(!this.effectMap[e])return null;this.effectMap[e].play()}},{key:"stopEffect",value:function(e){if(!this.effectMap[e])return null;this.effectMap[e].pause(),this.effectMap[e].currentTime=0}},{key:"getEffect",value:function(e){return this.effectMap[e]?this.effectMap[e]:null}},{key:"getCurrentBgm",value:function(){return this.bgm,this.bgm}},{key:"playBGM",value:function(){this.bgm&&this.bgm.play().catch((function(e){}))}},{key:"pauseBGM",value:function(){this.bgm&&this.bgm.pause()}},{key:"stopBGM",value:function(){this.bgm&&(this.bgm.pause(),this.bgm.currentTime=0,this.bgm=null)}},{key:"muteBGM",value:function(e){this.bgm&&(this.bgm.muted=e)}},{key:"disposeBGM",value:function(){this.bgm&&(this.bgm.pause(),this.bgm.currentTime=0,this.bgm=null)}},{key:"disposeEffects",value:function(){for(var e in this.effectMap)this.effectMap[e].pause(),this.effectMap[e].currentTime=0,delete this.effectMap[e]}},{key:"disposeAll",value:function(){this.disposeBGM(),this.disposeEffects()}}]),e}();di()(Qa,"AUDIO_TYPE",{BGM:1,EFFECT:2});var Ja=new Qa,$a=function(){function e(){Ai()(this,e),this.setBGM(),this.setEvent(),this.bgm.pause()}return Ii()(e,[{key:"setBGM",value:function(){var e=Math.floor(2*Math.random())+1;this.bgm=Ja.createBGM("bgm_main",n(20283)("./main_square_bgm_".concat(e,".mp3"))),this.bgm.preload=!0}},{key:"play",value:function(){"false"!==localStorage.getItem("bac_music")&&Ja.playBGM()}},{key:"pause",value:function(){Ja.pauseBGM()}},{key:"mute",value:function(e){Ja.muteBGM(e)}},{key:"setEvent",value:function(){this.onPlayBGMHandler=this.play.bind(this),y.Z.on(b.Z.FIRST_CLICK,this.onPlayBGMHandler),y.Z.on(b.Z.MAIN_SQUARE_BGM_PLAY,this.onPlayBGMHandler),this.onPauseBGMHandler=this.pause.bind(this),y.Z.on(b.Z.MAIN_SQUARE_BGM_PAUSE,this.onPauseBGMHandler)}},{key:"removeEvent",value:function(){y.Z.off(b.Z.FIRST_CLICK,this.onPlayBGMHandler),y.Z.off(b.Z.MAIN_SQUARE_BGM_PLAY,this.onPlayBGMHandler),y.Z.off(b.Z.MAIN_SQUARE_BGM_PAUSE,this.onPauseBGMHandler)}},{key:"destroy",value:function(){this.removeEvent(),Ja.stopBGM()}}]),e}(),er=n(32699),tr=n.n(er);function nr(e){var t={},n={vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <common>\n\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif\n\n#include <skinning_pars_vertex>\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n    #include <skinbase_vertex>\n    #include <begin_vertex>\n    #include <skinning_vertex>\n\t#include <project_vertex>\n    \n    vUv = uv;\n\n    #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\t    vUv2 = uv2;\n    #endif\n\n    #include <virtualverse_vertex>\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif\n\n#ifdef USE_COLOR\n    uniform vec3 uColor;\n#endif\n\n#ifdef USE_MAP\n    uniform sampler2D map;\n    uniform vec2 mapRepeat;\n#endif\n\n#ifdef USE_LIGHTMAP\n    uniform sampler2D lightMap;\n#endif\n\n#ifdef USE_ALPHAMAP\n    uniform sampler2D tAlphaMap;\n    uniform vec2 alphaMapRepeat;\n#endif\n\n#include <common>\n#include <aomap_pars_fragment>\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendColorDodge(float base, float blend) {\n\treturn (blend==1.0)?blend:min(base/(1.0-blend),1.0);\n}\n\nvec3 blendColorDodge(vec3 base, vec3 blend) {\n\treturn vec3(blendColorDodge(base.r,blend.r),blendColorDodge(base.g,blend.g),blendColorDodge(base.b,blend.b));\n}\n\nvec3 blendColorDodge(vec3 base, vec3 blend, float opacity) {\n\treturn (blendColorDodge(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendColorBurn(float base, float blend) {\n\treturn (blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);\n}\n\nvec3 blendColorBurn(vec3 base, vec3 blend) {\n\treturn vec3(blendColorBurn(base.r,blend.r),blendColorBurn(base.g,blend.g),blendColorBurn(base.b,blend.b));\n}\n\nvec3 blendColorBurn(vec3 base, vec3 blend, float opacity) {\n\treturn (blendColorBurn(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendVividLight(float base, float blend) {\n\treturn (blend<0.5)?blendColorBurn(base,(2.0*blend)):blendColorDodge(base,(2.0*(blend-0.5)));\n}\n\nvec3 blendVividLight(vec3 base, vec3 blend) {\n\treturn vec3(blendVividLight(base.r,blend.r),blendVividLight(base.g,blend.g),blendVividLight(base.b,blend.b));\n}\n\nvec3 blendVividLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendVividLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main() {\n\n    #include <vv_clipping_fragment>\n\n    vec4 diffuseColor = vec4(1.0);\n\n    #ifdef USE_MAP\n        vec4 texelColor = texture2D(map, vUv * mapRepeat);\n        diffuseColor *= texelColor;\n    #endif\n\n    #ifdef USE_LIGHTMAP\n        vec4 lightMapColor = texture2D(lightMap, vUv);\n        #ifdef USE_VIVI_LIGHTMAP\n            diffuseColor.rgb = blendVividLight(diffuseColor.rgb, lightMapColor.rgb);\n        #else\n            diffuseColor.rgb = blendMultiply(diffuseColor.rgb, lightMapColor.rgb);\n        #endif\n    #endif\n\n    #ifdef USE_ALPHAMAP\n        diffuseColor.a *= texture2D(tAlphaMap, vec2(vUv.x * alphaMapRepeat.x, vUv.y * alphaMapRepeat.y) ).g;\n    #endif\n\n    #ifdef USE_COLOR\n        diffuseColor.rgb *= uColor;\n    #endif\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    reflectedLight.indirectDiffuse += vec3( 1.0 );\n    \n    #include <aomap_fragment>\n    \n    reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n    gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n    #include <virtualverse_fragment>\n}",uniforms:t};delete(n=tr().merge(n,e)).map,delete n.lightMap,delete n.alphaMap,delete n.alphaMapRepeat,delete n.color,delete n.isClipping;var i=new Lt.jyz(n);return i.defines.USE_UV="",e.map&&(t.map={value:e.map},t.mapRepeat={value:e.map.repeat||new Lt.FM8(1,1)},i.defines.USE_MAP=""),e.lightMap&&(t.lightMap={value:e.lightMap},i.defines.USE_LIGHTMAP=""),e.alphaMap&&(t.tAlphaMap={value:e.alphaMap},i.defines.USE_ALPHAMAP="",t.alphaMapRepeat={value:e.alphaMapRepeat?e.alphaMapRepeat:new Lt.FM8(1,1)}),e.aoMap&&(t.aoMap={value:e.aoMap},i.defines.USE_AOMAP=""),e.color&&(t.uColor={value:new Lt.Ilk(e.color)},i.defines.USE_COLOR=""),i.defines.USE_CLIPPING=void 0===e.isClipping||e.isClipping,Fi.getInstance().replaceCommonShader(i),i}var ir=function(){function e(t){Ai()(this,e),this.debug=Ni,this.terrianObjects=[],this.dummyObjects=[],this.allCheckObjects=[],this.scene=t,this.dummyMaterial=new nr({color:"#ffffff"}),this.setDebug(),this.parseTerrain()}return Ii()(e,[{key:"parseTerrain",value:function(){var e=this;this.scene.traverse((function(t){t.isMesh&&(/floor_collision/.test(t.name)?(t.geometry.computeBoundsTree({maxLeafTris:5,strategy:parseFloat(aa.ms)}),t.geometry.boundsTree.splitStrategy=aa.ms,t.visible=!1,e.terrianObjects.push(t)):/scene_dummy/.test(t.name)&&(t.geometry.computeBoundsTree({maxLeafTris:5,strategy:parseFloat(aa.ms)}),t.geometry.boundsTree.splitStrategy=aa.ms,e.dummyObjects.push(t),t.visible=!1),!1===t.visible&&t.material&&(t.material.dispose(),t.material=e.dummyMaterial))})),this.allCheckObjects=this.terrianObjects.concat(this.dummyObjects)}},{key:"disposeTerrain",value:function(){this.scene.traverse((function(e){e.geometry&&e.geometry.disposeBoundsTree&&e.geometry.disposeBoundsTree()}))}},{key:"setDebug",value:function(){var e=this;window.debug3D&&Ni.addFolder({title:"",expanded:!1}).addButton({title:"",label:"glb"}).on("click",(function(){Fi.getInstance().uploadLocalGlb((function(t){var n=e.scene.parent;n.remove(e.scene),e.terrianObjects.length=0,e.dummyObjects.length=0,e.allCheckObjects.length=0,e.scene=t.scene,e.parseTerrain(),n.add(e.scene)}))}))}},{key:"removeDebug",value:function(){window.debug3D}},{key:"dispose",value:function(){this.scene=null,this.terrianObjects.length=0,this.dummyObjects.length=0,this.allCheckObjects.length=0,this.removeDebug(),this.debug=null}}]),e}(),ar=function(){function e(){Ai()(this,e),this.container=new Lt.Tme,this.container.matrixAutoUpdate=!1,this.mesh=null}return Ii()(e,[{key:"setModel",value:function(e){}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){!function e(t){if(t&&t.children)for(;t.children.length;){var n=t.children[0];n.children.length?e(n):(n.geometry&&(n.geometry.boundsTree&&n.geometry.disposeBoundsTree(),n.geometry.dispose(),n.geometry=null),n.material&&(n.material.dispose(),n.material.map&&n.material.map.dispose(),n.material.envMap&&n.material.envMap.dispose(),n.material.alphaMap&&n.material.alphaMap.dispose(),n.material.bumpMap&&n.material.bumpMap.dispose(),n.material.emissiveMap&&n.material.emissiveMap.dispose(),n.material.metalnessMap&&n.material.metalnessMap.dispose(),n.material.roughnessMap&&n.material.roughnessMap.dispose(),n.material.normalMap&&n.material.normalMap.dispose(),n.material.aoMap&&n.material.aoMap.dispose(),n.material=null),t.remove(n))}}(this.container),this.container=null,this.mesh=null,this.model=null,this.material=null}}]),e}(),rr=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).point=e.pos,i.sceneId=e.sceneId,i.radius=3,i.isPorting=!1,i.setModel(),i}return Ii()(n,[{key:"setModel",value:function(){}},{key:"update",value:function(e){var t=this;if(!this.isPorting){this.character=this.character||Ho.getScene().character;var n=this.point;Math.pow(n.x-this.character.position.x,2)+Math.pow(n.z-this.character.position.z,2)<this.radius*this.radius&&(this.isPorting=!0,setTimeout((function(){y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:t.sceneId})}),500))}}},{key:"dispose",value:function(){this.isPorting=!1,Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),sr=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),(i=t.call(this)).model=e.model,i.image=e.image,i.type=e.type,i.image&&Fi.instance.setThreeTexture(i.image,!0),e.video?(i.element=document.createElement("video"),i.element.setAttribute("src",e.video),i.element.setAttribute("crossOrigin","anonymous"),i.element.setAttribute("playsinline","true"),i.element.setAttribute("autoplay","true"),i.element.setAttribute("loop","true"),i.element.setAttribute("style","display: none;"),i.element.muted=void 0!==e.muted&&e.muted,i.checkInterval=setInterval((function(){i.element&&i.element.readyState===i.element.HAVE_ENOUGH_DATA&&(clearInterval(i.checkInterval),i.material.uniforms.map.value=i.texture,i.material.needsUpdate=!0,i.material.uniforms.map.value.needsUpdate=!0)}),100),document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){y.Z.emit(b.Z.FIRST_CLICK)}),{once:!0}),i.onPlayHandler=i.play.bind(ki()(i)),i.element.addEventListener("ended",i.onPlayHandler,!1),y.Z.on(b.Z.FIRST_CLICK,i.onPlayHandler),i.onMuteHandler=i.muteVideo.bind(ki()(i)),y.Z.on(b.Z.R2T_MUTE_VIDEO,i.onMuteHandler),i.element&&(i.texture=new Lt.fO1(i.element),i.texture.format=Lt.wk1,i.texture.minFilter=Lt.wem,i.texture.magFilter=Lt.wem,i.texture.generateMipmaps=!1,Fi.instance.setThreeTexture(i.texture,!0,!0))):i.texture=e.image;var a=ia.getInstance().items.venueScreenTexture;return a&&(Fi.instance.setThreeTexture(a),a.flipY=!0),i.material=new nr({map:a||i.texture,side:Lt.ehD}),i.model.traverse((function(e){e.isMesh&&(e.material=i.material,e.matrixAutoUpdate=!1)})),i.container.add(i.model),Ho.getScene().clickMeshList.push(i.container),i}return Ii()(n,[{key:"play",value:function(){this.element&&(this.element.currentTime=1,this.element.play().catch((function(e){})))}},{key:"muteVideo",value:function(e){this.element&&(this.element.muted=!!e,this.element.volume=e?0:1)}},{key:"dispose",value:function(){this.onPlayHandler&&y.Z.off(b.Z.FIRST_CLICK,this.onPlayHandler),this.element.removeEventListener("ended",this.onPlayHandler,!1),clearInterval(this.checkInterval),this.element&&(this.element.pause(),this.element.removeAttribute("src"),this.element.load(),this.element=null)}}]),n}(ar),or=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).model=e.model,i.image=e.image,i.type=e.type,i.lastType=null,i.videoUrl=e.videoUrl,i.livePlay=!1,i.originPoint=new Lt.Pa4(0,0,-117),i.checkRadius=90,i.isInArea=!1,i.image&&Fi.instance.setThreeTexture(i.image,!0,!0),i.playerErrorHandler=i.onPlayerError.bind(ki()(i)),i.playerBeginHandler=i.playLiveVideo.bind(ki()(i)),y.Z.on(b.Z.LIVE_PLAYER_ERROR,i.playerErrorHandler),y.Z.on(b.Z.LIVE_PLAYER_BEGIN,i.playerBeginHandler),"image"!==i.type&&e.video&&(i.createVideoTexture(),i.onPlayHandler=i.play.bind(ki()(i)),y.Z.on(b.Z.FIRST_CLICK,i.onPlayHandler),i.play(),i.material?i.material.uniforms.map.value=i.texture:i.material=new nr({map:i.texture}),i.material.defines.USE_LINEARMAPPING=!0,i.model.traverse((function(e){e.isMesh&&(e.material=i.material),e.matrixAutoUpdate=!1}))),(new Lt.dpR).load(Gi.Z.baseInfo.videoUrl,(function(e){Fi.instance.setThreeTexture(e,!0,!0),e.mipmaps=[],i.image=e,i.livePlay||(y.Z.emit(b.Z.MAIN_SQUARE_BGM_PLAY),i.material?i.material.uniforms.map.value=i.image:(i.material=new nr({map:i.image}),i.material.defines.USE_LINEARMAPPING=!0,i.model.traverse((function(e){e.isMesh&&(e.material=i.material),e.matrixAutoUpdate=!1}))))}),(function(e){})),i.container.add(i.model),i}return Ii()(n,[{key:"play",value:function(){this.lastType!==this.type&&("live"===this.type?(y.Z.emit(b.Z.CREATE_LIVE_PLAYER),this.element&&this.element.play().catch((function(e){}))):"video"===this.type&&y.Z.emit(b.Z.CREATE_LIVE_PLAYER,{turn_video:!0,url:this.videoUrl}),this.lastType=this.type)}},{key:"createVideoTexture",value:function(){this.element=document.getElementById("rtc-player-video-3d")||document.getElementById("rtc-player-video"),this.element&&(this.element.muted=!0,this.texture=new Lt.fO1(this.element),this.texture.format=Lt.wk1,this.texture.minFilter=Lt.wem,this.texture.magFilter=Lt.wem,this.texture.generateMipmaps=!1,Fi.instance.setThreeTexture(this.texture,!0,!0))}},{key:"onPlayerError",value:function(){this.texture&&(this.texture.dispose(),this.texture=null),this.livePlay=!1,this.material.uniforms.map.value=this.image,this.material.needsUpdate=!0}},{key:"playLiveVideo",value:function(){this.livePlay=!0,this.element&&this.texture||this.createVideoTexture(),this.material.uniforms.map.value!==this.texture&&(this.material.uniforms.map.value=this.texture)}},{key:"mute",value:function(e){this.element&&(this.element.muted=e)}},{key:"update",value:function(){var e;this.character=this.character||Ho.getScene().character,(e=Math.pow(this.originPoint.x-this.character.position.x,2)+Math.pow(this.originPoint.z-this.character.position.z,2)<this.checkRadius*this.checkRadius)!==this.isInArea&&(this.isInArea=e,y.Z.emit(b.Z.T2T_IN_SCREEN_AREA,this.isInArea))}},{key:"dispose",value:function(){y.Z.emit(b.Z.DESTROY_LIVE_PLAYER),this.image&&this.image.dispose(),this.playerErrorHandler&&y.Z.off(b.Z.LIVE_PLAYER_ERROR,this.playerErrorHandler),this.playerBeginHandler&&y.Z.off(b.Z.LIVE_PLAYER_BEGIN,this.playerBeginHandler),this.onPlayHandler&&y.Z.off(b.Z.FIRST_CLICK,this.onPlayHandler)}}]),n}(ar),lr="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vMatCapUV;\n\nuniform sampler2D tMatcap;\nuniform sampler2D tDudv;\nuniform sampler2D tAlpha;\n\nuniform float uDistortionRepeat;\nuniform float uDistortionStrength;\nuniform float uWaveSpeed;\n\nuniform float uTime;\nuniform float uPower;\nuniform float uStrength;\nuniform vec3 uColor;\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n\treturn (base+blend)/2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAverage(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\n#include <common>\n\nvoid main() {\n    vec2 distortedUv = texture2D(tDudv, vec2(vUv.x * uDistortionRepeat + uTime * uWaveSpeed, vUv.y * uDistortionRepeat)).rg * uDistortionStrength;\n    distortedUv = vUv.xy + vec2(distortedUv.x, distortedUv.y + uTime * uWaveSpeed);\n    vec2 distortion = (texture2D(tDudv, distortedUv).rg * 2.0 - 1.0) * uDistortionStrength;\n\n    vec2 uv = vMatCapUV;\n    uv.xy += distortion;\n\n    vec4 matcapColor = texture2D(tMatcap,uv);\n\n    float alpha = texture2D(tAlpha, vUv + distortion).r;\n\n    float dist = pow((length(vUv - vec2(0.5))) * 2.0, uPower);\n    gl_FragColor = vec4(matcapColor.rgb + dist * uStrength * uColor, alpha);\n}",ur="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vWorldPos;\nvarying vec3 vPosition;\nvarying vec2 vMatCapUV;\n\nvoid main() {\n\n    vUv = uv;\n    vPosition = position;\n\n    vec4 p = vec4( position, 1. );\n    vec3 e = normalize( vec3( modelViewMatrix * p ) );\n    vec3 n = normalize( normalMatrix * normal );\n\n    vec3 r = reflect( e, n );\n    float m = 2. * sqrt(\n        pow( r.x, 2. ) +\n        pow( r.y, 2. ) +\n        pow( r.z + 1., 2. )\n    );\n\n    vMatCapUV = r.xy / m + .5;\n    vWorldPos = (modelMatrix * p).xyz;\n\n    #include <begin_vertex>\n    #include <project_vertex>\n}",cr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBallModel,n=e.mainSquareCenterBallMatcapTexture,i=e.mainSquareCenterBallAlphaTexture,a=e.waterdudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:1},uDistortionStrength:{value:.05},uWaveSpeed:{value:.1},uPower:{value:5},uStrength:{value:5},uColor:{value:new Lt.Ilk("#468fff")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),dr=function(){function e(){if(Ai()(this,e),e.instance)return e.instance;e.instance=this;var t=new Lt.yGw,n=new Lt.cPb;n.layers.enable(pa),n.layers.enable(ha),n.layers.enable(da);var i={minFilter:Lt.wem,magFilter:Lt.wem,format:Lt.wk1},a=new Lt.dd2(1024,1024,i);Lt.M8C.isPowerOfTwo(1024)&&Lt.M8C.isPowerOfTwo(1024)||(a.texture.generateMipmaps=!1),this.getRenderTarget=function(){return a},this.getRenderTextureMatrix=function(){return t},this.getVirtualCamera=function(){return n}}return Ii()(e,null,[{key:"getInstance",value:function(){return e.instance?e.instance:e.instance=new e}}]),e}();di()(dr,"instance",void 0);var hr=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){var a;Ai()(this,n),a=t.call(this,e),i=i||{},a.matrixAutoUpdate=!1;var r=new Lt.JOQ,s=new Lt.Pa4,o=new Lt.Pa4,l=new Lt.Pa4,u=new Lt.yGw,c=new Lt.Pa4(0,0,-1),d=new Lt.Ltg,h=new Lt.Pa4,f=new Lt.Pa4,p=new Lt.Ltg,m=dr.getInstance(),v=m.getVirtualCamera(),g=m.getRenderTarget(),x=m.getRenderTextureMatrix();return a.isSupportReflect=Fi.getInstance().isSupportReflect(),a.onBeforeRender=function(e,t,n){if(a.isSupportReflect&&i.isRender&&(o.setFromMatrixPosition(a.matrixWorld),l.setFromMatrixPosition(n.matrixWorld),u.extractRotation(a.matrixWorld),s.set(0,1,0),s.applyMatrix4(u),h.subVectors(o,l),!(h.dot(s)>0))){h.reflect(s).negate(),h.add(o),u.extractRotation(n.matrixWorld),c.set(0,0,-1),c.applyMatrix4(u),c.add(l),f.subVectors(o,c),f.reflect(s).negate(),f.add(o),v.position.copy(h),v.up.set(0,1,0),v.up.applyMatrix4(u),v.up.reflect(s),v.lookAt(f),v.far=n.far,v.updateMatrixWorld(),v.projectionMatrix.copy(n.projectionMatrix),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(v.projectionMatrix),x.multiply(v.matrixWorldInverse),x.multiply(a.matrixWorld),r.setFromNormalAndCoplanarPoint(s,o),r.applyMatrix4(v.matrixWorldInverse),d.set(r.normal.x,r.normal.y,r.normal.z,r.constant);var m=v.projectionMatrix;p.x=(Math.sign(d.x)+m.elements[8])/m.elements[0],p.y=(Math.sign(d.y)+m.elements[9])/m.elements[5],p.z=-1,p.w=(1+m.elements[10])/m.elements[14],d.multiplyScalar(2/d.dot(p)),m.elements[2]=d.x,m.elements[6]=d.y,m.elements[10]=d.z+1-3e-4,m.elements[14]=d.w,g.texture.encoding=e.outputEncoding,a.visible=!1;var b=e.getRenderTarget(),y=e.xr.enabled,M=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(g),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,v),e.xr.enabled=y,e.shadowMap.autoUpdate=M,e.setRenderTarget(b);var w=n.viewport;void 0!==w&&e.state.viewport(w),a.visible=!0}},a}return Ii()(n,[{key:"dispose",value:function(){Fi.getInstance().disposeObject(this,this.parent)}}]),n}(Lt.Kj0),fr="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec4 vUvRefraction;\nvarying vec4 worldPosition;\n\nuniform vec3 color;\nuniform vec3 uLightColor;\nuniform sampler2D tDiffuse;\nuniform sampler2D tDudv;\nuniform sampler2D tLightMap;\nuniform sampler2D tRepeatMap;\nuniform vec2 resolution;\nuniform vec2 uDirection;\nuniform float uBluriness;\nuniform float uLightStrength;\nuniform vec2 uvOffset;\nuniform float uDistortionStrength;\nuniform float uRepeat;\nuniform float uRepeatMix;\nuniform float uReflectMix;\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n\treturn (base+blend)/2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAverage(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n    vec4 color = vec4(0.0);\n    vec2 off1 = vec2(1.411764705882353) * direction;\n    vec2 off2 = vec2(3.2941176470588234) * direction;\n    vec2 off3 = vec2(5.176470588235294) * direction;\n    color += texture2D(image, uv) * 0.1964825501511404;\n    color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n    color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n    color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n    color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n    color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n    color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n    return color;\n}\n\nfloat blendOverlay(float base, float blend) {\n    return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n    return vec3(blendOverlay(base.r, blend.r), blendOverlay(base.g, blend.g), blendOverlay(base.b, blend.b));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nvoid main() {\n    vec3 ligthmap_color = texture2D(tLightMap, vUv).rgb;\n    vec3 repeatmap_color = texture2D(tRepeatMap, vUv * uRepeat).rgb;\n    vec3 mixColor = blendAdd(ligthmap_color, repeatmap_color, uRepeatMix);\n\n    #ifndef IS_SUPPORT_REFLECT\n\n        gl_FragColor = vec4(mixColor, 1.0);\n\n    #else\n\n        vec2 distortedUv = texture2D(tDudv, vec2(vUv.x, vUv.y)).rg * uDistortionStrength;\n        distortedUv = vUv.xy + vec2(distortedUv.x, distortedUv.y);\n        vec2 distortion = (texture2D(tDudv, distortedUv).rg * 2.0 - 1.0) * uDistortionStrength;\n\n        vec4 uv = vec4(vUvRefraction);\n        uv.xy += distortion + uvOffset;\n\n        #ifdef USE_BLUR\n            vec2 uvProj = vec2(uv.x / uv.w, uv.y / uv.w);\n            vec4 base = blur13(tDiffuse, uvProj, resolution, smootherstep(uBluriness, 0.0, vUv.y) * (uDirection));\n        #else\n            vec4 base = texture2DProj(tDiffuse, uv);\n        #endif\n\n        vec3 reflect_color = blendOverlay(base.rgb, color);\n\n        mixColor = blendAverage(mixColor, reflect_color, uReflectMix);\n\n        gl_FragColor = vec4(mixColor, 0.9);\n\n    #endif\n}",pr="#define GLSLIFY 1\nuniform mat4 textureMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vUvRefraction;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec4 worldPosition;\n\nvoid main() {\n    vUv = uv;\n    vNormal = normal;\n    vPosition = position;\n    vUvRefraction = textureMatrix * vec4(position, 1.0);\n    worldPosition = modelMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",mr=Ii()((function e(t){Ai()(this,e);var n=ia.getInstance().items,i=n.flowmapTexture,a=n.perlinNoiseTexture;i.wrapS=i.wrapT=Lt.rpg,a.wrapS=a.wrapT=Lt.OoA;var r=dr.getInstance().getRenderTarget().texture,s=dr.getInstance().getRenderTextureMatrix(),o="#c8d5ff",l="#879595",u=1024,c=1024,d={color:{value:new Lt.Ilk(t.color||o),label:""},tDiffuse:{value:r,noDebug:!0},textureMatrix:{value:s,noDebug:!0},tDudv:{value:i,label:""},tLightMap:{value:t.lightMap,label:""},tRepeatMap:{value:t.repeatMap,label:""},uRepeat:{value:t.repeat||1,label:""},uReflectMix:{value:t.reflectMix||.05,label:""},uRepeatMix:{value:t.repeatMix||.5,label:""},uvOffset:{value:t.uvOffset||new Lt.FM8(.5,.08)},uDirection:{value:new Lt.FM8(1.18,1.18),label:""},uBluriness:{value:3,label:""},resolution:{value:new Lt.FM8(u,c),noDebug:!0},uLightColor:{value:new Lt.Ilk(l),label:""},uLightStrength:{value:.7,label:""},uDistortionStrength:{value:void 0!==t.distortionStrength?t.distortionStrength:.8,label:""}},h=new Lt.jyz({uniforms:d,vertexShader:pr,fragmentShader:fr});return h.defines.USE_BLUR=!0,h.defines.IS_SUPPORT_REFLECT=Fi.getInstance().isSupportReflect(),h})),vr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setGround(),e}return Ii()(n,[{key:"setGround",value:function(){var e=ia.getInstance().items,t=e.venueFloorModel,n=e.venueFloorTexture,i=e.venueFloorLightmapTexture;Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var a=new hr(t.scene.children[0].geometry,{isRender:!0});if(a.material=new mr({lightMap:i,repeatMap:n,color:"#666666",repeat:10,uvOffset:new Lt.FM8(0,0),reflectMix:.2,repeatMix:1,distortionStrength:0}),a.matrixAutoUpdate=!1,this.ground=a,this.container.add(a),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.ground.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),gr="#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\n\n#include <virtualverse_fragment_parts>\n\nvoid main() {                \n    vec4 map = texture2D(tDiffuse, vUv);\n    \n\tgl_FragColor = map;\n\n    #include <virtualverse_fragment>\n}",xr="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform float uEdge;\nattribute float instanceIndex;\n\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n    vec4 mvPosition = vec4(position, 1.0);\n\n    mat4 myModelMatrix = modelViewMatrix * instanceMatrix;\n        \n    myModelMatrix[0][0] = 1.0;\n    myModelMatrix[0][1] = 0.0;\n    myModelMatrix[0][2] = 0.0;\n\n    myModelMatrix[1][0] = 0.0;\n    myModelMatrix[1][1] = 1.0;\n    myModelMatrix[1][2] = 0.0;\n\n    myModelMatrix[2][0] = 0.0;\n    myModelMatrix[2][1] = 0.0;\n    myModelMatrix[2][2] = 1.0;\n\n    mvPosition = myModelMatrix * mvPosition;\n\n    gl_Position = projectionMatrix * mvPosition;\n\n    vUv = vec2((uv.x + step(uEdge + 0.5, instanceIndex)) * 0.5, uv.y * 0.5);\n\n    #include <virtualverse_vertex>\n}",br=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHintSourceModel,s=a.venueHintReplaceModel,o=a.venueHintTexture;Fi.instance.setThreeTexture(o),i.material=new Lt.jyz({vertexShader:xr,fragmentShader:gr,uniforms:{tDiffuse:{value:o},uEdge:{value:0},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1}),i.material.defines.USE_LINEARMAPPING=!0,Fi.instance.replaceCommonShader(i.material);var l=r.scene.children[0].geometry,u=[],c=[];s.scene.traverse((function(e){if(/Pos_/.test(e.name)){var t=parseInt(e.name.split("_")[1]);u[3*t]=e.position.x,u[3*t+1]=e.position.y,u[3*t+2]=e.position.z}}));for(var d=u.length/3,h=0;h<d;h++)c.push(h);l.setAttribute("instanceIndex",new Lt.lb7(new Float32Array(c),1)),i.instanceMesh=new Lt.SPe(l,i.material,d),i.tranformMatrix=new Lt.yGw;for(var f=0;f<d;f++)i.tranformMatrix.setPosition(u[3*f],u[3*f+1],u[3*f+2]),i.instanceMesh.setMatrixAt(f,i.tranformMatrix);return i.instanceMesh.instanceMatrix.needsUpdate=!0,i.container.add(i.instanceMesh),i}return Ii()(n,[{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),yr="#define GLSLIFY 1\nuniform sampler2D tAlphaTexture;\nuniform float uTime;\nuniform float uSaturation;\nuniform float uValue;\nuniform float uHueSpeed;\n\nvarying vec2 vUv;\n\nvec3 hsv2rgb(vec3 c){\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main() {\n    // https://www.shadertoy.com/view/XlS3Wm\n    float warpSpeed = 0.3;\n    float warpDistance = 0.01;\n    vec3 offTexX = texture2D(tAlphaTexture, vUv).rgb;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float power = dot(offTexX, luma);\n    power = sin(3.1415927*2.0 * mod(power + uTime * warpSpeed, 1.0));\n    vec3 map = texture2D(tAlphaTexture, vUv+vec2(0.0, power)*warpDistance).rgb;\n    \n    float hue = fract(uTime * uHueSpeed);\n\tfloat saturation = uSaturation;\n\tfloat value = uValue;\n\tvec3 color = hsv2rgb(vec3(hue, saturation, value));\n\n\tgl_FragColor = vec4(color, map.g);\n\n    #include <tonemapping_fragment>\n}",Mr="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vUv = uv;\n}",wr=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHoloScreenModel,s=a.venueHoloScreenTexture;Fi.instance.setThreeTexture(s,!0);if(i.material=new Lt.jyz({vertexShader:Mr,fragmentShader:yr,uniforms:{tAlphaTexture:{value:s},uTime:{value:0},uSaturation:{value:.6},uValue:{value:1.8},uHueSpeed:{value:.2}},transparent:!0,depthWrite:!1,depthTest:!0,blending:Lt.WMw}),i.model=r.scene,i.model.traverse((function(e){e.isMesh&&(e.material=i.material,e.updateMatrix()),e.matrixAutoUpdate=!1})),i.container.add(i.model),window.debug3D){var o=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,o),Fi.getInstance().addModelDebug(i.model,i.material,o)}return i}return Ii()(n,[{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Tr="#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D tMap;\nuniform float uTime;\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 color = texture2D(tMap, vUv - vec2(uTime * 0.0003, 0.));\n\n    gl_FragColor = color;\n    \n    #include <virtualverse_fragment>\n}",_r="#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",Sr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueLogo1Model,i=t.venueLogo1LightmapTexture;if(Fi.getInstance().setThreeTexture(i),i.wrapS=i.wrapT=Lt.rpg,this.material1=new Lt.jyz({vertexShader:_r,fragmentShader:Tr,uniforms:{tMap:{value:i},uTime:{value:0}},transparent:!0,depthWrite:!1,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),window.debug3D){var a=Ni.addFolder({title:"Logo1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,a),Fi.getInstance().addModelDebug(this.model1,this.material1,a)}}},{key:"update",value:function(e){this.material1.uniforms.uTime.value+=e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ar="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vMatCapUV;\n\nuniform sampler2D tDiffuse;\nuniform sampler2D tMatcap;\nuniform sampler2D tRoughness;\nuniform sampler2D tAlpha;\nuniform float uMatcapMix;\nuniform float uContrast;\nuniform float uBrightness;\nuniform float uSaturation;\nuniform float uExposure;\n\nfloat blendScreen(float base, float blend) {\n\treturn 1.0-((1.0-base)*(1.0-blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n\treturn vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend, float opacity) {\n\treturn (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nvec3 adjustContrast(vec3 color, float value) {\n    return 0.5 + (1.0 + value) * (color - 0.5);\n}\n\nvec3 adjustSaturation(vec3 color, float value) {\n    // https://www.w3.org/TR/WCAG21/#dfn-relative-luminance\n    const vec3 luminosityFactor = vec3(0.2126, 0.7152, 0.0722);\n    vec3 grayscale = vec3(dot(color, luminosityFactor));\n\n    return mix(grayscale, color, 1.0 + value);\n}\n\nvec3 adjustBrightness(vec3 color, float value) {\n    return color + value;\n}\n\nvec3 adjustExposure(vec3 color, float value) {\n    return color * (1.0 + value);\n}\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 matcapStrength = texture2D(tRoughness, vUv);\n\n    vec4 matcapColor = texture2D(tMatcap, vMatCapUV);\n\n    vec4 diffuse = texture2D(tDiffuse, vUv);\n\n    float alpha = texture2D(tAlpha, vUv).r;\n\n    vec3 final = blendScreen(diffuse.rgb, matcapColor.rgb, 1.0 - matcapStrength.r * uMatcapMix);\n\n    final = adjustContrast(final, uContrast);\n    final = adjustSaturation(final, uSaturation);\n    final = adjustBrightness(final, uBrightness);\n    final = adjustExposure(final, uExposure);\n\n    gl_FragColor = vec4(final.rgb, alpha);\n\n    #include <virtualverse_fragment>\n}\n",Er="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vMatCapUV;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n\n    vUv = uv;\n    vPosition = position;\n    vNormal = normal;\n\n    vec4 p = vec4( position, 1. );\n    vec3 e = normalize( vec3( modelViewMatrix * p ) );\n    vec3 n = normalize( normalMatrix * normal );\n\n    vec3 r = reflect( e, n );\n    float m = 2. * sqrt(\n        pow( r.x, 2. ) +\n        pow( r.y, 2. ) +\n        pow( r.z + 1., 2. )\n    );\n\n    vMatCapUV = r.xy / m + .5;\n    vWorldPos = (modelMatrix * p).xyz;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    #include <virtualverse_vertex>\n\n}",Ir=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=[{mix:1,contrast:.13,brightness:.07,saturation:0,exposure:.57},{mix:1,contrast:.13,brightness:.07,saturation:0,exposure:.41},{mix:1,contrast:0,brightness:.07,saturation:.13,exposure:.54}],a=1;a<=3;a++)e.setModel(a,i[a-1]);return e.modelConfig=ce[2],e.nearestModelList=[],e}return Ii()(n,[{key:"setModel",value:function(e,t){var n=ia.getInstance().items["modelTest".concat(e,"Model")].scene,i=ia.getInstance().items["venueModelDiffuse".concat(e,"Texture")],a=ia.getInstance().items["venueModelAlpha".concat(e,"Texture")],r=ia.getInstance().items["venueModelRoughness".concat(e,"Texture")],s=ia.getInstance().items["venueModelMatcap".concat(e,"Texture")];Fi.instance.setThreeTexture(i),a.flipY=!1,r.flipY=!1;var o=new Lt.jyz({vertexShader:Er,fragmentShader:Ar,uniforms:{tDiffuse:{value:i,label:""},tMatcap:{value:s,label:"matcap"},tRoughness:{value:r,label:""},tAlpha:{value:a,label:""},uMatcapMix:{value:t.mix,label:"matcap"},uContrast:{value:t.contrast,label:"",noDebug:!0},uBrightness:{value:t.brightness,label:"",noDebug:!0},uSaturation:{value:t.saturation,label:"",noDebug:!0},uExposure:{value:t.exposure,label:"",noDebug:!0}},transparent:!0});if(Fi.getInstance().replaceCommonShader(o),o.defines.USE_CLIPPING=!1,n.traverse((function(e){e.isMesh&&(e.material=o,e.layers.set(fa)),e.matrixAutoUpdate=!1})),this.container.add(n),window.debug3D){var l=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(o,l),Fi.getInstance().addModelDebug(n,o,l),l.addInput(o.uniforms.uContrast,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uBrightness,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uSaturation,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uExposure,"value",{min:-1,max:1,step:.01,label:""})}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:[]})}}]),n}(ar),Cr=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).setModel2(),i.setModel3(),i}return Ii()(n,[{key:"setModel2",value:function(){var e=ia.getInstance().items,t=e.venueEmissivePictureModel,n=e.venueEmissivePictureLightmapTexture;Fi.instance.setThreeTexture(n,!1);var i=new nr({map:n,transparent:!0});if(i.defines.USE_LINEARMAPPING=!0,t.scene.traverse((function(e){e.isMesh&&(e.material=i,e.updateMatrix()),e.matrixAutoUpdate=!1})),this.container.add(t.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(t.scene,i,a)}}},{key:"setModel3",value:function(){var e=ia.getInstance().items,t=e.venueEmissivePicture2Model,n=e.venueEmissivePictureLightmap2Texture;Fi.instance.setThreeTexture(n);var i=new nr({map:n,transparent:!0});if(i.defines.USE_LINEARMAPPING=!0,t.scene.traverse((function(e){e.isMesh&&(e.material=i,e.updateMatrix()),e.matrixAutoUpdate=!1})),this.container.add(t.scene),window.debug3D){var a=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(t.scene,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),kr="#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D map;\nuniform sampler2D lightMap;\nuniform vec2 mapRepeat;\nuniform float uMix;\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main() {\n\n    #include <vv_clipping_fragment>\n\n    vec4 texelColor = texture2D(map, vUv * mapRepeat);\n\n    vec4 lightMapColor = texture2D(lightMap, vUv);\n\n\tvec3 final = blendAdd(texelColor.rgb, lightMapColor.rgb, uMix);\n\n    gl_FragColor = vec4(final, 1.0);\n\n    #include <virtualverse_fragment>\n}",Lr="#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <common>\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    \n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",Or=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueWall1Model,i=t.venueWall2Model,a=t.venueWall3Model,r=t.venueWall1LightmapTexture,s=t.venueWall2LightmapTexture,o=t.venueWall3LightmapTexture,l=t.venueWall1Texture,u=t.venueWall2Texture,c=t.venueWall3Texture;if(Fi.getInstance().setThreeTexture(l),Fi.getInstance().setThreeTexture(u),Fi.getInstance().setThreeTexture(c),Fi.getInstance().setThreeTexture(r),Fi.getInstance().setThreeTexture(s),Fi.getInstance().setThreeTexture(o),l.wrapS=l.wrapT=Lt.OoA,u.wrapS=u.wrapT=Lt.OoA,c.wrapS=c.wrapT=Lt.OoA,this.material1=new Lt.jyz({vertexShader:Lr,fragmentShader:kr,uniforms:{map:{value:l},mapRepeat:{value:new Lt.FM8(20,20)},lightMap:{value:r},uMix:{value:1.6}}}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:Lr,fragmentShader:kr,uniforms:{map:{value:u},mapRepeat:{value:new Lt.FM8(10,10)},lightMap:{value:s},uMix:{value:1}}}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.container.add(this.model2),this.material3=new Lt.jyz({vertexShader:Lr,fragmentShader:kr,uniforms:{map:{value:c},mapRepeat:{value:new Lt.FM8(20,20)},lightMap:{value:o},uMix:{value:1}}}),Fi.getInstance().replaceCommonShader(this.material3),this.model3=a.scene,this.model3.traverse((function(t){t.isMesh&&(t.material=e.material3),t.matrixAutoUpdate=!1})),this.container.add(this.model3),window.debug3D){var d=Ni.addFolder({title:"1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,d),Fi.getInstance().addModelDebug(this.model1,this.material1,d);var h=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,h),Fi.getInstance().addModelDebug(this.model2,this.material2,h);var f=Ni.addFolder({title:"3",expanded:!1});Fi.getInstance().addMaterialDebug(this.material3,f),Fi.getInstance().addModelDebug(this.model3,this.material3,f)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Pr=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).sceneRender=e,i.options={},i.setGround(),i.setWall(),i.setLogo(),i.setScreen(),i.setSimpleColorObjects(),i.setModelTest(),i.setHint(),i.setHoloScreenEffect(),i.setInsidePortal(),i}return Ii()(n,[{key:"setGround",value:function(){this.ground=new vr,this.container.add(this.ground.container)}},{key:"setWall",value:function(){this.wall=new Or,this.container.add(this.wall.container)}},{key:"setHint",value:function(){this.hint=new br,this.container.add(this.hint.container)}},{key:"setHoloScreenEffect",value:function(){this.holoScreenEffect=new wr,this.container.add(this.holoScreenEffect.container)}},{key:"setModelTest",value:function(){this.modelTest=new Ir,this.container.add(this.modelTest.container)}},{key:"setSimpleColorObjects",value:function(){this.simpleColorObjects=new Cr,this.container.add(this.simpleColorObjects.container)}},{key:"setLogo",value:function(){this.logo=new Sr,this.container.add(this.logo.container)}},{key:"setScreen",value:function(){var e=ia.getInstance().items.venueScreenModel;this.screen=new sr({model:e,video:Me.hd}),this.container.add(this.screen.container)}},{key:"setDynamicEffect",value:function(){this.dynamicEffect=new cr,this.container.add(this.dynamicEffect.container)}},{key:"setInsidePortal",value:function(){this.insidePortal=new rr({pos:new Lt.Pa4(.1,0,-45.69),sceneId:Rt.MainSquare.id}),this.container.add(this.insidePortal.container)}},{key:"update",value:function(e){this.ground&&this.ground.update(e),this.logo&&this.logo.update(e),this.modelTest&&this.modelTest.update(e),this.dynamicEffect&&this.dynamicEffect.update(e),this.modelTest&&this.modelTest.update(e),this.insidePortal&&this.insidePortal.update(e)}},{key:"dispose",value:function(){this.ground&&this.ground.dispose(),this.modelTest&&this.modelTest.dispose(),this.simpleColorObjects&&this.simpleColorObjects.dispose(),this.screen&&this.screen.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Rr=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){return Ai()(this,n),t.call(this,e,i)}return Ii()(n,[{key:"onLoaded",value:function(){Qi()($i()(n.prototype),"onLoaded",this).call(this),this.setDebug(),this.setScene(),this.addTerrain(),this.collideHandler(),this.addPlayer(),this.addSkyBox(),this.setEvent(),this.addClickMesh(),this.addPickHelper(),this.connectMultiplyService(),this.setBGM()}},{key:"setEvent",value:function(){this.changeSceneTestHandler=Fi.getInstance().changeSceneTest.bind(this),document.addEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"setPasses",value:function(){Qi()($i()(n.prototype),"setPasses",this).call(this);var e=this.sceneRender.passes.bloomEffect;e.luminanceMaterial.threshold=0,e.luminanceMaterial.smoothing=.272,e.intensity=4.13,e.mipmapBlurPass.radius=.913,e.blendMode.opacity.value=.85;var t=this.sceneRender.passes.depthEffect;t.uniforms.get("uColor").value.set("#000000"),t.uniforms.get("uStrength").value=79,this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=0}},{key:"setBGM",value:function(){}},{key:"setDebug",value:function(){window.debug3D&&(this.debug=Ni)}},{key:"removeDebug",value:function(){window.debug3D}},{key:"setScene",value:function(){this.scene=new Pr(this.sceneRender),this.sceneRender.scene.add(this.scene.container)}},{key:"addTerrain",value:function(){var e=ia.getInstance().items.venueCollisionModel.scene;this.terrain=new ir(e),this.sceneRender.scene.add(e)}},{key:"update",value:function(e){Qi()($i()(n.prototype),"update",this).call(this,e),this.scene&&this.scene.update(e),this.characterTickHandler(e)}},{key:"clickCallBack",value:function(e,t,i){Qi()($i()(n.prototype),"clickCallBack",this).call(this,e,t,i)}},{key:"addClickMesh",value:function(){}},{key:"addNPC",value:function(){for(var e=new Lt.Pa4,t=0;t<50;t++){var n=Math.floor(5*Math.random()+1),i={UserId:"user_"+1e4*Math.random(),NickName:"npc"+t,ImageInfoModel:n},a=La.create("main",i);this.sceneRender.scene.add(a),Yi.add(i.UserId,a),a.updateDressup(n,1),a.traverse((function(e){e.layers.set(fa)})),a.resetPosAndRotation(e,0),a.position.z=6*t-150,a.targetPosition=a.position.clone(),a.traverse((function(e){e.updateMatrix()}))}}},{key:"dispose",value:function(){this.scene&&(this.removeEvent(),this.terrain.dispose(),this.scene.dispose(),this.removeDebug(),this.bgm&&this.bgm.destroy(),this.scene=null,this.debug=null,Qi()($i()(n.prototype),"dispose",this).call(this))}}]),n}(Xa),Dr="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vMatCapUV;\n\nuniform float uDiffuseRepeat;\nuniform sampler2D tDiffuse;\nuniform sampler2D tMatcap;\nuniform sampler2D tLightmap;\nuniform float uLightMix;\nuniform float uMatcapMix;\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n\tvec4 diffuseColor = vec4(1.0);\n\n    vec4 matcapColor = texture2D(tMatcap,vMatCapUV);\n\tdiffuseColor *= matcapColor;\n\n\tvec4 diffuse = texture2D(tDiffuse, vUv * uDiffuseRepeat);\n\tdiffuseColor = mix(diffuseColor, diffuse, uMatcapMix);\n\n    vec4 lightmap = texture2D(tLightmap, vUv);\n\tdiffuseColor.rgb = blendMultiply(diffuseColor.rgb, lightmap.rgb, uLightMix);\n\n\tgl_FragColor = diffuseColor;\n\n    #include <virtualverse_fragment>\n}\n",Nr="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vMatCapUV;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n\n    vUv = uv;\n    vPosition = position;\n    vNormal = normal;\n\n    vec4 p = vec4( position, 1. );\n    vec3 e = normalize( vec3( modelViewMatrix * p ) );\n    vec3 n = normalize( normalMatrix * normal );\n\n    vec3 r = reflect( e, n );\n    float m = 2. * sqrt(\n        pow( r.x, 2. ) +\n        pow( r.y, 2. ) +\n        pow( r.z + 1., 2. )\n    );\n\n    vMatCapUV = r.xy / m + .5;\n    vWorldPos = (modelMatrix * p).xyz;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    #include <virtualverse_vertex>\n\n}",Br=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareBirthModel,n=e.mainSquareBirthTexture,i=e.mainSquareBirthLightmapTexture,a=e.mainSquareBirthMatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var r=new Lt.jyz({vertexShader:Nr,fragmentShader:Dr,uniforms:{tDiffuse:{value:n,label:""},tLightmap:{value:i,label:""},tMatcap:{value:a,label:"matcap"},uDiffuseRepeat:{value:1,label:""},uLightMix:{value:.2,label:""},uMatcapMix:{value:.8,label:"matcap"}}});if(Fi.getInstance().replaceCommonShader(r),r.defines.USE_CLIPPING=!0,this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ur=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareBuilding1Model,n=e.mainSquareBuilding1Texture,i=e.mainSquareBuilding1LightmapTexture,a=e.mainSquareBuildingMatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var r=new Lt.jyz({vertexShader:Nr,fragmentShader:Dr,uniforms:{tDiffuse:{value:n,label:""},tLightmap:{value:i,label:""},tMatcap:{value:a,label:"matcap"},uDiffuseRepeat:{value:20,label:""},uLightMix:{value:.95,label:""},uMatcapMix:{value:.6,label:"matcap"}}});if(Fi.getInstance().replaceCommonShader(r),r.defines.USE_CLIPPING=!0,this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var s=Ni.addFolder({title:"1",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),jr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareBuilding2Model,n=e.mainSquareBuilding2Texture,i=e.mainSquareBuilding2LightmapTexture,a=e.mainSquareBuildingMatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var r=new Lt.jyz({vertexShader:Nr,fragmentShader:Dr,uniforms:{tDiffuse:{value:n,label:""},tLightmap:{value:i,label:""},tMatcap:{value:a,label:"matcap"},uDiffuseRepeat:{value:1,label:""},uLightMix:{value:.2,label:""},uMatcapMix:{value:.5,label:"matcap"}}});if(Fi.getInstance().replaceCommonShader(r),r.defines.USE_CLIPPING=!0,this.container.add(this.model),this.model.traverse((function(e){e.isMesh&&(e.material=r),e.matrixAutoUpdate=!1,e.layers.set(fa)})),window.debug3D){var s=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Fr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBallModel,n=e.mainSquareCenterBallMatcapTexture,i=e.mainSquareCenterBallAlphaTexture,a=e.waterdudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:1},uDistortionStrength:{value:.05},uWaveSpeed:{value:.1},uPower:{value:5},uStrength:{value:5},uColor:{value:new Lt.Ilk("#468fff")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.matrixAutoUpdate=!0,this.container.add(this.model),this.model.position.y=47,this.model.updateMatrix(),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e,this.model.rotation.x+=2e-4*e,this.model.rotation.y+=1e-4*e,this.model.rotation.z+=2e-4*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar);function Yr(e){var t={},n={wireframe:!1,transparent:!1,uniforms:t,extensions:{derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},lights:!1,vertexShader:"#define GLSLIFY 1\n#define TOTO\n#define MATCAP\n#define USE_MATCAP\n\nvarying vec3 vViewPosition;\nvarying vec2 vUvn;\n\n#ifndef FLAT_SHADED\n\n    varying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n\n    #include <uv_vertex>\n    #include <beginnormal_vertex>\n\n    #include <defaultnormal_vertex>\n    #include <skinbase_vertex>\n\n    #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n        vNormal = normalize( transformedNormal );\n\n    #endif\n\n    vUvn = uv;\n\n    #include <begin_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <fog_vertex>\n\n    vViewPosition = - mvPosition.xyz;\n\n    \n    #include <virtualverse_vertex>\n}\n",fragmentShader:"#define GLSLIFY 1\n#define TOTO\n#define MATCAP\n#define USE_MATCAP\n\nuniform sampler2D matcap;\nvarying vec2 vUvn;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n    varying vec3 vNormal;\n\n#endif\n\n#ifdef USE_LIGHTMAP\n    uniform sampler2D tLightMap;\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    #include <clipping_planes_fragment>\n\n    vec4 diffuseColor = vec4( 1.0 );\n\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <normal_fragment_begin>\n\n    vec3 viewDir = normalize( vViewPosition );\n    vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n    vec3 y = cross( viewDir, x );\n    vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n    #ifdef USE_MATCAP\n        vec4 matcapColor = texture2D( matcap, uv );\n        // matcapColor = sRGBToLinear( matcapColor );\n        diffuseColor *= matcapColor;\n    #endif\n\n    #ifdef USE_LIGHTMAP\n        vec4 lightMapColor = texture2D( tLightMap, vUvn );\n        // lightMapColor = sRGBToLinear( lightMapColor );\n        diffuseColor += lightMapColor;\n    #endif\n\n    gl_FragColor = diffuseColor;\n    // gl_FragColor = vec4(vWorldPos, 1.0);\n\n    #include <virtualverse_fragment>\n}\n"};delete(n=tr().merge(n,e)).matcap,delete n.alphaMap,delete n.lightMap,delete n.color,delete n.isClipping;var i=new Lt.jyz(n);return i.defines.USE_UV="",e.matcap&&(t.matcap={value:e.matcap},i.defines.USE_MATCAP="",i.defines.MATCAP=""),e.alphaMap&&(t.tAlphaMap={value:e.alphaMap},i.defines.USE_ALPHAMAP=""),e.lightMap&&(t.tLightMap={value:e.lightMap},i.defines.USE_LIGHTMAP=""),e.color&&(t.uColor={value:new Lt.Ilk(e.color)},i.defines.USE_COLOR=""),i.defines.USE_CLIPPING=void 0===e.isClipping||e.isClipping,Fi.getInstance().replaceCommonShader(i),i}var Gr,Hr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBall2Model,n=e.mainSquareCenterBall2MatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new Yr({matcap:n});if(i.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(i),this.model.children[0].material=i,this.model.matrixAutoUpdate=!0,this.container.add(this.model),this.model.position.y=47,this.model.updateMatrix(),this.material=i,window.debug3D){var a=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){this.model.rotation.x-=2e-4*e,this.model.rotation.y-=1e-4*e,this.model.rotation.z-=2e-4*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Zr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBall3Model,n=e.mainSquareCenterBall3MatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new Yr({matcap:n});if(i.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(i),this.model.children[0].material=i,this.model.matrixAutoUpdate=!0,this.container.add(this.model),this.model.traverse((function(e){e.layers.set(fa)})),this.model.position.y=47,this.model.updateMatrix(),this.material=i,window.debug3D){var a=Ni.addFolder({title:"3",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){this.model.rotation.x+=5e-5*e,this.model.rotation.y+=1e-4*e,this.model.rotation.z+=1e-4*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Kr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareDecorationBuildingModel,n=e.mainSquareDecorationBuildingTexture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new nr({map:n});if(Fi.getInstance().replaceCommonShader(i),i.defines.USE_CLIPPING=!0,this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.model.traverse((function(e){e.layers.set(fa)})),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Vr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.mainSquareWomanModel,i=t.mainSquareWomanMatcapTexture,a=t.mainSquareWomanAlphaDudvTexture;Fi.instance.setThreeTexture(i),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vWorldPos;\nvarying vec3 vPosition;\nvarying vec2 vMatCapUV;\n\n#include <skinning_pars_vertex>\n\nvoid main() {\n\n    vUv = uv;\n    vPosition = position;\n\n    vec4 p = vec4( position, 1. );\n    vec3 e = normalize( vec3( modelViewMatrix * p ) );\n    vec3 n = normalize( normalMatrix * normal );\n\n    vec3 r = reflect( e, n );\n    float m = 2. * sqrt(\n        pow( r.x, 2. ) +\n        pow( r.y, 2. ) +\n        pow( r.z + 1., 2. )\n    );\n\n    vMatCapUV = r.xy / m + .5;\n    vWorldPos = (modelMatrix * p).xyz;\n\n    #include <beginnormal_vertex>\n    #include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\n    #include <begin_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vMatCapUV;\n\nuniform sampler2D tMatcap;\nuniform sampler2D tDudv;\nuniform sampler2D tAlpha;\n\nuniform float uDistortionRepeat;\nuniform float uDistortionStrength;\nuniform float uWaveSpeed;\n\nuniform float uTime;\nuniform float uPower;\nuniform float uStrength;\nuniform vec3 uColor;\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n\treturn (base+blend)/2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAverage(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\n#include <common>\n\nvoid main() {\n    vec2 distortedUv = texture2D(tDudv, vec2(vUv.x * uDistortionRepeat + uTime * uWaveSpeed, vUv.y * uDistortionRepeat)).rg * uDistortionStrength;\n    distortedUv = vUv.xy + vec2(distortedUv.x, distortedUv.y + uTime * uWaveSpeed);\n    vec2 distortion = (texture2D(tDudv, distortedUv).rg * 2.0 - 1.0) * uDistortionStrength;\n\n    vec2 uv = vMatCapUV;\n    uv.xy += distortion;\n\n    vec4 matcapColor = texture2D(tMatcap,uv);\n\n    float alpha = texture2D(tAlpha, vUv + distortion).r;\n\n    float dist = pow((length(vUv - vec2(0.5))) * 2.0, uPower);\n    gl_FragColor = vec4(matcapColor.rgb + dist * uStrength * uColor, alpha);\n}",uniforms:{tMatcap:{value:i},tDudv:{value:a},tAlpha:{value:a},uDistortionRepeat:{value:2},uDistortionStrength:{value:.2},uWaveSpeed:{value:.2},uPower:{value:2},uStrength:{value:2},uColor:{value:new Lt.Ilk("#1e61c8")},uTime:{value:0}},side:Lt.ehD,transparent:!0});r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.material=r,this.dancer=Ca.d9(n.scene),this.mixer=new Lt.Xcj(this.dancer),this.dancer.traverse((function(t){t.frustumCulled=!1,(t.isMesh||t.isSkinnedMesh)&&(t.material=e.material)}));var s=this.mixer.clipAction(n.animations[0]);if(s.play(),s.timeScale=5e-4,this.container.add(this.dancer),window.debug3D){var o=Ni.addFolder({title:"DJ",expanded:!1});Fi.getInstance().addMaterialDebug(r,o)}}},{key:"update",value:function(e){this.mixer.update(e),this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){this.mixer.stopAllAction(),this.mixer.uncacheRoot(this.dancer),this.mixer=null,Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),zr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareLightModel,n=e.mainSquareLightTexture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new nr({map:n});if(Fi.getInstance().replaceCommonShader(i),i.defines.USE_CLIPPING=!0,this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Wr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareLight2Model,n=e.mainSquareLight2Texture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new nr({map:n});if(Fi.getInstance().replaceCommonShader(i),i.defines.USE_CLIPPING=!0,this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),qr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareLight3Model,n=e.mainSquareLight3Texture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new nr({map:n});if(Fi.getInstance().replaceCommonShader(i),i.defines.USE_CLIPPING=!0,this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"3",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Xr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareGraffitiModel,n=e.mainSquareGraffitiTexture,i=e.mainSquareGraffitiLightmapTexture,a=e.mainSquareGraffitiMatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var r=new Lt.jyz({vertexShader:Nr,fragmentShader:Dr,uniforms:{tDiffuse:{value:n,label:""},tLightmap:{value:i,label:""},tMatcap:{value:a,label:"matcap"},uDiffuseRepeat:{value:12,label:""},uLightMix:{value:.8,label:""},uMatcapMix:{value:.8,label:"matcap"}}});if(Fi.getInstance().replaceCommonShader(r),r.defines.USE_CLIPPING=!0,this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Qr=Ii()((function e(t){Ai()(this,e);var n=ia.getInstance().items,i=n.flowmapTexture,a=n.perlinNoiseTexture;i.wrapS=i.wrapT=Lt.rpg,a.wrapS=a.wrapT=Lt.OoA;var r=dr.getInstance().getRenderTarget().texture,s=dr.getInstance().getRenderTextureMatrix(),o="#c8d5ff",l="#879595",u=1024,c=1024,d={color:{value:new Lt.Ilk(o),label:""},tDiffuse:{value:r,noDebug:!0},textureMatrix:{value:s,noDebug:!0},tDudv:{value:i,label:""},tLightMap:{value:t.lightMap,label:""},tRepeatMap:{value:t.repeatMap,label:""},uRepeat:{value:1,label:""},uReflectMix:{value:t.reflectMix||.8,label:""},uRepeatMix:{value:t.repeatMix||1.5,label:""},uvOffset:{value:new Lt.FM8(.5,.08)},uDirection:{value:new Lt.FM8(1.18,1.18),label:""},uBluriness:{value:3,label:""},resolution:{value:new Lt.FM8(u,c),noDebug:!0},uLightColor:{value:new Lt.Ilk(l),label:""},uLightStrength:{value:.7,label:""},uDistortionStrength:{value:.8,label:""}},h=new Lt.jyz({uniforms:d,vertexShader:pr,fragmentShader:fr});return h.defines.USE_BLUR=!0,h.defines.IS_SUPPORT_REFLECT=Fi.getInstance().isSupportReflect(),h})),Jr=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setGround(),e}return Ii()(n,[{key:"setGround",value:function(){var e=ia.getInstance().items,t=e.mainSquareGroundModel,n=e.mainSquareGroundTexture;Fi.instance.setThreeTexture(n);var i=new hr(t.scene.children[0].geometry,{isRender:!0});if(i.material=new Qr({repeatMap:n,reflectMix:.5,repeatMix:.5}),i.matrixAutoUpdate=!1,this.ground=i,this.container.add(i),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.ground.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),$r=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.mainSquareHintSourceModel,s=a.mainSquareHintReplaceModel,o=a.mainSquareHintTexture;Fi.instance.setThreeTexture(o),i.material=new Lt.jyz({vertexShader:xr,fragmentShader:gr,uniforms:{tDiffuse:{value:o},uEdge:{value:2},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1}),i.material.defines.USE_LINEARMAPPING=!0,Fi.instance.replaceCommonShader(i.material);var l=r.scene.children[0].geometry,u=[],c=[];s.scene.traverse((function(e){if(/Pos_/.test(e.name)){var t=parseInt(e.name.split("_")[1]);u[3*t]=e.position.x,u[3*t+1]=e.position.y,u[3*t+2]=e.position.z}}));for(var d=u.length/3,h=0;h<d;h++)c.push(h);l.setAttribute("instanceIndex",new Lt.lb7(new Float32Array(c),1)),i.instanceMesh=new Lt.SPe(l,i.material,d),i.tranformMatrix=new Lt.yGw;for(var f=0;f<d;f++)i.tranformMatrix.setPosition(u[3*f],u[3*f+1],u[3*f+2]),i.instanceMesh.setMatrixAt(f,i.tranformMatrix);return i.instanceMesh.instanceMatrix.needsUpdate=!0,i.container.add(i.instanceMesh),i.instanceMesh.layers.set(fa),i}return Ii()(n,[{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),es=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).nearestId=-1,i.pointPositions=[new Lt.Pa4(-67.84,0,5.4),new Lt.Pa4(.2,0,70),new Lt.Pa4(19.96,11.5,-20.2)],i.setModel(),i}return Ii()(n,[{key:"setModel",value:function(){}},{key:"update",value:function(e){var t=this,n=999,i=-1;if(this.character=this.character||Ho.getScene().character,this.pointPositions.forEach((function(e,a){var r=Math.pow(e.x-t.character.position.x,2)+Math.pow(e.z-t.character.position.z,2);r<2.25&&r<n&&Math.abs(t.character.position.y-e.y)<1&&(n=r,i=a+1)})),i>0){if(this.nearestId===i)return;this.nearestId=i,y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_mark",otherId:this.nearestId})}else{if(-1===this.nearestId)return;this.nearestId=-1}}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ts="#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D tMap;\nuniform float uTime;\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 color = texture2D(tMap, vUv + vec2(uTime * 0.0001, 0.));\n\n    gl_FragColor = color;\n    \n    #include <virtualverse_fragment>\n}",ns="#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",is=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.mainSquareLogo1Model,i=t.mainSquareLogo2Model,a=t.mainSquareLogo1Texture,r=t.mainSquareLogo2Texture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(r),a.wrapS=a.wrapT=Lt.rpg,r.wrapS=r.wrapT=Lt.rpg,this.material1=new Lt.jyz({vertexShader:ns,fragmentShader:ts,uniforms:{tMap:{value:a},uTime:{value:0}},transparent:!0,depthWrite:!1,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D tMap;\nuniform float uTime;\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 color = texture2D(tMap, vUv - vec2(uTime * 0.0001, 0.));\n\n    gl_FragColor = color;\n    \n    #include <virtualverse_fragment>\n}",uniforms:{tMap:{value:r},uTime:{value:0}},transparent:!0,depthWrite:!1,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.container.add(this.model2),window.debug3D){var s=Ni.addFolder({title:"Logo1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,s),Fi.getInstance().addModelDebug(this.model1,this.material1,s);var o=Ni.addFolder({title:"Logo2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,o),Fi.getInstance().addModelDebug(this.model2,this.material2,o)}}},{key:"update",value:function(e){this.material1.uniforms.uTime.value+=e,this.material2.uniforms.uTime.value+=e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),as=n(69946),rs=n.n(as),ss=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).positions=[{x:36.68,z:-34.79},{x:-39,z:-36},{x:-9999,z:9999},{x:37.3,z:36.28},{x:81.55,z:23.6}],e.radius=5,e.isPorting=!1,e.setModel(),e.portals=[[[47.48,-56.97],[57.28,-48.13],[51.75,-40.55],[42.62,-53.52]],[[-68.27,-43.15],[-47.28,-64.63],[-39.65,-60.48],[-67.58,-34.97]],[[-52,38],[-35,38],[-35,51],[-52,51]],[[63,50],[54.28,60.24],[59.31,64.66],[67.37,53.62]],[[96.84,39.03],[66.85,39.25],[66.85,33.79],[96.85,33.37]]],e.portals.forEach((function(t,n){e.portals[n]=e.portals[n].map((function(e){return new Lt.Pa4(e[0],0,e[1])}))})),e}return Ii()(n,[{key:"setModel",value:function(){}},{key:"update",value:function(e){var t=this;if(!this.isPorting){this.character=this.character||Ho.getScene().character;for(var n=function(e){var n=function(e,t){for(var n=e.x,i=e.z,a=!1,r=0,s=t.length-1;r<t.length;s=r++){var o=t[r].x,l=t[r].z,u=t[s].x,c=t[s].z;l>i!=c>i&&n<(u-o)*(i-l)/(c-l)+o&&(a=!a)}return a}(t.character.position,t.portals[e]);if(n)return t.isPorting=!0,setTimeout((function(){t.changeScene(e)}),500),{v:void 0}},i=0;i<this.portals.length;i++){var a=n(i);if("object"===rs()(a))return a.v}for(var r=function(e,n){var i=t.positions[n];Math.pow(i.x-t.character.position.x,2)+Math.pow(i.z-t.character.position.z,2)<t.radius*t.radius&&(t.isPorting=!0,setTimeout((function(){t.changeScene(n)}),500))},s=0;s<5;s++)r(0,s)}}},{key:"changeScene",value:function(e){var t=-1;switch(e){case 0:t=Rt.PopmartVenue.id;break;case 1:t=Rt.PopmartVenue2.id;break;case 2:t=Rt.PopmartVenue3.id;break;case 3:t=Rt.PopmartVenue4.id;break;case 4:t=Rt.HonorVenue.id}t>0&&y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:t})}},{key:"dispose",value:function(){this.isPorting=!1,Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),os=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareStairsModel,n=e.mainSquareStairsTexture,i=e.mainSquareStairsLightmapTexture,a=e.mainSquareStairsMatcapTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var r=new Lt.jyz({vertexShader:Nr,fragmentShader:Dr,uniforms:{tDiffuse:{value:n,label:""},tLightmap:{value:i,label:""},tMatcap:{value:a,label:"matcap"},uDiffuseRepeat:{value:30,label:""},uLightMix:{value:.95,label:""},uMatcapMix:{value:.8,label:"matcap"}}});if(Fi.getInstance().replaceCommonShader(r),r.defines.USE_CLIPPING=!0,this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ls=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e.container.matrixAutoUpdate=!0,e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareTrainModel,n=e.mainSquareTrainTexture;this.model=t.scene,Fi.instance.setThreeTexture(n);var i=new nr({map:n});if(Fi.getInstance().replaceCommonShader(i),i.defines.USE_CLIPPING=!0,this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){this.model.rotation.y+=3e-4*e,this.model.updateMatrix()}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),us=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e.centerPoint={x:-5.89,z:-48},e.radius=18,e.isJumping=!1,e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareTrampolineModel,n=e.mainSquareTrampolineTexture;if(this.model=t.scene,Fi.instance.setThreeTexture(n),this.material=new Lt.jyz({vertexShader:Mr,fragmentShader:yr,uniforms:{tAlphaTexture:{value:n},uTime:{value:0},uSaturation:{value:.283},uValue:{value:.924},uHueSpeed:{value:.8}},transparent:!0,depthWrite:!1,depthTest:!0,blending:Lt.WMw,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material),this.material.defines.USE_CLIPPING=!1,this.model.children[0].material=this.material,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var i=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,i),Fi.getInstance().addModelDebug(this.model,this.material,i)}}},{key:"update",value:function(e){var t=this;this.material.uniforms.uTime.value+=.001*e,Yi.getAll().forEach((function(e){e.position.y>10&&e.position.x>-t.radius&&e.position.x<t.radius&&e.position.z>-t.radius&&e.position.z<t.radius?(e.setIsJump(!0),e.isMe&&!t.isJumping&&(t.isJumping=!0,y.Z.emit(b.Z.FINISH_TASK,Y.U.PLAY_HAPPY))):(e.isMe&&(t.isJumping=!1),e.setIsJump(!1))}))}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),cs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).params={scale:1.5},e.isInZoom=!1,e.isZooming=!1,e.setModel(),e.areas=[{minX:-34,maxX:39,minZ:-91,maxZ:-89},{minX:38.5,maxX:41.5,minZ:-88,maxZ:-81},{minX:47,maxX:50,minZ:-114,maxZ:-100}],e.results=[],e}return Ii()(n,[{key:"setModel",value:function(){}},{key:"update",value:function(e){var t=this;this.character=this.character||Ho.getScene().character,this.areas.forEach((function(e,n){t.character.position.x>e.minX&&t.character.position.x<e.maxX&&t.character.position.z>e.minZ&&t.character.position.z<e.maxZ?0===n?(t.isZooming=!1,t.results.length=0):0===t.results.length?t.results[0]=n:t.results[0]!==n&&(1===n?t.zoomIn("small"):t.zoomIn("big"),t.results.length=0):t.isZooming=!1}))}},{key:"zoomIn",value:function(e){var t=this;this.isInZoom=!0,clearTimeout(this.zoomOutTimeout),Hi.ZP.to(this.params,{scale:"small"===e?.5:3,onUpdate:function(){t.character.scale.setScalar(t.params.scale),t.character.updateMatrix()}}),this.isZooming||(this.isZooming=!0,y.Z.emit(b.Z.FINISH_TASK,Y.U.PLAY_SMALL)),this.zoomOutTimeout=setTimeout((function(){t.zoomOut()}),3e4)}},{key:"zoomOut",value:function(){var e=this;this.isInZoom=!1,Hi.ZP.to(this.params,{scale:1.5,onUpdate:function(){e.character.scale.setScalar(e.params.scale),e.character.updateMatrix()}})}},{key:"dispose",value:function(){clearTimeout(this.zoomOutTimeout),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ds=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).sceneRender=e,i.options={},i.setGround(),i.setLogo(),i.setStairs(),i.setGraffiti(),i.setBuilding(),i.setBirth(),i.setCenterBall(),i.setEmissiveLight(),i.setDecorationBuilding(),i.setDJ(),i.setZoom(),i.setLandMark(),i.setTrampoline(),i.setOutsidePortal(),i.setTrain(),i.setHint(),i.setTowerScreen(),i}return Ii()(n,[{key:"setGround",value:function(){this.ground=new Jr,this.container.add(this.ground.container)}},{key:"setLogo",value:function(){this.logo=new is,this.container.add(this.logo.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.logo.container)}},{key:"setStairs",value:function(){this.stairs=new os,this.container.add(this.stairs.container)}},{key:"setTowerScreen",value:function(){var e=ia.getInstance().items.mainSquareScreenModel;this.towerScreen=new or({model:e,video:!0,type:Gi.Z.baseInfo.rtcType}),this.container.add(this.towerScreen.container),Ho.getScene().clickMeshList.push(this.towerScreen.container)}},{key:"setGraffiti",value:function(){this.graffiti=new Xr,this.container.add(this.graffiti.container)}},{key:"setBuilding",value:function(){this.building1=new Ur,this.container.add(this.building1.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.building1.container),this.building2=new jr,this.container.add(this.building2.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.building2.container)}},{key:"setBirth",value:function(){this.birth=new Br,this.container.add(this.birth.container)}},{key:"setCenterBall",value:function(){this.centerBall=new Fr,this.container.add(this.centerBall.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.centerBall.container),this.centerBall2=new Hr,this.container.add(this.centerBall2.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.centerBall2.container),this.centerBall3=new Zr,this.container.add(this.centerBall3.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.centerBall3.container)}},{key:"setEmissiveLight",value:function(){this.emissiveLight=new zr,this.container.add(this.emissiveLight.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.emissiveLight.container),this.emissiveLight2=new Wr,this.container.add(this.emissiveLight2.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.emissiveLight2.container),this.emissiveLight3=new qr,this.container.add(this.emissiveLight3.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.emissiveLight3.container)}},{key:"setDecorationBuilding",value:function(){this.decorationBuilding=new Kr,this.container.add(this.decorationBuilding.container)}},{key:"setDJ",value:function(){this.dj=new Vr,this.container.add(this.dj.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.dj.container)}},{key:"setZoom",value:function(){this.zoom=new cs,this.container.add(this.zoom.container)}},{key:"setLandMark",value:function(){this.landMark=new es,this.container.add(this.landMark.container)}},{key:"setTrampoline",value:function(){this.trampoline=new us,this.container.add(this.trampoline.container)}},{key:"setOutsidePortal",value:function(){this.outsidePortal=new ss,this.container.add(this.outsidePortal.container)}},{key:"setTrain",value:function(){this.train=new ls,this.container.add(this.train.container)}},{key:"setHint",value:function(){this.hint=new $r,this.container.add(this.hint.container)}},{key:"update",value:function(e){this.ground&&this.ground.update(e),this.logo&&this.logo.update(e),this.centerBall&&this.centerBall.update(e),this.centerBall2&&this.centerBall2.update(e),this.centerBall3&&this.centerBall3.update(e),this.dj&&this.dj.update(e),this.zoom&&this.zoom.update(e),this.trampoline&&this.trampoline.update(e),this.outsidePortal&&this.outsidePortal.update(e),this.landMark&&this.landMark.update(e),this.train&&this.train.update(e),this.towerScreen&&this.towerScreen.update(e)}},{key:"dispose",value:function(){this.ground&&this.ground.dispose(),this.dj&&this.dj.dispose(),this.zoom&&this.zoom.dispose(),this.towerScreen&&this.towerScreen.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),hs=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){return Ai()(this,n),t.call(this,e,i)}return Ii()(n,[{key:"onLoaded",value:function(){Qi()($i()(n.prototype),"onLoaded",this).call(this),this.setDebug(),this.setScene(),this.addTerrain(),this.collideHandler(),this.addPlayer(),this.addSkyBox(),this.setEvent(),this.addClickMesh(),this.addPickHelper(),this.connectMultiplyService(),this.setToVenueEntry(),this.setBGM()}},{key:"setEvent",value:function(){this.changeSceneTestHandler=Fi.getInstance().changeSceneTest.bind(this),document.addEventListener("keydown",this.changeSceneTestHandler,!1),this.onCheckInScreenAreaHandler=this.onCheckInScreenArea.bind(this),y.Z.on(b.Z.T2T_IN_SCREEN_AREA,this.onCheckInScreenAreaHandler),this.onLivePlayerConvertHandler=this.livePlayerConvert.bind(this),Ze.Z.on("Base.PushSystemInform",this.onLivePlayerConvertHandler)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.changeSceneTestHandler,!1),y.Z.off(b.Z.T2T_IN_SCREEN_AREA,this.onCheckInScreenAreaHandler),Ze.Z.off("Base.PushSystemInform",this.onLivePlayerConvertHandler)}},{key:"livePlayerConvert",value:function(e){y.Z.emit(b.Z.LIVE_SYSTEM_INFO,e)}},{key:"onCheckInScreenArea",value:function(e){this.bgm&&this.scene.towerScreen&&(e?(this.bgm.pause(),this.bgm.mute(!0),this.scene.towerScreen.mute(!1)):(this.bgm.play(),this.bgm.mute(!1),this.scene.towerScreen.mute(!0)))}},{key:"addSkyBox",value:function(){var e=this,t=ia.getInstance().items.skyboxTexture;(t.encoding=Lt.knz,t.mapping=Lt.dSO,this.sceneRender.scene.background=t,window.debug3D)&&Ni.addFolder({title:"",expanded:!1}).addButton({title:"",label:"skybox"}).on("click",(function(){Fi.getInstance().uploadLocalTexture((function(t){t.encoding=Lt.knz,t.mapping=Lt.dSO,e.sceneRender.scene.background=t}))}))}},{key:"setPasses",value:function(){Qi()($i()(n.prototype),"setPasses",this).call(this);var e=this.sceneRender.passes.bloomEffect;e.luminanceMaterial.threshold=.29,e.luminanceMaterial.smoothing=.62,e.intensity=4,e.mipmapBlurPass.radius=.9,e.blendMode.opacity.value=.7;var t=this.sceneRender.passes.depthEffect;t.uniforms.get("uColor").value.set("#060d26"),t.uniforms.get("uStrength").value=37,this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=.087}},{key:"setBGM",value:function(){this.bgm=new $a,document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){y.Z.emit(b.Z.FIRST_CLICK)}),{once:!0})}},{key:"setDebug",value:function(){window.debug3D&&(this.debug=Ni)}},{key:"removeDebug",value:function(){window.debug3D}},{key:"setScene",value:function(){this.scene=new ds(this.sceneRender),this.sceneRender.scene.add(this.scene.container)}},{key:"addTerrain",value:function(){var e=ia.getInstance().items.mainSquareCollisionModel.scene;this.terrain=new ir(e),this.sceneRender.scene.add(e)}},{key:"update",value:function(e){Qi()($i()(n.prototype),"update",this).call(this,e),this.scene&&this.scene.update(e),this.characterTickHandler(e)}},{key:"clickCallBack",value:function(e,t,i){Qi()($i()(n.prototype),"clickCallBack",this).call(this,e,t,i),/mainSquareScreen/.test(e.name)&&y.Z.emit(b.Z.T2R_VISIBLE_LIVEPLAYER,{visible:!0})}},{key:"addClickMesh",value:function(){}},{key:"addNPC",value:function(){for(var e=new Lt.Pa4,t=0;t<50;t++){var n=Math.floor(5*Math.random()+1),i={UserId:"user_"+1e4*Math.random(),NickName:"npc"+t,ImageInfoModel:n},a=La.create("main",i);this.sceneRender.scene.add(a),Yi.add(i.UserId,a),a.updateDressup(n,1),a.traverse((function(e){e.layers.set(fa)})),a.resetPosAndRotation(e,0),a.position.z=6*t-150,a.targetPosition=a.position.clone(),a.traverse((function(e){e.updateMatrix()}))}}},{key:"setToVenueEntry",value:function(){if(Ho.previousId&&Ho.previousId!==Rt.MainSquare.id){var e=Ho.getConfigById(Ho.previousId);if(!e)return;var t=(new Lt.Pa4).copy(e.entryPos),n=e.entryRotation+Math.PI;this.character.resetPosAndRotation(t,n),this.sceneRender.viewer.navigation.forceToTargetBack()}}},{key:"dispose",value:function(){this.scene&&(this.removeEvent(),this.terrain.dispose(),this.scene.dispose(),this.removeDebug(),this.bgm&&this.bgm.destroy(),this.scene=null,this.debug=null,Qi()($i()(n.prototype),"dispose",this).call(this))}}]),n}(Xa),fs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueArticleModel,n=e.venueArticleLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ps=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e.setEmissiveModel(),e.container.matrixAutoUpdate=!0,e.container.position.set(-4.14,26.46,-254.11),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueBallModel,i=t.venueBallLightmapTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material)})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"setEmissiveModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueBallemissiveModel,i=t.venueEmissiveTexture;if(Fi.instance.setThreeTexture(i),this.emissiveMaterial=new nr({map:i}),this.emissiveModel=n.scene,this.emissiveModel.traverse((function(t){t.isMesh&&(t.material=e.emissiveMaterial)})),this.container.add(this.emissiveModel),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.emissiveMaterial,a),Fi.getInstance().addModelDebug(this.emissiveModel,this.emissiveMaterial,a)}}},{key:"update",value:function(e){this.container.rotation.y+=5e-4*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ms=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueContainerModel,n=e.venueContainerLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),vs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueDecorateModel,n=e.modelTestMatcapTexture;this.model=t.scene;var i=new Lt.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vMatCapUV;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n\n    vUv = uv;\n    vNormal = normal;\n    vPosition = position;\n\n    vec4 p = vec4( position, 1. );\n    vec3 e = normalize( vec3( modelViewMatrix * p ) );\n    vec3 n = normalize( normalMatrix * normal );\n\n    vec3 r = reflect( e, n );\n    float m = 2. * sqrt(\n        pow( r.x, 2. ) +\n        pow( r.y, 2. ) +\n        pow( r.z + 1., 2. )\n    );\n\n    vMatCapUV = r.xy / m + .5;\n    vWorldPos = (modelMatrix * p).xyz;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    #include <virtualverse_vertex>\n\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vMatCapUV;\n\nuniform float uDiffuseRepeat;\nuniform sampler2D tDiffuse;\nuniform sampler2D tMatcap;\nuniform sampler2D tLightmap;\nuniform float uLightMix;\nuniform float uMatcapMix;\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n\tvec4 diffuseColor = vec4(1.0);\n\n    vec4 matcapColor = texture2D(tMatcap,vMatCapUV);\n\tdiffuseColor *= matcapColor;\n\n\tgl_FragColor = diffuseColor;\n\n    #include <virtualverse_fragment>\n}\n",uniforms:{tMatcap:{value:n,label:"matcap"}}});if(Fi.getInstance().replaceCommonShader(i),i.defines.USE_CLIPPING=!0,this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),gs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBallModel,n=e.mainSquareCenterBallMatcapTexture,i=e.mainSquareCenterBallAlphaTexture,a=e.waterdudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:5},uDistortionStrength:{value:.02},uWaveSpeed:{value:.01},uPower:{value:5},uStrength:{value:5},uColor:{value:new Lt.Ilk("#0b0e16")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),xs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueWallGraffitiModel,n=e.venueWallGraffitiLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),bs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setGround(),e}return Ii()(n,[{key:"setGround",value:function(){var e=ia.getInstance().items,t=e.venueFloorModel,n=e.venueFloorLightmapTexture,i=e.venueFloorSeamlessTexture;Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i);var a=new hr(t.scene.children[0].geometry,{isRender:!0});if(a.material=new mr({lightMap:n,repeatMap:i}),a.matrixAutoUpdate=!1,this.ground=a,this.container.add(a),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.ground.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ys=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHintSourceModel,s=a.venueHintReplaceModel,o=a.venueHintTexture;Fi.instance.setThreeTexture(o),i.material=new Lt.jyz({vertexShader:xr,fragmentShader:gr,uniforms:{tDiffuse:{value:o},uEdge:{value:0},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1}),i.material.defines.USE_LINEARMAPPING=!0,Fi.instance.replaceCommonShader(i.material);var l=r.scene.children[0].geometry,u=[],c=[];s.scene.traverse((function(e){if(/Pos_/.test(e.name)){var t=parseInt(e.name.split("_")[1]);u[3*t]=e.position.x,u[3*t+1]=e.position.y,u[3*t+2]=e.position.z}}));for(var d=u.length/3,h=0;h<d;h++)c.push(h);l.setAttribute("instanceIndex",new Lt.lb7(new Float32Array(c),1)),i.instanceMesh=new Lt.SPe(l,i.material,d),i.tranformMatrix=new Lt.yGw;for(var f=0;f<d;f++)i.tranformMatrix.setPosition(u[3*f],u[3*f+1],u[3*f+2]),i.instanceMesh.setMatrixAt(f,i.tranformMatrix);return i.instanceMesh.instanceMatrix.needsUpdate=!0,i.container.add(i.instanceMesh),i}return Ii()(n,[{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ms=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHoloScreenModel,s=a.venueHoloScreenTexture;Fi.instance.setThreeTexture(s,!0);if(i.material=new Lt.jyz({vertexShader:Mr,fragmentShader:yr,uniforms:{tAlphaTexture:{value:s},uTime:{value:0},uSaturation:{value:.283},uValue:{value:.924},uHueSpeed:{value:.8}},transparent:!0,depthWrite:!1,depthTest:!0,blending:Lt.WMw,side:Lt.ehD}),i.model=r.scene,i.model.traverse((function(e){e.isMesh&&(e.material=i.material,e.updateMatrix()),e.matrixAutoUpdate=!1})),i.container.add(i.model),window.debug3D){var o=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,o),Fi.getInstance().addModelDebug(i.model,i.material,o)}return i}return Ii()(n,[{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ws=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).nearestId=-1,i.pointPositions=[new Lt.Pa4(46.78,0,-16.85)],i}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items.venueCheckpointModel;this.model=e.scene;var t=new nr({color:16776960});this.model.children[0].material=t,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model)}},{key:"update",value:function(e){var t=this,n=999,i=-1;if(this.character=this.character||Ho.getScene().character,this.pointPositions.forEach((function(e,a){var r=Math.pow(e.x-t.character.position.x,2)+Math.pow(e.z-t.character.position.z,2);r<25&&r<n&&Math.abs(t.character.position.y-e.y)<1&&(n=r,i=a+1)})),i>0){if(this.nearestId===i)return;this.nearestId=i,y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_scene",otherId:parseInt(Ho.currentId%10)})}else{if(-1===this.nearestId)return;this.nearestId=-1}}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ts="#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D tMap;\nuniform float uTime;\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 color = texture2D(tMap, vUv - vec2(0., uTime * 0.0003));\n\n    gl_FragColor = color;\n    \n    #include <virtualverse_fragment>\n}",_s="#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",Ss=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueLogo1Model,i=t.venueLogo2Model,a=t.venueLogo1LightmapTexture,r=t.venueLogo2LightmapTexture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(r),r.wrapS=r.wrapT=Lt.rpg,this.material1=new nr({map:a}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:_s,fragmentShader:Ts,uniforms:{tMap:{value:r},uTime:{value:0}},transparent:!0,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.container.add(this.model2),window.debug3D){var s=Ni.addFolder({title:"Logo1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,s),Fi.getInstance().addModelDebug(this.model1,this.material1,s);var o=Ni.addFolder({title:"Logo2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,o),Fi.getInstance().addModelDebug(this.model2,this.material2,o)}}},{key:"update",value:function(e){this.material2.uniforms.uTime.value+=e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),As=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=[{mix:1,contrast:0,brightness:0,saturation:-.3,exposure:.85},{mix:1,contrast:.1,brightness:.02,saturation:0,exposure:.35},{mix:1,contrast:0,brightness:0,saturation:-.15,exposure:.5}],a=1;a<=3;a++)e.setModel(a,i[a-1]);return e.modelConfig=ce[0],e.nearestModelList=[],e}return Ii()(n,[{key:"setModel",value:function(e,t){var n=ia.getInstance().items["modelTest".concat(e,"Model")].scene,i=ia.getInstance().items["venueModelDiffuse".concat(e,"Texture")],a=ia.getInstance().items["venueModelAlpha".concat(e,"Texture")],r=ia.getInstance().items["venueModelRoughness".concat(e,"Texture")],s=ia.getInstance().items["venueModelMatcap".concat(e,"Texture")];Fi.instance.setThreeTexture(i),a.flipY=!1,r.flipY=!1;var o=new Lt.jyz({vertexShader:Er,fragmentShader:Ar,uniforms:{tDiffuse:{value:i,label:""},tMatcap:{value:s,label:"matcap"},tRoughness:{value:r,label:""},tAlpha:{value:a,label:""},uMatcapMix:{value:t.mix,label:"matcap"},uContrast:{value:t.contrast,label:"",noDebug:!0},uBrightness:{value:t.brightness,label:"",noDebug:!0},uSaturation:{value:t.saturation,label:"",noDebug:!0},uExposure:{value:t.exposure,label:"",noDebug:!0}},transparent:!0});if(Fi.getInstance().replaceCommonShader(o),o.defines.USE_CLIPPING=!1,n.traverse((function(e){e.isMesh&&(e.material=o,e.layers.set(fa)),e.matrixAutoUpdate=!1})),this.container.add(n),window.debug3D){var l=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(o,l),Fi.getInstance().addModelDebug(n,o,l),l.addInput(o.uniforms.uContrast,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uBrightness,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uSaturation,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uExposure,"value",{min:-1,max:1,step:.01,label:""})}}},{key:"getNearestModel",value:function(){var e=this;this.nearestModelList.length=0;var t=999;this.character=this.character||Ho.getScene().character,this.modelConfig.forEach((function(n){if(""!==n.X&&""!==n.Z){var i=Math.pow(n.X-e.character.position.x,2)+Math.pow(n.Y-e.character.position.z,2);i<200&&(i<t?(e.nearestModelList.length=0,e.nearestModelList.push(n.id),t=i):i===t&&e.nearestModelList.push(n.id))}}))}},{key:"update",value:function(e){this.getNearestModel(),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:this.nearestModelList})}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:[]})}}]),n}(ar),Es=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=1;i<=3;i++)e.setModel(i);return e}return Ii()(n,[{key:"setModel",value:function(e){var t=this,n=ia.getInstance().items["venuePainting".concat(e,"Model")],i=ia.getInstance().items["venuePainting".concat(e,"Texture")];if(Fi.instance.setThreeTexture(i,!1),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(e){e.isMesh&&(e.material=t.material),e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Is=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueShowcaseModel,i=t.venueShowcaseLightmapTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Cs=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).setModel(),i.setModel2(),i}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueEmissiveModel,i=t.venueEmissiveTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i,transparent:!0}),this.material.defines.USE_LINEARMAPPING=!0,n.scene.traverse((function(t){t.isMesh&&(t.material=e.material,t.updateMatrix()),t.matrixAutoUpdate=!1})),this.container.add(n.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(n.scene,this.material,a)}}},{key:"setModel2",value:function(){var e=this,t=ia.getInstance().items,n=t.venueEmissivePictureModel,i=t.venueEmissivePictureLightmapTexture;if(Fi.instance.setThreeTexture(i),this.material2=new nr({map:i,transparent:!0}),this.material2.defines.USE_LINEARMAPPING=!0,n.scene.traverse((function(t){t.isMesh&&(t.material=e.material2,t.updateMatrix()),t.matrixAutoUpdate=!1})),this.container.add(n.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,a),Fi.getInstance().addModelDebug(n.scene,this.material2,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ks="#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D map;\nuniform sampler2D lightMap;\nuniform vec2 mapRepeat;\nuniform float uMix;\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main() {\n\n    #include <vv_clipping_fragment>\n\n    vec4 texelColor = texture2D(map, vUv * mapRepeat);\n\n    vec4 lightMapColor = texture2D(lightMap, vUv);\n\n\tvec3 final = blendAdd(texelColor.rgb, lightMapColor.rgb, uMix);\n\n    gl_FragColor = vec4(final, 1.0);\n\n    #include <virtualverse_fragment>\n}",Ls="#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <common>\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    \n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",Os=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueUnkownModel,i=t.venueUnkownTexture,a=t.venueUnkownLightmapTexture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(i),i.wrapS=i.wrapT=Lt.OoA,this.material=new Lt.jyz({vertexShader:Ls,fragmentShader:ks,uniforms:{map:{value:i},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:a},uMix:{value:.3}}}),Fi.getInstance().replaceCommonShader(this.material),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.material.defines.USE_CLIPPING=!0,this.container.add(this.model),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,r),Fi.getInstance().addModelDebug(this.model,this.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ps=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueScreenModel,n=e.venueScreenTexture;this.model=t.scene,n.wrapS=n.wrapT=Lt.rpg,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Rs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueWall1Model,i=t.venueWall2Model,a=t.venueWall1LightmapTexture,r=t.venueWall2LightmapTexture,s=t.venueWall1Texture,o=t.venueWall2Texture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(s),Fi.getInstance().setThreeTexture(o),s.wrapS=s.wrapT=Lt.OoA,o.wrapS=o.wrapT=Lt.OoA,this.material=new Lt.jyz({vertexShader:Ls,fragmentShader:ks,uniforms:{map:{value:s},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:a},uMix:{value:.8}}}),Fi.getInstance().replaceCommonShader(this.material),this.material.defines.USE_CLIPPING=!0,this.material2=new Lt.jyz({vertexShader:Ls,fragmentShader:ks,uniforms:{map:{value:o},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:r},uMix:{value:.2}}}),Fi.getInstance().replaceCommonShader(this.material2),this.material2.defines.USE_CLIPPING=!0,this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.container.add(this.model),this.container.add(this.model2),window.debug3D){var l=Ni.addFolder({title:"",expanded:!1}),u=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,l),Fi.getInstance().addMaterialDebug(this.material2,u),Fi.getInstance().addModelDebug(this.model,this.material,l),Fi.getInstance().addModelDebug(this.model2,this.material2,u)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ds=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).sceneRender=e,i.options={},i.setGround(),i.setWall(),i.setShowCase(),i.setPainting(),i.setCabinet(),i.setLogo(),i.setBall(),i.setArticle(),i.setScreen(),i.setGraffiti(),i.setDynamicEffect(),i.setUnknow(),i.setLandMark(),i.setHoloScreenEffect(),i.setSimpleColorObjects(),i.setHint(),i.setModelTest(),i.setInsidePortal(),i}return Ii()(n,[{key:"setGround",value:function(){this.ground=new bs,this.container.add(this.ground.container)}},{key:"setWall",value:function(){this.wall=new Rs,this.container.add(this.wall.container)}},{key:"setModelTest",value:function(){this.modelTest=new As,this.container.add(this.modelTest.container)}},{key:"setSimpleColorObjects",value:function(){this.simpleColorObjects=new Cs,this.container.add(this.simpleColorObjects.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.simpleColorObjects.container)}},{key:"setShowCase",value:function(){this.showcase=new Is,this.container.add(this.showcase.container)}},{key:"setPainting",value:function(){this.painting=new Es,this.container.add(this.painting.container)}},{key:"setCabinet",value:function(){this.cabinet=new ms,this.container.add(this.cabinet.container)}},{key:"setLogo",value:function(){this.logo=new Ss,this.container.add(this.logo.container)}},{key:"setBall",value:function(){this.ball=new ps,this.container.add(this.ball.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.ball.container)}},{key:"setDecoration",value:function(){this.decoration=new vs,this.container.add(this.decoration.container)}},{key:"setArticle",value:function(){this.article=new fs,this.container.add(this.article.container)}},{key:"setScreen",value:function(){this.screen=new Ps,this.container.add(this.screen.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.screen.container)}},{key:"setGraffiti",value:function(){this.graffiti=new xs,this.container.add(this.graffiti.container)}},{key:"setDynamicEffect",value:function(){this.dynamicEffect=new gs,this.container.add(this.dynamicEffect.container)}},{key:"setUnknow",value:function(){this.unknow=new Os,this.container.add(this.unknow.container)}},{key:"setHint",value:function(){this.hint=new ys,this.container.add(this.hint.container)}},{key:"setHoloScreenEffect",value:function(){this.holoScreenEffect=new Ms,this.container.add(this.holoScreenEffect.container)}},{key:"setInsidePortal",value:function(){this.insidePortal=new rr({pos:new Lt.Pa4(.03,0,.52),sceneId:Rt.MainSquare.id}),this.container.add(this.insidePortal.container)}},{key:"setLandMark",value:function(){this.landMark=new ws,this.container.add(this.landMark.container)}},{key:"update",value:function(e){this.ground&&this.ground.update(e),this.ball&&this.ball.update(e),this.dynamicEffect&&this.dynamicEffect.update(e),this.holoScreenEffect&&this.holoScreenEffect.update(e),this.logo&&this.logo.update(e),this.modelTest&&this.modelTest.update(e),this.insidePortal&&this.insidePortal.update(e),this.landMark&&this.landMark.update(e)}},{key:"dispose",value:function(){this.ground&&this.ground.dispose(),this.modelTest&&this.modelTest.dispose(),this.simpleColorObjects&&this.simpleColorObjects.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ns=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){return Ai()(this,n),t.call(this,e,i)}return Ii()(n,[{key:"onLoaded",value:function(){Qi()($i()(n.prototype),"onLoaded",this).call(this),this.setDebug(),this.setScene(),this.addTerrain(),this.collideHandler(),this.addPlayer(),this.addSkyBox(),this.setEvent(),this.addClickMesh(),this.addPickHelper(),this.connectMultiplyService(),this.setBGM()}},{key:"setEvent",value:function(){this.changeSceneTestHandler=Fi.getInstance().changeSceneTest.bind(this),document.addEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"setPasses",value:function(){Qi()($i()(n.prototype),"setPasses",this).call(this);var e=this.sceneRender.passes.bloomEffect;e.luminanceMaterial.threshold=.174,e.luminanceMaterial.smoothing=.478,e.intensity=1,e.mipmapBlurPass.radius=.62,e.blendMode.opacity.value=.85;var t=this.sceneRender.passes.depthEffect;t.uniforms.get("uColor").value.set("#000000"),t.uniforms.get("uStrength").value=79,this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=0}},{key:"setBGM",value:function(){this.bgm=new $a,document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){y.Z.emit(b.Z.FIRST_CLICK)}),{once:!0})}},{key:"setDebug",value:function(){window.debug3D&&(this.debug=Ni)}},{key:"removeDebug",value:function(){window.debug3D}},{key:"setScene",value:function(){this.scene=new Ds(this.sceneRender),this.sceneRender.scene.add(this.scene.container)}},{key:"addTerrain",value:function(){var e=ia.getInstance().items.venueCollisionModel.scene;this.terrain=new ir(e),this.sceneRender.scene.add(e)}},{key:"update",value:function(e){Qi()($i()(n.prototype),"update",this).call(this,e),this.scene&&this.scene.update(e),this.characterTickHandler(e)}},{key:"clickCallBack",value:function(e,t,i){Qi()($i()(n.prototype),"clickCallBack",this).call(this,e,t,i)}},{key:"addClickMesh",value:function(){}},{key:"addNPC",value:function(){for(var e=new Lt.Pa4,t=0;t<50;t++){var n=Math.floor(5*Math.random()+1),i={UserId:"user_"+1e4*Math.random(),NickName:"npc"+t,ImageInfoModel:n},a=La.create("main",i);this.sceneRender.scene.add(a),Yi.add(i.UserId,a),a.updateDressup(n,1),a.traverse((function(e){e.layers.set(fa)})),a.resetPosAndRotation(e,0),a.position.z=6*t-150,a.targetPosition=a.position.clone(),a.traverse((function(e){e.updateMatrix()}))}}},{key:"dispose",value:function(){this.scene&&(this.removeEvent(),this.terrain.dispose(),this.scene.dispose(),this.removeDebug(),this.bgm&&this.bgm.destroy(),this.scene=null,this.debug=null,Qi()($i()(n.prototype),"dispose",this).call(this))}}]),n}(Xa),Bs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueDecorationModel,n=e.modelTestMatcapTexture,i=e.venueDecorationLightmapTexture;this.model=t.scene,Fi.instance.setThreeTexture(i);var a=new Lt.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vPosition;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n\n    vUv = uv;\n    vPosition = position;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    #include <virtualverse_vertex>\n\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tLightmap;\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 lightMapColor = texture2D(tLightmap,vUv);\n\n\tgl_FragColor = lightMapColor;\n\n    #include <virtualverse_fragment>\n}\n",uniforms:{tMatcap:{value:n,label:"matcap"},tLightmap:{value:i,label:""}}});if(Fi.getInstance().replaceCommonShader(a),a.defines.USE_CLIPPING=!0,this.model.children[0].material=a,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a,r),Fi.getInstance().addModelDebug(this.model,a,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Us=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBallModel,n=e.mainSquareCenterBallMatcapTexture,i=e.mainSquareCenterBallAlphaTexture,a=e.waterdudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:8},uDistortionStrength:{value:.02},uWaveSpeed:{value:.02},uPower:{value:5},uStrength:{value:5},uColor:{value:new Lt.Ilk("#c1dfff")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),js=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBall2Model,n=e.mainSquareCenterBall2MatcapTexture,i=e.mainSquareCenterBall2AlphaTexture,a=e.mainSquareCenterBall2DudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:5},uDistortionStrength:{value:.05},uWaveSpeed:{value:.05},uPower:{value:2},uStrength:{value:3},uColor:{value:new Lt.Ilk("#1c1c1c")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Fs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueGlassModel,n=e.venueGlassMatcapTexture,i=e.venueGlassAlphaTexture,a=e.venueGlassDudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:0},uDistortionStrength:{value:0},uWaveSpeed:{value:0},uPower:{value:0},uStrength:{value:1},uColor:{value:new Lt.Ilk("#131313")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ys=Ii()((function e(t){Ai()(this,e);var n=ia.getInstance().items.venueFloorDudvTexture;n.wrapS=n.wrapT=Lt.rpg;var i=dr.getInstance().getRenderTarget().texture,a=dr.getInstance().getRenderTextureMatrix(),r="#c8d5ff",s="#879595",o=1024,l=1024,u={color:{value:new Lt.Ilk(r),label:""},tDiffuse:{value:null!==t.diffuseMap?i:null,noDebug:!0},textureMatrix:{value:a,noDebug:!0},tDudv:{value:n,label:""},tLightMap:{value:t.lightMap,label:""},tRepeatMap:{value:t.repeatMap,label:""},uRepeat:{value:t.repeat||1,label:""},uvOffset:{value:new Lt.FM8(-.75,-1)},uReflectMix:{value:.15,label:""},uRepeatMix:{value:.5,label:""},uDirection:{value:new Lt.FM8(1.18,1.18),label:""},uBluriness:{value:3,label:""},resolution:{value:new Lt.FM8(o,l),noDebug:!0},uLightColor:{value:new Lt.Ilk(s),label:""},uLightStrength:{value:.7,label:""},uDistortionStrength:{value:.8,label:""}},c=new Lt.jyz({uniforms:u,vertexShader:"#define GLSLIFY 1\nuniform mat4 textureMatrix;\n\nvarying vec2 vUv;\nvarying vec4 vUvRefraction;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec4 worldPosition;\n\nvoid main() {\n    vUv = uv;\n    vNormal = normal;\n    vPosition = position;\n    vUvRefraction = textureMatrix * vec4(position, 1.0);\n    worldPosition = modelMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec4 vUvRefraction;\nvarying vec4 worldPosition;\n\nuniform vec3 color;\nuniform vec3 uLightColor;\nuniform sampler2D tDiffuse;\nuniform sampler2D tDudv;\nuniform sampler2D tLightMap;\nuniform sampler2D tRepeatMap;\nuniform vec2 resolution;\nuniform vec2 uDirection;\nuniform vec2 uvOffset;\nuniform float uBluriness;\nuniform float uLightStrength;\nuniform float uDistortionStrength;\nuniform float uRepeat;\nuniform float uRepeatMix;\nuniform float uReflectMix;\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n\treturn (base+blend)/2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAverage(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n    vec4 color = vec4(0.0);\n    vec2 off1 = vec2(1.411764705882353) * direction;\n    vec2 off2 = vec2(3.2941176470588234) * direction;\n    vec2 off3 = vec2(5.176470588235294) * direction;\n    color += texture2D(image, uv) * 0.1964825501511404;\n    color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n    color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n    color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n    color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n    color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n    color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n    return color;\n}\n\nfloat blendOverlay(float base, float blend) {\n    return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n    return vec3(blendOverlay(base.r, blend.r), blendOverlay(base.g, blend.g), blendOverlay(base.b, blend.b));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nvoid main() {\n\n    vec3 light_color = uLightColor * uLightStrength;\n\n    #ifndef IS_SUPPORT_REFLECT\n\n        // gl_FragColor = vec4(blend(groundColor, light_color), 1.0);\n    gl_FragColor = vec4(light_color, 1.0);\n\n    #else\n    vec2 distortedUv = texture2D(tDudv, vec2(vUv.x, vUv.y)).rg * uDistortionStrength;\n    distortedUv = vUv.xy + vec2(distortedUv.x, distortedUv.y);\n    vec2 distortion = (texture2D(tDudv, distortedUv).rg * 2.0 - 1.0) * uDistortionStrength;\n\n    vec4 uv = vec4(vUvRefraction);\n    uv.xy += distortion + uvOffset;\n\n    #ifdef USE_BLUR\n        vec2 uvProj = vec2(uv.x / uv.w, uv.y / uv.w);\n        vec4 base = blur13(tDiffuse, uvProj, resolution, smootherstep(uBluriness, 0.0, vUv.y) * (uDirection));\n    #else\n        vec4 base = texture2DProj(tDiffuse, uv);\n    #endif\n\n    vec3 ligthmap_color = texture2D(tLightMap, vUv).rgb;\n    vec3 repeatmap_color = texture2D(tRepeatMap, vUv * uRepeat).rgb;\n\n    vec3 reflect_color = blendOverlay(base.rgb, color);\n\n    vec3 mixColor = blendAdd(ligthmap_color, repeatmap_color, uRepeatMix);\n    mixColor = blendAverage(mixColor, reflect_color, uReflectMix);\n\n    gl_FragColor = vec4(mixColor, 0.9);\n\n    #endif\n}"});return c.defines.USE_BLUR=!0,c.defines.IS_SUPPORT_REFLECT=Fi.getInstance().isSupportReflect(),c})),Gs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setGround(),e}return Ii()(n,[{key:"setGround",value:function(){var e=ia.getInstance().items,t=e.venueFloorModel,n=e.venueFloorLightmapTexture,i=e.venueFloorSeamlessTexture;Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),i.wrapS=i.wrapT=Lt.OoA;var a=new hr(t.scene.children[0].geometry,{isRender:!1});if(a.material=new Ys({lightMap:n,repeatMap:i,diffuseMap:null,uRepeatMix:.6,repeat:15}),a.matrixAutoUpdate=!1,this.ground=a,this.container.add(a),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.ground.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Hs=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHintSourceModel,s=a.venueHintReplaceModel,o=a.venueHintTexture;Fi.instance.setThreeTexture(o),i.material=new Lt.jyz({vertexShader:xr,fragmentShader:gr,uniforms:{tDiffuse:{value:o},uEdge:{value:0},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1}),i.material.defines.USE_LINEARMAPPING=!0,Fi.instance.replaceCommonShader(i.material);var l=r.scene.children[0].geometry,u=[],c=[];s.scene.traverse((function(e){if(/Pos_/.test(e.name)){var t=parseInt(e.name.split("_")[1]);u[3*t]=e.position.x,u[3*t+1]=e.position.y,u[3*t+2]=e.position.z}}));for(var d=u.length/3,h=0;h<d;h++)c.push(h);l.setAttribute("instanceIndex",new Lt.lb7(new Float32Array(c),1)),i.instanceMesh=new Lt.SPe(l,i.material,d),i.tranformMatrix=new Lt.yGw;for(var f=0;f<d;f++)i.tranformMatrix.setPosition(u[3*f],u[3*f+1],u[3*f+2]),i.instanceMesh.setMatrixAt(f,i.tranformMatrix);return i.instanceMesh.instanceMatrix.needsUpdate=!0,i.container.add(i.instanceMesh),i}return Ii()(n,[{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Zs=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHoloScreenModel,s=a.venueHoloScreenTexture;Fi.instance.setThreeTexture(s,!0);if(i.material=new Lt.jyz({vertexShader:Mr,fragmentShader:yr,uniforms:{tAlphaTexture:{value:s},uTime:{value:0},uSaturation:{value:.283},uValue:{value:.924},uHueSpeed:{value:.8}},transparent:!0,depthWrite:!1,depthTest:!0,blending:Lt.WMw}),i.model=r.scene,i.model.traverse((function(e){e.isMesh&&(e.material=i.material,e.updateMatrix()),e.matrixAutoUpdate=!1})),i.container.add(i.model),window.debug3D){var o=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,o),Fi.getInstance().addModelDebug(i.model,i.material,o)}return i}return Ii()(n,[{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ks=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).nearestId=-1,i.pointPositions=[new Lt.Pa4(33.49,0,-.29)],i}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items.venueCheckpointModel;this.model=e.scene;var t=new nr({color:16776960});this.model.children[0].material=t,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model)}},{key:"update",value:function(e){var t=this,n=999,i=-1;if(this.character=this.character||Ho.getScene().character,this.pointPositions.forEach((function(e,a){var r=Math.pow(e.x-t.character.position.x,2)+Math.pow(e.z-t.character.position.z,2);r<2.25&&r<n&&Math.abs(t.character.position.y-e.y)<1&&(n=r,i=a+1)})),i>0){if(this.nearestId===i)return;this.nearestId=i,y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_scene",otherId:parseInt(Ho.currentId%10)})}else{if(-1===this.nearestId)return;this.nearestId=-1}}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Vs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueLogo1Model,i=t.venueLogo2Model,a=t.venueLogo1LightmapTexture,r=t.venueLogo2LightmapTexture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(r),a.wrapS=a.wrapT=Lt.rpg,r.wrapS=r.wrapT=Lt.rpg,this.material1=new Lt.jyz({vertexShader:_r,fragmentShader:Tr,uniforms:{tMap:{value:a},uTime:{value:0}},transparent:!0,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:_r,fragmentShader:Tr,uniforms:{tMap:{value:r},uTime:{value:0}},transparent:!0,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.container.add(this.model2),window.debug3D){var s=Ni.addFolder({title:"Logo1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,s),Fi.getInstance().addModelDebug(this.model1,this.material1,s);var o=Ni.addFolder({title:"Logo2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,o),Fi.getInstance().addModelDebug(this.model2,this.material2,o)}}},{key:"update",value:function(e){this.material1.uniforms.uTime.value+=e,this.material2.uniforms.uTime.value+=e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),zs="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tLightmap;\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nvoid main() {\n    #include <vv_clipping_fragment>\n\n    vec4 lightMapColor = texture2D(tLightmap,vUv);\n\n\tgl_FragColor = lightMapColor;\n\n    #include <virtualverse_fragment>\n}\n",Ws="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vPosition;\n\n#include <virtualverse_vertex_parts>\n#include <common>\n\nvoid main() {\n\n    vUv = uv;\n    vPosition = position;\n    \n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    #include <virtualverse_vertex>\n\n}",qs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueMetalModel,n=e.venueMatcapMetalTexture,i=e.venueMetalTexture;this.model=t.scene,Fi.instance.setThreeTexture(i);var a=new Lt.jyz({vertexShader:Ws,fragmentShader:zs,uniforms:{tMatcap:{value:n,label:"matcap"},tLightmap:{value:i,label:""}}});if(Fi.getInstance().replaceCommonShader(a),a.defines.USE_CLIPPING=!0,this.model.children[0].material=a,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a,r),Fi.getInstance().addModelDebug(this.model,a,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Xs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=[{mix:1,contrast:.28,brightness:0,saturation:.1,exposure:.1},{mix:1,contrast:.07,brightness:.13,saturation:0,exposure:.26},{mix:.9,contrast:-.09,brightness:.04,saturation:-.17,exposure:.28},{mix:1,contrast:.25,brightness:.08,saturation:0,exposure:.3},{mix:1,contrast:.32,brightness:.1,saturation:-.07,exposure:.04}],a=1;a<=5;a++)e.setModel(a,i[a-1]);return e.modelConfig=ce[1],e.nearestModelList=[],e}return Ii()(n,[{key:"setModel",value:function(e,t,n){var i=ia.getInstance().items["modelTest".concat(e,"Model")].scene,a=ia.getInstance().items["venueModelDiffuse".concat(e,"Texture")],r=ia.getInstance().items["venueModelAlpha".concat(e,"Texture")],s=ia.getInstance().items["venueModelRoughness".concat(e,"Texture")],o=ia.getInstance().items["venueModelMatcap".concat(e,"Texture")];Fi.instance.setThreeTexture(a),r.flipY=!1,s.flipY=!1;var l=new Lt.jyz({vertexShader:Er,fragmentShader:Ar,uniforms:{tDiffuse:{value:a,label:""},tMatcap:{value:o,label:"matcap"},tRoughness:{value:s,label:""},tAlpha:{value:r,label:""},uMatcapMix:{value:t.mix,label:"matcap"},uContrast:{value:t.contrast,label:"",noDebug:!0},uBrightness:{value:t.brightness,label:"",noDebug:!0},uSaturation:{value:t.saturation,label:"",noDebug:!0},uExposure:{value:t.exposure,label:"",noDebug:!0}},transparent:!0});if(Fi.getInstance().replaceCommonShader(l),l.defines.USE_CLIPPING=!1,i.traverse((function(e){e.isMesh&&(e.material=l,e.layers.set(fa)),e.matrixAutoUpdate=!1})),this.container.add(i),window.debug3D){var u=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(l,u),Fi.getInstance().addModelDebug(i,l,u),u.addInput(l.uniforms.uContrast,"value",{min:-1,max:1,step:.01,label:""}),u.addInput(l.uniforms.uBrightness,"value",{min:-1,max:1,step:.01,label:""}),u.addInput(l.uniforms.uSaturation,"value",{min:-1,max:1,step:.01,label:""}),u.addInput(l.uniforms.uExposure,"value",{min:-1,max:1,step:.01,label:""})}}},{key:"getNearestModel",value:function(){var e=this;this.nearestModelList.length=0;var t=999;this.character=this.character||Ho.getScene().character,this.modelConfig.forEach((function(n){if(""!==n.X&&""!==n.Z){var i=Math.pow(n.X-e.character.position.x,2)+Math.pow(n.Y-e.character.position.z,2);i<200&&(i<t?(e.nearestModelList.length=0,e.nearestModelList.push(n.id),t=i):i===t&&e.nearestModelList.push(n.id))}}))}},{key:"update",value:function(e){this.getNearestModel(),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:this.nearestModelList})}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:[]})}}]),n}(ar),Qs=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=1;i<=4;i++)e.setModel(i);return e}return Ii()(n,[{key:"setModel",value:function(e){var t=this,n=ia.getInstance().items["venuePainting".concat(e,"Model")],i=ia.getInstance().items["venuePainting".concat(e,"Texture")];if(Fi.instance.setThreeTexture(i,!1),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(e){e.isMesh&&(e.material=t.material),e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Js=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueShowcaseModel,i=t.venueShowcaseLightmapTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),$s=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).setModel(),i}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueEmissiveModel,i=t.venueEmissiveTexture;if(Fi.instance.setThreeTexture(i,!0,!1),this.material=new nr({map:i,side:Lt.ehD,transparent:!0}),this.material.defines.USE_LINEARMAPPING=!0,n.scene.traverse((function(t){t.isMesh&&(t.material=e.material,t.updateMatrix()),t.matrixAutoUpdate=!1})),this.container.add(n.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),eo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueUnkownModel,i=t.venueUnkownTexture,a=t.venueUnkownLightmapTexture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(i),i.wrapS=i.wrapT=Lt.OoA,this.material=new Lt.jyz({vertexShader:Ls,fragmentShader:ks,uniforms:{map:{value:i},mapRepeat:{value:new Lt.FM8(2,1)},lightMap:{value:a},uMix:{value:.5}}}),Fi.getInstance().replaceCommonShader(this.material),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,r),Fi.getInstance().addModelDebug(this.model,this.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),to=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueScreenModel,n=e.venueScreenTexture;this.model=t.scene,n.wrapS=n.wrapT=Lt.rpg,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n,side:Lt.ehD});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),no="#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D map;\nuniform sampler2D lightMap;\nuniform vec2 mapRepeat;\nuniform float uMix;\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main() {\n\n    #include <vv_clipping_fragment>\n\n    vec4 texelColor = texture2D(map, vUv * mapRepeat);\n\n    vec4 lightMapColor = texture2D(lightMap, vUv);\n\n\tvec3 final = blendAdd(texelColor.rgb, lightMapColor.rgb, uMix);\n\n    gl_FragColor = vec4(final, 1.0);\n\n    #include <virtualverse_fragment>\n}",io="#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <common>\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    \n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",ao=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueWall1Model,i=t.venueWall2Model,a=t.venueWall3Model,r=t.venueWall1LightmapTexture,s=t.venueWall2LightmapTexture,o=t.venueWall3LightmapTexture,l=t.venueWallSeamlessTexture;if(Fi.getInstance().setThreeTexture(l),Fi.getInstance().setThreeTexture(r),Fi.getInstance().setThreeTexture(s),Fi.getInstance().setThreeTexture(o),l.wrapS=l.wrapT=Lt.OoA,this.material1=new Lt.jyz({vertexShader:io,fragmentShader:no,uniforms:{map:{value:l},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:r},uMix:{value:.85}}}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.material1.defines.USE_CLIPPING=!0,this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:io,fragmentShader:no,uniforms:{map:{value:l},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:s},uMix:{value:.55}}}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.material2.defines.USE_CLIPPING=!0,this.container.add(this.model2),this.material3=new Lt.jyz({vertexShader:io,fragmentShader:no,uniforms:{map:{value:null},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:o},uMix:{value:1}}}),Fi.getInstance().replaceCommonShader(this.material3),this.model3=a.scene,this.model3.traverse((function(t){t.isMesh&&(t.material=e.material3),t.matrixAutoUpdate=!1})),this.material3.defines.USE_CLIPPING=!0,this.container.add(this.model3),window.debug3D){var u=Ni.addFolder({title:"1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,u),Fi.getInstance().addModelDebug(this.model1,this.material1,u);var c=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,c),Fi.getInstance().addModelDebug(this.model2,this.material2,c);var d=Ni.addFolder({title:"3",expanded:!1});Fi.getInstance().addMaterialDebug(this.material3,d),Fi.getInstance().addModelDebug(this.model3,this.material3,d)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ro=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).sceneRender=e,i.options={},i.setGround(),i.setWall(),i.setPainting(),i.setDecoration(),i.setMetal(),i.setShowCase(),i.setGlass(),i.setSimpleColorObjects(),i.setModelTest(),i.setInsidePortal(),i.setDynamicEffect(),i.setDynamicEffect2(),i.setLogo(),i.setUnknow(),i.setHint(),i.setLandMark(),i.setHoloScreenEffect(),i}return Ii()(n,[{key:"setGround",value:function(){this.ground=new Gs,this.container.add(this.ground.container)}},{key:"setWall",value:function(){this.wall=new ao,this.container.add(this.wall.container)}},{key:"setModelTest",value:function(){this.modelTest=new Xs,this.container.add(this.modelTest.container)}},{key:"setSimpleColorObjects",value:function(){this.simpleColorObjects=new $s,this.container.add(this.simpleColorObjects.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.simpleColorObjects.container)}},{key:"setShowCase",value:function(){this.showcase=new Js,this.container.add(this.showcase.container)}},{key:"setGlass",value:function(){this.glass=new Fs,this.container.add(this.glass.container)}},{key:"setMetal",value:function(){this.metal=new qs,this.container.add(this.metal.container)}},{key:"setPainting",value:function(){this.painting=new Qs,this.container.add(this.painting.container)}},{key:"setDecoration",value:function(){this.decoration=new Bs,this.container.add(this.decoration.container)}},{key:"setScreen",value:function(){this.screen=new to,this.container.add(this.screen.container)}},{key:"setLogo",value:function(){this.logo=new Vs,this.container.add(this.logo.container)}},{key:"setDynamicEffect",value:function(){this.dynamicEffect=new Us,this.container.add(this.dynamicEffect.container)}},{key:"setDynamicEffect2",value:function(){this.dynamicEffect2=new js,this.container.add(this.dynamicEffect2.container)}},{key:"setHoloScreenEffect",value:function(){this.holoScreenEffect=new Zs,this.container.add(this.holoScreenEffect.container)}},{key:"setUnknow",value:function(){this.unknow=new eo,this.container.add(this.unknow.container)}},{key:"setHint",value:function(){this.hint=new Hs,this.container.add(this.hint.container)}},{key:"setLandMark",value:function(){this.landMark=new Ks,this.container.add(this.landMark.container)}},{key:"setInsidePortal",value:function(){this.insidePortal=new rr({pos:new Lt.Pa4(-4.54,0,27.51),sceneId:Rt.MainSquare.id}),this.container.add(this.insidePortal.container)}},{key:"update",value:function(e){this.ground&&this.ground.update(e),this.logo&&this.logo.update(e),this.modelTest&&this.modelTest.update(e),this.insidePortal&&this.insidePortal.update(e),this.holoScreenEffect&&this.holoScreenEffect.update(e),this.dynamicEffect&&this.dynamicEffect.update(e),this.dynamicEffect2&&this.dynamicEffect2.update(e),this.landMark&&this.landMark.update(e)}},{key:"dispose",value:function(){this.ground&&this.ground.dispose(),this.modelTest&&this.modelTest.dispose(),this.simpleColorObjects&&this.simpleColorObjects.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),so=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){return Ai()(this,n),t.call(this,e,i)}return Ii()(n,[{key:"onLoaded",value:function(){Qi()($i()(n.prototype),"onLoaded",this).call(this),this.setDebug(),this.setScene(),this.addTerrain(),this.collideHandler(),this.addPlayer(),this.addSkyBox(),this.setEvent(),this.addClickMesh(),this.addPickHelper(),this.connectMultiplyService(),this.setBGM()}},{key:"setEvent",value:function(){this.changeSceneTestHandler=Fi.getInstance().changeSceneTest.bind(this),document.addEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"addSkyBox",value:function(){this.sceneRender.scene.background=new Lt.Ilk(16777215)}},{key:"setPasses",value:function(){Qi()($i()(n.prototype),"setPasses",this).call(this);var e=this.sceneRender.passes.bloomEffect;e.luminanceMaterial.threshold=.125,e.luminanceMaterial.smoothing=.691,e.intensity=.6,e.mipmapBlurPass.radius=.946,e.blendMode.opacity.value=.85;var t=this.sceneRender.passes.depthEffect;t.uniforms.get("uColor").value.set("#2f2319"),t.uniforms.get("uStrength").value=57,this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=0}},{key:"setBGM",value:function(){this.bgm=new $a,document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){y.Z.emit(b.Z.FIRST_CLICK)}),{once:!0})}},{key:"setDebug",value:function(){window.debug3D&&(this.debug=Ni)}},{key:"removeDebug",value:function(){window.debug3D}},{key:"setScene",value:function(){this.scene=new ro(this.sceneRender),this.sceneRender.scene.add(this.scene.container)}},{key:"addTerrain",value:function(){var e=ia.getInstance().items.venueCollisionModel.scene;this.terrain=new ir(e),this.sceneRender.scene.add(e)}},{key:"update",value:function(e){Qi()($i()(n.prototype),"update",this).call(this,e),this.scene&&this.scene.update(e),this.characterTickHandler(e)}},{key:"clickCallBack",value:function(e,t,i){Qi()($i()(n.prototype),"clickCallBack",this).call(this,e,t,i)}},{key:"addClickMesh",value:function(){}},{key:"addNPC",value:function(){for(var e=new Lt.Pa4,t=0;t<50;t++){var n=Math.floor(5*Math.random()+1),i={UserId:"user_"+1e4*Math.random(),NickName:"npc"+t,ImageInfoModel:n},a=La.create("main",i);this.sceneRender.scene.add(a),Yi.add(i.UserId,a),a.updateDressup(n,1),a.traverse((function(e){e.layers.set(fa)})),a.resetPosAndRotation(e,0),a.position.z=6*t-150,a.targetPosition=a.position.clone(),a.traverse((function(e){e.updateMatrix()}))}}},{key:"dispose",value:function(){this.scene&&(this.removeEvent(),this.terrain.dispose(),this.scene.dispose(),this.removeDebug(),this.bgm&&this.bgm.destroy(),this.scene=null,this.debug=null,Qi()($i()(n.prototype),"dispose",this).call(this))}}]),n}(Xa),oo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueArticleModel,n=e.venueArticleLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),lo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueDecorationModel,n=e.venueDecorationLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),uo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBallModel,n=e.mainSquareCenterBallMatcapTexture,i=e.mainSquareCenterBallAlphaTexture,a=e.waterdudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:1},uDistortionStrength:{value:.05},uWaveSpeed:{value:.02},uPower:{value:5},uStrength:{value:5},uColor:{value:new Lt.Ilk("#468fff")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1,depthTest:!0});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),co=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueWallGraffitiModel,n=e.venueWallGraffitiLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ho=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setGround(),e}return Ii()(n,[{key:"setGround",value:function(){var e=ia.getInstance().items,t=e.venueFloorModel,n=e.venueFloorSeamlessTexture,i=e.venueFloorLightmapTexture;Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),n.wrapS=n.wrapT=Lt.rpg;var a=new hr(t.scene.children[0].geometry,{isRender:!0});if(a.material=new mr({lightMap:i,repeatMap:n,repeat:40,reflectMix:.15,repeatMix:.7}),a.matrixAutoUpdate=!1,this.ground=a,this.container.add(a),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.ground.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),fo=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHintSourceModel,s=a.venueHintReplaceModel,o=a.venueHintTexture;Fi.instance.setThreeTexture(o),i.material=new Lt.jyz({vertexShader:xr,fragmentShader:gr,uniforms:{tDiffuse:{value:o},uEdge:{value:0},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1}),i.material.defines.USE_LINEARMAPPING=!0,Fi.instance.replaceCommonShader(i.material);var l=r.scene.children[0].geometry,u=[],c=[];s.scene.traverse((function(e){if(/Pos_/.test(e.name)){var t=parseInt(e.name.split("_")[1]);u[3*t]=e.position.x,u[3*t+1]=e.position.y,u[3*t+2]=e.position.z}}));for(var d=u.length/3,h=0;h<d;h++)c.push(h);l.setAttribute("instanceIndex",new Lt.lb7(new Float32Array(c),1)),i.instanceMesh=new Lt.SPe(l,i.material,d),i.tranformMatrix=new Lt.yGw;for(var f=0;f<d;f++)i.tranformMatrix.setPosition(u[3*f],u[3*f+1],u[3*f+2]),i.instanceMesh.setMatrixAt(f,i.tranformMatrix);return i.instanceMesh.instanceMatrix.needsUpdate=!0,i.container.add(i.instanceMesh),i}return Ii()(n,[{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),po=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHoloScreenModel,s=a.venueHoloScreenTexture;if(Fi.instance.setThreeTexture(s,!0),i.material=new Lt.jyz({vertexShader:Mr,fragmentShader:yr,uniforms:{tAlphaTexture:{value:s},uTime:{value:0},uSaturation:{value:.283},uValue:{value:.924},uHueSpeed:{value:.8}},transparent:!0,depthWrite:!1,depthTest:!0,blending:Lt.WMw}),i.model=r.scene,i.model.traverse((function(e){e.isMesh&&(e.material=i.material,e.updateMatrix()),e.matrixAutoUpdate=!1})),i.container.add(i.model),window.debug3D){var o=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,o),Fi.getInstance().addModelDebug(i.model,i.material,o)}return i}return Ii()(n,[{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),mo=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).nearestId=-1,i.pointPositions=[new Lt.Pa4(31.24,0,-20.86)],i}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items.venueCheckpointModel;this.model=e.scene;var t=new nr({color:16776960});this.model.children[0].material=t,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model)}},{key:"update",value:function(e){var t=this,n=999,i=-1;if(this.character=this.character||Ho.getScene().character,this.pointPositions.forEach((function(e,a){var r=Math.pow(e.x-t.character.position.x,2)+Math.pow(e.z-t.character.position.z,2);r<16&&r<n&&Math.abs(t.character.position.y-e.y)<1&&(n=r,i=a+1)})),i>0){if(this.nearestId===i)return;this.nearestId=i,y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_scene",otherId:parseInt(Ho.currentId%10)})}else{if(-1===this.nearestId)return;this.nearestId=-1}}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),vo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueLogo1Model,i=t.venueLogo2Model,a=t.venueLogo1LightmapTexture,r=t.venueLogo2LightmapTexture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(r),a.wrapS=a.wrapT=Lt.rpg,r.wrapS=r.wrapT=Lt.rpg,this.material1=new Lt.jyz({vertexShader:_r,fragmentShader:Tr,uniforms:{tMap:{value:a},uTime:{value:0}},transparent:!0,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:_s,fragmentShader:Ts,uniforms:{tMap:{value:r},uTime:{value:0}},transparent:!0,side:Lt.ehD}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.container.add(this.model2),window.debug3D){var s=Ni.addFolder({title:"Logo1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,s),Fi.getInstance().addModelDebug(this.model1,this.material1,s);var o=Ni.addFolder({title:"Logo2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,o),Fi.getInstance().addModelDebug(this.model2,this.material2,o)}}},{key:"update",value:function(e){this.material1.uniforms.uTime.value+=e,this.material2.uniforms.uTime.value+=e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),go=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueMetalModel,n=e.venueMatcapMetalTexture,i=e.venueMetalTexture;this.model=t.scene,Fi.instance.setThreeTexture(i);var a=new Lt.jyz({vertexShader:Ws,fragmentShader:zs,uniforms:{tMatcap:{value:n,label:"matcap"},tLightmap:{value:i,label:""}}});if(Fi.getInstance().replaceCommonShader(a),a.defines.USE_CLIPPING=!0,this.model.children[0].material=a,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a,r),Fi.getInstance().addModelDebug(this.model,a,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),xo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=[{mix:1,contrast:.13,brightness:.15,saturation:0,exposure:0},{mix:1,contrast:-.09,brightness:.09,saturation:.3,exposure:.02},{mix:1,contrast:.02,brightness:.12,saturation:0,exposure:.1},{mix:1,contrast:-.02,brightness:.02,saturation:0,exposure:.5},{mix:1,contrast:0,brightness:0,saturation:0,exposure:.45}],a=1;a<=5;a++)e.setModel(a,i[a-1]);return e.modelConfig=ce[2],e.nearestModelList=[],e}return Ii()(n,[{key:"setModel",value:function(e,t){var n=ia.getInstance().items["modelTest".concat(e,"Model")].scene,i=ia.getInstance().items["venueModelDiffuse".concat(e,"Texture")],a=ia.getInstance().items["venueModelAlpha".concat(e,"Texture")],r=ia.getInstance().items["venueModelRoughness".concat(e,"Texture")],s=ia.getInstance().items["venueModelMatcap".concat(e,"Texture")];Fi.instance.setThreeTexture(i),a.flipY=!1,r.flipY=!1;var o=new Lt.jyz({vertexShader:Er,fragmentShader:Ar,uniforms:{tDiffuse:{value:i,label:""},tMatcap:{value:s,label:"matcap"},tRoughness:{value:r,label:""},tAlpha:{value:a,label:""},uMatcapMix:{value:t.mix,label:"matcap"},uContrast:{value:t.contrast,label:"",noDebug:!0},uBrightness:{value:t.brightness,label:"",noDebug:!0},uSaturation:{value:t.saturation,label:"",noDebug:!0},uExposure:{value:t.exposure,label:"",noDebug:!0}},transparent:!0});if(Fi.getInstance().replaceCommonShader(o),o.defines.USE_CLIPPING=!1,n.traverse((function(e){e.isMesh&&(e.material=o,e.layers.set(fa)),e.matrixAutoUpdate=!1})),this.container.add(n),window.debug3D){var l=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(o,l),Fi.getInstance().addModelDebug(n,o,l),l.addInput(o.uniforms.uContrast,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uBrightness,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uSaturation,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uExposure,"value",{min:-1,max:1,step:.01,label:""})}}},{key:"getNearestModel",value:function(){var e=this;this.nearestModelList.length=0;var t=999;this.character=this.character||Ho.getScene().character,this.modelConfig.forEach((function(n){if(""!==n.X&&""!==n.Z){var i=Math.pow(n.X-e.character.position.x,2)+Math.pow(n.Y-e.character.position.z,2);i<200&&(i<t?(e.nearestModelList.length=0,e.nearestModelList.push(n.id),t=i):i===t&&e.nearestModelList.push(n.id))}}))}},{key:"update",value:function(e){this.getNearestModel(),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:this.nearestModelList})}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:[]})}}]),n}(ar),bo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){for(var e=this,t=function(t){var n=ia.getInstance().items["venuePicture".concat(t,"Model")],i=ia.getInstance().items["venuePicture".concat(t,"Texture")];Fi.instance.setThreeTexture(i,!1);var a=new nr({map:i});if(n.scene.traverse((function(e){e.isMesh&&(e.material=a),e.matrixAutoUpdate=!1})),e.container.add(n.scene),window.debug3D){var r=Ni.addFolder({title:""+t,expanded:!1});Fi.getInstance().addMaterialDebug(a,r),Fi.getInstance().addModelDebug(n,a,r)}},n=1;n<=4;n++)t(n)}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),yo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueShowcaseModel,i=t.venueShowcaseLightmapTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Mo=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).setModel(),i.setModel2(),i}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueEmissiveModel,n=e.venueEmissiveTexture;Fi.instance.setThreeTexture(n);var i=new nr({map:n,transparent:!0,depthWrite:!1});if(i.defines.USE_LINEARMAPPING=!0,t.scene.traverse((function(e){e.isMesh&&(e.material=i,e.updateMatrix()),e.matrixAutoUpdate=!1})),this.container.add(t.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(t.scene,i,a)}}},{key:"setModel2",value:function(){var e=ia.getInstance().items,t=e.venueEmissivePictureModel,n=e.venueEmissivePictureLightmapTexture;Fi.instance.setThreeTexture(n);var i=new nr({map:n,transparent:!0});if(i.defines.USE_LINEARMAPPING=!0,t.scene.traverse((function(e){e.isMesh&&(e.material=i,e.updateMatrix()),e.matrixAutoUpdate=!1})),this.container.add(t.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(t.scene,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),wo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueUnkownModel,i=t.venueUnkownTexture,a=t.venueUnkownLightmapTexture;if(Fi.getInstance().setThreeTexture(a),Fi.getInstance().setThreeTexture(i),i.wrapS=i.wrapT=Lt.OoA,this.material=new Lt.jyz({vertexShader:Ls,fragmentShader:ks,uniforms:{map:{value:i},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:a},uMix:{value:.8}}}),Fi.getInstance().replaceCommonShader(this.material),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.material.defines.USE_CLIPPING=!0,this.container.add(this.model),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,r),Fi.getInstance().addModelDebug(this.model,this.material,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),To=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueScreenModel,n=e.venueScreenTexture;this.model=t.scene,n.wrapS=n.wrapT=Lt.rpg,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),_o=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueWall1Model,i=t.venueWall2Model,a=t.venueWall3Model,r=t.venueWall1LightmapTexture,s=t.venueWall2LightmapTexture,o=t.venueWall3LightmapTexture,l=t.venueWall1Texture,u=t.venueWall2Texture,c=t.venueWall3Texture;if(Fi.getInstance().setThreeTexture(l),Fi.getInstance().setThreeTexture(u),Fi.getInstance().setThreeTexture(c),Fi.getInstance().setThreeTexture(r),Fi.getInstance().setThreeTexture(s),Fi.getInstance().setThreeTexture(o),l.wrapS=l.wrapT=Lt.OoA,u.wrapS=u.wrapT=Lt.OoA,c.wrapS=c.wrapT=Lt.OoA,this.material1=new Lt.jyz({vertexShader:Lr,fragmentShader:kr,uniforms:{map:{value:l},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:r},uMix:{value:.8}}}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.material1.defines.USE_CLIPPING=!0,this.container.add(this.model1),this.material2=new Lt.jyz({vertexShader:Lr,fragmentShader:kr,uniforms:{map:{value:u},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:s},uMix:{value:.8}}}),Fi.getInstance().replaceCommonShader(this.material2),this.model2=i.scene,this.model2.traverse((function(t){t.isMesh&&(t.material=e.material2),t.matrixAutoUpdate=!1})),this.material2.defines.USE_CLIPPING=!0,this.container.add(this.model2),this.material3=new Lt.jyz({vertexShader:Lr,fragmentShader:kr,uniforms:{map:{value:c},mapRepeat:{value:new Lt.FM8(1,1)},lightMap:{value:o},uMix:{value:.8}}}),Fi.getInstance().replaceCommonShader(this.material3),this.model3=a.scene,this.model3.traverse((function(t){t.isMesh&&(t.material=e.material3),t.matrixAutoUpdate=!1})),this.material3.defines.USE_CLIPPING=!0,this.container.add(this.model3),window.debug3D){var d=Ni.addFolder({title:"1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,d),Fi.getInstance().addModelDebug(this.model1,this.material1,d);var h=Ni.addFolder({title:"2",expanded:!1});Fi.getInstance().addMaterialDebug(this.material2,h),Fi.getInstance().addModelDebug(this.model2,this.material2,h);var f=Ni.addFolder({title:"3",expanded:!1});Fi.getInstance().addMaterialDebug(this.material3,f),Fi.getInstance().addModelDebug(this.model3,this.material3,f)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),So=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).sceneRender=e,i.options={},i.setGround(),i.setWall(),i.setShowCase(),i.setPainting(),i.setLogo(),i.setArticle(),i.setScreen(),i.setDecoration(),i.setMetal(),i.setGraffiti(),i.setDynamicEffect(),i.setSimpleColorObjects(),i.setModelTest(),i.setLandMark(),i.setUnknow(),i.setHint(),i.setHoloScreenEffect(),i.setInsidePortal(),i}return Ii()(n,[{key:"setGround",value:function(){this.ground=new ho,this.container.add(this.ground.container)}},{key:"setWall",value:function(){var e=this;this.wall=new _o,this.container.add(this.wall.container),this.wall.container.traverse((function(t){t.isMesh&&"venueWall2"===t.name&&Fi.getInstance().addSelectiveBloom(e.sceneRender,t)}))}},{key:"setModelTest",value:function(){this.modelTest=new xo,this.container.add(this.modelTest.container)}},{key:"setLandMark",value:function(){this.landmark=new mo,this.container.add(this.landmark.container)}},{key:"setSimpleColorObjects",value:function(){this.simpleColorObjects=new Mo,this.container.add(this.simpleColorObjects.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.simpleColorObjects.container)}},{key:"setShowCase",value:function(){this.showcase=new yo,this.container.add(this.showcase.container)}},{key:"setPainting",value:function(){this.painting=new bo,this.container.add(this.painting.container)}},{key:"setLogo",value:function(){this.logo=new vo,this.container.add(this.logo.container)}},{key:"setDecoration",value:function(){this.decoration=new lo,this.container.add(this.decoration.container)}},{key:"setMetal",value:function(){this.metal=new go,this.container.add(this.metal.container)}},{key:"setGraffiti",value:function(){this.graffiti=new co,this.container.add(this.graffiti.container)}},{key:"setArticle",value:function(){this.article=new oo,this.container.add(this.article.container)}},{key:"setScreen",value:function(){this.screen=new To,this.container.add(this.screen.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.screen.container)}},{key:"setDynamicEffect",value:function(){this.dynamicEffect=new uo,this.container.add(this.dynamicEffect.container)}},{key:"setHoloScreenEffect",value:function(){this.holoScreenEffect=new po,this.container.add(this.holoScreenEffect.container)}},{key:"setUnknow",value:function(){this.unknow=new wo,this.container.add(this.unknow.container)}},{key:"setHint",value:function(){this.hint=new fo,this.container.add(this.hint.container)}},{key:"setInsidePortal",value:function(){this.insidePortal=new rr({pos:new Lt.Pa4(-.45,0,13.54),sceneId:Rt.MainSquare.id}),this.container.add(this.insidePortal.container)}},{key:"update",value:function(e){this.ground&&this.ground.update(e),this.ball&&this.ball.update(e),this.logo&&this.logo.update(e),this.modelTest&&this.modelTest.update(e),this.landmark&&this.landmark.update(e),this.dynamicEffect&&this.dynamicEffect.update(e),this.holoScreenEffect&&this.holoScreenEffect.update(e),this.modelTest&&this.modelTest.update(e),this.insidePortal&&this.insidePortal.update(e)}},{key:"dispose",value:function(){this.ground&&this.ground.dispose(),this.modelTest&&this.modelTest.dispose(),this.simpleColorObjects&&this.simpleColorObjects.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ao=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){return Ai()(this,n),t.call(this,e,i)}return Ii()(n,[{key:"onLoaded",value:function(){Qi()($i()(n.prototype),"onLoaded",this).call(this),this.setDebug(),this.setScene(),this.addTerrain(),this.collideHandler(),this.addPlayer(),this.addSkyBox(),this.setEvent(),this.addClickMesh(),this.addPickHelper(),this.connectMultiplyService(),this.setBGM()}},{key:"setEvent",value:function(){this.changeSceneTestHandler=Fi.getInstance().changeSceneTest.bind(this),document.addEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"setPasses",value:function(){Qi()($i()(n.prototype),"setPasses",this).call(this);var e=this.sceneRender.passes.bloomEffect;e.luminanceMaterial.threshold=.279,e.luminanceMaterial.smoothing=.344,e.intensity=2.609,e.mipmapBlurPass.radius=.8,e.blendMode.opacity.value=.2;var t=this.sceneRender.passes.depthEffect;t.uniforms.get("uColor").value.set("#000000"),t.uniforms.get("uStrength").value=79,this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=0}},{key:"setBGM",value:function(){this.bgm=new $a,document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){y.Z.emit(b.Z.FIRST_CLICK)}),{once:!0})}},{key:"setDebug",value:function(){window.debug3D&&(this.debug=Ni)}},{key:"removeDebug",value:function(){window.debug3D}},{key:"setScene",value:function(){this.scene=new So(this.sceneRender),this.sceneRender.scene.add(this.scene.container)}},{key:"addTerrain",value:function(){var e=ia.getInstance().items.venueCollisionModel.scene;this.terrain=new ir(e),this.sceneRender.scene.add(e)}},{key:"update",value:function(e){Qi()($i()(n.prototype),"update",this).call(this,e),this.scene&&this.scene.update(e),this.characterTickHandler(e)}},{key:"clickCallBack",value:function(e,t,i){Qi()($i()(n.prototype),"clickCallBack",this).call(this,e,t,i)}},{key:"addClickMesh",value:function(){}},{key:"addNPC",value:function(){for(var e=new Lt.Pa4,t=0;t<50;t++){var n=Math.floor(5*Math.random()+1),i={UserId:"user_"+1e4*Math.random(),NickName:"npc"+t,ImageInfoModel:n},a=La.create("main",i);this.sceneRender.scene.add(a),Yi.add(i.UserId,a),a.updateDressup(n,1),a.traverse((function(e){e.layers.set(fa)})),a.resetPosAndRotation(e,0),a.position.z=6*t-150,a.targetPosition=a.position.clone(),a.traverse((function(e){e.updateMatrix()}))}}},{key:"dispose",value:function(){this.scene&&(this.removeEvent(),this.terrain.dispose(),this.scene.dispose(),this.removeDebug(),this.bgm&&this.bgm.destroy(),this.scene=null,this.debug=null,Qi()($i()(n.prototype),"dispose",this).call(this))}}]),n}(Xa),Eo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueDecorationModel,n=e.venueDecorationLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Io=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.mainSquareCenterBallModel,n=e.mainSquareCenterBallMatcapTexture,i=e.mainSquareCenterBallAlphaTexture,a=e.mainSquareCenterBallDudvTexture;this.model=t.scene,Fi.instance.setThreeTexture(n),a.wrapS=a.wrapT=Lt.OoA;var r=new Lt.jyz({vertexShader:ur,fragmentShader:lr,uniforms:{tMatcap:{value:n},tDudv:{value:a},tAlpha:{value:i},uDistortionRepeat:{value:2},uDistortionStrength:{value:.05},uWaveSpeed:{value:.1},uPower:{value:5},uStrength:{value:5},uColor:{value:new Lt.Ilk("#00093c")},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1});if(r.defines.USE_LINEARMAPPING=!0,Fi.getInstance().replaceCommonShader(r),this.model.children[0].material=r,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.model.renderOrder=2,this.container.add(this.model),this.material=r,window.debug3D){var s=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(r,s),Fi.getInstance().addModelDebug(this.model,r,s)}}},{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Co=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).setModel(),i}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueEmissivePicture1Model,i=t.venueEmissivePicture1LightmapTexture;if(Fi.instance.setThreeTexture(i),this.material1=new nr({map:i,transparent:!0}),this.material1.defines.USE_LINEARMAPPING=!0,n.scene.traverse((function(t){t.isMesh&&(t.material=e.material1,t.updateMatrix()),t.matrixAutoUpdate=!1})),this.container.add(n.scene),window.debug3D){var a=Ni.addFolder({title:"1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,a),Fi.getInstance().addModelDebug(n.scene,this.material1,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),ko=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items,t=e.venueWallGraffitiModel,n=e.venueWallGraffitiLightmapTexture;this.model=t.scene,Fi.getInstance().setThreeTexture(n);var i=new nr({map:n});if(this.model.children[0].material=i,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i,a),Fi.getInstance().addModelDebug(this.model,i,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Lo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setGround(),e.setGround1(),e}return Ii()(n,[{key:"setGround",value:function(){var e=ia.getInstance().items,t=e.venueFloorModel,n=e.venueFloorLightmapTexture,i=e.venueFloorTexture;Fi.instance.setThreeTexture(n),Fi.instance.setThreeTexture(i),i.wrapS=i.wrapT=Lt.rpg;var a=new hr(t.scene.children[0].geometry,{isRender:!0});if(a.material=new mr({color:"#556ec2",lightMap:n,repeatMap:i,repeat:6,reflectMix:.2,repeatMix:.6}),a.matrixAutoUpdate=!1,this.ground=a,this.container.add(a),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(a.material,r)}}},{key:"setGround1",value:function(){var e=ia.getInstance().items,t=e.venueFloor1Model,n=e.venueFloorLightmap1Texture;Fi.instance.setThreeTexture(n),n.wrapS=n.wrapT=Lt.rpg;var i=new hr(t.scene.children[0].geometry,{isRender:!1});if(i.material=new mr({color:"#3f3f3f",lightMap:n,repeat:1,reflectMix:1.5,repeatMix:.5}),i.matrixAutoUpdate=!1,this.ground1=i,this.container.add(i),window.debug3D){var a=Ni.addFolder({title:"1",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){this.ground.dispose(),this.ground1.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Oo=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHintSourceModel,s=a.venueHintReplaceModel,o=a.venueHintTexture;Fi.instance.setThreeTexture(o),i.material=new Lt.jyz({vertexShader:xr,fragmentShader:gr,uniforms:{tDiffuse:{value:o},uEdge:{value:0},uTime:{value:0}},side:Lt.ehD,transparent:!0,depthWrite:!1}),i.material.defines.USE_LINEARMAPPING=!0,Fi.instance.replaceCommonShader(i.material);var l=r.scene.children[0].geometry,u=[],c=[];s.scene.traverse((function(e){if(/Pos_/.test(e.name)){var t=parseInt(e.name.split("_")[1]);u[3*t]=e.position.x,u[3*t+1]=e.position.y,u[3*t+2]=e.position.z}}));for(var d=u.length/3,h=0;h<d;h++)c.push(h);l.setAttribute("instanceIndex",new Lt.lb7(new Float32Array(c),1)),i.instanceMesh=new Lt.SPe(l,i.material,d),i.tranformMatrix=new Lt.yGw;for(var f=0;f<d;f++)i.tranformMatrix.setPosition(u[3*f],u[3*f+1],u[3*f+2]),i.instanceMesh.setMatrixAt(f,i.tranformMatrix);return i.instanceMesh.instanceMatrix.needsUpdate=!0,i.container.add(i.instanceMesh),i}return Ii()(n,[{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Po=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;Ai()(this,n),i=t.call(this);var a=ia.getInstance().items,r=a.venueHoloScreenModel,s=a.venueHoloScreenTexture;Fi.instance.setThreeTexture(s,!0);if(i.material=new Lt.jyz({vertexShader:Mr,fragmentShader:yr,uniforms:{tAlphaTexture:{value:s},uTime:{value:0},uSaturation:{value:.6},uValue:{value:1.8},uHueSpeed:{value:.2}},transparent:!0,depthWrite:!1,blending:Lt.WMw}),i.model=r.scene,i.model.traverse((function(e){e.isMesh&&(e.material=i.material,e.updateMatrix()),e.matrixAutoUpdate=!1})),i.container.add(i.model),window.debug3D){var o=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(i.material,o),Fi.getInstance().addModelDebug(i.model,i.material,o)}return i}return Ii()(n,[{key:"update",value:function(e){this.material.uniforms.uTime.value+=.001*e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Ro=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).nearestId=-1,i.pointPositions=[new Lt.Pa4(32.93,0,-16.33)],i}return Ii()(n,[{key:"setModel",value:function(){var e=ia.getInstance().items.venueCheckpointModel;this.model=e.scene;var t=new nr({color:16776960});this.model.children[0].material=t,this.model.traverse((function(e){e.matrixAutoUpdate=!1})),this.container.add(this.model)}},{key:"update",value:function(e){var t=this,n=999,i=-1;if(this.character=this.character||Ho.getScene().character,this.pointPositions.forEach((function(e,a){var r=Math.pow(e.x-t.character.position.x,2)+Math.pow(e.z-t.character.position.z,2);r<16&&r<n&&Math.abs(t.character.position.y-e.y)<1&&(n=r,i=a+1)})),i>0){if(this.nearestId===i)return;this.nearestId=i,y.Z.emit(b.Z.VISIBLE_POSTER_MODAL,{visible:!0,type:"pick_scene",otherId:parseInt(Ho.currentId%10)})}else{if(-1===this.nearestId)return;this.nearestId=-1}}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Do=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueLogo1Model,i=t.venueLogo1LightmapTexture;if(Fi.getInstance().setThreeTexture(i),i.wrapS=i.wrapT=Lt.rpg,this.material1=new Lt.jyz({vertexShader:ns,fragmentShader:ts,uniforms:{tMap:{value:i},uTime:{value:0}},transparent:!0}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.container.add(this.model1),this.model1.renderOrder=1,window.debug3D){var a=Ni.addFolder({title:"Logo1",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,a),Fi.getInstance().addModelDebug(this.model1,this.material1,a)}}},{key:"update",value:function(e){this.material1.uniforms.uTime.value+=e}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),No=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;Ai()(this,n),e=t.call(this);for(var i=[{mix:1,contrast:.13,brightness:.07,saturation:0,exposure:.65},{mix:1,contrast:.1,brightness:.12,saturation:0,exposure:.39},{mix:1,contrast:0,brightness:0,saturation:0,exposure:.37},{mix:1,contrast:.1,brightness:.1,saturation:0,exposure:.17}],a=1;a<=4;a++)e.setModel(a,i[a-1]);return e.modelConfig=ce[3],e.nearestModelList=[],e}return Ii()(n,[{key:"setModel",value:function(e,t){var n=ia.getInstance().items["modelTest".concat(e,"Model")].scene,i=ia.getInstance().items["venueModelDiffuse".concat(e,"Texture")],a=ia.getInstance().items["venueModelAlpha".concat(e,"Texture")],r=ia.getInstance().items["venueModelRoughness".concat(e,"Texture")],s=ia.getInstance().items["venueModelMatcap".concat(e,"Texture")];Fi.instance.setThreeTexture(i),a.flipY=!1,r.flipY=!1;var o=new Lt.jyz({vertexShader:Er,fragmentShader:Ar,uniforms:{tDiffuse:{value:i,label:""},tMatcap:{value:s,label:"matcap"},tRoughness:{value:r,label:""},tAlpha:{value:a,label:""},uMatcapMix:{value:t.mix,label:"matcap"},uContrast:{value:t.contrast,label:"",noDebug:!0},uBrightness:{value:t.brightness,label:"",noDebug:!0},uSaturation:{value:t.saturation,label:"",noDebug:!0},uExposure:{value:t.exposure,label:"",noDebug:!0}},transparent:!0});if(Fi.getInstance().replaceCommonShader(o),o.defines.USE_CLIPPING=!1,n.traverse((function(e){e.isMesh&&(e.material=o,e.layers.set(fa)),e.matrixAutoUpdate=!1})),this.container.add(n),window.debug3D){var l=Ni.addFolder({title:""+e,expanded:!1});Fi.getInstance().addMaterialDebug(o,l),Fi.getInstance().addModelDebug(n,o,l),l.addInput(o.uniforms.uContrast,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uBrightness,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uSaturation,"value",{min:-1,max:1,step:.01,label:""}),l.addInput(o.uniforms.uExposure,"value",{min:-1,max:1,step:.01,label:""})}}},{key:"getNearestModel",value:function(){var e=this;this.nearestModelList.length=0;var t=999;this.character=this.character||Ho.getScene().character,this.modelConfig.forEach((function(n){if(""!==n.X&&""!==n.Z){var i=Math.pow(n.X-e.character.position.x,2)+Math.pow(n.Y-e.character.position.z,2);i<200&&(i<t?(e.nearestModelList.length=0,e.nearestModelList.push(n.id),t=i):i===t&&e.nearestModelList.push(n.id))}}))}},{key:"update",value:function(e){this.getNearestModel(),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:this.nearestModelList})}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this),y.Z.emit(b.Z.T2R_VISIBLE_EXHIBIT_INTERACT,{id:[]})}}]),n}(ar),Bo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueShowcaseModel,i=t.venueShowcaseLightmapTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i}),this.model=n.scene,this.model.traverse((function(t){t.isMesh&&(t.material=e.material),t.matrixAutoUpdate=!1})),this.container.add(this.model),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(this.model,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Uo=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).setModel(),i}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueEmissiveModel,i=t.venueEmissiveTexture;if(Fi.instance.setThreeTexture(i),this.material=new nr({map:i,side:Lt.ehD,transparent:!0}),this.material.defines.USE_LINEARMAPPING=!0,n.scene.traverse((function(t){t.isMesh&&(t.material=e.material,t.updateMatrix()),t.matrixAutoUpdate=!1})),this.container.add(n.scene),window.debug3D){var a=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material,a),Fi.getInstance().addModelDebug(n.scene,this.material,a)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),jo=function(e){Oi()(n,e);var t=Ri()(n);function n(){var e;return Ai()(this,n),(e=t.call(this)).setModel(),e}return Ii()(n,[{key:"setModel",value:function(){var e=this,t=ia.getInstance().items,n=t.venueWallModel,i=t.venueWallLightmapTexture,a=t.venueWallTexture;if(Fi.getInstance().setThreeTexture(i),Fi.getInstance().setThreeTexture(a),a.wrapS=a.wrapT=Lt.OoA,this.material1=new Lt.jyz({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\n#include <common>\n#include <virtualverse_vertex_parts>\n\nvoid main() {\n    #include <begin_vertex>\n\t#include <project_vertex>\n    \n    vUv = uv;\n\n    #include <virtualverse_vertex>\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D map;\nuniform sampler2D lightMap;\nuniform vec2 mapRepeat;\nuniform float uMix;\n\n#include <common>\n#include <virtualverse_fragment_parts>\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\tvec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n\treturn sub.x * sub.y / sub.z + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n\treturn clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nfloat smootherstep(float edge0, float edge1, float x) {\n    x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return x * x * x * (x * (x * 6.0 - 15.0) + 10.0);\n}\n\nbool isClipping(vec2 vUv, vec3 vWorldPos, float nearDistance) {\n\tvec2 uvRepeat = fract(vUv * 40.0) - 0.5;\n\tfloat radius = crange(length(cameraPosition - vWorldPos), 2.0, nearDistance, 1.0, 0.0);\n\tfloat circle = 1.0 - smootherstep(radius - radius * 0.1, radius, length(uvRepeat));\n\treturn circle > 0.5;\n}\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvoid main() {\n\n    #include <vv_clipping_fragment>\n\n    vec4 texelColor = texture2D(map, vUv * mapRepeat);\n\n    vec4 lightMapColor = texture2D(lightMap, vUv);\n\n\tvec3 final = blendAdd(texelColor.rgb, lightMapColor.rgb, uMix);\n\n    gl_FragColor = vec4(final, 1.0);\n\n    #include <virtualverse_fragment>\n}",uniforms:{map:{value:a},mapRepeat:{value:new Lt.FM8(1.03,4.56)},lightMap:{value:i},uMix:{value:.8}}}),Fi.getInstance().replaceCommonShader(this.material1),this.model1=n.scene,this.model1.traverse((function(t){t.isMesh&&(t.material=e.material1),t.matrixAutoUpdate=!1})),this.material1.defines.USE_CLIPPING=!0,this.container.add(this.model1),window.debug3D){var r=Ni.addFolder({title:"",expanded:!1});Fi.getInstance().addMaterialDebug(this.material1,r),Fi.getInstance().addModelDebug(this.model1,this.material1,r)}}},{key:"update",value:function(e){}},{key:"dispose",value:function(){Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Fo=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this)).sceneRender=e,i.options={},i.setGround(),i.setWall(),i.setShowCase(),i.setLogo(),i.setGraffiti(),i.setDecoration(),i.setDynamicEffect(),i.setHoloScreenEffect(),i.setSimpleColorObjects(),i.setLandMark(),i.setModelTest(),i.setHint(),i.setInsidePortal(),i}return Ii()(n,[{key:"setGround",value:function(){this.ground=new Lo,this.container.add(this.ground.container)}},{key:"setWall",value:function(){this.wall=new jo,this.container.add(this.wall.container)}},{key:"setModelTest",value:function(){this.modelTest=new No,this.container.add(this.modelTest.container)}},{key:"setSimpleColorObjects",value:function(){this.simpleColorObjects=new Uo,this.container.add(this.simpleColorObjects.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.simpleColorObjects.container)}},{key:"setLandMark",value:function(){this.landmark=new Ro,this.container.add(this.landmark.container)}},{key:"setShowCase",value:function(){this.showcase=new Bo,this.container.add(this.showcase.container)}},{key:"setHint",value:function(){this.hint=new Oo,this.container.add(this.hint.container)}},{key:"setLogo",value:function(){this.logo=new Do,this.container.add(this.logo.container),Fi.getInstance().addSelectiveBloom(this.sceneRender,this.logo.container)}},{key:"setGraffiti",value:function(){this.graffiti=new ko,this.container.add(this.graffiti.container)}},{key:"setDecoration",value:function(){this.decoration=new Eo,this.container.add(this.decoration.container)}},{key:"setEmissivePicture",value:function(){this.emissivePicture=new Co,this.container.add(this.emissivePicture.container)}},{key:"setDynamicEffect",value:function(){this.dynamicEffect=new Io,this.container.add(this.dynamicEffect.container)}},{key:"setHoloScreenEffect",value:function(){this.holoScreenEffect=new Po,this.container.add(this.holoScreenEffect.container)}},{key:"setInsidePortal",value:function(){this.insidePortal=new rr({pos:new Lt.Pa4(-.25,0,5.65),sceneId:Rt.MainSquare.id}),this.container.add(this.insidePortal.container)}},{key:"update",value:function(e){this.ground&&this.ground.update(e),this.logo&&this.logo.update(e),this.dynamicEffect&&this.dynamicEffect.update(e),this.holoScreenEffect&&this.holoScreenEffect.update(e),this.modelTest&&this.modelTest.update(e),this.insidePortal&&this.insidePortal.update(e),this.landmark&&this.landmark.update(e)}},{key:"dispose",value:function(){this.ground&&this.ground.dispose(),this.modelTest&&this.modelTest.dispose(),this.simpleColorObjects&&this.simpleColorObjects.dispose(),Qi()($i()(n.prototype),"dispose",this).call(this)}}]),n}(ar),Yo=function(e){Oi()(n,e);var t=Ri()(n);function n(e,i){return Ai()(this,n),t.call(this,e,i)}return Ii()(n,[{key:"onLoaded",value:function(){Qi()($i()(n.prototype),"onLoaded",this).call(this),this.setDebug(),this.setScene(),this.addTerrain(),this.collideHandler(),this.addPlayer(),this.addSkyBox(),this.setEvent(),this.addClickMesh(),this.addPickHelper(),this.connectMultiplyService(),this.setBGM()}},{key:"setEvent",value:function(){this.changeSceneTestHandler=Fi.getInstance().changeSceneTest.bind(this),document.addEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"removeEvent",value:function(){document.removeEventListener("keydown",this.changeSceneTestHandler,!1)}},{key:"setPasses",value:function(){Qi()($i()(n.prototype),"setPasses",this).call(this);var e=this.sceneRender.passes.bloomEffect;e.luminanceMaterial.threshold=0,e.luminanceMaterial.smoothing=.272,e.intensity=1.779,e.mipmapBlurPass.radius=.743,e.blendMode.opacity.value=.85;var t=this.sceneRender.passes.depthEffect;t.uniforms.get("uColor").value.set("#060b16"),t.uniforms.get("uStrength").value=57,this.sceneRender.passes.filmEffect.uniforms.get("uStrength").value=0}},{key:"setBGM",value:function(){this.bgm=new $a,document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){y.Z.emit(b.Z.FIRST_CLICK)}),{once:!0})}},{key:"setDebug",value:function(){window.debug3D&&(this.debug=Ni)}},{key:"removeDebug",value:function(){window.debug3D}},{key:"setScene",value:function(){this.scene=new Fo(this.sceneRender),this.sceneRender.scene.add(this.scene.container)}},{key:"addTerrain",value:function(){var e=ia.getInstance().items.venueCollisionModel.scene;this.terrain=new ir(e),this.sceneRender.scene.add(e)}},{key:"update",value:function(e){Qi()($i()(n.prototype),"update",this).call(this,e),this.scene&&this.scene.update(e),this.characterTickHandler(e)}},{key:"clickCallBack",value:function(e,t,i){Qi()($i()(n.prototype),"clickCallBack",this).call(this,e,t,i)}},{key:"addClickMesh",value:function(){}},{key:"addNPC",value:function(){for(var e=new Lt.Pa4,t=0;t<50;t++){var n=Math.floor(5*Math.random()+1),i={UserId:"user_"+1e4*Math.random(),NickName:"npc"+t,ImageInfoModel:n},a=La.create("main",i);this.sceneRender.scene.add(a),Yi.add(i.UserId,a),a.updateDressup(n,1),a.traverse((function(e){e.layers.set(fa)})),a.resetPosAndRotation(e,0),a.position.z=6*t-150,a.targetPosition=a.position.clone(),a.traverse((function(e){e.updateMatrix()}))}}},{key:"dispose",value:function(){this.scene&&(this.removeEvent(),this.terrain.dispose(),this.scene.dispose(),this.removeDebug(),this.bgm&&this.bgm.destroy(),this.scene=null,this.debug=null,Qi()($i()(n.prototype),"dispose",this).call(this))}}]),n}(Xa);Lt.Kj0.prototype.raycast=Wi.uL,Lt.u9r.prototype.computeBoundsTree=Wi.Xy,Lt.u9r.prototype.disposeBoundsTree=Wi.sn,Gr=Lt.Tme.prototype.updateMatrixWorld,Lt.Tme.prototype.updateMatrixWorld=function(){this.visible&&Gr.apply(this)},window.in3D=!0;var Go=function(){function e(){Ai()(this,e),this.firstEntry=!1,this.isStopScene=!1,this.previousId=null,this.sceneConfig=null}return Ii()(e,[{key:"changeScene",value:function(e,t){var n,i,a;if(this.currentId!==t){switch(this.currentId&&Zo.leaveScene({SceneType:this.currentId}),this.previousId=this.currentId,this.currentId=t,null===(n=this.driver)||void 0===n||n.stop(),null===(i=this.driver)||void 0===i||i.remove(this.currentScene),null===(a=this.currentScene)||void 0===a||a.dispose(),this.driver=zi.getInstance(),this.driver.setFPS(qi[ji.Z.level].fps),this.clearDebug(),window.history.replaceState("","",(0,ze.Ou)(window.location.href,"sceneId",t)),t){case Rt.MainSquare.id:this.sceneConfig=Rt.MainSquare,this.currentScene=new hs(e,this.sceneConfig);break;case Rt.PopmartVenue.id:this.sceneConfig=Rt.PopmartVenue,this.currentScene=new Ns(e,this.sceneConfig);break;case Rt.PopmartVenue2.id:this.sceneConfig=Rt.PopmartVenue2,this.currentScene=new so(e,this.sceneConfig);break;case Rt.PopmartVenue3.id:this.sceneConfig=Rt.PopmartVenue3,this.currentScene=new Ao(e,this.sceneConfig);break;case Rt.PopmartVenue4.id:this.sceneConfig=Rt.PopmartVenue4,this.currentScene=new Yo(e,this.sceneConfig);break;case Rt.HonorVenue.id:this.sceneConfig=Rt.HonorVenue,this.currentScene=new Rr(e,this.sceneConfig);break;default:this.sceneConfig=Rt.PopmartVenue,this.currentScene=new Ns(e,this.sceneConfig)}this.driver.add(this.currentScene),y.Z.emit(b.Z.CHANGE_SCENE_CALLBACK,t)}}},{key:"getScene",value:function(){return this.currentScene}},{key:"sceneId",get:function(){return this.currentId}},{key:"stopScene",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isStopScene||(this.isStopScene=!0,this.driver&&this.driver.stop(),e&&Zo.stopReceiveMsg())}},{key:"startScene",value:function(){this.isStopScene&&(this.isStopScene=!1,this.driver&&this.driver.start(),Zo.startReceiveMsg())}},{key:"clearDebug",value:function(){window.debug3D&&Ni.children&&Ni.children.forEach((function(e){var t="";e.controller_.props.valMap_.title&&e.controller_.props.valMap_.title.value_&&(t=e.controller_.props.valMap_.title.value_),""===t||""===t||//.test(t)||e.dispose()}))}},{key:"getConfigById",value:function(e){for(var t in Rt)if(e===Rt[t].id)return Rt[t];return null}},{key:"resetId",value:function(){this.currentId=null}},{key:"dispose",value:function(){var e,t;this.firstEntry=!1,this.isStopScene=!1,this.currentId=null,this.previousId=null,null===(e=this.driver)||void 0===e||e.stop(),null===(t=this.currentScene)||void 0===t||t.dispose()}}]),e}(),Ho=new Go,Zo=new(function(){function e(){var t=this;Ai()(this,e),di()(this,"newOneCharacter",(function(e){var n=e.UserId;if(e.LocationInfo){if(Yi.has(n))return;t.addCharacter(e)}else;})),di()(this,"resetCharacter",(function(e){var n=e.UserId,i=e.LocationInfo;if(i){var a=i.DeltaRotation,r=void 0===a?0:a;if(Yi.has(n)){var s=Yi.get(n);s.rotation.y=r,t.calculateMoveTo(s,i)}else t.addCharacter(e)}else;})),di()(this,"addCharacter",(function(e){if(!(Ho.sceneConfig.type===Ot&&Yi.getAll().length>=t.performanceConfig.player||Ho.sceneConfig.type!==Ot&&Yi.getAll().length>=t.performanceConfig.vplayer)&&Ho.getScene().sceneRender&&101!==!Ho.currentId){var n=e.UserId,i=e.NickName,a=(e.SharePhone,e.LocationInfo),r=e.ImageInfoModel,s=void 0===r?1:r,o=e.ImageInfoParts,l=void 0===o?1:o,u=a.DeltaRotation,c=void 0===u?0:u,d=La.create("main",e);Yi.add(n,d),d.updateDressup(s,l),d.updateNickName(i),Ho.getScene().sceneRender.scene.add(d),d.rotation.y=c,t.calculateMoveTo(d,a)}})),di()(this,"removeCharacter",(function(e){if(Ho.getScene().sceneRender){var t=Yi.get(e);t&&(Ho.getScene().clickMeshList&&Ho.getScene().pickHelper&&Ho.getScene().pickHelper.removeTarget(t),Ho.getScene().sceneRender.scene.remove(t),Ho.getScene().sceneCollision&&Ho.getScene().sceneCollision.removeResolver(t.resolver),t.dispose(),Yi.remove(e))}})),di()(this,"calculateMoveTo",(function(e,t){var n=t.MoveSpeed,i=t.X,a=t.Z,r=t.TargetX,s=t.TargetZ,o=t.StartTime,l=t.PushTime;if(i===r&&a===s)e.position.set(i,20,a),e._targetPosition.set(i,20,a),e.forceResolveCollision();else{var u=r-i,c=s-a,d=Math.sqrt(u*u+c*c),h=(0,we.c0)().fps,f=l-o;if(n*f*h>=d)e.position.set(r,0,s),e._targetPosition.set(r,0,s),e.forceResolveCollision();else{var p=parseInt(d/n),m=u/p*f*h,v=c/p*f*h;e.position.set(i+m,0,a+v),e.targetPosition.set(r,0,s),e.targetPosition=e.targetPosition,e.forceResolveCollision()}}})),this._mode="connect",this.outTrace=!1,this.receiveMsg=!1,this.performanceConfig=qi[ji.Z.level],this.listenMsgPushed()}return Ii()(e,[{key:"trace",value:function(e,t){this.outTrace&&(0,we.tq)()}},{key:"setConnectMode",value:function(e){this._mode=e}},{key:"stopReceiveMsg",value:function(){this.receiveMsg=!1}},{key:"startReceiveMsg",value:function(){this.receiveMsg=!0}},{key:"listenMsgPushed",value:function(){var e=this;Ze.Z.on("Base.TocLeaveScene",(function(t){e.trace("[MultiPlayerSyncControl.initialize][Base.TocLeaveScene] body:",t)})),Ze.Z.on("Base.TocUserMove",(function(e){})),Ze.Z.on("Base.PushUserOnline",(function(e){})),Ze.Z.on("Base.PushUserOffline",(function(t){if(e.receiveMsg){e.trace("[MultiPlayerSyncControl.initialize][Base.PushUserOffline] body:",t);var n=t.UserId;e.removeCharacter(n)}})),Ze.Z.on("Base.TocJoinScene",(function(t){if(e.receiveMsg){e.trace("[MultiPlayerSyncControl.initialize][Base.TocJoinScene] body:",t);var n=t.UserList;if("connect"===e._mode)n.forEach((function(t){e.newOneCharacter(t)}));else{var i=n.map((function(e){return e.UserId})),a=[];Yi.getAllByType("main").forEach((function(e){i.includes(e.characterId)||e.characterId===Gi.Z.userInfo.UserId||a.push(e)})),a.forEach((function(t){e.removeCharacter(t.characterId)})),n.forEach((function(t){e.resetCharacter(t)})),"reconnect"===e._mode&&y.Z.emit(b.Z.SOCKET_REJOINSCENE)}}})),Ze.Z.on("Base.TocLoadScene",(function(t){e.trace("[MultiPlayerSyncControl.initialize][Base.TocLoadScene] body:",t),t.UserList.forEach((function(t){e.resetCharacter(t)}))})),Ze.Z.on("Base.PushJoinScene",(function(t){if(e.receiveMsg){e.trace("[MultiPlayerSyncControl.initialize][Base.PushJoinScene] body:",t);var n=t.UserInfo;e.newOneCharacter(n)}})),Ze.Z.on("Base.PushLeaveScene",(function(t){if(e.receiveMsg){e.trace("[MultiPlayerSyncControl.initialize][Base.PushLeaveScene] body:",t);var n=t.UserId;e.removeCharacter(n)}})),Ze.Z.on("Base.PushUserMove",(function(t){if(e.receiveMsg){e.trace("[MultiPlayerSyncControl.initialize][Base.PushUserMove] body:",t);var n=t.UserId,i=t.TargetX,a=t.TargetZ,r=Yi.get(n);r&&(r.targetPosition.set(i,0,a),r.targetPosition=r.targetPosition,r.forceResolveCollision())}})),Ze.Z.on("Base.PushUserMove2",(function(t){if(e.receiveMsg){var n=t.UserId,i=t.TargetX,a=t.TargetZ,r=t.DeltaRotation,s=Yi.get(n);s&&s.resetPosAndRotation({x:i,y:20,z:a},r)}})),Ze.Z.on("Base.PushSendFace",(function(t){if(e.receiveMsg){var n=t.UserId,i=t.FaceId,a=Yi.get(n);a&&a.showEmoji(i)}})),Ze.Z.on("Base.TocSendFace",(function(t){e.trace("[MultiPlayerSyncControl.initialize][Base.TocSendFace] body:",t)})),Ze.Z.on("Base.PushSendAction",(function(t){if(e.receiveMsg){var n=t.UserId,i=t.ActionId,a=Yi.get(n);a&&a.showAction(i)}})),Ze.Z.on("Base.PushUserUpInfo",(function(t){if(e.receiveMsg){var n=t.UserInfo,i=n.UserId,a=n.NickName,r=n.ImageInfoModel,s=void 0===r?1:r,o=n.ImageInfoParts,l=void 0===o?1:o;if(i!==Gi.Z.userInfo.UserId){var u=Yi.get(i);u&&(u.updateDressup(s,l),u.updateNickName(a))}}}))}},{key:"joinScene",value:function(e){Ze.Z.send("Base.TosJoinScene",e)}},{key:"leaveScene",value:function(e){Ze.Z.send("Base.TosLeaveScene",e)}},{key:"move",value:function(e){Ze.Z.send("Base.TosUserMove",e)}},{key:"setCharacterPos",value:function(e){Ze.Z.send("Base.TosUserMove2",e)}},{key:"loadSceneUsers",value:function(e){Ze.Z.send("Base.TosLoadScene",{SceneType:e})}}]),e}());new Fi;var Ko=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),(i=t.call(this,e)).driver=null,i.debug=Ni.instance,i.onReconnnectSocket=i.reconnnectSocket.bind(ki()(i)),y.Z.on(b.Z.SOCKET_RECONNECTED,i.onReconnnectSocket),i.onStartSceneHandler=i.startScene.bind(ki()(i)),i.onStopSceneHandler=i.stopScene.bind(ki()(i)),i.onChangeSceneHandler=i.changeScene.bind(ki()(i)),i.onChangeSceneCallbackHandler=i.changeSceneCallback.bind(ki()(i)),i.onEnableOperationHandler=i.enableOperation.bind(ki()(i)),y.Z.on(b.Z.START_SCENE,i.onStartSceneHandler),y.Z.on(b.Z.STOP_SCENE,i.onStopSceneHandler),y.Z.on(b.Z.CHANGE_SCENE,i.onChangeSceneHandler),y.Z.on(b.Z.CHANGE_SCENE_CALLBACK,i.onChangeSceneCallbackHandler),y.Z.on(b.Z.DISABLE_3D_OPERATION,i.onEnableOperationHandler),y.Z.once(b.Z.INIT_SCENE,(function(){var e=(0,ze.Wz)("sceneId");parseInt(e)>0?Ho.changeScene(document.getElementById("scene3d"),parseInt(e)):Ho.changeScene(document.getElementById("scene3d"),Rt.MainSquare.id)})),i.state={drawCall:0,triangles:0,people:0,curSceneId:1},window.debug3D&&y.Z.on(b.Z.DEBUG_INFO,(function(e){i.setState({drawCall:e.render.calls,triangles:e.render.triangles,people:Yi.getAll().length})})),i.onVisibilityChange=i.visibilityChange.bind(ki()(i)),document.addEventListener("visibilitychange",i.onVisibilityChange),i}return Ii()(n,[{key:"componentWillUnmount",value:function(){y.Z.off(b.Z.SOCKET_RECONNECTED,this.onReconnnectSocket),document.removeEventListener("visibilitychange",this.onVisibilityChange),Ho.resetId()}},{key:"reconnnectSocket",value:function(){Ho.currentScene.joinSceneRequest(),Zo.setConnectMode("reconnect")}},{key:"visibilityChange",value:function(){"hidden"===document.visibilityState?this.stopScene():this.startScene(),y.Z.emit(b.Z.T2T_CLEAR_RENDERER)}},{key:"startScene",value:function(){Ho.startScene(),Zo.loadSceneUsers(Ho.currentId)}},{key:"stopScene",value:function(){Ho.stopScene()}},{key:"changeScene",value:function(e){Ho.changeScene(this.canvas,e.sceneId)}},{key:"changeSceneCallback",value:function(e){this.setState({curSceneId:e})}},{key:"enableOperation",value:function(e){window.DISABLE_3D_OPERATION=e}},{key:"render",value:function(){var e=this,t=this.state,n=t.drawCall,i=t.triangles,a=t.people,r=Me.NO.islandscape?"":"isPortrait";return(0,v.jsxs)("div",{className:"scene3d-container ".concat(r),children:[(0,v.jsx)("canvas",{id:"scene3d",ref:function(t){e.canvas=t},style:{width:Me.NO.islandscape?"100vw":"100vh",height:Me.NO.islandscape?"100vh":"100vw",backgroundColor:"black"},children:"this is the 3d scene render area."}),window.debug3D&&(0,v.jsxs)("div",{className:"debug-info",children:[(0,v.jsx)("p",{children:"DrawCall: ".concat(n)}),(0,v.jsx)("p",{children:": ".concat(i)}),(0,v.jsx)("p",{children:": ".concat(a)})]})]})}}]),n}(h.Component),Vo=function(e){e.options;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{style:{position:"absolute",width:"100vw",height:"100vh",zIndex:0},children:(0,v.jsx)(Ko,{})})})},zo={hide:"hide___WqpMJ",hot:"hot___JIrNQ",container:"container___MU4mU",box:"box___Nb_E1",petalBox:"petalBox___ZV3un",petal:"petal___TumO7",tube:"tube___P0Mq8",panel:"panel___LYAio",action:"action___mr17y",emoji_iconBox:"emoji_iconBox___jwCPk",mask:"mask___c928_",emojiWrap:"emojiWrap___qF9By",animate_3:"animate_3___bXmKR",next:"next___cvTA2",emoji_icon:"emoji_icon___lONjL",btn_next:"btn_next___Inhxy",btn_prev:"btn_prev___luPUj","tp-rotv_c":"tp-rotv_c___aQCii"},Wo=["emoji_1","emoji_2","emoji_3","emoji_4","emoji_5","emoji_6","emoji_7","emoji_8","emoji_9","emoji_10","emoji_11","emoji_12","emoji_13","emoji_14","emoji_15","emoji_16"],qo=!0,Xo=function(e){var t=e.element,i=(0,f.useIntl)(),a=(0,h.useState)(!1),s=d()(a,2),o=s[0],l=s[1],u=(0,h.useState)(1),c=d()(u,2),p=(c[0],c[1]),g=(0,h.useState)(0),x=d()(g,2),M=x[0],_=x[1],A=(0,h.useState)([]),E=d()(A,2),I=E[0],C=E[1],k=m().isPhone,L=(0,h.useState)(!0),R=d()(L,2),D=R[0],N=R[1],B=(0,h.useState)(""),U=d()(B,2),j=U[0],F=U[1],Y=w()({animate_3:D}),G=.5,H=.3,Z=.1,K="power1.inOut";(0,h.useEffect)((function(){p(1),z(0)}),[o]),(0,h.useEffect)((function(){return y.Z.on(b.Z.CLICK_ANY_WHERE,X),function(){y.Z.off(b.Z.CLICK_ANY_WHERE,X)}}),[]),(0,h.useLayoutEffect)((function(){return T.ZP.killTweensOf("#test1"),T.ZP.killTweensOf("#test2"),T.ZP.killTweensOf("#test3"),T.ZP.killTweensOf("#test4"),T.ZP.killTweensOf("#test5"),o?V():(N(!0),T.ZP.killTweensOf(".".concat(zo.emojiWrap))),function(){T.ZP.killTweensOf("#test1"),T.ZP.killTweensOf("#test2"),T.ZP.killTweensOf("#test3"),T.ZP.killTweensOf("#test4"),T.ZP.killTweensOf("#test5")}}),[o]);var V=function(){T.ZP.fromTo("#test4",{opacity:0,rotation:216},{opacity:G,duration:H,ease:K,scale:1}),T.ZP.fromTo("#test5",{opacity:0,rotation:216},{opacity:G,ease:K,scale:1,rotation:288,duration:H,delay:1*Z}),T.ZP.fromTo("#test1",{opacity:0,rotation:-72},{opacity:G,ease:K,rotation:0,duration:H,delay:2*Z}),T.ZP.fromTo("#test2",{opacity:0,rotation:0},{opacity:G,ease:K,scale:1,rotation:72,duration:H,delay:3*Z}),T.ZP.fromTo("#test3",{opacity:0,rotation:72},{opacity:G,ease:K,scale:1,rotation:144,duration:H,delay:4*Z,onComplete:function(){N(!1)}})},z=S.Z.debounce((function(e){D||(T.ZP.killTweensOf(".".concat(zo.emojiWrap)),T.ZP.fromTo(".".concat(zo.emojiWrap),{rotation:-360},{rotation:0,duration:1.2,ease:"power3.inOut",transformOrigin:"50% 50%"}));var t=[],n=(e=void 0!==e?e:M)+7;n<=Wo.length?t=Wo.slice(e,n):(t=Wo.slice(e,Wo.length),n-=Wo.length,t=[].concat(r()(t),r()(Wo.slice(0,n)))),setTimeout((function(){p((function(e){return e+1})),_(n),C(t)}),700)}),1500,{leading:!0,trailing:!1}),W=S.Z.debounce((function(){T.ZP.killTweensOf(".".concat(zo.emojiWrap)),T.ZP.fromTo(".".concat(zo.emojiWrap),{rotation:360},{rotation:0,duration:1.2,ease:"power3.inOut",transformOrigin:"50% 50%"});var e=[],t=M-14,n=M-7;t>=0?n>Wo.length?(e=Wo.slice(t,n),n-=Wo.length,e=[].concat(r()(e),r()(Wo.slice(0,n)))):e=Wo.slice(t,n):n<0?(n=Wo.length+n,t=Wo.length+t,e=Wo.slice(t,n)):(e=Wo.slice(0,n),t=Wo.length+t,e=[].concat(r()(Wo.slice(t,Wo.length)),r()(e))),setTimeout((function(){p((function(e){return e-1})),_(n),C(e)}),600)}),1500,{leading:!0,trailing:!1}),q=S.Z.debounce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emoji";"emoji"===t?(y.Z.emit(b.Z.SHOW_3D_EMOJI,e),(0,P.R)("1_0",e.toString())):"action"===t&&(y.Z.emit(b.Z.SHOW_3D_ACTION,e),(0,P.R)("1_1",e.toString())),X()}),1e3,{leading:!0,trailing:!1,maxWait:1e3}),X=(S.Z.debounce((function(){l((function(e){return!e}))}),600,{leading:!1,trailing:!0}),function(){l(!1)});return(0,v.jsxs)("div",{className:"relative",style:{zIndex:o?"999":"",height:"100%",pointerEvents:"none"},children:[(0,v.jsxs)("div",{id:"container",className:"".concat(zo.container," ").concat(o?"":zo.hide),style:{pointerEvents:o?"auto":"none"},children:[(0,v.jsx)("div",{className:zo.box,children:(0,v.jsxs)("div",{className:zo.petalBox,children:[(0,v.jsx)("svg",{id:"test1",className:zo.petal,xmlns:"http://www.w3.org/2000/svg",width:"117.785",height:"72.23",viewBox:"0 0 117.785 72.23",children:(0,v.jsxs)("g",{onMouseEnter:function(){F(i.formatMessage({id:"emoji.tip1"})),T.ZP.to("#test1",{opacity:1,scale:1.05,duration:.05})},onMouseDown:function(){},onMouseLeave:function(){F(""),T.ZP.to("#test1",{opacity:.5,scale:1,duration:.05})},onClick:function(){return q(1,"action")},transform:"translate(-1218.883 7932.722)",children:[(0,v.jsx)("path",{d:"M2892.79,9989.554h0l-38.566-53.257a100.892,100.892,0,0,1,117.785-.073l-38.736,53.137a35.012,35.012,0,0,0-40.482.193h0Z",transform:"translate(-1635.341 -17850.045)",fill:"#262626"}),(0,v.jsx)("path",{d:"M-137.923-147.542c.307-3.286-.391-21.6-.421-22.377a11.922,11.922,0,0,0,2.582-1.652,3.349,3.349,0,0,0,1.37-2.391,5.784,5.784,0,0,0-.634-2.8,1.168,1.168,0,0,0-.994-.607,1.266,1.266,0,0,0-.365.057,1.366,1.366,0,0,0-.133.049l-.022.008a2.245,2.245,0,0,0-1.257,2.038,3.235,3.235,0,0,1-.233.937,6.9,6.9,0,0,1-3.437,1.919,9.283,9.283,0,0,0,3.66-1.75,1.75,1.75,0,0,0,.4-1.09c.1-.641.217-1.368.922-1.641a1.114,1.114,0,0,1,.414-.09c.931,0,1.192,1.589,1.318,2.975.073,1.761-1.912,3.161-3.589,4.025h0v-.005l-.023.014c-.021.013-.056.031-.1.055l-.158.078a4.538,4.538,0,0,1-1.821.473c-1.154,0-1.828-.725-2.006-2.157-.073-1.676.912-4.156,2.508-6.318,1.762-2.388,3.829-3.839,5.673-3.984a4.358,4.358,0,0,1,.89-.09,7.639,7.639,0,0,1,4,1.374A14.7,14.7,0,0,1-125.9-177.3c1.524,1.929,2.251,3.844,1.947,5.123-.289,1.317-.939,1.984-1.932,1.984a2.875,2.875,0,0,1-1.027-.211,3.828,3.828,0,0,1-.419-.192l-.038-.019a91.434,91.434,0,0,1,.382,13.92c-.229,4.75-.813,8.333-1.6,9.828-.013,0-.03.03-.059.077a2.407,2.407,0,0,1-.4.509,2.272,2.272,0,0,1-1.615.588c-.062,0-.126,0-.191-.005a1.659,1.659,0,0,1-1.524-1.84,44.062,44.062,0,0,0-.355-11.635.384.384,0,0,1,0,.049c-.1,1.789-.652,10.789-1.457,12.257a1.864,1.864,0,0,1-1.885,1.281A1.811,1.811,0,0,1-137.923-147.542Zm6.5-30.283a5.763,5.763,0,0,0-.631,2.8c.007,1.424,1.5,2.632,2.759,3.394a17.345,17.345,0,0,0,2.6,1.273,15.374,15.374,0,0,1-2.472-1.247c-1.187-.755-2.589-1.961-2.528-3.42.124-1.384.386-2.974,1.317-2.974a1.107,1.107,0,0,1,.415.091c.7.272.819,1,.92,1.64a1.748,1.748,0,0,0,.4,1.089,9.255,9.255,0,0,0,3.6,1.738,6.852,6.852,0,0,1-3.377-1.905,3.185,3.185,0,0,1-.234-.937,2.247,2.247,0,0,0-1.256-2.038h0l-.022-.007c-.025-.011-.072-.03-.134-.049a1.236,1.236,0,0,0-.365-.057A1.169,1.169,0,0,0-131.428-177.825Zm-10.165-.343-1.731-.516a.5.5,0,0,1-.337-.622.5.5,0,0,1,.085-.165.5.5,0,0,1,.536-.172l1.731.516a.5.5,0,0,1,.337.623.5.5,0,0,1-.478.357A.5.5,0,0,1-141.593-178.168Zm14.964-1.379a.487.487,0,0,1-.156-.1.5.5,0,0,1-.02-.706l1.241-1.312a.5.5,0,0,1,.706-.02.5.5,0,0,1,.02.706l-1.241,1.312a.5.5,0,0,1-.364.157A.5.5,0,0,1-126.629-179.546Zm-14.2-.561-1.937-1.844a.5.5,0,0,1-.017-.707.5.5,0,0,1,.707-.017l1.937,1.845a.5.5,0,0,1,.017.706.5.5,0,0,1-.113.089.5.5,0,0,1-.249.066A.5.5,0,0,1-140.832-180.107Zm12.5-.52a.5.5,0,0,1-.338-.621l.755-2.565a.5.5,0,0,1,.62-.338.5.5,0,0,1,.339.621l-.755,2.566a.5.5,0,0,1-.48.358A.48.48,0,0,1-128.328-180.627Zm-12.371-7.306a5.5,5.5,0,0,1,5.5-5.5,5.5,5.5,0,0,1,5.5,5.5,5.5,5.5,0,0,1-5.5,5.5A5.5,5.5,0,0,1-140.7-187.934Z",transform:"translate(1411.004 -7728.291)",fill:"#fff"})]})}),(0,v.jsx)("svg",{id:"test2",className:zo.petal,xmlns:"http://www.w3.org/2000/svg",width:"117.785",height:"72.23",viewBox:"0 0 117.785 72.23",children:(0,v.jsxs)("g",{transform:"translate(-1392.882 7946.606)",onMouseEnter:function(){F(i.formatMessage({id:"emoji.tip2"})),T.ZP.to("#test2",{opacity:1,scale:1.05,duration:.05})},onMouseDown:function(){},onMouseLeave:function(){F(""),T.ZP.to("#test2",{opacity:.5,scale:1,duration:.05})},onClick:function(){return q(5,"action")},children:[(0,v.jsx)("path",{d:"M2892.79,9989.554h0l-38.566-53.257a100.892,100.892,0,0,1,117.785-.073l-38.736,53.137a35.012,35.012,0,0,0-40.482.193h0Z",transform:"translate(-1461.341 -17863.93)",fill:"#262626"}),(0,v.jsx)("path",{d:"M-317.317-684.522a76.989,76.989,0,0,0,0-14.377c-.6-4.817-.707-9.083-.707-9.083s-2.327,4.647-2.477,7.745a1.241,1.241,0,0,1-2.328.353c-.906-1.352.045-5.3.745-7.3s4.372-9.188,8.193-9.488a7.794,7.794,0,0,1,3.671.489c1.531.75,7.074.071,7.3-7.054a1.341,1.341,0,0,1,2.531-.456c.1.7,1.152,9.978-8.588,12.057.111.033,2.734,23.369.431,27.747a3.928,3.928,0,0,1-.431.551,2.176,2.176,0,0,1-1.7.547,1.558,1.558,0,0,1-1.431-1.728,40.791,40.791,0,0,0-.333-10.926s-.536,10.038-1.371,11.556a1.736,1.736,0,0,1-1.769,1.2A1.7,1.7,0,0,1-317.317-684.522Zm-2.607-37.928a5.162,5.162,0,0,1,5.162-5.162,5.162,5.162,0,0,1,5.162,5.162,5.162,5.162,0,0,1-5.162,5.162A5.162,5.162,0,0,1-319.924-722.451Zm21.907-.37a.33.33,0,0,1-.074-.024.345.345,0,0,1-.2-.38,2.1,2.1,0,0,0-.916-2.184.344.344,0,0,1-.118-.471.343.343,0,0,1,.434-.138.232.232,0,0,1,.035.018,2.859,2.859,0,0,1,.766.723,2.71,2.71,0,0,1,.474,2.185.344.344,0,0,1-.337.278A.345.345,0,0,1-298.016-722.821Zm-7.9-.274a2.711,2.711,0,0,1,.474-2.183,2.884,2.884,0,0,1,.766-.722l.036-.019a.344.344,0,0,1,.435.139.344.344,0,0,1-.12.471,2.1,2.1,0,0,0-.916,2.183.343.343,0,0,1-.271.4.342.342,0,0,1-.067.007A.344.344,0,0,1-305.916-723.095Zm6.763.084a.279.279,0,0,1-.074-.024.343.343,0,0,1-.2-.38,1.072,1.072,0,0,0-.461-1.108.343.343,0,0,1-.12-.471.347.347,0,0,1,.473-.12,1.757,1.757,0,0,1,.784,1.832.343.343,0,0,1-.336.278A.345.345,0,0,1-299.153-723.011Zm-5.626-.273a1.752,1.752,0,0,1,.784-1.83.305.305,0,0,1,.035-.018.345.345,0,0,1,.436.139.344.344,0,0,1-.12.47,1.07,1.07,0,0,0-.461,1.107.344.344,0,0,1-.272.4.345.345,0,0,1-.066.006A.344.344,0,0,1-304.779-723.284Z",transform:"matrix(0.309, -0.951, 0.951, 0.309, 2218.451, -7988.157)",fill:"#fff"})]})}),(0,v.jsx)("svg",{id:"test3",className:zo.petal,xmlns:"http://www.w3.org/2000/svg",width:"117.785",height:"72.23",viewBox:"0 0 117.785 72.23",children:(0,v.jsxs)("g",{transform:"translate(-1337.883 7810.606)",onMouseEnter:function(){F(i.formatMessage({id:"emoji.tip3"})),T.ZP.to("#test3",{opacity:1,scale:1.05,duration:.05})},onMouseDown:function(){},onMouseLeave:function(){F(""),T.ZP.to("#test3",{opacity:.5,scale:1,duration:.05})},onClick:function(){return q(2,"action")},children:[(0,v.jsx)("path",{d:"M2892.79,9989.554h0l-38.566-53.257a100.892,100.892,0,0,1,117.785-.073l-38.736,53.137a35.012,35.012,0,0,0-40.482.193h0Z",transform:"translate(-1516.34 -17727.93)",fill:"#262626"}),(0,v.jsx)("path",{d:"M-417.7-675.938a180.293,180.293,0,0,0-.277-22.86c-.086-.726-.157-1.41-.219-2.015v0c-.039-.38-.076-.74-.114-1.083-.946.749-3.346.317-3.716-1.116-.305-1.315-.619-2.894-.865-4.466a30.686,30.686,0,0,0-4.107-.213c-1.042,0-2.206.163-3.7.213a1.577,1.577,0,0,1-1.483-1.3,1.415,1.415,0,0,1,.884-1.587c.585-.373,3.923-1.107,7.943-1.572a6.675,6.675,0,0,1,.269-2.489,2.073,2.073,0,0,1,3.513-.86,10.007,10.007,0,0,1,1.036,2.969h0v.009a35.58,35.58,0,0,1,.729,7.429,66.064,66.064,0,0,0,.063-7.462c.352-.008.687-.012,1-.012,3.723,0,6.235.495,7.465,1.468,1.1.764,1.974,2.867,2.592,6.252a69.162,69.162,0,0,1,.915,10.946,98.113,98.113,0,0,1-.457,11.265c-.363,3.468-.9,6.028-1.526,7.209-.013,0-.032.032-.063.083a2.489,2.489,0,0,1-.426.542,2.414,2.414,0,0,1-1.72.626c-.066,0-.135,0-.2-.006a1.769,1.769,0,0,1-1.624-1.96,46.873,46.873,0,0,0-.378-12.39.37.37,0,0,1,0,.052c-.109,1.905-.693,11.491-1.553,13.053a1.98,1.98,0,0,1-2.006,1.364A1.929,1.929,0,0,1-417.7-675.938Zm-1.281-43.015a5.855,5.855,0,0,1,5.855-5.855,5.855,5.855,0,0,1,5.855,5.855,5.856,5.856,0,0,1-5.855,5.855A5.855,5.855,0,0,1-418.981-718.952Z",transform:"matrix(-0.809, -0.588, 0.588, -0.809, 1474.204, -8586.367)",fill:"#fff"})]})}),(0,v.jsx)("svg",{id:"test4",className:zo.petal,xmlns:"http://www.w3.org/2000/svg",width:"117.785",height:"72.23",viewBox:"0 0 117.785 72.23",style:{transform:"rotate(216deg)"},children:(0,v.jsxs)("g",{transform:"translate(-1224.757 7762.606)",onMouseEnter:function(){F(i.formatMessage({id:"emoji.tip4"})),T.ZP.to("#test4",{opacity:1,scale:1.05,duration:.05})},onMouseDown:function(){},onMouseLeave:function(){F(""),T.ZP.to("#test4",{opacity:.5,scale:1,duration:.05})},onClick:function(){return q(3,"action")},children:[(0,v.jsx)("path",{d:"M2892.79,9989.554h0l-38.566-53.257a100.892,100.892,0,0,1,117.785-.073l-38.736,53.137a35.012,35.012,0,0,0-40.482.193h0Z",transform:"translate(-1629.466 -17679.93)",fill:"#262626"}),(0,v.jsx)("path",{d:"M-204.323-672.148c1.214-2.258,5.028-11.931,3.337-16.981,0-.077-2.5,7.153-7.766,7.39-2.129.145-5.683-4.991-5.668-7.011-.05-1.691,2.62-2.194,3.305-.822.449,2.424,6.856,7.311,4.794-10.049-.027-.012-4.381.2-6.281,7.216-2,3.129-3.009,0-3.009,0s.388-7.017,4.973-10.783,10.343-4.06,10.577-9.08c-.1-4.866-3.2-6.143-4.323-7.627-.689-.522-.584-2.459,2.052-2.048s8.521,6.663,6.133,16.273c-.768,4.739,4.639,17.4-3.409,33.523-.98,1.716-2.058,2.319-2.946,2.319A1.78,1.78,0,0,1-204.323-672.148Zm-8.609-40.812a5.717,5.717,0,0,1,5.717-5.717,5.717,5.717,0,0,1,5.717,5.717,5.717,5.717,0,0,1-5.717,5.717A5.717,5.717,0,0,1-212.932-712.96Z",transform:"matrix(-0.809, 0.588, -0.588, -0.809, 709.005, -8175.329)",fill:"#fff"})]})}),(0,v.jsx)("svg",{id:"test5",className:zo.petal,xmlns:"http://www.w3.org/2000/svg",width:"117.785",height:"72.23",viewBox:"0 0 117.785 72.23",children:(0,v.jsxs)("g",{transform:"translate(-1189.883 7795.606)",onMouseEnter:function(){F(i.formatMessage({id:"emoji.tip5"})),T.ZP.to("#test5",{opacity:1,scale:1.05,duration:.05})},onMouseDown:function(){},onMouseLeave:function(){F(""),T.ZP.to("#test5",{opacity:.5,scale:1,duration:.05})},onClick:function(){return q(4,"action")},children:[(0,v.jsx)("path",{d:"M2892.79,9989.554h0l-38.566-53.257a100.892,100.892,0,0,1,117.785-.073l-38.736,53.137a35.012,35.012,0,0,0-40.482.193h0Z",transform:"translate(-1664.34 -17712.93)",fill:"#262626"}),(0,v.jsx)("path",{d:"M-204.72-947.23c.037-.019-10.33-3.678-10.33-3.678s-2.026-.414-1.705-2.2,2.595-.988,2.595-.988l8.338,2.405s4.718,1.647,6.558-1.06,6.066-9.059,6.066-9.059a1.649,1.649,0,0,1,2.259-.657c1.371.832-.554,4.6-4.653,12.477.02,0,8.167,30.733,2.968,30.84-3.419-.026-2.454-9.9-5.406-14.25.041.186-2.344,14.28-5.209,14.408a1.664,1.664,0,0,1-.321.035C-207.09-918.954-200.047-933.709-204.72-947.23Zm-3.916-10a5.1,5.1,0,0,1,5.1-5.1,5.1,5.1,0,0,1,5.1,5.1,5.1,5.1,0,0,1-5.1,5.1A5.1,5.1,0,0,1-208.636-957.229Zm-11.138,4.178a3.329,3.329,0,0,1,.965-2.65.472.472,0,0,1,.668.029.474.474,0,0,1-.027.667,2.362,2.362,0,0,0-.666,1.859.472.472,0,0,1-.422.518l-.049,0A.473.473,0,0,1-219.774-953.051Zm-2.193-.1a5.447,5.447,0,0,1,1.579-4.346.474.474,0,0,1,.668.029.475.475,0,0,1-.028.667,4.568,4.568,0,0,0-1.278,3.555.473.473,0,0,1-.423.518l-.049,0A.473.473,0,0,1-221.967-953.149Zm33.635-7.993a.473.473,0,0,1-.423-.518,2.357,2.357,0,0,0-.664-1.858.474.474,0,0,1-.029-.669.473.473,0,0,1,.668-.029,3.326,3.326,0,0,1,.965,2.65.473.473,0,0,1-.47.426Zm2.193-.1a.473.473,0,0,1-.423-.518,4.568,4.568,0,0,0-1.278-3.555.474.474,0,0,1-.026-.668.473.473,0,0,1,.667-.028,5.448,5.448,0,0,1,1.578,4.346.473.473,0,0,1-.47.426Z",transform:"matrix(0.309, 0.951, -0.951, 0.309, 412.805, -7278.565)",fill:"#fff"})]})}),(0,v.jsx)("div",{className:zo.tube,children:(0,v.jsx)("span",{children:j})})]})}),(0,v.jsx)("div",{className:zo.mask,children:(0,v.jsx)("div",{className:zo.emojiWrap,children:I.map((function(e,t){return(0,v.jsx)("div",{onMouseEnter:function(){T.ZP.to("#emoji".concat(t),{backgroundColor:"#4a4944",duration:.1})},onMouseDown:function(){},onMouseLeave:function(){T.ZP.to("#emoji".concat(t),{backgroundColor:"#4a494480",duration:.1})},id:"emoji".concat(t),className:"".concat(zo.emoji_iconBox," flex-row-center-center ").concat(zo[Y]),style:{transform:"rotate("+30*(t-(k?1.4:2.4))+"deg)"},onClick:function(){return q(Number(e.split("_")[1]))},children:(0,v.jsx)(O,{className:zo.emoji_icon,name:e,style:{transform:"translate(-50%,-50%) rotate("+(360-30*(t-(k?1.4:2.4)))+"deg)"}})},e)}))})}),(0,v.jsx)("img",{className:zo.btn_next,src:n(k?32915:39177),alt:"",onClick:function(){return z()}}),(0,v.jsx)("img",{className:zo.btn_prev,src:n(k?65393:76105),alt:"",onClick:function(){return W()}})]}),(0,v.jsx)("div",{style:{pointerEvents:"auto"},children:h.cloneElement(t,{onClick:function(){qo&&((0,P.R)("0_6"),qo=!1,l((function(e){return!e})),setTimeout((function(){qo=!0}),700))}})})]})},Qo=[{id:1,list:[]},{id:2,list:[0]},{id:3,list:[0]},{id:4,list:[]}],Jo=function(e){var t=e.config,i=e.intoVenue,a=e.gap,r=(0,f.useModel)("venue").venueId,s=((0,f.useModel)("global").isPortrait,(0,f.useIntl)()),o=(0,h.useState)(!1),l=d()(o,2),u=(l[0],l[1]);_e("venue-list".concat(t.id)),(0,h.useEffect)((function(){2===t.id?setTimeout((function(){u(!0)}),1e3):u(!0)}),[]);return(0,v.jsxs)("div",{className:"sm:size-[154px,300px] sm:rounded-[5px] xl:size-[154px,305px] xl:rounded-[5px] bg-[#141C1D] ignore:border-[1px] ".concat(t.id===r?"border-[#FFFFFF]":"border-[#707070]","  relative overflow-hidden  ").concat(a&&"sm:ml-[20px] xl:ml-[20px]"),onClick:function(){i&&i(null==t?void 0:t.id)},children:[(0,v.jsx)("img",{draggable:!1,className:"w-full",src:n(14155)("./map_venue_"+t.id+".png")}),t.id===r&&(0,v.jsxs)("div",{className:"sm:top-[14px] sm:right-[13px] sm:text-10 xl:top-[14px] xl:right-[13px] xl:text-14 absolute flex items-center leading-[1]",children:[(0,v.jsx)("img",{className:"sm:w-[8px] xl:w-[17px]",src:n(96546)}),(0,v.jsx)("span",{className:"sm:ml-[3px] xl:ml-[4px] origin-center scale-[0.8]",children:s.formatMessage({id:"map.cur"})})]}),(0,v.jsx)("img",{draggable:!1,className:"sm:w-[28px] sm:left-[16px] sm:top-[14px] xl:w-[28px] xl:left-[16px] xl:top-[14px] absolute",src:n(47784)("./map_num_"+t.id+".png")}),(0,v.jsx)("img",{draggable:!1,className:"sm:w-[62px] sm:left-[12px] sm:top-[122px] xl:w-[62px] xl:left-[12px] xl:top-[122px] absolute",src:n(92547)("./venue_title_"+t.id+".png")}),0===t.list.length?(0,v.jsx)("img",{draggable:!1,className:"sm:w-[122px] sm:left-[12px] sm:top-[144px] xl:w-[122px] xl:left-[12px] xl:top-[144px] absolute",src:n(57027)("./venue_"+t.id+".png")}):(0,v.jsxs)("div",{className:" flex flex-col sm:size-[122px,104px] xl:size-[122px,104px] sm:left-[12px] xl:left-[12px] sm:top-[144px] xl:top-[144px] absolute ",children:[(0,v.jsx)("div",{className:"venue-list".concat(t.id," w-full h-full overflow-y-auto hidebar sm:pb-[10px] xl:pb-[10px]"),children:(0,v.jsx)("img",{draggable:!1,src:n(57027)("./venue_"+t.id+".png")})}),(0,v.jsx)("div",{className:" absolute bottom-0 left-0 w-full sm:h-[10px] xl:h-[10px] backdrop-blur-[0] bg-gradient-to-b  from-transparent to-[#151C21] "})]}),(0,v.jsx)("div",{className:"sm:bottom-[10px] sm:h-[22px] xl:bottom-[10px] xl:h-[22px]  w-[84%] absolute ab-x-center rounded-[5px] bg-white flex justify-center  items-center duration-300 cursor-pointer",children:(0,v.jsx)("img",{draggable:!1,className:"sm:w-[20px] xl:w-[20px]",src:n(71596)})})]})},$o=n(66292),el=n.n($o),tl=function(e){var t=e.close,i=(0,f.useIntl)(),a=(0,h.useState)(1),r=d()(a,2),s=r[0],o=r[1],l=(0,Vt.Z)(document.documentElement),u=l.width,c=l.height;(0,h.useEffect)(el()((function(){if(u&&c){var e=Math.max(u,c),t=document.querySelector("#map-venueBox");if(t){var n=e/t.clientWidth-.02;o(Math.min(n,1))}}}),300,{leading:!0,trailing:!1}),[u,c]);var p=function(e){y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:e+Rt.MainSquare.id}),(0,P.R)("2_0",e.toString()),t&&t()};return(0,v.jsx)("div",{className:"relative w-full h-full flex justify-center items-center",children:(0,v.jsxs)("div",{className:"venue-item xl:scale-110 sm:mt-[20px] xl:mt-[20px] w-fit h-fit flex relative",id:"map-venueBox",style:{transform:"scale(".concat(s,")"),transformOrigin:"center"},children:[(0,v.jsxs)("div",{className:"absolute sm:top-[-30px] right-0 sm:text-10 xl:top-[-40px] xl:text-12 font-OPPO-R flex items-center",onClick:function(){y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.MainSquare.id}),(0,P.R)("2_1"),t&&t()},children:[(0,v.jsx)("img",{className:"sm:w-[15px] xl:w-[18px] flex-shrink-0",src:n(52425)}),(0,v.jsx)("span",{className:"sm:ml-[5px] xl:ml-[4px]",children:i.formatMessage({id:"map.back"})})]}),Qo.map((function(e,t){return(0,v.jsx)(Jo,{config:e,gap:0!=t,intoVenue:p},e.id)})),(0,v.jsx)("div",{className:"font-OPPO-R text-[#FFF]/50 absolute sm:text-[0.08rem] xl:text-12 sm:bottom-[-17px] right-0 xl:bottom-[-24px] ",children:i.formatMessage({id:"map.detail"})})]})})},nl=function(){var e=(0,f.useIntl)(),t=(0,h.useState)(!1),n=d()(t,2),i=n[0],a=n[1],r=(0,h.useState)((function(){return(0,ze.ao)()})),s=d()(r,1)[0],l=(0,h.useState)({}),c=d()(l,2),p=c[0],m=c[1],g=(0,h.useState)(void 0),x=d()(g,2),M=x[0],w=x[1],T=(0,h.useState)(""),_=d()(T,2),S=_[0],A=_[1],E=(0,h.useState)(""),I=d()(E,2),C=I[0],k=I[1],L=(0,h.useState)(!1),O=d()(L,2),R=O[0],D=O[1],N=(0,h.useState)(0),B=d()(N,2),U=B[0],j=B[1],F=(0,le.Z)(),Y=(0,f.useModel)("global"),G=Y.setAuthVis,H=Y.addApiOntimePrizeId,Z=function(){var e=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getServerTime((function(e){var n=e.code,i=e.data,r=t||p;if(200===n)if((null==i?void 0:i.Time)-(null==r?void 0:r.prizeTime)>=0){w(r.prizeId),A(r.prizeName),k(r.prizeImg);var s=r.prizeId.toString()+r.prizeTime.toString(),o=r.prizeId;a(!0),D(!0),localStorage.setItem("timegoods",s),X(o)}else W();else y.Z.emit(b.Z.SYSTEM_ERROR)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=ue(Z),V=d()(K,2),z=(V[0],V[1]);(0,h.useEffect)((function(){W(),q()}),[]),(0,J.Z)((function(){"visible"===F?Q():"hidden"===F&&$()}),[F]);var W=function(){var e=u()(o()().mark((function e(){var t,n,i,a,r,s,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getWealGoods();case 2:t=e.sent,n=t.code,i=t.data,200===n&&null!=i&&i.NextTimePrize&&(l={prizeId:null==i?void 0:i.NextTimePrize.GoodsId,prizeName:null==i||null===(a=i.NextTimePrize)||void 0===a?void 0:a.Name,prizeImg:null==i||null===(r=i.NextTimePrize)||void 0===r?void 0:r.ImgUrl,prizeTime:null==i||null===(s=i.NextTimePrize)||void 0===s?void 0:s.StartTime},m(l),z(1e3*(null==i?void 0:i.NextTimePrize.StartTime)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=u()(o()().mark((function e(){var t,n,i,a,r,s,l,u,c,d;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getWealGoods();case 2:t=e.sent,n=t.code,i=t.data,200===n&&null!=i&&i.LastTimePrize&&(r=i.Time-(null==i||null===(a=i.LastTimePrize)||void 0===a?void 0:a.StartTime))>0&&r<180&&(s=localStorage.getItem("timegoods"),l=(null==i?void 0:i.LastTimePrize.GoodsId.toString())+(null==i?void 0:i.LastTimePrize.StartTime.toString()),s&&s===l||(localStorage.setItem("timegoods",l),Z({prizeId:null==i?void 0:i.LastTimePrize.GoodsId,prizeName:null==i||null===(u=i.LastTimePrize)||void 0===u?void 0:u.Name,prizeImg:null==i||null===(c=i.LastTimePrize)||void 0===c?void 0:c.ImgUrl,prizeTime:null==i||null===(d=i.LastTimePrize)||void 0===d?void 0:d.StartTime})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=u()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.submitWealGoods({goodsId:t},(function(e){e&&null!=e&&e.code&&200!=(null==e?void 0:e.code)&&999!=(null==e?void 0:e.code)&&H(t)}));case 2:n=e.sent,200===n.code&&setTimeout((function(){W()}),1500);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){ee()},$=function(){var e=u()(o()().mark((function e(){var t,n,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getServerTime();case 2:t=e.sent,n=t.code,i=t.data,200===n&&j(null==i?void 0:i.Time);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=u()(o()().mark((function e(){var t,n,i,a,r,s,l,u,c,d,h,f,p;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.Z.getWealGoods();case 2:t=e.sent,n=t.code,i=t.data,200===n&&(null!=i&&i.LastTimePrize&&(r=i.Time-(null==i||null===(a=i.LastTimePrize)||void 0===a?void 0:a.StartTime))>0&&r<600&&U<(null==i||null===(s=i.LastTimePrize)||void 0===s?void 0:s.StartTime)&&(R||Z({prizeId:null==i?void 0:i.LastTimePrize.GoodsId,prizeName:null==i||null===(l=i.LastTimePrize)||void 0===l?void 0:l.Name,prizeImg:null==i||null===(u=i.LastTimePrize)||void 0===u?void 0:u.ImgUrl,prizeTime:null==i||null===(c=i.LastTimePrize)||void 0===c?void 0:c.StartTime})),null!=i&&i.NextTimePrize&&(p={prizeId:null==i?void 0:i.NextTimePrize.GoodsId,prizeName:null==i||null===(d=i.NextTimePrize)||void 0===d?void 0:d.Name,prizeImg:null==i||null===(h=i.NextTimePrize)||void 0===h?void 0:h.ImgUrl,prizeTime:null==i||null===(f=i.NextTimePrize)||void 0===f?void 0:f.StartTime},m(p),z(1e3*(null==i?void 0:i.NextTimePrize.StartTime))));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(re,{visible:i,onCancel:function(){a(!1)},contentClassName:"w-fit h-fit sm:rounded-[10px] xl:rounded-[10px] relative",mask:!0,maskStyle:{background:"rgba(0, 0, 0, 0.8)"},children:(0,v.jsxs)("div",{className:"sm:size-[245px,auto] xl:size-[490px,auto] flex-dir-[col] justify-between items-center sm:py-[16px] xl:py-[30px]",children:[(0,v.jsxs)("div",{className:"sm:text-[0.12rem] xl:text-[0.16rem] flex flex-col items-center text-white font-OPPO-R leading-[1.5]",children:[(0,v.jsx)("span",{className:" whitespace-pre-line text-center sm:text-14 font-OPPO-B",children:e.formatMessage({id:"timemodal.title1"})}),(0,v.jsx)("span",{className:"sm:size-[110px] sm:mt-[12px] flex justify-center items-center",children:(0,v.jsx)("img",{src:C,className:"h-full"})}),(0,v.jsx)("span",{className:"sm:text-12 xl:text-[16px] font-OPPO-R sm:mt-[15px] xl:mt-[15px]",children:S})]}),(0,v.jsxs)("div",{className:"flex-dir-[col] justify-center items-center",children:[(0,v.jsxs)("span",{className:" sm:text-8 xl:text-[12px] font-OPPO-M text-white/50",children:["","2022.12.17-2022.12.21"]}),(0,v.jsx)("span",{className:" sm:text-8 xl:text-[12px] font-OPPO-R text-white/50 sm:mb-[12px] xl:mb-[15px]",children:e.formatMessage({id:"timemodal.title2"})}),s?(0,v.jsx)(de.Z,{className:"sm:size-[90px,26px] sm:rounded-[140px] sm:text-[0.12rem]  xl:size-[180px,52px] xl:rounded-full xl:text-[0.14rem] text-white ignore:border-[1px] border-solid flex justify-center items-center xl:hover:bg-white-text",path:"/packages/activity/pages/pts_goods_detail?id=".concat(M),onClick:function(){(0,P.R)("9_1")},children:e.formatMessage({id:"scrape"})}):(0,v.jsx)("div",{className:"sm:size-[90px,26px] sm:rounded-[140px] sm:text-[0.12rem]  xl:size-[180px,52px] xl:rounded-full xl:text-[0.14rem] text-white ignore:border-[1px] border-solid flex justify-center items-center xl:hover:bg-white-text",onClick:function(){G(!0),y.Z.emit(b.Z.R2T_WECHAT_AUTH);var e={prizeId:M,prizeImg:C,prizeName:S};localStorage.setItem("lastOpenModal","ontime"),localStorage.setItem("lastOnTimePrize",JSON.stringify(e))},children:e.formatMessage({id:"scrape"})})]})]})})},il=n(27010),al=function(e){Oi()(n,e);var t=Ri()(n);function n(e){var i;return Ai()(this,n),i=t.call(this),di()(ki()(i),"Content",void 0),di()(ki()(i),"PrizeInfo",void 0),di()(ki()(i),"UserInfo",void 0),di()(ki()(i),"UserPrizeId",void 0),i.update(e),i}return Ii()(n)}(n(79567).gq);function rl(e,t){return sl.apply(this,arguments)}function sl(){return(sl=u()(o()().mark((function e(t,n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",il.Z.postToModel(al,Se.Z.api.drawLottery,{data:t},"",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ol(){return ll.apply(this,arguments)}function ll(){return(ll=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.Z.post(Se.Z.api.getPrizeStock));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ul=n(41186),cl=Object.defineProperty,dl=Object.getOwnPropertySymbols,hl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,pl=(e,t,n)=>t in e?cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const ml=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))hl.call(t,n)&&pl(e,n,t[n]);if(dl)for(var n of dl(t))fl.call(t,n)&&pl(e,n,t[n]);return e})({"data-name":"\\u7EC4\\u4EF6 161 \\u2013 34",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img"},e),h.createElement("defs",null,h.createElement("radialGradient",{id:"flash_svg__c",cx:.378,cy:.493,r:.753,gradientTransform:"matrix(.619 .786 -.922 .726 .599 -.161)",gradientUnits:"objectBoundingBox"},h.createElement("stop",{offset:0,stopColor:"#ffd400"}),h.createElement("stop",{offset:1,stopColor:"#ff0"})),h.createElement("radialGradient",{id:"flash_svg__d",cx:.518,cy:.492,r:1.011,gradientTransform:"matrix(-.902 .432 -.23 -.48 1.098 .505)",gradientUnits:"objectBoundingBox"},h.createElement("stop",{offset:0,stopColor:"#fff700"}),h.createElement("stop",{offset:1,stopColor:"#ffe296"})),h.createElement("clipPath",{id:"flash_svg__a"},h.createElement("circle",{"data-name":"\\u692D\\u5706 496",cx:12,cy:12,r:12,transform:"translate(590.488 26.488)",fill:"#fff",stroke:"#707070"})),h.createElement("filter",{id:"flash_svg__b",x:2.682,y:1.433,width:18.635,height:23.999,filterUnits:"userSpaceOnUse"},h.createElement("feOffset",{dy:1}),h.createElement("feGaussianBlur",{stdDeviation:1,result:"blur"}),h.createElement("feFlood",{floodColor:"#7f6900",floodOpacity:.6}),h.createElement("feComposite",{operator:"in",in2:"blur"}),h.createElement("feComposite",{in:"SourceGraphic"}))),h.createElement("g",{"data-name":"\\u8499\\u7248\\u7EC4 4463",transform:"translate(-590.488 -26.488)",clipPath:"url(#flash_svg__a)"},h.createElement("g",{"data-name":"\\u7EC4 4679"},h.createElement("g",{transform:"translate(590.49 26.49)",filter:"url(#flash_svg__b)"},h.createElement("path",{"data-name":"\\u8DEF\\u5F84 4217",d:"m282.235 175.131-5.074-1.053 2.168-7.378-9.729 9.568 5.074 1.053-2.168 7.378Z",transform:"translate(-263.92 -163.27)",fill:"url(#flash_svg__c)"})),h.createElement("path",{"data-name":"\\u4EA4\\u53C9 1",d:"M5.074 10.6 0 9.549 9.706 0h.014L4.639 8.87l3.744.742-5.42 8.178Z",transform:"translate(596.17 29.939)",fill:"url(#flash_svg__d)"}))));var vl=[{name:"",price:"X 30 / ",imgUrl:"prize-level-3.png",value:30},{name:"",price:"X 20 / ",imgUrl:"prize-level-2.png",value:20},{name:"",price:"X 10 / ",imgUrl:"prize-level-1.png",value:10}],gl=function(e){var t=e.onCancel,i=(0,h.useState)({10:1,20:1,30:1}),a=d()(i,2),r=a[0],s=a[1],l=(0,f.useModel)("global",(function(e){return{setShowLotteryResult:e.setShowLotteryResult,setRuleVis:e.setRuleVis,setRuleType:e.setRuleType,setLotteryPrizeStock:e.setLotteryPrizeStock,setAuthVis:e.setAuthVis,setWxAuthVis:e.setWxAuthVis}})),c=l.setShowLotteryResult,p=l.setRuleVis,m=l.setRuleType,g=(l.setLotteryPrizeStock,l.setAuthVis),x=l.setWxAuthVis,M=(0,f.useModel)("user",(function(e){return{integral:e.integral,setIntegral:e.setIntegral}})),w=M.integral,T=M.setIntegral,_=(0,h.useRef)(!1),S=(0,h.useRef)(""),A=(0,f.useIntl)(),E=(0,le.Z)(),I=(0,f.useRequest)(rl,{manual:!0,debounceInterval:500}),C=I.run,k=I.error;(0,h.useEffect)((function(){return L(),y.Z.on(b.Z.CANCEL_AUTH,t),function(){y.Z.off(b.Z.CANCEL_AUTH,t)}}),[]),(0,J.Z)((function(){"visible"===E&&(L(),x(!1))}),[E]),(0,h.useEffect)((function(){k&&(_.current=!1,S.current="",c({show:!0,data:{},type:ul.X.ERROR}))}),[k]);var L=function(){(0,ze.ao)()?O():(g(!0),y.Z.emit(b.Z.R2T_WECHAT_AUTH),localStorage.setItem("lastOpenModal","lottery"))},O=function(){var e=u()(o()().mark((function e(){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol();case 2:if(!(t=e.sent)||200!==(null==t?void 0:t.code)||null==t||!t.data){e.next=7;break}s(t.data),e.next=18;break;case 7:e.t0=null==t?void 0:t.code,e.next=7001===e.t0?10:7007===e.t0?12:7008===e.t0?14:16;break;case 10:return be.Z.open({text:t.data.msg,distance:60}),e.abrupt("break",18);case 12:return x(!0),e.abrupt("break",18);case 14:case 16:return c({show:!0,data:{},type:ul.X.ERROR}),e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=u()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,e.t0=!0,e.next=e.t0===!!Number(n.dataset.disable)?4:e.t0===w<Number(n.dataset.value)?6:8;break;case 4:return be.Z.open({text:"",distance:60}),e.abrupt("return");case 6:return c({show:!0,data:{},type:ul.X.NO_QUALIFIED}),e.abrupt("return");case 8:n.dataset.value&&w>=Number(n.dataset.value)&&(D(n.dataset.value),(0,P.R)("8_2",n.dataset.value));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){_.current||(_.current=!0,S.current=e,C({pool:e},(function(t){switch(t.code){case 200:_.current=!1,S.current=e;var n,i,a=t.data;if(null!=a&&a.PrizeInfo&&""!==a.PrizeInfo){if(null!=a&&null!==(n=a.PrizeInfo)&&void 0!==n&&n.PrizeInfo)c({show:!0,data:null==a||null===(i=a.PrizeInfo)||void 0===i?void 0:i.PrizeInfo,type:ul.X.DEFAULT})}else c({show:!0,data:{},type:ul.X.NO_PRIZE});T(a.Integral);break;case 7001:_.current=!1,S.current=e,be.Z.open({text:t.msg,distance:60});break;case 7007:_.current=!1,S.current=e,x(!0);break;default:_.current=!1,S.current=e,c({show:!0,data:{},type:ul.X.ERROR})}})))},N=function(e){return!r["".concat(e.value)]};return(0,v.jsxs)("div",{className:"lottery w-full h-full flex-dir-[col] justify-start items-center relative",children:[(0,v.jsxs)("div",{className:"sm:w-[24px] sm:ml-[10px] ignore:xl:w-[48px] xl:ml-[20px] absolute flex flex-col items-center cursor-pointer group xl:hover:text-[#49A3BA] sm:right-[20px] sm:top-[20px] xl:right-[30px] xl:top-[30px]",onClick:function(){m("lottery"),p(!0),(0,P.R)("8_1")},children:[(0,v.jsx)("div",{className:"sm:h-[24px] ignore:xl:h-[48px] w-full rounded-full bg-white/20 flex justify-center items-center sm:text-10",children:(0,v.jsx)(_n,{className:"fill-current sm:size-[12px,14px] xl:size-[25px,27px]"})}),(0,v.jsx)("span",{className:"whitespace-nowrap sm:text-10 xl:text-[14px]",children:A.formatMessage({id:"prize.rule"})})]}),(0,v.jsx)("div",{className:"lottery-title sm:text-16 xl:text-[24px] sm:mt-[20px] xl:mt-[20px] font-OPPO-B whitespace-pre-line text-center",children:"\n"}),(0,v.jsx)("div",{className:"lottery-main sm:w-[60%] xl:w-[65%] sm:mt-[40px] xl:mt-[60px] flex justify-between items-center sm:gap-x-[30px] xl:gap-x-[40px] font-OPPO-R",children:vl.map((function(e){return(0,v.jsxs)("div",{className:"text-10 xl:text-[12px] flex-dir-[col] justify-center items-center",children:[(0,v.jsxs)("div",{className:"prize-content text-center sm:mt-[5px]",children:[(0,v.jsx)("img",{src:n(66997)("./".concat(e.imgUrl)),className:"sm:size-[131px,106px] xl:size-[173px,140px]"}),(0,v.jsx)("div",{className:" sm:text-12 font-OPPO-B",children:e.name}),(0,v.jsxs)("div",{className:"sm:mt-[3px] flex justify-center items-center sm:text-10 font-OPPO-R",children:[(0,v.jsx)(ml,{className:"sm:size-[24px] xl:size-[36px]"}),e.price]})]}),(0,v.jsx)("div",{className:"btn sm:text-12 sm:size-[90px,26px] xl:size-[110px,35px]  rounded-full border-[1px] border-white flex justify-center items-center font-OPPO-R sm:mt-[8px] xl:mt-[20px] cursor-pointer bg-black/60 ".concat(N(e)&&"border-0 text-[#ffffff]/30 bg-[#4B4A4A]"),"data-value":e.value,"data-disable":N(e)?"1":"0",onClick:R,children:_.current&&e.value+""===S.current?"...":""}),(0,v.jsx)("div",{className:"sm:text-10 text-white/50 sm:mt-[10px] xl:mt-[10px]",children:N(e)?"":""})]},e.value)}))})]})},xl=function(){function e(t){Ai()(this,e),di()(this,"player",void 0),di()(this,"video",void 0),di()(this,"videoUrl",void 0),di()(this,"errCount",0),di()(this,"errMax",3),di()(this,"reconnectTime",1e3),di()(this,"isPlayError",!1),di()(this,"onPlayerErrorHandler",void 0),this.video=t.video,this.videoUrl=t.url,this.create()}return Ii()(e,[{key:"create",value:function(){var e=this;this.player=this.video,this.player.src=this.getUrl(),this.player.addEventListener("canplay",(function(){window.RTC_VIDEO_CANPLAY=!0,e.play(),y.Z.emit(b.Z.LIVE_PLAYER_BEGIN)}),{once:!0}),this.onPlayerErrorHandler=this.onPlayerError.bind(this),this.player.onerror=this.onPlayerErrorHandler}},{key:"getUrl",value:function(){if(this.videoUrl)return this.videoUrl}},{key:"stop",value:function(){this.player.pause()}},{key:"play",value:function(){var e;null===(e=this.player.play())||void 0===e||e.catch((function(){}))}},{key:"onPlayerError",value:function(e){var t=this;window.RTC_VIDEO_CANPLAY=!1,this.errCount++,this.errCount<this.errMax?setTimeout((function(){t.recreate()}),this.reconnectTime):(this.errCount=0,y.Z.emit(b.Z.LIVE_PLAYER_ERROR))}},{key:"recreate",value:function(){var e=this;this.destroy(),setTimeout((function(){e.create()}),this.reconnectTime)}},{key:"destroy",value:function(){this.player.pause(),this.player.removeAttribute("src"),this.player.load()}}]),e}(),bl=n(52740),yl=n.n(bl),Ml=function(){function e(t){Ai()(this,e),di()(this,"player",void 0),di()(this,"video",void 0),di()(this,"videoUrl",void 0),di()(this,"errCount",0),di()(this,"errMax",3),di()(this,"reconnectTime",1e3),di()(this,"isPlayError",!1),di()(this,"onPlayerErrorHandler",void 0),this.video=t.video,this.videoUrl=t.url,this.create()}return Ii()(e,[{key:"create",value:function(){var e=this;this.player=new(yl()),this.player.attachMedia(this.video),this.player.once(yl().Events.MEDIA_ATTACHED,(function(){e.player.loadSource(e.getUrl())})),this.player.once(yl().Events.FRAG_LOADED,(function(){window.RTC_VIDEO_CANPLAY=!0,e.play(),y.Z.emit(b.Z.LIVE_PLAYER_BEGIN)})),this.onPlayerErrorHandler=this.onPlayerError.bind(this),this.player.on(yl().Events.ERROR,this.onPlayerErrorHandler)}},{key:"getUrl",value:function(){if(this.videoUrl)return this.videoUrl}},{key:"stop",value:function(){this.video.pause()}},{key:"play",value:function(){var e;null===(e=this.video.play())||void 0===e||e.catch((function(){}))}},{key:"onPlayerError",value:function(e){window.RTC_VIDEO_CANPLAY=!1,this.player&&(this.errCount++,this.errCount<this.errMax?this.recreate():(this.errCount=0,y.Z.emit(b.Z.LIVE_PLAYER_ERROR)))}},{key:"recreate",value:function(){var e=this;this.player.destroy(),setTimeout((function(){e.create(),e.video.play()}),this.reconnectTime)}},{key:"destroy",value:function(){this.player&&(T.ZP.killTweensOf(this.video.style),this.player.destroy())}}]),e}(),wl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ai()(this,e),this.prefixName="",this.isFullscreenData=!0,this.ele=n,this.isFullscreen(t),this.onKeyDownHandler=this.onKeyDown.bind(this),document.addEventListener("keydown",this.onKeyDownHandler,!1)}return Ii()(e,[{key:"onKeyDown",value:function(e){e.code}},{key:"setElement",value:function(e){this.ele=e}},{key:"fullscreen",value:function(){var e=this;if(this.ele&&this.ele.webkitEnterFullscreen){this.ele.webkitEnterFullscreen();var t=setInterval((function(){e.ele.webkitDisplayingFullscreen||(clearInterval(t),y.Z.emit(b.Z.LIVE_PLAYER_RESUME))}),500)}if(this.isFullscreenData){var n=""===this.prefixName?"requestFullscreen":"".concat(this.prefixName,"RequestFullScreen");this.ele?this.ele[n]():document.documentElement[n]()}}},{key:"exitFullscreen",value:function(){if(this.isFullscreenData){var e=""===this.prefixName?"exitFullscreen":"".concat(this.prefixName,"ExitFullscreen");document[e]()}}},{key:"screenChange",value:function(e,t){var n=this;if(this.isFullscreenData){var i="on".concat(this.prefixName,"fullscreenchange");document[i]=function(i){n.isElementFullScreen()?e&&e(i):t&&t(i)}}}},{key:"screenError",value:function(e){var t="on".concat(this.prefixName,"fullscreenerror");document[t]=function(t){e&&e(t)}}},{key:"isFullscreen",value:function(e){var t;document.fullscreenEnabled?t=document.fullscreenEnabled:document.webkitFullscreenEnabled?(t=document.webkitFullscreenEnabled,this.prefixName="webkit"):document.mozFullScreenEnabled?(t=document.mozFullScreenEnabled,this.prefixName="moz"):document.msFullscreenEnabled?(t=document.msFullscreenEnabled,this.prefixName="ms"):document.webkitEnterFullscreen&&(t=document.msFullscreenEnabled,this.prefixName="webkitEnter"),t||(this.isFullscreenData=!1,e&&e())}},{key:"isElementFullScreen",value:function(){return null!==(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)}},{key:"dispose",value:function(){document.removeEventListener("keydown",this.onKeyDownHandler,!1)}}]),e}(),Tl={apiHost:void 0,apiSecret:void 0,isLogin:!1,baseInfo:void 0,userInfo:void 0,unlockImageParts:{},showLoading:!0,showGuide:!1,isFirstLoading:!1,customImage:!1,socketConnected:!1,uuid:(0,n(5185).Z)(),loadedState:{},modalListVisible:{mainVisible:!1,policyVisible:!1,taskVisible:!1,ruleVisible:!1,nftRuleVisible:!1},chatRoom:1,ToUserdata:void 0,GroupListId:-1,memberToFriend:!1,userAvatar:"",isChatRoomVisible:!1,status:1,newMsg:!1,taskList:[],venueId:-1,isBrand:!0,friendId:""},_l=(0,h.createContext)({params:Tl}),Sl=(new wl,function(e){var t,n=e.isFull,i=e.isIn3D,a=(0,h.useState)(!1),r=d()(a,2),s=(r[0],r[1],(0,h.useState)(!0)),o=d()(s,2),l=(o[0],o[1]),u=(0,h.useState)(0),c=d()(u,2),f=(c[0],c[1]),p=((0,h.useContext)(_l).params,m().isPhone);(0,h.useEffect)((function(){return y.Z.on(b.Z.CREATE_LIVE_PLAYER,x),y.Z.on(b.Z.DESTROY_LIVE_PLAYER,w),y.Z.on(b.Z.LIVE_PLAYER_RESUME,M),y.Z.on(b.Z.LIVE_PLAYER_ERROR,T),y.Z.on(b.Z.LIVE_PLAYER_BEGIN,_),y.Z.on(b.Z.LIVE_SYSTEM_INFO,g),function(){y.Z.off(b.Z.CREATE_LIVE_PLAYER,x),y.Z.off(b.Z.DESTROY_LIVE_PLAYER,w),y.Z.off(b.Z.LIVE_PLAYER_RESUME,M),y.Z.off(b.Z.LIVE_PLAYER_ERROR,T),y.Z.off(b.Z.LIVE_PLAYER_BEGIN,_),y.Z.off(b.Z.LIVE_SYSTEM_INFO,g),w()}}),[]);var g=function(e){var t=JSON.parse(e.data);Gi.Z.baseInfo.liveStreamingUrl=t.LiveStreamingUrl,Gi.Z.baseInfo.rtcType=t.RtcType,Gi.Z.baseInfo.videoUrl=t.VideoUrl,x({turn_video:"video"===Gi.Z.baseInfo.rtcType,turn_rtc:"live"===Gi.Z.baseInfo.rtcType,turn_image:"image"===Gi.Z.baseInfo.rtcType})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.turn_image)y.Z.emit(b.Z.LIVE_PLAYER_ERROR);else{var n=document.getElementById(i?"rtc-player-video-3d":"rtc-player-video");if(e.turn_video)t&&w(),t=new xl({video:n,url:e.url||Gi.Z.baseInfo.videoUrl});else{if(e.turn_rtc)w();else if(t)return void t.recreate();if(n.canPlayType("application/vnd.apple.mpegurl")&&!(0,we.Dt)())t=new xl({video:n,url:Gi.Z.baseInfo.liveStreamingUrl});else{if(!yl().isSupported())return void(0,ze.vU)({content:""});t=new Ml({video:n,url:Gi.Z.baseInfo.liveStreamingUrl})}}document.body.addEventListener((0,we.gn)()?we.Wb.touchstart:we.Wb.touchend,(function(){var e;t&&(null===(e=t.play())||void 0===e||e.catch((function(){})))}),{once:!0}),i&&(n.muted=!0,n.setAttribute("style","width:1px important;height:1px important;"))}},M=function(){t&&t.play(),l(!1)},w=function(){t&&t.destroy(),t=null},T=function(){l(!0)},_=function(){l(!1)};return(0,v.jsx)("div",{className:"rtc-player ".concat(n?"rtc-player-fullscreen":""),style:i?{width:"1px",height:"1px"}:{width:"100%",height:"100%"},children:(0,v.jsx)("div",{className:"rtc-player-modal",children:(0,v.jsx)("video",{width:"100%",height:"100%",id:i?"rtc-player-video-3d":"rtc-player-video",crossOrigin:"anonymous",playsInline:!0,controls:p,controlsList:"nodownload noplaybackrate ",disablePictureInPicture:!0,className:"".concat(n?"phone-full-player":""),autoPlay:!0,loop:!0,onTimeUpdate:function(e){f(e.target.currentTime)},onClick:function(e){e.target.paused&&e.target.play()}})})})}),Al="phone-full-page____L_WH",El="phone-full-page--hide___MNwxQ",Il=function(e){var t=e.visible;e.closeFn;return(0,v.jsxs)("div",{className:"flex-column-center-center w-full h-full ".concat(Al," ").concat(!t&&El," hidebar"),style:{zIndex:101},children:[(0,v.jsx)(Sl,{isFull:!0,isIn3D:!1}),(0,v.jsx)("div",{onClick:function(){y.Z.emit(b.Z.T2R_VISIBLE_LIVEPLAYER,{visible:!1})},className:"w-fit h-fit drawer-header absolute sm:top-[12px] sm:right-[65px] xl:top-[20px] xl:right-[20px]  before:top-[-20px]  before:bottom-[-20px] before:left-[-20px] before:right-[-20px] before:absolute cursor-pointer backdrop-blur-[0px]",style:{content:""},children:(0,v.jsx)(W,{className:"sm:w-[16px] xl:w-[16px]"})})]})};Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Cl=!1,kl=function(e){var t=e.visible,n=e.closeFn,i=(0,h.useState)(!0),a=d()(i,2),r=a[0],s=(a[1],m().isPhone),o=(0,h.useState)((0,we.G6)());d()(o,1)[0];(0,h.useEffect)((function(){return window.addEventListener("keyup",l),function(){window.removeEventListener("keyup",l)}}),[]),(0,h.useEffect)((function(){Cl=t}),[t]);var l=function(e){"Escape"!==e.key&&"Escape"!==e.code||!Cl||n&&n()},u=w()({"w-full":!0,"h-full":!0,"flex-row-start-start":!0,"full-chat-page":!0,show:t,hide:!t,"full-hide":!t});w()({"full-chat-panel":!0,"full-chat-panel-nowidth":!r});return(0,v.jsx)(v.Fragment,{children:s?(0,v.jsx)(Il,{visible:t,closeFn:n}):(0,v.jsxs)("div",{className:u,children:[(0,v.jsx)(Sl,{isFull:!0,isIn3D:!1}),(0,v.jsx)("img",{draggable:!1,className:"full-close-btn-round",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE4NzkgLTExKSI+PHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiByeD0iMTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NzkgMTEpIiBvcGFjaXR5PSIuMSIvPjxwYXRoIGQ9Ik0xODg5LjAyNSAzMS44MjVhLjYwMS42MDEgMCAwIDEtLjg0OS0uODUybDEwLjgtMTAuOGEuNi42IDAgMSAxIC44NDkuODQ5bC00Ljk3NyA0Ljk3OSA0Ljk3NSA0Ljk3MmEuNi42IDAgMCAxLS44NDguODQ5TDE4OTQgMjYuODQ5bC00Ljk3NSA0Ljk3NlptLS44NTYtMTAuODM5YS41NzcuNTc3IDAgMCAxIC44MTYtLjgxM2wzLjQ2MSAzLjQ1OGEuNTc3LjU3NyAwIDAgMS0uODE2LjgxNloiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+",onClick:n})]})})},Ll=h.memo(kl,(function(e,t){return e.visible==t.visible})),Ol=null,Pl=function(){var e=(0,h.useState)(!1),t=d()(e,2),n=t[0],i=t[1],a=(0,h.useState)(""),r=d()(a,2),s=r[0],o=r[1],l=(0,h.useRef)(null);(0,h.useEffect)((function(){return y.Z.on(b.Z.T2R_VISIBLE_VIDEOPLAYER,c),function(){y.Z.off(b.Z.T2R_VISIBLE_VIDEOPLAYER,c),clearTimeout(Ol)}}),[]),(0,h.useEffect)((function(){u()}),[s]);var u=function(){if(we.gn){var e=document.getElementById("video-player");if(e){var t,n,i,a=!0;e.addEventListener("webkitbeginfullscreen",(function(){a=!1})),e.addEventListener("webkitendfullscreen",(function(){i=(new Date).getTime(),a||i-n<=100&&(t&&clearTimeout(t),t=setTimeout((function(){e.play(),a=!0}),500))})),e.addEventListener("pause",(function(e){n=(new Date).getTime()}))}}},c=function(e){var t=e.visible,n=e.data;i(t),o(n),t&&(clearTimeout(Ol),Ol=setTimeout((function(){y.Z.emit(b.Z.R2T_MUTE_VIDEO,!0)}),100))};return(0,v.jsxs)("div",{className:"video-player-page w-full h-full flex-column-center-center ".concat(n?"":"video-player-page--hide","  hidebar"),onTransitionEnd:function(){n||o("")},children:[(0,v.jsx)(q,{onClose:function(){i(!1),o(""),y.Z.emit(b.Z.R2T_MUTE_VIDEO,!1)}}),(0,v.jsx)("div",{className:"video-player-wrapper",children:s&&(0,v.jsx)("video",{ref:l,width:"100%",height:"100%",id:"video-player",crossOrigin:"anonymous",playsInline:!0,controlsList:"nodownload noplaybackrate ",disablePictureInPicture:!0,controls:!0,className:"video-player",src:s,loop:!0,onDurationChange:function(){l.current&&l.current.play()}})})]})},Rl=h.memo(Pl),Dl=Object.defineProperty,Nl=Object.getOwnPropertySymbols,Bl=Object.prototype.hasOwnProperty,Ul=Object.prototype.propertyIsEnumerable,jl=(e,t,n)=>t in e?Dl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Fl=e=>h.createElement("svg",((e,t)=>{for(var n in t||(t={}))Bl.call(t,n)&&jl(e,n,t[n]);if(Nl)for(var n of Nl(t))Ul.call(t,n)&&jl(e,n,t[n]);return e})({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24.026 25.027",role:"img"},e),h.createElement("defs",null,h.createElement("filter",{id:"exit_venue_svg__a",x:0,y:0,width:24.026,height:25.027,filterUnits:"userSpaceOnUse"},h.createElement("feOffset",{dy:1}),h.createElement("feGaussianBlur",{stdDeviation:.5,result:"b"}),h.createElement("feFlood",{floodOpacity:.478}),h.createElement("feComposite",{operator:"in",in2:"b"}),h.createElement("feComposite",{in:"SourceGraphic"}))),h.createElement("g",{filter:"url(#exit_venue_svg__a)"},h.createElement("path",{d:"M10.26 22.031h10.51a1.253 1.253 0 0 0 1.252-1.252V2.255a1.253 1.253 0 0 0-1.252-1.252H10.26a1.253 1.253 0 0 0-1.252 1.252V5.51a.5.5 0 0 0 1 0V2.255a.25.25 0 0 1 .25-.25H20.77a.25.25 0 0 1 .25.25v18.524a.25.25 0 0 1-.25.25H10.26a.25.25 0 0 1-.25-.25v-3.254a.5.5 0 1 0-1 0v3.254a1.253 1.253 0 0 0 1.252 1.252Zm-3.755-6.008a.5.5 0 0 0 .354-.855l-3.151-3.15h11.809a.5.5 0 0 0 0-1H3.709L6.86 7.87a.5.5 0 0 0-.708-.708l-4.005 4.005a.5.5 0 0 0 0 .708l4.005 4.005a.5.5 0 0 0 .354.143Z",fill:"#fff",stroke:"#fff"})));var Yl=function(e){var t=e.targetSelect,i=(0,f.useIntl)(),a=(0,h.useState)(0),r=d()(a,2),s=r[0],o=r[1],l=(0,h.useState)([]),u=d()(l,2),c=u[0],p=u[1],m=(0,h.useState)([]),g=d()(m,2),x=g[0],b=g[1],y=(0,f.useRequest)(j.Z.getPowerGeted,{manual:!0}),M=y.data,w=y.loading,T=y.run,_=(0,f.useRequest)(F.getPowerUsed,{manual:!0}),S=_.data,A=_.loading,E=_.run,I=(0,h.useState)(1),C=d()(I,2),k=(C[0],C[1],(0,h.useState)(!1)),L=d()(k,2),O=(L[0],L[1],(0,Vt.Z)(document.documentElement)),P=(O.width,O.height,_e("").addScrollEvent),R=(0,h.useState)(!1),D=d()(R,2),N=D[0],B=D[1];(0,h.useEffect)((function(){return t&&o(t),function(){}}),[]),(0,J.Z)((function(){var e;if(M&&200===(null==M?void 0:M.code)){var t=(null==M||null===(e=M.data)||void 0===e?void 0:e.History)||[];p(t)}}),[M]),(0,J.Z)((function(){if(S&&200===S.code){var e,t=(null===(e=S.data)||void 0===e?void 0:e.History)||[];b(t)}}),[S]),(0,h.useLayoutEffect)((function(){0===s?(U(),P("photo-scroll")):(Y(),P("photo-scroll"))}),[s]),(0,h.useEffect)((function(){B(!(!w&&!A))}),[w,A]);var U=function(){T()},Y=function(){E()},G=function(e){o(e)},H=function(e){var t=new Date(1e3*e);return"".concat(t.getMonth()+1,".").concat(t.getDate()<10?"0"+t.getDate():t.getDate()," ").concat(t.getHours()<10?"0"+t.getHours():t.getHours(),":").concat(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),":").concat(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},Z=((0,h.useCallback)((function(){return(0,v.jsx)("div",{className:"h-full",children:(0,v.jsx)("div",{className:"photo-scroll w-full h-full overflow-auto flex flex-wrap content-start",children:c.length>0?c.map((function(e){return(0,v.jsx)("div",{className:"w-[50%] sm:h-[34px] sm:px-[20px] sm:text-12 xl:h-[34px] xl:px-[20px]",children:(0,v.jsxs)("div",{className:"w-full h-full xl:text-14 border-b border-white/20 text-white font-OPPO-R flex justify-between items-center",children:[(0,v.jsx)("span",{children:H(e.TimeAdd)}),(0,v.jsx)("span",{children:e.Source}),(0,v.jsxs)("div",{className:"flex items-center font-OPPO-M",children:[(0,v.jsxs)("span",{children:["+",e.Integral]}),(0,v.jsx)("img",{className:"sm:w-[16px] xl:w-[16px]",src:n(47345)})]})]})})})):(0,v.jsx)("div",{className:"w-full h-full flex justify-center items-center text-white/20 sm:text-14 xl:text-16",children:i.formatMessage({id:"power.null"})})})})}),[c]),(0,h.useCallback)((function(){return(0,v.jsx)("div",{className:"h-full",children:(0,v.jsx)("div",{className:"prize-scroll w-full h-full overflow-auto flex flex-wrap content-start",children:x.length>0?x.map((function(e,t){return(0,v.jsx)("div",{className:"w-[50%] sm:h-[34px] sm:px-[20px] sm:text-12 xl:h-[34px] xl:px-[20px]",children:(0,v.jsxs)("div",{className:"w-full h-full xl:text-14 border-b border-white/20 text-white font-OPPO-R flex justify-between items-center",children:[(0,v.jsx)("span",{children:H(e.TimeAdd)}),(0,v.jsx)("span",{children:e.Source}),(0,v.jsxs)("div",{className:"flex items-center font-OPPO-M",children:[(0,v.jsx)("span",{children:e.Integral}),(0,v.jsx)("img",{className:"sm:w-[16px] xl:w-[16px]",src:n(47345)})]})]})})})):(0,v.jsx)("div",{className:"w-full h-full flex justify-center items-center text-white/20 sm:text-14 xl:text-18",children:i.formatMessage({id:"power.null"})})})})}),[x]),(0,h.useCallback)((function(e){var t=e.list,a=e.type;return(0,v.jsx)("div",{className:"h-full",children:(0,v.jsx)("div",{className:"prize-scroll w-full h-full overflow-auto hidebar flex flex-wrap content-start",children:t.length>0?t.map((function(e,t){return(0,v.jsx)("div",{className:"w-[50%] sm:h-[34px] sm:px-[20px] sm:text-12 xl:h-[42px] xl:px-[20px]",children:(0,v.jsxs)("div",{className:"w-full h-full xl:text-14 border-b border-white/20 text-white font-OPPO-R flex justify-between items-center",children:[(0,v.jsxs)("div",{className:" flex",children:[(0,v.jsx)("span",{className:"sm:w-[80px] xl:w-[80px] whitespace-nowrap",children:H(e.TimeAdd)}),(0,v.jsx)("span",{className:"sm:ml-[7px] xl:ml-[30px] whitespace-nowrap",children:e.Source})]}),(0,v.jsxs)("div",{className:"flex items-center font-OPPO-M",children:[(0,v.jsxs)("span",{children:["add"===a&&"+",e.Integral]}),(0,v.jsx)("img",{className:"sm:w-[16px] xl:w-[16px]",src:n(47345)})]})]})},t)})):(0,v.jsx)("div",{className:"w-full h-full flex justify-center items-center text-white/20 sm:text-14 xl:text-18",children:i.formatMessage({id:"power.null"})})})})}),[x,c]));return(0,v.jsxs)("div",{className:"relative sm:pt-[40px] xl:pt-[60px]  sm:px-[50px] xl:px-[20px]  sm:text-12 xl:text-16 w-full h-full flex justify-center items-center",children:[(0,v.jsxs)("div",{className:"w-full h-fit flex flex-col rounded-[10px] overflow-hidden",children:[(0,v.jsxs)("div",{className:"sm:h-[40px] xl:h-[50px] sm:text-12 xl:text-16 w-full text-white font-OPPO-M xl:cursor-pointer flex",children:[(0,v.jsx)("div",{className:"w-full flex justify-center items-center ".concat(0===s?"bg-white/20 border-[#707070]/20 border-b-[1px]":"bg-white/10 border-[#fff]/20 border-r-[0.5px]"),onClick:function(){return G(0)},children:(0,v.jsxs)("div",{className:"flex items-center ".concat(0===s?"opacity-1":"opacity-20"),children:[(0,v.jsx)("img",{className:"sm:h-[16px] xl:h-[20px] w-auto sm:mr-[4px] xl:mr-[6px]",src:n(0===s?38749:40872)}),(0,v.jsx)("span",{className:"flex-shrink-0",children:i.formatMessage({id:"power.get"})})]})}),(0,v.jsx)("div",{className:"w-full flex justify-center items-center ".concat(1===s?"bg-white/20 border-[#707070]/20 border-b-[1px]":"bg-white/10 border-[#fff]/20 border-l-[0.5px]"),onClick:function(){return G(1)},children:(0,v.jsxs)("div",{className:"flex items-center ".concat(1===s?"opacity-1":"opacity-20"),children:[(0,v.jsx)("img",{className:"sm:h-[16px]  xl:h-[20px] w-auto sm:mr-[4px] xl:mr-[6px]",src:n(1===s?58547:65839)}),(0,v.jsx)("span",{className:"flex-shrink-0",children:i.formatMessage({id:"power.put"})})]})})]}),(0,v.jsxs)("div",{className:"sm:h-[254px] xl:h-[324px] w-full bg-white/20 overflow-hidden",children:[0===s&&(0,v.jsx)(Z,{list:c,type:"add"}),1===s&&(0,v.jsx)(Z,{list:x,type:"use"})]})]}),N&&(0,v.jsx)(Ti.Z,{wrapperClassName:"spin",spinning:N,tip:""})]})},Gl=function(e){var t=e.visible;return(0,v.jsx)(v.Fragment,{children:t&&(0,v.jsx)("div",{className:" absolute sm:right-[6px] sm:top-[6px] rounded-full sm:size-[4px,4px] bg-[#FF0000]"})})},Hl=function(){var e=(0,f.useModel)("global"),t=e.taskDis,n=e.mainShow,i=e.setMainShow,a=e.setTaskDis,s=e.showLotteryResult,l=e.setShowLotteryResult,c=e.lotteryVisible,p=e.setLotteryVisible,x=e.setShareType,M=(e.setUnStartVis,e.openUnStart,e.setCloneVis),w=e.setClonePrizeInfo,T=(0,f.useModel)("setting"),_=T.isImmer,S=T.setIsImmer,A=(0,f.useModel)("venue"),E=A.inVenue,I=A.setVenueId,C=A.set_modelId,k=A.setDatailVis,L=A.viewId,O=A.setViewId,R=(0,f.useModel)("user"),D=R.userInfo,N=R.integral,B=(0,f.useModel)("loading"),j=B.isFirstLoading,F=B.hasEnterWorld,G=(0,f.useModel)("task").taskTip,H=m().isPhone,Z=(0,f.useIntl)(),K=(0,h.useState)(!1),V=d()(K,2),z=V[0],W=V[1],q=(0,h.useState)(!1),X=d()(q,2),Q=X[0],$=X[1],ee=(0,h.useState)(!1),te=d()(ee,2),ne=te[0],ie=te[1],ae=(0,h.useState)(!1),se=d()(ae,2),oe=se[0],le=se[1],ue=(0,h.useState)(!1),ce=d()(ue,2),de=ce[0],he=ce[1],fe=(0,h.useState)(!1),pe=d()(fe,2),me=(pe[0],pe[1]),ve=(0,h.useState)(!1),ge=d()(ve,2),xe=ge[0],be=ge[1],ye=(0,h.useState)(!1),Me=d()(ye,2),Te=Me[0],_e=Me[1],Se=(0,h.useState)(0),Ae=d()(Se,2),Ee=Ae[0],Ie=Ae[1];(0,h.useEffect)((function(){return y.Z.on(b.Z.CLICK_ANY_WHERE,Le),function(){y.Z.off(b.Z.CLICK_ANY_WHERE,Le)}}),[]),(0,J.Z)((function(){i(!_),_&&he(!1)}),[_]),(0,h.useEffect)((function(){D.LoginType&&!j&&Re()}),[D,j]),(0,h.useEffect)((function(){F&&y.Z.emit(b.Z.BROADCAST_EVENT,{type:St.OPEN})}),[F]);(0,h.useEffect)((function(){z&&$(!0)}),[z]);var Ce=function(){he(!1),i(!0)},ke=function(){var e=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),i(!1),(0,P.R)("0_3");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){$((function(e){return e?(i(!0),!1):e}))},Oe=function(){var e=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),(0,P.R)("0_1");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){return y.Z.on(b.Z.T2R_VISIBLE_LIVEPLAYER,Pe),function(){y.Z.off(b.Z.T2R_VISIBLE_LIVEPLAYER,Pe)}}),[]);var Pe=function(e){var t=e.visible;e.data;_e(t)},Re=function(){var e=localStorage.getItem("lastOpenModal");if(e){if(!(0,ze.ao)())return localStorage.removeItem("lastOpenModal"),localStorage.removeItem("venueId"),localStorage.removeItem("exhibitId"),void localStorage.removeItem("lastOnTimePrize");switch(e){case"lottery":p(!0);break;case"exhibit":var t=localStorage.getItem("exhibitId");C(parseInt(t||"0")),I(parseInt(localStorage.getItem("venueId")||"0")),k(!0);var n=[].concat(r()(L.filter((function(e){return e!=parseInt(t||"0")}))),[t]);O(n),setTimeout((function(){y.Z.emit(b.Z.FINISH_TASK,Y.U.PICK_LOOK)}),1e3);break;case"ontime":var i=localStorage.getItem("lastOnTimePrize");i&&"{}"!=i&&(w(JSON.parse(i)),M(!0));break;case"mybag":ie(!0),Ie(1)}localStorage.removeItem("lastOpenModal")}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Vo,{}),(0,v.jsx)("div",{className:"w-full h-full  bg-main-bg bg-cover-center",children:(0,v.jsxs)("div",{className:"w-full h-full",children:[E&&(0,v.jsx)("div",{className:"duration-500 ".concat(n?"translate-x-0 opacity-100":"translate-x-[-50px] opacity-0 pointer-events-none"," ease-in-out absolute sm:top-[25px] sm:left-[25px] xl:top-[35px] xl:left-[30px]"),onClick:function(){y.Z.emit(b.Z.CHANGE_SCENE,{sceneId:Rt.MainSquare.id}),(0,P.R)("0_5")},children:(0,v.jsx)(Fl,{className:"sm:w-[21px] xl:w-[35px]"})}),(0,v.jsx)("div",{className:"duration-500 ".concat(n?"translate-x-0 opacity-100":"translate-x-[-50px] opacity-0 pointer-events-none"," ease-in-out absolute sm:top-[20px] ").concat(E?"sm:left-[65px] xl:left-[85px]":"sm:left-[25px] xl:left-[35px]","  xl:top-[30px] "),onClick:function(){be(!0),(0,P.R)("0_2")},children:(0,v.jsx)(g,{img:"map",title:"home.map"})}),(0,v.jsxs)("div",{className:"duration-500 ".concat(n?"translate-y-0 opacity-100":"translate-y-[-50px] opacity-0 pointer-events-none"," ease-in-out absolute sm:top-[20px] sm:right-[25px] xl:top-[30px] xl:right-[35px] flex"),children:[(0,v.jsxs)("div",{className:"sm:mr-[15px] xl:mr-[20px] relative",onClick:function(){ke()},children:[(0,v.jsx)(g,{img:"task",title:"profile.task"}),(0,v.jsx)(Gl,{visible:G})]}),(0,v.jsxs)("div",{className:"sm:mr-[15px] xl:mr-[20px] relative",onClick:Oe,children:[(0,v.jsx)(g,{img:"box",title:"home.lottery"}),(0,v.jsx)(Gl,{visible:N>=10})]}),(0,v.jsx)("div",{onClick:function(){i(!1),W(!0),(0,P.R)("0_4")},children:(0,v.jsx)(g,{img:"person",title:"home.person"})})]}),(0,v.jsx)("div",{className:"duration-500 ".concat(n?"translate-x-0 opacity-100":"translate-x-[50px] opacity-0 pointer-events-none"," ease-in-out absolute sm:bottom-[20px] sm:right-[20px] xl:bottom-[30px] xl:right-[30px]"),children:H?(0,v.jsx)(U,{element:(0,v.jsx)("div",{children:(0,v.jsx)(g,{img:"emoji",title:"home.emoji"})})}):(0,v.jsx)(Xo,{element:(0,v.jsx)("div",{children:(0,v.jsx)(g,{img:"emoji",title:"home.emoji"})})})})]})}),(0,we.tq)()&&(0,v.jsx)("div",{id:"controller-ui"}),_&&(0,v.jsx)("div",{className:" absolute sm:top-[20px] sm:right-[20px] xl:top-[30px] xl:right-[30px]",onClick:function(){S(!1),(0,P.R)("16_1")},children:(0,v.jsx)(g,{img:"immerse",title:"home.exit_immerse"})}),(0,v.jsx)(nl,{}),(0,v.jsx)(re,{visible:xe,onCancel:function(){return be(!1)},isBulr:!1,contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] bg-[#151C21]",closeType:"arrow",title:Z.formatMessage({id:"map.title"}),children:(0,v.jsx)(tl,{close:function(){return be(!1)}})}),z&&(0,v.jsxs)("div",{className:"absolute sm:w-[200px] ignore:xl:w-[400px] h-full right-0 top-0 bg-[#7F7F7F]/[0.2] backdrop-blur-[20px] my-profile-ios ios-safe duration-500 z-[1] ".concat(Q?"translate-x-0":"translate-x-[150%]"),onTransitionEnd:function(){Q||W(!1)},children:[(0,v.jsx)(Zn,{close:function(){return $(!1)},openMyBag:function(){ie(!0),x(2)},openSetting:function(){he(!0)},openTask:ke,openExchange:function(){me(!0)},openBaoBox:Oe,openDiary:function(){le(!0)}}),(0,v.jsx)(Zt,{close:function(){$(!1),i(!0)}})]}),(0,v.jsx)(re,{visible:ne,mask:!1,closable:!0,onCancel:function(){ie(!1),i(!0),Ie(0),x(0)},title:Z.formatMessage({id:"bag.title"}),contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] !bg-black/60 ios-safe",closeType:"arrow",children:(0,v.jsx)(_i,{targetSelect:Ee})}),(0,v.jsx)(re,{visible:oe,mask:!1,closable:!0,onCancel:function(){le(!1),i(!0)},title:Z.formatMessage({id:"power.title"}),contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] bg-[rgba(0,0,0,0.6)]",closeType:"arrow",children:(0,v.jsx)(Yl,{})}),(0,v.jsx)(re,{visible:de,mask:!1,closable:!0,onCancel:Ce,closeType:"arrow",isBulr:!1,title:Z.formatMessage({id:"person.setting"}),contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] bg-[#000000]/60 backdrop-blur-[20px] ",children:(0,v.jsx)(Kn.default,{onClose:Ce})}),(0,v.jsx)(re,{visible:t,mask:!1,closable:!0,onCancel:function(){a(!1),i(!0)},isBulr:!1,closeType:"arrow",title:Z.formatMessage({id:"home.task_center"}),contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] xl:rounded-[24px] bg-[#000000]/60 backdrop-blur-[20px] ",children:(0,v.jsx)(li,{})}),(0,v.jsx)(re,{contentClassName:"sm:w-full sm:h-full xl:w-[800px] xl:h-[500px] sm:rounded-[0px] xl:rounded-[10px] !bg-[#000000]/60 ios-safe",visible:c,closable:!0,closeType:"arrow",onCancel:function(){p(!1),i(!0)},children:(0,v.jsx)(gl,{onCancel:function(){p(!1),i(!0),localStorage.removeItem("lastOpenModal")}})}),(0,v.jsx)(re,{mask:!0,maskStyle:{background:"rgba(0, 0, 0, 0.8)"},contentClassName:"sm:w-fit sm:h-fit xl:w-fit xl:h-fit sm:rounded-[10px] xl:rounded-[10px] flex justify-center items-center bg-[#7F7F7F]/20 backdrop-blur-[20px]",visible:s.show,onCancel:function(){s.type===ul.X.ERROR&&p(!1),l({show:!1,data:{},type:ul.X.DEFAULT})},children:(0,v.jsx)(ul.Z,{item:s.data,type:s.type})}),(0,v.jsx)(Ht,{}),(0,v.jsx)(Ll,{visible:Te,closeFn:function(){_e(!1)}}),(0,v.jsx)(Rl,{})]})}},20283:function(e,t,n){var i={"./main_square_bgm_1.mp3":6179,"./main_square_bgm_2.mp3":12918};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=20283},66997:function(e,t,n){var i={"./emty.png":73298,"./flash.svg":43267,"./lotteryRule_01.png":85873,"./lotteryRule_02.png":54206,"./lotteryRule_03.png":54576,"./lotteryRule_04.png":50114,"./lotteryRule_05.png":53574,"./lotteryRule_06.png":18757,"./lotteryRule_17.png":6937,"./lotteryRule_18.png":36305,"./lotteryRule_19.png":26344,"./lotteryRule_20.png":15184,"./lotteryRule_21.png":50862,"./no_prize.png":20331,"./prize-level-1.png":54691,"./prize-level-2.png":24479,"./prize-level-3.png":53052};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=66997},45377:function(e,t,n){var i={"./lotteryRule_01.png":85873,"./lotteryRule_02.png":54206,"./lotteryRule_03.png":54576,"./lotteryRule_04.png":50114,"./lotteryRule_05.png":53574,"./lotteryRule_06.png":18757,"./lotteryRule_17.png":6937,"./lotteryRule_18.png":36305,"./lotteryRule_19.png":26344,"./lotteryRule_20.png":15184,"./lotteryRule_21.png":50862};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=45377},74669:function(e,t,n){var i={"./box.png":17486,"./box_hover.png":65932,"./chat.png":30981,"./chat_hover.png":52368,"./emoji.png":2406,"./emoji_hover.png":68601,"./exit_venue.png":37343,"./home.png":77158,"./home_hover.png":1599,"./immerse.png":45318,"./immerse_hover.png":93119,"./map.png":65761,"./map_hover.png":70951,"./person.png":6331,"./person_hover.png":61969,"./shoot.png":2702,"./shoot_hover.png":21036,"./task.png":54944,"./task_hover.png":5150};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=74669},47784:function(e,t,n){var i={"./map_num_1.png":31851,"./map_num_2.png":31327,"./map_num_3.png":5485,"./map_num_4.png":51065};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=47784},14155:function(e,t,n){var i={"./map_venue_1.png":71794,"./map_venue_2.png":38244,"./map_venue_3.png":38456,"./map_venue_4.png":11430};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=14155},57027:function(e,t,n){var i={"./venue_1.png":81022,"./venue_2.png":26134,"./venue_3.png":84686,"./venue_4.png":72097,"./venue_title_1.png":43013,"./venue_title_2.png":20808,"./venue_title_3.png":92691,"./venue_title_4.png":80720};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=57027},92547:function(e,t,n){var i={"./venue_title_1.png":43013,"./venue_title_2.png":20808,"./venue_title_3.png":92691,"./venue_title_4.png":80720};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=92547},72249:function(e,t,n){var i={"./privacy_01.png":56685,"./privacy_02.png":86756,"./privacy_03.png":23772,"./privacy_04.png":90279,"./privacy_05.png":76828,"./privacy_06.png":62078};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=72249},88682:function(e,t,n){var i={"./role_skin_1.png":76308,"./role_skin_2.png":40619};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=88682},20045:function(e,t,n){var i={"./rules_01.png":74146,"./rules_02.png":83150,"./rules_03.png":78976,"./rules_04.png":66800,"./rules_05.png":70790,"./rules_06.png":10559};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=20045},43267:function(e,t,n){"use strict";e.exports=n.p+"static/flash.8d64677b.svg"},6179:function(e,t,n){"use strict";e.exports=n.p+"static/main_square_bgm_1.51386881.mp3"},12918:function(e,t,n){"use strict";e.exports=n.p+"static/main_square_bgm_2.189069b1.mp3"},16327:function(e,t,n){"use strict";e.exports=n.p+"static/venueCollision.8fbe7381.glb"},43973:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture.e8704104.glb"},18399:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture2.66a94783.glb"},72609:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.5cf1a7cd.glb"},17712:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintReplace.19abcb30.glb"},21714:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintSource.46811d19.glb"},64788:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.9aaa0244.glb"},8434:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1.0d1a9340.glb"},10325:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel1.a91ec606.glb"},99073:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel2.d738029d.glb"},89125:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel3.8e12c2dc.glb"},28294:function(e,t,n){"use strict";e.exports=n.p+"static/venueScreen.bc1ad2a0.obj"},15698:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.69cc83b7.glb"},10347:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.eabc8cd6.glb"},56267:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3.ce3e0ecb.glb"},86386:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuilding1.915218a5.glb"},37663:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuilding2.2c94dbda.glb"},38236:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBirth.fbb5aa49.glb"},17494:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall.4ade418d.glb"},70039:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall2.524f539c.glb"},69340:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall3.efa506cb.glb"},43121:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCheckpoint.6f1dbd70.glb"},73329:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCollision.1851e6f3.glb"},34878:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareDecorationBuilding.d58880e8.glb"},68624:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareGraffiti.dfb4cc9f.glb"},16428:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareGround.c8247abd.glb"},98542:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareHintReplace.49d2b7f6.glb"},57469:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareHintSource.46811d19.glb"},46044:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLight.138efc50.glb"},31761:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLight2.bf1f84c4.glb"},91942:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLight3.c27c64ff.glb"},20913:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLogo1.ad4597c2.glb"},60240:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLogo2.032ad2c9.glb"},91933:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquarePortal.42d4ba34.glb"},65166:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareScreen.5dacc8b5.obj"},70722:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareStairs.6795e249.glb"},21561:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareTrain.8fd6ae17.glb"},24929:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareTrampoline.521bdc55.glb"},93690:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareWoman.e0ba2121.glb"},60745:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareZoom.b3e086c3.glb"},58371:function(e,t,n){"use strict";e.exports=n.p+"static/man.651299e9.glb"},59903:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall.d1c23c17.glb"},17006:function(e,t,n){"use strict";e.exports=n.p+"static/venueArticle.a02c8490.glb"},32013:function(e,t,n){"use strict";e.exports=n.p+"static/venueBall.9a3aad12.glb"},96427:function(e,t,n){"use strict";e.exports=n.p+"static/venueBallemissive.517c9dd5.glb"},74172:function(e,t,n){"use strict";e.exports=n.p+"static/venueCheckpoint.f4613b9e.glb"},55406:function(e,t,n){"use strict";e.exports=n.p+"static/venueCollision.80605d4e.glb"},47989:function(e,t,n){"use strict";e.exports=n.p+"static/venueContainer.e5f7ca9a.glb"},86645:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.3c4c0af0.glb"},5785:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture.bd6fe642.glb"},55175:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.bed61956.glb"},97319:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintReplace.e6ab1710.glb"},45461:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintSource.46811d19.glb"},41218:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.97f8e553.glb"},39737:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo.b7459b91.glb"},86784:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo2.3397be94.glb"},36103:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel1.524db3f8.glb"},47952:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel2.9faccf5c.glb"},37586:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel3.87aa7537.glb"},79314:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting1.663d22a3.glb"},85224:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting2.b87f283a.glb"},89711:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting3.97fb678d.glb"},19828:function(e,t,n){"use strict";e.exports=n.p+"static/venueScreen.b503ff95.glb"},63678:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcase.4769e0a8.glb"},92352:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkown.814d35f6.glb"},17801:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.e50ed218.glb"},89514:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.bd06705d.glb"},65944:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallGraffiti.9c684502.glb"},29612:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall.d9695a32.glb"},11060:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall2.58e115ac.glb"},70191:function(e,t,n){"use strict";e.exports=n.p+"static/venueCheckpoint.77e56f1a.glb"},80948:function(e,t,n){"use strict";e.exports=n.p+"static/venueCollision.133738fa.glb"},44604:function(e,t,n){"use strict";e.exports=n.p+"static/venueDecoration.26b6431f.glb"},70660:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.9260c31f.glb"},50967:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.19f0249f.glb"},65884:function(e,t,n){"use strict";e.exports=n.p+"static/venueGlass.101818ed.glb"},5264:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintReplace.1b7597ac.glb"},98381:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintSource.46811d19.glb"},52270:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.9ef51ec3.glb"},16822:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1.37bc8320.glb"},83995:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo2.c0b10e02.glb"},36377:function(e,t,n){"use strict";e.exports=n.p+"static/venueMetal.ac59d813.glb"},75828:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel1.80b0a199.glb"},29271:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel2.ae85402e.glb"},86370:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel3.0818d2ff.glb"},64047:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel4.fcda753a.glb"},43325:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel5.70b5366d.glb"},93766:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting1.643a65d9.glb"},35565:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting2.683941a4.glb"},42556:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting3.793a1f0d.glb"},8121:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting4.aacdfe5c.glb"},81753:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcase.7073a62a.glb"},51069:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkown.bd93bbfa.glb"},3451:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.f624b101.glb"},56241:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.3177da66.glb"},63007:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3.f6f44ca0.glb"},28212:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall.39f6753c.glb"},67152:function(e,t,n){"use strict";e.exports=n.p+"static/venueArticle.3dad1e86.glb"},12714:function(e,t,n){"use strict";e.exports=n.p+"static/venueCheckpoint.65c84e54.glb"},97599:function(e,t,n){"use strict";e.exports=n.p+"static/venueCollision.7802e857.glb"},56555:function(e,t,n){"use strict";e.exports=n.p+"static/venueDecoration.b3da618c.glb"},65569:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.06efbe9e.glb"},16309:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture.d0a1fd4d.glb"},1967:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.9003dfb2.glb"},34258:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintReplace.87a0326f.glb"},96976:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintSource.46811d19.glb"},84352:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.b7f18904.glb"},50787:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1.c7f3c644.glb"},22437:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo2.6ba02732.glb"},31907:function(e,t,n){"use strict";e.exports=n.p+"static/venueMetal.942347d6.glb"},90339:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel1.e551274b.glb"},49235:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel2.f85f18d7.glb"},65996:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel3.653fc93c.glb"},70205:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel4.36832bed.glb"},25411:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel5.9fd3ebd9.glb"},65920:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture1.f33285e4.glb"},748:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture2.c4334340.glb"},59032:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture3.ecd88b29.glb"},54166:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture4.b43f2eed.glb"},53538:function(e,t,n){"use strict";e.exports=n.p+"static/venueScreen.dee904e4.glb"},55156:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcase.ab673219.glb"},40903:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkown.80d41374.glb"},12880:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.cfc72280.glb"},11915:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.deaf834d.glb"},41534:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3.43f6cd21.glb"},73772:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallGraffiti.900b1ef0.glb"},82765:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall.f3264dcb.glb"},73088:function(e,t,n){"use strict";e.exports=n.p+"static/venueCollision.00c7bb61.glb"},59435:function(e,t,n){"use strict";e.exports=n.p+"static/venueDecoration.080fded6.glb"},16118:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.4156cdd1.glb"},18018:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture1.389b86dd.glb"},43081:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture2.df42eb17.glb"},88458:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.000bd03e.glb"},91448:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor1.42d3d5bd.glb"},87029:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintReplace.a3be800c.glb"},8263:function(e,t,n){"use strict";e.exports=n.p+"static/venueHintSource.46811d19.glb"},46826:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.6cca08d6.glb"},34171:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1.f3264dcb.glb"},47271:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel1.f87ea3bc.glb"},66426:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel2.26a40829.glb"},24087:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel3.23c6bb60.glb"},86461:function(e,t,n){"use strict";e.exports=n.p+"static/venueModel4.72092510.glb"},20689:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcase.4661d448.glb"},34856:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall.cf90c6bd.glb"},39117:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallGraffiti.a46d151c.glb"},11629:function(e,t,n){"use strict";e.exports=n.p+"static/close_arrow.6dfd7a51.png"},69725:function(e,t,n){"use strict";e.exports=n.p+"static/close_small_white.31f36fe0.png"},88284:function(e,t,n){"use strict";e.exports=n.p+"static/down.306b00cf.png"},47345:function(e,t,n){"use strict";e.exports=n.p+"static/lightning_icon.e94cbfd5.png"},69686:function(e,t,n){"use strict";e.exports=n.p+"static/save.215ef15d.png"},41610:function(e,t,n){"use strict";e.exports=n.p+"static/save_hover.6a050000.png"},36384:function(e,t,n){"use strict";e.exports=n.p+"static/shoot_icon.f3148e4d.png"},39177:function(e,t,n){"use strict";e.exports=n.p+"static/emoji_next.ac903954.png"},76105:function(e,t,n){"use strict";e.exports=n.p+"static/emoji_prev.b7de0c1d.png"},65393:function(e,t,n){"use strict";e.exports=n.p+"static/phone_emoji_next.358802e4.png"},32915:function(e,t,n){"use strict";e.exports=n.p+"static/phone_emoji_prev.c93572d4.png"},6617:function(e,t,n){"use strict";e.exports=n.p+"static/ip_img_1.227818ff.png"},80669:function(e,t,n){"use strict";e.exports=n.p+"static/model0.7c0eea3e.jpg"},29747:function(e,t,n){"use strict";e.exports=n.p+"static/shadow.49c946fa.png"},44602:function(e,t,n){"use strict";e.exports=n.p+"static/view_exhibit_btn.2a51aa30.png"},32748:function(e,t,n){"use strict";e.exports=n.p+"static/loading_btn.bf253d77.png"},85873:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_01.adc406c1.png"},54206:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_02.72e66458.png"},54576:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_03.a3fa75a5.png"},50114:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_04.4d172f47.png"},53574:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_05.03a872b8.png"},18757:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_06.4b51cfb5.png"},6937:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_17.67a2ce1e.png"},36305:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_18.066cecf6.png"},26344:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_19.66d1b95a.png"},15184:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_20.ac93acf6.png"},50862:function(e,t,n){"use strict";e.exports=n.p+"static/lotteryRule_21.e1689f75.png"},54691:function(e,t,n){"use strict";e.exports=n.p+"static/prize-level-1.810a4868.png"},24479:function(e,t,n){"use strict";e.exports=n.p+"static/prize-level-2.907d6420.png"},53052:function(e,t,n){"use strict";e.exports=n.p+"static/prize-level-3.ee2c939b.png"},56287:function(e,t,n){"use strict";e.exports=n.p+"static/pc_control_guide.6779272e.png"},64613:function(e,t,n){"use strict";e.exports=n.p+"static/phone_people_control.157cfcd8.png"},17486:function(e,t,n){"use strict";e.exports=n.p+"static/box.3d078896.png"},65932:function(e,t,n){"use strict";e.exports=n.p+"static/box_hover.8f521f95.png"},30981:function(e,t,n){"use strict";e.exports=n.p+"static/chat.e21b9865.png"},52368:function(e,t,n){"use strict";e.exports=n.p+"static/chat_hover.8a352479.png"},2406:function(e,t,n){"use strict";e.exports=n.p+"static/emoji.f212efea.png"},68601:function(e,t,n){"use strict";e.exports=n.p+"static/emoji_hover.608ea741.png"},37343:function(e,t,n){"use strict";e.exports=n.p+"static/exit_venue.0c535730.png"},77158:function(e,t,n){"use strict";e.exports=n.p+"static/home.9b92bce4.png"},1599:function(e,t,n){"use strict";e.exports=n.p+"static/home_hover.5186b31c.png"},45318:function(e,t,n){"use strict";e.exports=n.p+"static/immerse.d2538e3b.png"},93119:function(e,t,n){"use strict";e.exports=n.p+"static/immerse_hover.61323a22.png"},65761:function(e,t,n){"use strict";e.exports=n.p+"static/map.f5dcc919.png"},70951:function(e,t,n){"use strict";e.exports=n.p+"static/map_hover.fd25835e.png"},6331:function(e,t,n){"use strict";e.exports=n.p+"static/person.ef0bdccb.png"},61969:function(e,t,n){"use strict";e.exports=n.p+"static/person_hover.12bdf32d.png"},2702:function(e,t,n){"use strict";e.exports=n.p+"static/shoot.f3148e4d.png"},21036:function(e,t,n){"use strict";e.exports=n.p+"static/shoot_hover.5bc4cc51.png"},54944:function(e,t,n){"use strict";e.exports=n.p+"static/task.12eded0e.png"},5150:function(e,t,n){"use strict";e.exports=n.p+"static/task_hover.4e66aa2b.png"},40735:function(e,t,n){"use strict";e.exports=n.p+"static/task_icon.1ae67eca.png"},73083:function(e,t,n){"use strict";e.exports=n.p+"static/exhibit_guide.77579dee.png"},52425:function(e,t,n){"use strict";e.exports=n.p+"static/location_icon.9ecd41f8.png"},96546:function(e,t,n){"use strict";e.exports=n.p+"static/map_flag.9ece5a37.png"},71596:function(e,t,n){"use strict";e.exports=n.p+"static/map_into.27bbae0f.png"},31851:function(e,t,n){"use strict";e.exports=n.p+"static/map_num_1.97f5349e.png"},31327:function(e,t,n){"use strict";e.exports=n.p+"static/map_num_2.78fcf7c3.png"},5485:function(e,t,n){"use strict";e.exports=n.p+"static/map_num_3.6c69d852.png"},51065:function(e,t,n){"use strict";e.exports=n.p+"static/map_num_4.cbb2881c.png"},71794:function(e,t,n){"use strict";e.exports=n.p+"static/map_venue_1.525256d2.png"},38244:function(e,t,n){"use strict";e.exports=n.p+"static/map_venue_2.99dd5c74.png"},38456:function(e,t,n){"use strict";e.exports=n.p+"static/map_venue_3.25c88a56.png"},11430:function(e,t,n){"use strict";e.exports=n.p+"static/map_venue_4.0fd823f5.png"},81022:function(e,t,n){"use strict";e.exports=n.p+"static/venue_1.bbec7c6c.png"},26134:function(e,t,n){"use strict";e.exports=n.p+"static/venue_2.dca1d2db.png"},84686:function(e,t,n){"use strict";e.exports=n.p+"static/venue_3.3bb6abfc.png"},72097:function(e,t,n){"use strict";e.exports=n.p+"static/venue_4.5aa6d34b.png"},43013:function(e,t,n){"use strict";e.exports=n.p+"static/venue_title_1.30011ab2.png"},20808:function(e,t,n){"use strict";e.exports=n.p+"static/venue_title_2.e8d35eb9.png"},92691:function(e,t,n){"use strict";e.exports=n.p+"static/venue_title_3.9499863d.png"},80720:function(e,t,n){"use strict";e.exports=n.p+"static/venue_title_4.5f31e174.png"},56685:function(e,t,n){"use strict";e.exports=n.p+"static/privacy_01.e962d96e.png"},86756:function(e,t,n){"use strict";e.exports=n.p+"static/privacy_02.6bdd79f6.png"},23772:function(e,t,n){"use strict";e.exports=n.p+"static/privacy_03.37de28b3.png"},90279:function(e,t,n){"use strict";e.exports=n.p+"static/privacy_04.114a4d91.png"},76828:function(e,t,n){"use strict";e.exports=n.p+"static/privacy_05.bcae48d9.png"},62078:function(e,t,n){"use strict";e.exports=n.p+"static/privacy_06.235fd6c7.png"},49450:function(e,t,n){"use strict";e.exports=n.p+"static/edit.8b5406b6.png"},94689:function(e,t,n){"use strict";e.exports=n.p+"static/next.b41ff3b9.png"},40872:function(e,t,n){"use strict";e.exports=n.p+"static/power_add.5675b613.png"},38749:function(e,t,n){"use strict";e.exports=n.p+"static/power_add_active.d2de95a3.png"},65839:function(e,t,n){"use strict";e.exports=n.p+"static/power_minus.c3aca960.png"},58547:function(e,t,n){"use strict";e.exports=n.p+"static/power_minus_active.1978c7fe.png"},6090:function(e,t,n){"use strict";e.exports=n.p+"static/prev.bfe60018.png"},76308:function(e,t,n){"use strict";e.exports=n.p+"static/role_skin_1.d3f2738d.png"},40619:function(e,t,n){"use strict";e.exports=n.p+"static/role_skin_2.9e203afe.png"},74146:function(e,t,n){"use strict";e.exports=n.p+"static/rules_01.448c2754.png"},83150:function(e,t,n){"use strict";e.exports=n.p+"static/rules_02.06f11a6c.png"},78976:function(e,t,n){"use strict";e.exports=n.p+"static/rules_03.2ce80875.png"},66800:function(e,t,n){"use strict";e.exports=n.p+"static/rules_04.3936842a.png"},70790:function(e,t,n){"use strict";e.exports=n.p+"static/rules_05.4450a310.png"},10559:function(e,t,n){"use strict";e.exports=n.p+"static/rules_06.af7d6e89.png"},52797:function(e,t,n){"use strict";e.exports=n.p+"static/flowmap.b80d973d.jpg"},44528:function(e,t,n){"use strict";e.exports=n.p+"static/perlinNoise.59ea5204.png"},1995:function(e,t,n){"use strict";e.exports=n.p+"static/waterdudv.599013b4.png"},69635:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture.62152274.png"},95504:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture2.b117500b.png"},97915:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.7672c908.jpg"},98072:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorLightmap1.8030919c.jpg"},29109:function(e,t,n){"use strict";e.exports=n.p+"static/venueHint.add12d10.png"},88792:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.692d58c7.jpg"},3626:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1Lightmap.3e43660c.png"},67356:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha1.6e4ff2b9.jpg"},31524:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha2.534fa130.jpg"},89297:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha3.6f3400d6.jpg"},94104:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse1.ec2950e5.png"},2342:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse2.3ab36b32.png"},89983:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse3.c9699613.png"},35994:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap1.16350eba.jpg"},19996:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap2.16350eba.jpg"},31321:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap3.16350eba.jpg"},43007:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness1.482d1318.jpg"},87570:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness2.0d0a0919.jpg"},61773:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness3.a163a27c.jpg"},63167:function(e,t,n){"use strict";e.exports=n.p+"static/venueScreen.a9f1527b.jpg"},15343:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.f87a7825.jpg"},55086:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1Lightmap.5b9d1636.jpg"},44640:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.dca52aab.jpg"},58331:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2Lightmap.d3625600.jpg"},26017:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3.45ab0b24.jpg"},76629:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3Lightmap.fd5bb3cd.jpg"},80198:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuilding1.e10b3508.jpg"},31193:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuilding1Lightmap.14104402.jpg"},74004:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuilding2.3112f984.jpg"},79904:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuilding2Lightmap.daee4ce2.jpg"},6256:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBuildingMatcap.3c0db579.jpg"},27330:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBirth.f90d6278.jpg"},61621:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBirthLightmap.0f9c0d2b.jpg"},3262:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareBirthMatcap.d520fcf8.jpg"},19151:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall2Matcap.151ebd0c.jpg"},5005:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBall3Matcap.3e089338.jpg"},30251:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallAlpha.7c1f0759.jpg"},1140:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallMatcap.f8875de1.jpg"},47280:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareDecorationBuilding.bca4c95e.jpg"},26238:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareGraffiti.ccff2fc1.jpg"},87548:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareGraffitiLightmap.be8f0826.jpg"},46562:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareGraffitiMatcap.97832c35.jpg"},11341:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareGround.3507e55e.jpg"},56401:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareHint.5547eb29.png"},89898:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLight.347f4443.jpg"},4280:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLight2.03df71ca.jpg"},84788:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLight3.d41301f6.jpg"},62017:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLogo1.6997ce9e.png"},47171:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareLogo2.438eacce.png"},71380:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareStairs.e10b3508.jpg"},74998:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareStairsLightmap.f9f3eceb.jpg"},17504:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareStairsMatcap.a7a7e321.jpg"},65026:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareTrain.c1613b86.jpg"},12008:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareTrampoline.2a212a6b.jpg"},43098:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareWomanAlphaDudv.8ac85a49.jpg"},44536:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareWomanMatcap.2f07de93.jpg"},16195:function(e,t,n){"use strict";e.exports=n.p+"static/emoji.4310b22d.png"},7152:function(e,t,n){"use strict";e.exports=n.p+"static/man1.83a4e500.png"},12916:function(e,t,n){"use strict";e.exports=n.p+"static/man2.918a0071.png"},60084:function(e,t,n){"use strict";e.exports=n.p+"static/manMatcap.a42dc635.jpg"},33405:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallAlpha.b511f20b.jpg"},67161:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallMatcap.947bd501.jpg"},74449:function(e,t,n){"use strict";e.exports=n.p+"static/venueArticleLightmap.d90f658d.jpg"},6569:function(e,t,n){"use strict";e.exports=n.p+"static/venueBallLightmap.d4f35a48.png"},67947:function(e,t,n){"use strict";e.exports=n.p+"static/venueContainerLightmap.9c5959c0.jpg"},67683:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.a970358d.png"},25473:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePictureLightmap.bbe6ff6e.png"},71093:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorLightmap.93891e74.jpg"},71822:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorSeamless.ad100edf.jpg"},1812:function(e,t,n){"use strict";e.exports=n.p+"static/venueHint.add12d10.png"},58145:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.ac866205.jpg"},61927:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo2Lightmap.e73a3a7c.jpg"},56421:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogoLightmap.ab220f34.jpg"},69444:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha1.6759b470.jpg"},7892:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha2.3d567bda.jpg"},54526:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha3.8b3abbee.jpg"},70503:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse1.1a6700fb.jpg"},13361:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse2.4fcf76dd.jpg"},24374:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse3.deeb39ad.jpg"},36175:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap1.79c438d4.jpg"},82780:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap2.cbd91258.jpg"},9069:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap3.cc94d80c.jpg"},58702:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness1.ca11060b.jpg"},49234:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness2.762e4515.jpg"},74086:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness3.fbda80e2.jpg"},66687:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting1.9c152417.jpg"},9648:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting2.18eecd06.jpg"},43958:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting3.6df2b9b7.jpg"},13570:function(e,t,n){"use strict";e.exports=n.p+"static/venueScreen.9b0f9cb2.jpg"},15023:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcaseLightmap.747695c9.jpg"},40614:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkown.cc8b9f72.jpg"},99207:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkownLightmap.c02363ed.jpg"},26055:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.7c6b851f.jpg"},94821:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1Lightmap.a5756419.jpg"},72338:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.68e4cdf1.jpg"},35090:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2Lightmap.36d35c89.jpg"},55241:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallGraffitiLightmap.d2cae65c.jpg"},42389:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallAlpha.6e276b8f.jpg"},35194:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallAlpha2.5aeea961.jpg"},31410:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallDudv.f691c320.jpg"},25665:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallDudv2.85cfcf3e.jpg"},67014:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallMatcap.76998e0a.jpg"},13908:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallMatcap2.5aeea961.jpg"},23124:function(e,t,n){"use strict";e.exports=n.p+"static/venueDecorationLightmap.2c36ce4a.jpg"},30076:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.a37ba229.jpg"},28464:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.54be1bc6.jpg"},47490:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorDudv.a37ba229.jpg"},5690:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorSeamless.05ab017c.jpg"},16227:function(e,t,n){"use strict";e.exports=n.p+"static/venueGlassAlpha.9a79079e.jpg"},48561:function(e,t,n){"use strict";e.exports=n.p+"static/venueGlassDudv.868a2f94.jpg"},13264:function(e,t,n){"use strict";e.exports=n.p+"static/venueGlassMatcap.e8ecfd67.jpg"},98553:function(e,t,n){"use strict";e.exports=n.p+"static/venueHint.add12d10.png"},55856:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.d01dc565.jpg"},10971:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1Lightmap.7a4ddcc0.png"},34404:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo2Lightmap.f036bb36.png"},12229:function(e,t,n){"use strict";e.exports=n.p+"static/venueMatcapMetal.316f5a86.png"},88128:function(e,t,n){"use strict";e.exports=n.p+"static/venueMetal.d3c2e24c.jpg"},19472:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha1.cbac1450.jpg"},15145:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha2.5813681e.jpg"},87942:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha3.3c4d774f.jpg"},50112:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha4.91ee2198.jpg"},25945:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha5.7e4323e4.jpg"},15254:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse1.bcfadf9b.jpg"},88417:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse2.d5914cb8.jpg"},566:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse3.240e5d1e.jpg"},25902:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse4.266c9921.jpg"},99390:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse5.dfa7ffba.jpg"},3578:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap1.7fd2d290.jpg"},55945:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap2.16350eba.jpg"},74258:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap3.d520fcf8.jpg"},60537:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap4.d520fcf8.jpg"},21383:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap5.a4f29514.jpg"},36965:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness1.45e589c8.jpg"},92291:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness2.39f16064.jpg"},38958:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness3.385a2592.jpg"},86411:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness4.b5e8be6b.jpg"},99135:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness5.7a6bda91.jpg"},3605:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting1.479dd339.jpg"},93808:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting2.72445517.jpg"},32593:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting3.5442d61f.jpg"},36100:function(e,t,n){"use strict";e.exports=n.p+"static/venuePainting4.35afccbe.jpg"},3539:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcase.1215d2ff.jpg"},28476:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkown.5aeea961.jpg"},53372:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkownLightmap.5aeea961.jpg"},63238:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1Lightmap.8565759d.jpg"},17186:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2Lightmap.df5855b4.jpg"},8696:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3Lightmap.2112490c.jpg"},9750:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallSeamless.05ab017c.jpg"},94014:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallAlpha.4302bcc0.jpg"},99185:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallMatcap.4adcd9f4.jpg"},77994:function(e,t,n){"use strict";e.exports=n.p+"static/venueArticleLightmap.93e3b0de.png"},99572:function(e,t,n){"use strict";e.exports=n.p+"static/venueDecorationLightmap.ea292997.png"},63611:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.34901f0f.png"},72853:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePictureLightmap.256c5f6a.png"},73125:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorLightmap1.8ced5535.jpg"},66812:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorSeamless.dc37b3ea.jpg"},96316:function(e,t,n){"use strict";e.exports=n.p+"static/venueHint.2720667c.png"},39069:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.0455df6c.jpg"},61015:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1Lightmap.e3b556df.png"},27104:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo2Lightmap.6cb8d093.jpg"},61362:function(e,t,n){"use strict";e.exports=n.p+"static/venueMatcapMetal.4b04150e.png"},27464:function(e,t,n){"use strict";e.exports=n.p+"static/venueMetalLightmap.0709f13b.png"},18761:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha1.faaf3422.jpg"},34526:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha2.55ef9211.jpg"},24864:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha3.80d96f5e.jpg"},45913:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha4.088b1197.jpg"},87083:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha5.e5dce326.jpg"},30884:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse1.62b79ba3.jpg"},96154:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse2.67d52be1.jpg"},24917:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse3.bb6b981d.jpg"},15796:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse4.11b519e8.jpg"},6447:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse5.d41bf85d.jpg"},31416:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap1.d520fcf8.jpg"},67306:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap2.16350eba.jpg"},17391:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap3.d307d339.jpg"},57284:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap4.d520fcf8.jpg"},17125:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap5.d520fcf8.jpg"},98626:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness1.9b6c81dc.jpg"},5994:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness2.8d185ec2.jpg"},99882:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness3.7caddd9a.jpg"},29607:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness4.d3548d52.jpg"},60907:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness5.f81cab55.jpg"},49007:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture1.9cd5d137.jpg"},9396:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture2.1debbf34.jpg"},89968:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture3.a3cdcffa.jpg"},87872:function(e,t,n){"use strict";e.exports=n.p+"static/venuePicture4.4b9e7e66.jpg"},25214:function(e,t,n){"use strict";e.exports=n.p+"static/venueScreen.fbe8951f.jpg"},21181:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcaseLightmap.3da52b5b.jpg"},2189:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkown.80248979.jpg"},24129:function(e,t,n){"use strict";e.exports=n.p+"static/venueUnkownLightmap.39bc8afa.jpg"},40213:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1.22cf798e.jpg"},7562:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall1Lightmap.7eb1c472.jpg"},70121:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2.d151b8e9.jpg"},20306:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall2Lightmap.2a3137a4.jpg"},33111:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3.020d2cf6.jpg"},68961:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall3Lightmap.ce636b22.jpg"},63579:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallGraffitiLightmap.22e83bfc.jpg"},43414:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallAlpha.a9cf2033.jpg"},82929:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallDudv.da3d2076.jpg"},37094:function(e,t,n){"use strict";e.exports=n.p+"static/mainSquareCenterBallMatcap.07df1643.jpg"},73343:function(e,t,n){"use strict";e.exports=n.p+"static/venueDecorationLightmap.c81aeacc.jpg"},36912:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissive.8cd952fe.png"},45777:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture1Lightmap.2515e817.png"},26499:function(e,t,n){"use strict";e.exports=n.p+"static/venueEmissivePicture2Lightmap.bdf36fce.jpg"},55752:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor.d18524fa.jpg"},34025:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloor1Lightmap.4541851e.jpg"},7093:function(e,t,n){"use strict";e.exports=n.p+"static/venueFloorLightmap.988b9047.jpg"},84062:function(e,t,n){"use strict";e.exports=n.p+"static/venueHint.add12d10.png"},72686:function(e,t,n){"use strict";e.exports=n.p+"static/venueHoloScreen.7f2c5f63.jpg"},77368:function(e,t,n){"use strict";e.exports=n.p+"static/venueLogo1Lightmap.e2dc9242.png"},98877:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha1.67be7d50.jpg"},23273:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha2.2c08042b.jpg"},68304:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha3.d5f427c9.jpg"},90318:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelAlpha4.f4e80a58.jpg"},92458:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse1.dc327525.jpg"},37076:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse2.5e599cdd.jpg"},98428:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse3.f0f7f90c.jpg"},79940:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelDiffuse4.74565c8b.jpg"},62375:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap1.80b710b6.jpg"},99233:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap2.6e590cd3.jpg"},54657:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap3.d520fcf8.jpg"},39276:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelMatcap4.80b710b6.jpg"},5483:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness1.d9de2aa0.jpg"},65407:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness2.83c5230a.jpg"},96267:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness3.a96580d6.jpg"},10030:function(e,t,n){"use strict";e.exports=n.p+"static/venueModelRoughness4.9d81dcd5.jpg"},69245:function(e,t,n){"use strict";e.exports=n.p+"static/venueShowcaseLightmap.d35d9c74.jpg"},26124:function(e,t,n){"use strict";e.exports=n.p+"static/venueWall.01e9e04d.jpg"},27927:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallGraffitiLightmap.1f541a02.jpg"},81510:function(e,t,n){"use strict";e.exports=n.p+"static/venueWallLightmap.c5ca5fc0.jpg"},81606:function(e,t,n){"use strict";e.exports=n.p+"static/sky_4K.2a47c029.jpg"}}]);